<?php

namespace App\Http\Controllers;
use Illuminate\Support\Facades\Http;
use Illuminate\Http\Request;
use App\Models\Pago;
use App\Models\Comprobante;
use DB;

class PagoController extends Controller
{

    public function getPagos(){
        $data = Comprobante::all();
        return $data;
    }


    public function pagosSimulacro( Request $request){

        $data = $request->pagos;

        foreach ($data as $item) {
            // $response = Http::post("https://service2.unap.edu.pe/PAYMENTS_MNG/v1/setStatus/".$item['id']."/", []);

            // if ($response->successful()) {
                if($item['total'] == 10.00){
                    $pago =  Pago::create([
                        'codigo' => $item['id'],
                        'authorizationCode' => $item['autorizationCode'],
                        'fullname' => $item['fullname'],
                        'dni' => $request->dni,
                        'cardOwner' => $item['cardOwner'],
                        'email' => $item['email'],
                        'description' => $item['description'],
                        'totalForProvider' => $item['totalForProvider'],
                        'total' => $item['total'],
                        'originalDate' => $item['originalDate'],
                        'confirmedDate' => $item['confirmedDate'],
                        'type' => $item['type'],
                        'medium' => $item['medium'],
                        'status' => 1,
                    ]);

                }
                $this->response['id_pago'] = $pago->id;
                $this->response['estado'] = true;
                return response()->json($this->response, 200);
            // } else {
            //     return response()->json(['error' => 'La solicitud POST no fue exitosa. Código de estado: ' . $response->status()], $response->status());
            // }
        
        }

    }

    public function pagoSimulacro($dni) {
        $pago = Pago::where('dni', $dni)
            ->where('total', 10)
            ->where('status', 1)
            ->first();
    
        if ($pago) {
            $this->response['id_pago'] = $pago->id;
            $this->response['mensaje'] = 'Pagó 10 soles';
            $this->response['estado'] = true;
        } else {
            $this->response['mensaje'] = 'No pagó aún';
            $this->response['estado'] = false;
        }
    
        return response()->json($this->response, 200);
    }

    public function getPagosSimulacro(Request $request){
        $columnas = [
            'fullname as nombre',
            'dni as nro_doc',
            'description AS concepto',
            'confirmedDate as fec_confirmacion', 
            'authorizationCode as cod_autorizacion', 
            'total',
            DB::raw('(totalForProvider - total) AS comision'),
            'type',
            DB::raw('if(id_inscripcion IS NOT NULL, 1, 0 ) AS estado'),
            'id_inscripcion',
            'email'
        ];
        $res = Pago::select($columnas)
        ->where(function ($query) use ($request) {
            return $query
                ->orWhere('dni', 'LIKE', '%' . $request->term . '%')
                ->orWhere('fullname', 'LIKE', '%' . $request->term . '%');
        })
        //->paginate(10);
        ->paginate($request->paginashoja);
    
        $this->response['estado'] = true;
        $this->response['datos'] = $res;
        return response()->json($this->response, 200);

    }





    public function getPagosCaja() {

        $dnis = [
            '70383663','75226884','72073941','71128547','75914908','72280659','72629838','75721651','71953453','73694286','77342163','73380972','74231384','77475417','60764810','74808769','75876298','74705217','60765516','76921939','73416839','60780762','75403752','75667292','73429026','73419184','76286074','76773203','76882340','73466541','70155885','71863971','77048236','75516058','60611282','71503759','75277096','76130366','72577356','60065456','77378227','73084173','73746429','70526255','71660335','78011443','71495557','73477175','73950726','60069431','73230777','76065952','73263230','75314537','60765469','73384211','72088901','75454376','74821309','75218917','74348211','73687670','76762668','72005064','46128756','75259894','73104636','73822188','60065955','74176462','76054720','75828193','75953689','75085280','78113684','73249172','71804210','76285930','71719618','60069401','75876849','73776016','73592657','75333485','75140365','71840643','75782519','71824428','74614371','76016838','75153108','71378935','73952920','72326190','75942173','72083867','72396725','75746467','46757834','70170642','74215941','73299189','73650852','73652938','73744859','73653888','73822214','72837168','75782855','73867763','77337305','71948795','75617176','72425416','77141145','74963590','73820271','72810288','75585627','75795878','72881366','70184064','73450799','76782726','75602621','60458340','60758806','60732603','75849887','73705980','72073814','70864459','76929740','73771695','75803551','71267211','71075346','76051115','73643547','73814210','76665052','72197688','74536762','60067763','74176461','77683290','76232597','77539828','60417619','75464519','75509741','75329793','72859114','76586002','76057432','75873218','75402649','73199080','74220719','60758916','77219181','73988082','73820082','73738896','74174917','74884817','72298718','73813443','73636236','73449571','71558152','76168222','77485160','71953243','76325919','60417184','74421821','75473876','76400318','73608942','75998718','76586613','71417551','70446492','76197285','71525398','73102255','75764826','76582040','72153046','71736139','77044119','75803962','74939984','73643729','76039542','74629379','71840618','75386760','73003384','60065459','77535809','72226330','74059199','76201714','71506971','75061831','75092627','60732618','73822931','73742613','72418428','75605988','71348787','73645905','74439331','74949212','75270874','74153292','75007479','77239962','77128154','76180975','76550586','70002534','75348934','74046576','76770708','76332406','76372032','74449729','60376236','75008261','77202173','76481845','74966349','76929834','73643805','60729280','74838333','61766073','74056909','76745690','76869493','74633898','75566930','76905866','71995651','74176548','74956220','74458818','60442977','75484665','73638484','72367480','74575066','74406541','70756153','73820207','75016032','60175050','78289140','77500780','76039760','71921582','71851496','77380930','73759686','74028918','60066302','75115329','72912965','73254600','73528250','71508606','76796386','74409551','76090629','73057725','77019689','73952944','47801176','76737345','73583294','73646163','75202143','76860476','73445140','74147583','77080971','73763841','73652923','76827210','60068003','71520679','76608616','60178752','76953778','70894045','75444644','73712253','75141964','74375912','73415616','73856680','77479692','74161080','76907613','73360156','75256945','74543134','76657875','71864503','77096633','73775939','72688433','75277099','75761364','70932868','74697285','77803871','75837807','73091433','73107569','62681089','72643106','75082332','71475095','74092902','75619652','76940064','71923672','75574123','60850511','75163968','71666290','74161346','72837315','73948768','73586351','75101363','76086915','60065733','73818332','73951314','73638460','61205137','75471566','73588960','74497622','73619563','74701106','76070517','74238458','75842577','71576906','76574727','78202137','76169384','75338262','73951127','60837283','73538342','60174754','76869586','77068515','72077453','75884845','76465795','76283689','75140274','75449604','60067481','47133792','75886182','73361703','74701939','74038382','76186838','74292183','71508473','72948250','71478850','60268790','74357621','73417293','72554233','75282840','74841008','75474832','75783621','75001919','74888303','77822248','71621867','73331009','73888125','73475954','62112093','77339343','72180000','77246024','75981169','73380067','71525267','75879368','74230040','72077282','73450802','76419084','75774764','60064004','70497236','76871336','74365317','73778024','75833383','73640884','75433311','75936295','76006921','75921149','73513832','75672430','71121773','73517214','46650289','73331014','76008774','74070140','74809169','76357839','75386575','75338246','75735816','74046752','71864664','70452983','76349720','75691517','72113287','74575640','60471046','72399152','76319120','71348885','76864946','73818304','79543643','74357521','70821500','71844128','71349065','45687842','73266758','76694748','73523004','72703340','74373579','74152602','62733440','76750841','75503372','71958712','73272382','60066151','77695837','73646958','70143983','73771595','74599862','73818627','72577351','73822932','75938006','73236172','71550584','74880196','73517253','71759553','74225311','75576450','72496538','73993182','74761918','72519521','77068632','76699919','77694736','74144097','75008410','60839575','73313467','60758838','74727976','72735914','76576593','77083792','74598902','73890187','70036500','73652127','74958840','72880192','75384444','75580218','61566948','70037248','77153108','75486192','75248740','71391508','74349265','70413794','78199019','60758675','71465216','74600244','76841316','75551412','72002994','71477957','77022006','72040007','72395262','75791152','76841723','78197889','74860075','73778073','76008282','75895532','73182895','72608995','70497241','75593904','73298969','73443441','73315999','75200860','73744145','73250919','75437647','60758885','60758775','74355204','75850976','72545339','73445577','73647479','75670736','73472097','73342790','60732641','71459851','73983182','71926393','75936117','74807739','76260088','60456206','71865668','73303859','74705099','63074781','62133731','71563831','70362826','73584026','74244209','73646795','75697385','72865333','77067552','74161101','75480742','77243029','75397455','73776039','77204148','71431760','72039554','72535523','71849166','71923732','76929859','73097185','74705079','75523240','77675063','73537583','76098003','72073773','75498988','71598409','76331677','76932517','76765203','76137576','73810246','60199855','78970071','77013951','74420466','76008608','76796723','74762105','70913214','75847012','75547217','74358504','76223535','74599843','71533452','71548212','72088918','71348760','77492549','73634400','75412928','76830202','75097209','74888930','75878692','74157616','74939222','76944525','73801587','75196392','74984045','75396853','76194895','73714245','71349059','71531842','75832635','74598956','71849276','73361369','75583680','77430874','76507292','75135653','60066068','76970124','73390312','75475218','73537402','60759126','73636020','77216797','76285997','75125686','75359140','75386564','75536831','73355897','76735404','74658152','75936542','73706007','74838303','73701043','73258648','70830758','75997087','60759085','74407816','76269385','77022008','76007853','74497221','76688543','73820029','71863962','62791325','76749912','75393035','71104032','76544219','60065334','71437736','73649252','75982956','71840635','71721781','73819890','74153014','74601108','73821238','77021999','77029020','75078635','76544040','75342041','74868781','77576582','76731774','74063977','75982190','77481609','71440175','60065710','73762342','74348127','74880115','72190127','75564067','71920497','73572872','61650353','75895585','74314877','72678848','71864553','74238344','75894458','74776111','74600991','74378439','73773291','71921591','75950273','74467077','77378453','72950673','75022423','75342043','77415078','74083911','76235604','70541925','73643170','60759042','74166202','71497218','75865990','74349216','75518434','70513752','73523120','60765494','76930331','75876272','73742723','73944362','73743028','74560965','74780723','74232501','73345548','75601223','76069262','74059700','60765404','73361341','74659066','71736156','73820781','73773406','71864621','74575675','71494687','73613295','73773405','74178499','71522252','74230246','74427488','71709592','70062596','71824492','71254241','76180965','74238390','71267119','72048910','74570035','70217398','74064519','73818937','72230446','75348479','77077893','75022899','60758991','74373422','74280343','73635611','74761101','74031725','73810818','60170751','60170503','74770061','60732879','71693203','71864548','76249188','74440305','73024107','75944844','73525137','77694131','72554211','70866915','73822211','60422568','73762492','77052051','75396387','73508647','74808430','70211802','71348895','75712501','77915953','76009176','61671859','73311208','76400342','76618120','75814573','73581946','74603282','71538849','74868789','63428050','74365011','76650573','77330468','76954486','75314950','75238046','73486201','73744330','71926413','76069256','71348556','76046357','71778128','77685833','74538712','74757654','71636137','73647324','60732884','74348496','76546319','75489482','71531619','75783786','76984445','75918029','70570624','73304128','76064139','73643693','76086323','75493217','77567195','60490291','76929841','72161634','75721671','73273710','73444486','73759045','73382309','74536757','73648215','71048287','75473883','76081371','73818904','75691493','78205442','60758662','75523051','75342418','73541195','71972082','71958444','72093159','74382511','70921314','73121989','74497987','75933247','75208866','77047559','76033008','76196903','76292358','71720754','75876247','75094653','74142872','71807502','73517251','76737640','76128257','76928506','60765105','76735193','74820983','76941636',

            '74415024','75097199','77021934','60066509','76053662','75765035','75580812','60758956','71754857','75783340','73312129','72372835','72723190','90161996','76967573','75238916','71958445','76248425','75867315','74178835','73384395','75396002','75894515','75395614','75676959','72883328','72891065','73264832','73773951','75555292','76769801','74735572','71893207','71743399','73651602','74351460','75950344','74348920','73515303','60418422','74201122','75203567','75961153','70876820','74432389','75475225','60178606','74154654','74057067','60068517','60417386','74642872','73649888','73452979','71348530','77017062','73204388','75327913','77671614','75621310','75848603','70989383','77354491','77695239','75464329','71520103','77028106','76197290','71550579','70808203','75413261','76357848','73643127','77922100','73642803','74349864','73951118','74947738','71936374','71505806','75327904','75022601','77432517','76840082','77130068','71466425','77017071','76766749','71859917','73643338','71460735','72577358','76372864','74055064','73770748','73636336','75503133','75706556','75208867','76849034','73817112','62177220','71348568','73743171','74634021','71873302','72753770','74076789','73695562','73501710','76803638','76903775','73273953','71461232','76471843','80938402','71994871','73209247','71824482','73590791','72471519','62718722','73813395','75139347','73747953','73380968','76047454','73142531','60067905','71953234','77224322','60758637','73773355','60068082','76536086','76428458','73248616','71265667','73744259','76543689','73770245','74961204','75721664','75342058','73638668','76005228','74179056','74043986','70830364','73456661','76432622','77041496','75348564','76874757','61205329','70080948','76352375','76010386','74761896','73890517','74470503','73653196','71503187','75402645','74351245','76647594','72083860','73525168','75796275','61205186','72234896','75571717','74879013','73355114','72306213','76173134','73708439','73711063','74462048','75509852','73819776','71439224','63321650','77660379','61778516','74964223','76042992','73252525','77475249','72943615','77323969','76877675','77490070','75329569','77565505','73769123','76903824','76019692','73744949','48491106','76921513','73822905','74599832','60180230','74949206','75403928','75894083','71449935','73316002','71661681','75953808','74939936','76230016','75388349','75258132','73611552','60422498','71526827','73377999','60837166','76281448','71931687','71122838','76815053','75699812','73648914','62234109','77434674','74836306','74838304','73822821','74245213','75386000','76142520','60170650','71561540','75090610','74802320','73890120','76465773','74227871','74162805','60176400','61605882','73604529','73256964','76827430','76796388','76135000','73304569','62130408','75580258','60176717','75676871','73989199','78110727','76920617','73311587','72437700','73810841','60418498','76962765','71700946','74154280','60170630','73298990','74245195','72279055','71724464','61617805','73740457','72205991','62107853','74245201','70689420','73599928','73224673','72781332','74305158','77674757','73744165','73311230','74581232','73311206','74373597','74474394','73111598','74686489','73701436','73747931','73713283','73425461','76830390','76969898','74249480','73999040','72656101','71965337','74058198','70350457','77157761','73315978','73763862','76513452','75209171','75165974','75894556','76988822','73767920','73750747','72269744','77681320','74290767','71933591','73818234','71995654','73384271','73525483','73714335','75925182','74878739','75979657','74777402','60850563','60174551','74371026','73819326','73182890','75338244','75348943','76006906','71991450','77679983','73890716','71847456','70155898','74349129','73311238','77131361','73818318','75827426','75509815','77043666','75981179','73181464','75386674','73643830','74802368','75918194','73760079','72269757','71130364','71945301','74773858','72763940','74599785','75475509','74705224','61204979','71995629','75709284','74227448','73707909','75282275','60732635','60765189','75931702','76969903','72315471','74155962','62108470','73647235','60732654','75782859','73636328','62250781','73495834','71958360','76641559','72925953','73386752','75503416','75520795','71958703','73525713','71721265','71721242','74430792','74939993','72727694','74084982','77084671','70201068','77043969','70080960','75543730','73624590','62363884','73609911','70859276','74298578','75506458','75833059','72228972','76932512','73653953','72735152','75409423','75902909','73810050','73968835','76301204','75844018','70543542','77172828','76699422','76193478','70831920','71754859','77152991','70184739','71525375','75930038','76623029','74241624','73444973','71565377','75272939','74624426','73740435','75545908','75165821','74843592','60069675','70970515','72950388','73812862','73993770','76868375','76919008','73315252','77275457','71497217','73866425','75050040','75437749','73896238','77179693','74164343','72081090','74178726','74536674','73764119','72495961','77277945','74560909','72544419','74309339','72495322','77067081','75532478','72392807','75195757','62204167','73380070','76126179','73313367','70055225','74618809','74700585','73596675','74633244','72966732','60422514','75348689','60786248','75521967','71348706','71452971','77706313','74525917','73857524','73265221','74079635','76553337','76268540','75218912','71040205','75764824','77035954','70415938','75949464','60417195','75711803','76949034','70865824','71262193','71550583','73055881','60758990','77339342','73854962','74043604','76443216','71531556','74994154','71923690','74154576','77351521','75412934','75709306','75958665','75795250','75924496','77350487','60443095','74246213','74780523','75388079','75926734','74175677','76910237','74080541','74639897','73774010','76400251','76858523','75150274','77044422','74412669','73636286','76829125','73735438','73821402','74700995','75412925','75348644','76871931','73378173','71547572','73760156','71107742','77330415','77347408','71267137','73818481','75953703','73820048','73475935','75670664','73857525','76079619','76918228','76228589','71522232','75686074','76173121','74209843','75702448','72393209','75529384','73519868','76639322','74634105','72792210','61709475','73895249','72907206','73581930','76659493','76866831','76362417','73907704','73812819','72639207','74255640','71792375','73776022','60417120','73746547','74660670','74055945','76903825','45835159','74348240','71936350','73382322','76971120','75047769','73713253','71090212','71522826','73965096','73445524','74469666','71348912','73447941','75581616','72177375','73855802','74143979','73312123','72368927','71644737','77238883','75084847','75340624','75886599','74034602','71267213','75721673','73810209','76338256','73453595','62718804','77100582','71837723','74836248','73941219','70501279','73319640','78286976','75497936','74580474','72073904','73810914','76021402','74045297','60417077','71660389','76325375','60764986','60068006','73807866','73895300','71697364','76344160','72487716','73309889','71000089','75735812','73908189','75944981','73648242','76909568','71979589','77246815','73773883','73993151','75395842','73517272','75938834','73933948','75837803','76946040','71627766','73252438','74881471','74854072','72086307','70184744','75701675','62301205','75503275','72760651','71348379','74081848','77700366','75362957','61802836','71871919','71044808','74430785','76232977','76039747','76770643','75814219','73430361','73254620','73428189','74951172','73581633','74285128','77481592','77086509','74407996','76799227','77215631','71689827','71522577','76944739','76357923','73579136','73874929','74055403','73512635','70821450','45486860','73638546','75924488','77691160','75395748','74279975','77161279','71947802','72093170','77336484','60182252','75233573','73638497','75873201','72572574','71016567','70668683','74249180','60170908','73818430','73653969','73277903','77667615','74354256','73745236','73313386','75314292','76468957','74043007','74440565','71621865','73765619','70090924','73522906','73385765','60068507','72245860','73071589','76009172','71608448','74766234','71499733','70547400','77059559','71388806','76086337','73743041','75403915','73303351','74878715','76010536','72681465','75521468','73607951','76955060','74164269','76690057','78203044','74808429','71503734','73536908','77425314','73353751','75854643','72171522','72039974','74290754','75208812','73544969','76217044','71697360','72225806','72554205','71783843','76851700','71374909','74227219','73582150','72047620','75567112','75532506','72851353','73313344','60536151','75374341','76735420','71882093','75253303','73605281','74466081','76944671','71928114','71655059','72326673','73522722','73379881','71970878','73820233','75937218','75609722','72874586','74152600','76792534','76944244','74207868','75928872','75746215','74214615','71572494','73384201','76294397','62985973','75654450','76241377','75925312','74749215','75787011','75348312','73535172','72298813','75929956','74228685','70811723','71792356','77131081','76519882','75998725','78203365','76561573','74426380','60196738','71348987','60233569','75676423','73759622','73643707','74887080','71033940','73525210','76771354','71958707','60386102','73810924','75313746','60181255','75518575','73449552','73382305','73522925','75861042','74725077','71982282','73636178','76656962','76338088','70412503','71478256','75601380','71948898','77094493','73819052','71991810','73429007','77128630','72640765','77077714','74358500','77289004','75082259','73808987','75881259','76606535','73078967','74415117','75379199','75867280','72107812','74762107','60066407','76972826','76869589','60199877','70279898','74172335','73044162','75096969','60983027','74685393','76536994','63064868','77503611','74759871','75115284','75735830','73092811','76860766','75517851','73651566','75342409','76701138','75506230','73392461','76762347','74277638','71778991','77351870','70941471','75697512','72073935','78885779',
            
            '73645441','70848024','76186573','74633604','62152759','73277923','74602269','73523772','76683179','73706004','77709492','76871921','74725079','71604817','74290608','75565001','77219176','75609481','74808076','73209343','74705689','60069008','76611561','75984185','71923445','61205161','76984443','75506464','75832613','75815031','70316723','70657793','60417670','60259311','76965655','73425458','77923247','75865585','60442960','73478727','75389459','76660303','73480637','72752975','72737895','71754271','45318739','75475224','77130148','74724088','72672434','72812319','71923702','73701147','74761931','77476518','78549323','73261233','60759021','75814565','75950385','75921329','74948418','60909401','75151787','77379747','74568016','75780469','74412659','76692263','74203419','60758962','60066857','71945084','77698483','71348435','75609202','74660885','73773718','75820301','72496991','77803739','74152629','75714420','72175055','75701685','60764933','46039585','74491105','73806257','71461199','70830333','71226421','74695100','73647491','77439557','75994466','60759105','72895381','71348617','74449898','71867827','73753027','75721669','73821246','71948958','76814589','75965470','71864655','60771309','73214537','76125959','74298567','75944329','60170554','74526130','76737843','73968933','60764923','71349042','73825334','77660883','74405369','73219638','76923760','71634622','70446013','71500890','73197232','73392453','75691536','73392460','75815618','60596820','73768725','60732829','60422487','74214723','75509809','75473879','78884987','75402750','73266609','60850553','77096440','71025450','71005617','73528468','73817521','73651601','74812025','60765111','72884471','73762505','74984380','73059174','61538627','73746654','77136641','72175040','48308088','74178712','75482849','77023928','73821045','75466128','74165209','70239991','60758577','74583524','77171810','74769319','73590963','73868684','73445261','73233663','74854261','77079662','77132570'
        ];

        // $dnis = ['60758580'];

        $dni = null;

        // $dnis = ['71822317'];
        foreach($dnis as $dni) {

            $response = Http::get('http://unap.scielodigital.net.pe/caja/pago_admision/server/CHECK_PAYMENT/?w=' . $dni);

                if ($response->successful()) {
                    // Obtener los datos JSON de la respuesta
                    $data = $response->json();
                    // Verificar si los datos son un array
                    if (is_array($data)) {
                        foreach ($data['data'] as $item) {
                                // if ($item['descr'] !== null && ($item['descr'] === '00000026' || $item['descr'] === '00000039')) {
                                    Comprobante::create([
                                        'ndoc_postulante' => $dni,
                                        'codigo' => '00000026',
                                        'nro_operacion' => $item['paymentTitle'],
                                        'monto' => $item['paymentAmount'],
                                        'fecha' => substr($item['paymentDatetime'], 0 ,10),
                                        'temp_fecha' => substr($item['paymentDatetime'], 0 ,10)
                                    ]);
                                // }


                        }
                    }

            }

        }

    }





    // public function getPagosCaja() {

    //     $dnis = [
    //         '70383663','75226884','72073941','71128547','75914908','72280659','72629838','75721651','71953453','73694286','77342163','73380972','74231384','77475417','60764810','74808769','75876298','74705217','60765516','76921939','73416839','60780762','75403752','75667292','73429026','73419184','76286074','76773203','76882340','73466541','70155885','71863971','77048236','75516058','60611282','71503759','75277096','76130366','72577356','60065456','77378227','73084173','73746429','70526255','71660335','78011443','71495557','73477175','73950726','60069431','73230777','76065952','73263230','75314537','60765469','73384211','72088901','75454376','74821309','75218917','74348211','73687670','76762668','72005064','46128756','75259894','73104636','73822188','60065955','74176462','76054720','75828193','75953689','75085280','78113684','73249172','71804210','76285930','71719618','60069401','75876849','73776016','73592657','75333485','75140365','71840643','75782519','71824428','74614371','76016838','75153108','71378935','73952920','72326190','75942173','72083867','72396725','75746467','46757834','70170642','74215941','73299189','73650852','73652938','73744859','73653888','73822214','72837168','75782855','73867763','77337305','71948795','75617176','72425416','77141145','74963590','73820271','72810288','75585627','75795878','72881366','70184064','73450799','76782726','75602621','60458340','60758806','60732603','75849887','73705980','72073814','70864459','76929740','73771695','75803551','71267211','71075346','76051115','73643547','73814210','76665052','72197688','74536762','60067763','74176461','77683290','76232597','77539828','60417619','75464519','75509741','75329793','72859114','76586002','76057432','75873218','75402649','73199080','74220719','60758916','77219181','73988082','73820082','73738896','74174917','74884817','72298718','73813443','73636236','73449571','71558152','76168222','77485160','71953243','76325919','60417184','74421821','75473876','76400318','73608942','75998718','76586613','71417551','70446492','76197285','71525398','73102255','75764826','76582040','72153046','71736139','77044119','75803962','74939984','73643729','76039542','74629379','71840618','75386760','73003384','60065459','77535809','72226330','74059199','76201714','71506971','75061831','75092627','60732618','73822931','73742613','72418428','75605988','71348787','73645905','74439331','74949212','75270874','74153292','75007479','77239962','77128154','76180975','76550586','70002534','75348934','74046576','76770708','76332406','76372032','74449729','60376236','75008261','77202173','76481845','74966349','76929834','73643805','60729280','74838333','61766073','74056909','76745690','76869493','74633898','75566930','76905866','71995651','74176548','74956220','74458818','60442977','75484665','73638484','72367480','74575066','74406541','70756153','73820207','75016032','60175050','78289140','77500780','76039760','71921582','71851496','77380930','73759686','74028918','60066302','75115329','72912965','73254600','73528250','71508606','76796386','74409551','76090629','73057725','77019689','73952944','47801176','76737345','73583294','73646163','75202143','76860476','73445140','74147583','77080971','73763841','73652923','76827210','60068003','71520679','76608616','60178752','76953778','70894045','75444644','73712253','75141964','74375912','73415616','73856680','77479692','74161080','76907613','73360156','75256945','74543134','76657875','71864503','77096633','73775939','72688433','75277099','75761364','70932868','74697285','77803871','75837807','73091433','73107569','62681089','72643106','75082332','71475095','74092902','75619652','76940064','71923672','75574123','60850511','75163968','71666290','74161346','72837315','73948768','73586351','75101363','76086915','60065733','73818332','73951314','73638460','61205137','75471566','73588960','74497622','73619563','74701106','76070517','74238458','75842577','71576906','76574727','78202137','76169384','75338262','73951127','60837283','73538342','60174754','76869586','77068515','72077453','75884845','76465795','76283689','75140274','75449604','60067481','47133792','75886182','73361703','74701939','74038382','76186838','74292183','71508473','72948250','71478850','60268790','74357621','73417293','72554233','75282840','74841008','75474832','75783621','75001919','74888303','77822248','71621867','73331009','73888125','73475954','62112093','77339343','72180000','77246024','75981169','73380067','71525267','75879368','74230040','72077282','73450802','76419084','75774764','60064004','70497236','76871336','74365317','73778024','75833383','73640884','75433311','75936295','76006921','75921149','73513832','75672430','71121773','73517214','46650289','73331014','76008774','74070140','74809169','76357839','75386575','75338246','75735816','74046752','71864664','70452983','76349720','75691517','72113287','74575640','60471046','72399152','76319120','71348885','76864946','73818304','79543643','74357521','70821500','71844128','71349065','45687842','73266758','76694748','73523004','72703340','74373579','74152602','62733440','76750841','75503372','71958712','73272382','60066151','77695837','73646958','70143983','73771595','74599862','73818627','72577351','73822932','75938006','73236172','71550584','74880196','73517253','71759553','74225311','75576450','72496538','73993182','74761918','72519521','77068632','76699919','77694736','74144097','75008410','60839575','73313467','60758838','74727976','72735914','76576593','77083792','74598902','73890187','70036500','73652127','74958840','72880192','75384444','75580218','61566948','70037248','77153108','75486192','75248740','71391508','74349265','70413794','78199019','60758675','71465216','74600244','76841316','75551412','72002994','71477957','77022006','72040007','72395262','75791152','76841723','78197889','74860075','73778073','76008282','75895532','73182895','72608995','70497241','75593904','73298969','73443441','73315999','75200860','73744145','73250919','75437647','60758885','60758775','74355204','75850976','72545339','73445577','73647479','75670736','73472097','73342790','60732641','71459851','73983182','71926393','75936117','74807739','76260088','60456206','71865668','73303859','74705099','63074781','62133731','71563831','70362826','73584026','74244209','73646795','75697385','72865333','77067552','74161101','75480742','77243029','75397455','73776039','77204148','71431760','72039554','72535523','71849166','71923732','76929859','73097185','74705079','75523240','77675063','73537583','76098003','72073773','75498988','71598409','76331677','76932517','76765203','76137576','73810246','60199855','78970071','77013951','74420466','76008608','76796723','74762105','70913214','75847012','75547217','74358504','76223535','74599843','71533452','71548212','72088918','71348760','77492549','73634400','75412928','76830202','75097209','74888930','75878692','74157616','74939222','76944525','73801587','75196392','74984045','75396853','76194895','73714245','71349059','71531842','75832635','74598956','71849276','73361369','75583680','77430874','76507292','75135653','60066068','76970124','73390312','75475218','73537402','60759126','73636020','77216797','76285997','75125686','75359140','75386564','75536831','73355897','76735404','74658152','75936542','73706007','74838303','73701043','73258648','70830758','75997087','60759085','74407816','76269385','77022008','76007853','74497221','76688543','73820029','71863962','62791325','76749912','75393035','71104032','76544219','60065334','71437736','73649252','75982956','71840635','71721781','73819890','74153014','74601108','73821238','77021999','77029020','75078635','76544040','75342041','74868781','77576582','76731774','74063977','75982190','77481609','71440175','60065710','73762342','74348127','74880115','72190127','75564067','71920497','73572872','61650353','75895585','74314877','72678848','71864553','74238344','75894458','74776111','74600991','74378439','73773291','71921591','75950273','74467077','77378453','72950673','75022423','75342043','77415078','74083911','76235604','70541925','73643170','60759042','74166202','71497218','75865990','74349216','75518434','70513752','73523120','60765494','76930331','75876272','73742723','73944362','73743028','74560965','74780723','74232501','73345548','75601223','76069262','74059700','60765404','73361341','74659066','71736156','73820781','73773406','71864621','74575675','71494687','73613295','73773405','74178499','71522252','74230246','74427488','71709592','70062596','71824492','71254241','76180965','74238390','71267119','72048910','74570035','70217398','74064519','73818937','72230446','75348479','77077893','75022899','60758991','74373422','74280343','73635611','74761101','74031725','73810818','60170751','60170503','74770061','60732879','71693203','71864548','76249188','74440305','73024107','75944844','73525137','77694131','72554211','70866915','73822211','60422568','73762492','77052051','75396387','73508647','74808430','70211802','71348895','75712501','77915953','76009176','61671859','73311208','76400342','76618120','75814573','73581946','74603282','71538849','74868789','63428050','74365011','76650573','77330468','76954486','75314950','75238046','73486201','73744330','71926413','76069256','71348556','76046357','71778128','77685833','74538712','74757654','71636137','73647324','60732884','74348496','76546319','75489482','71531619','75783786','76984445','75918029','70570624','73304128','76064139','73643693','76086323','75493217','77567195','60490291','76929841','72161634','75721671','73273710','73444486','73759045','73382309','74536757','73648215','71048287','75473883','76081371','73818904','75691493','78205442','60758662','75523051','75342418','73541195','71972082','71958444','72093159','74382511','70921314','73121989','74497987','75933247','75208866','77047559','76033008','76196903','76292358','71720754','75876247','75094653','74142872','71807502','73517251','76737640','76128257','76928506','60765105','76735193','74820983','76941636',

    //         '74415024','75097199','77021934','60066509','76053662','75765035','75580812','60758956','71754857','75783340','73312129','72372835','72723190','90161996','76967573','75238916','71958445','76248425','75867315','74178835','73384395','75396002','75894515','75395614','75676959','72883328','72891065','73264832','73773951','75555292','76769801','74735572','71893207','71743399','73651602','74351460','75950344','74348920','73515303','60418422','74201122','75203567','75961153','70876820','74432389','75475225','60178606','74154654','74057067','60068517','60417386','74642872','73649888','73452979','71348530','77017062','73204388','75327913','77671614','75621310','75848603','70989383','77354491','77695239','75464329','71520103','77028106','76197290','71550579','70808203','75413261','76357848','73643127','77922100','73642803','74349864','73951118','74947738','71936374','71505806','75327904','75022601','77432517','76840082','77130068','71466425','77017071','76766749','71859917','73643338','71460735','72577358','76372864','74055064','73770748','73636336','75503133','75706556','75208867','76849034','73817112','62177220','71348568','73743171','74634021','71873302','72753770','74076789','73695562','73501710','76803638','76903775','73273953','71461232','76471843','80938402','71994871','73209247','71824482','73590791','72471519','62718722','73813395','75139347','73747953','73380968','76047454','73142531','60067905','71953234','77224322','60758637','73773355','60068082','76536086','76428458','73248616','71265667','73744259','76543689','73770245','74961204','75721664','75342058','73638668','76005228','74179056','74043986','70830364','73456661','76432622','77041496','75348564','76874757','61205329','70080948','76352375','76010386','74761896','73890517','74470503','73653196','71503187','75402645','74351245','76647594','72083860','73525168','75796275','61205186','72234896','75571717','74879013','73355114','72306213','76173134','73708439','73711063','74462048','75509852','73819776','71439224','63321650','77660379','61778516','74964223','76042992','73252525','77475249','72943615','77323969','76877675','77490070','75329569','77565505','73769123','76903824','76019692','73744949','48491106','76921513','73822905','74599832','60180230','74949206','75403928','75894083','71449935','73316002','71661681','75953808','74939936','76230016','75388349','75258132','73611552','60422498','71526827','73377999','60837166','76281448','71931687','71122838','76815053','75699812','73648914','62234109','77434674','74836306','74838304','73822821','74245213','75386000','76142520','60170650','71561540','75090610','74802320','73890120','76465773','74227871','74162805','60176400','61605882','73604529','73256964','76827430','76796388','76135000','73304569','62130408','75580258','60176717','75676871','73989199','78110727','76920617','73311587','72437700','73810841','60418498','76962765','71700946','74154280','60170630','73298990','74245195','72279055','71724464','61617805','73740457','72205991','62107853','74245201','70689420','73599928','73224673','72781332','74305158','77674757','73744165','73311230','74581232','73311206','74373597','74474394','73111598','74686489','73701436','73747931','73713283','73425461','76830390','76969898','74249480','73999040','72656101','71965337','74058198','70350457','77157761','73315978','73763862','76513452','75209171','75165974','75894556','76988822','73767920','73750747','72269744','77681320','74290767','71933591','73818234','71995654','73384271','73525483','73714335','75925182','74878739','75979657','74777402','60850563','60174551','74371026','73819326','73182890','75338244','75348943','76006906','71991450','77679983','73890716','71847456','70155898','74349129','73311238','77131361','73818318','75827426','75509815','77043666','75981179','73181464','75386674','73643830','74802368','75918194','73760079','72269757','71130364','71945301','74773858','72763940','74599785','75475509','74705224','61204979','71995629','75709284','74227448','73707909','75282275','60732635','60765189','75931702','76969903','72315471','74155962','62108470','73647235','60732654','75782859','73636328','62250781','73495834','71958360','76641559','72925953','73386752','75503416','75520795','71958703','73525713','71721265','71721242','74430792','74939993','72727694','74084982','77084671','70201068','77043969','70080960','75543730','73624590','62363884','73609911','70859276','74298578','75506458','75833059','72228972','76932512','73653953','72735152','75409423','75902909','73810050','73968835','76301204','75844018','70543542','77172828','76699422','76193478','70831920','71754859','77152991','70184739','71525375','75930038','76623029','74241624','73444973','71565377','75272939','74624426','73740435','75545908','75165821','74843592','60069675','70970515','72950388','73812862','73993770','76868375','76919008','73315252','77275457','71497217','73866425','75050040','75437749','73896238','77179693','74164343','72081090','74178726','74536674','73764119','72495961','77277945','74560909','72544419','74309339','72495322','77067081','75532478','72392807','75195757','62204167','73380070','76126179','73313367','70055225','74618809','74700585','73596675','74633244','72966732','60422514','75348689','60786248','75521967','71348706','71452971','77706313','74525917','73857524','73265221','74079635','76553337','76268540','75218912','71040205','75764824','77035954','70415938','75949464','60417195','75711803','76949034','70865824','71262193','71550583','73055881','60758990','77339342','73854962','74043604','76443216','71531556','74994154','71923690','74154576','77351521','75412934','75709306','75958665','75795250','75924496','77350487','60443095','74246213','74780523','75388079','75926734','74175677','76910237','74080541','74639897','73774010','76400251','76858523','75150274','77044422','74412669','73636286','76829125','73735438','73821402','74700995','75412925','75348644','76871931','73378173','71547572','73760156','71107742','77330415','77347408','71267137','73818481','75953703','73820048','73475935','75670664','73857525','76079619','76918228','76228589','71522232','75686074','76173121','74209843','75702448','72393209','75529384','73519868','76639322','74634105','72792210','61709475','73895249','72907206','73581930','76659493','76866831','76362417','73907704','73812819','72639207','74255640','71792375','73776022','60417120','73746547','74660670','74055945','76903825','45835159','74348240','71936350','73382322','76971120','75047769','73713253','71090212','71522826','73965096','73445524','74469666','71348912','73447941','75581616','72177375','73855802','74143979','73312123','72368927','71644737','77238883','75084847','75340624','75886599','74034602','71267213','75721673','73810209','76338256','73453595','62718804','77100582','71837723','74836248','73941219','70501279','73319640','78286976','75497936','74580474','72073904','73810914','76021402','74045297','60417077','71660389','76325375','60764986','60068006','73807866','73895300','71697364','76344160','72487716','73309889','71000089','75735812','73908189','75944981','73648242','76909568','71979589','77246815','73773883','73993151','75395842','73517272','75938834','73933948','75837803','76946040','71627766','73252438','74881471','74854072','72086307','70184744','75701675','62301205','75503275','72760651','71348379','74081848','77700366','75362957','61802836','71871919','71044808','74430785','76232977','76039747','76770643','75814219','73430361','73254620','73428189','74951172','73581633','74285128','77481592','77086509','74407996','76799227','77215631','71689827','71522577','76944739','76357923','73579136','73874929','74055403','73512635','70821450','45486860','73638546','75924488','77691160','75395748','74279975','77161279','71947802','72093170','77336484','60182252','75233573','73638497','75873201','72572574','71016567','70668683','74249180','60170908','73818430','73653969','73277903','77667615','74354256','73745236','73313386','75314292','76468957','74043007','74440565','71621865','73765619','70090924','73522906','73385765','60068507','72245860','73071589','76009172','71608448','74766234','71499733','70547400','77059559','71388806','76086337','73743041','75403915','73303351','74878715','76010536','72681465','75521468','73607951','76955060','74164269','76690057','78203044','74808429','71503734','73536908','77425314','73353751','75854643','72171522','72039974','74290754','75208812','73544969','76217044','71697360','72225806','72554205','71783843','76851700','71374909','74227219','73582150','72047620','75567112','75532506','72851353','73313344','60536151','75374341','76735420','71882093','75253303','73605281','74466081','76944671','71928114','71655059','72326673','73522722','73379881','71970878','73820233','75937218','75609722','72874586','74152600','76792534','76944244','74207868','75928872','75746215','74214615','71572494','73384201','76294397','62985973','75654450','76241377','75925312','74749215','75787011','75348312','73535172','72298813','75929956','74228685','70811723','71792356','77131081','76519882','75998725','78203365','76561573','74426380','60196738','71348987','60233569','75676423','73759622','73643707','74887080','71033940','73525210','76771354','71958707','60386102','73810924','75313746','60181255','75518575','73449552','73382305','73522925','75861042','74725077','71982282','73636178','76656962','76338088','70412503','71478256','75601380','71948898','77094493','73819052','71991810','73429007','77128630','72640765','77077714','74358500','77289004','75082259','73808987','75881259','76606535','73078967','74415117','75379199','75867280','72107812','74762107','60066407','76972826','76869589','60199877','70279898','74172335','73044162','75096969','60983027','74685393','76536994','63064868','77503611','74759871','75115284','75735830','73092811','76860766','75517851','73651566','75342409','76701138','75506230','73392461','76762347','74277638','71778991','77351870','70941471','75697512','72073935','78885779',
            
    //         '73645441','70848024','76186573','74633604','62152759','73277923','74602269','73523772','76683179','73706004','77709492','76871921','74725079','71604817','74290608','75565001','77219176','75609481','74808076','73209343','74705689','60069008','76611561','75984185','71923445','61205161','76984443','75506464','75832613','75815031','70316723','70657793','60417670','60259311','76965655','73425458','77923247','75865585','60442960','73478727','75389459','76660303','73480637','72752975','72737895','71754271','45318739','75475224','77130148','74724088','72672434','72812319','71923702','73701147','74761931','77476518','78549323','73261233','60759021','75814565','75950385','75921329','74948418','60909401','75151787','77379747','74568016','75780469','74412659','76692263','74203419','60758962','60066857','71945084','77698483','71348435','75609202','74660885','73773718','75820301','72496991','77803739','74152629','75714420','72175055','75701685','60764933','46039585','74491105','73806257','71461199','70830333','71226421','74695100','73647491','77439557','75994466','60759105','72895381','71348617','74449898','71867827','73753027','75721669','73821246','71948958','76814589','75965470','71864655','60771309','73214537','76125959','74298567','75944329','60170554','74526130','76737843','73968933','60764923','71349042','73825334','77660883','74405369','73219638','76923760','71634622','70446013','71500890','73197232','73392453','75691536','73392460','75815618','60596820','73768725','60732829','60422487','74214723','75509809','75473879','78884987','75402750','73266609','60850553','77096440','71025450','71005617','73528468','73817521','73651601','74812025','60765111','72884471','73762505','74984380','73059174','61538627','73746654','77136641','72175040','48308088','74178712','75482849','77023928','73821045','75466128','74165209','70239991','60758577','74583524','77171810','74769319','73590963','73868684','73445261','73233663','74854261','77079662','77132570'
    //     ];

    //     // $dnis = ['60758580'];

    //     $dni = null;

    //     // $dnis = ['71822317'];
    //     foreach($dnis as $dni) {

    //         $response = Http::get('http://unap.scielodigital.net.pe/caja/pago_admision/server/CHECK_PAYMENT/?w=' . $dni);

    //             if ($response->successful()) {
    //                 // Obtener los datos JSON de la respuesta
    //                 $data = $response->json();
    //                 // Verificar si los datos son un array
    //                 if (is_array($data)) {
    //                     foreach ($data['data'] as $item) {
    //                             // if ($item['descr'] !== null && ($item['descr'] === '00000026' || $item['descr'] === '00000039')) {
    //                                 Comprobante::create([
    //                                     'ndoc_postulante' => $dni,
    //                                     'codigo' => '00000026',
    //                                     'nro_operacion' => $item['paymentTitle'],
    //                                     'monto' => $item['paymentAmount'],
    //                                     'fecha' => substr($item['paymentDatetime'], 0 ,10),
    //                                     'temp_fecha' => substr($item['paymentDatetime'], 0 ,10)
    //                                 ]);
    //                             // }


    //                     }
    //                 }

    //         }

    //     }

    // }



}




