import{r as s,e as f,C as A,D as H,o as g,c as k,a,u as m,w as l,d as c,F as V,y as b,M as T,Z,b as y,E as J,f as N,G as L,n as Q,B as W,I as X,g as Y,H as ee,h as oe,i as ae,k as te,q as le}from"./app-0034f043.js";import{_ as ne}from"./AuthenticatedLayout-0755e9ed.js";import{S as se}from"./SearchOutlined-18fd4aad.js";import{F as ie}from"./FormOutlined-71f39711.js";import{D as re}from"./DeleteOutlined-0bfcfa70.js";import"./logotiny-c4b525af.js";import"./Header-3addd6c1.js";import"./AntdIcon-748582a6.js";import"./DropdownLink-bdc7cf9c.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./DownOutlined-47092423.js";/* empty css                                                            */const de={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},ue={class:"mr-3"},me={class:"flex justify-between",style:{position:"relative"}},ce={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Ie={__name:"index",setup(pe){const p=s(""),d=s([]);s([]);const i=s(!1),v=s(1),C=s(null),t=s({id:null,codigo:"",nombre:""}),I=()=>{i.value=!0};f(p,(o,e)=>{u()}),f(i,(o,e)=>{i.value==!1&&t.value.id!=null&&(t.value.id=null,t.value.codigo=null,t.value.nombre=null)}),f(v,(o,e)=>{u()});const P={labelCol:{span:7},wrapperCol:{span:14}},B={nombre:[{required:!0,validator:async(o,e)=>e===""?Promise.reject("Ingrese su el nombre del filial"):Promise.resolve(),trigger:"change"}],codigo:[{required:!0,validator:async(o,e)=>e===""?Promise.reject("Ingrese la sede del filial"):Promise.resolve(),trigger:"change"}]};s([]);const j=o=>{i.value=!0,t.value.id=o.id,t.value.codigo=o.codigo,t.value.nombre=o.nombre},u=async(o="")=>{let e=await b.post("modalidad/get-modalidades?page="+v.value,{term:p.value});d.value=e.data.datos.data,C.value=e.data.datos.total},M=()=>{let o={id:t.value.id,codigo:t.value.codigo,nombre:t.value.nombre};b.post("save-modalidad",o).then(e=>{u(),h("success",e.data.titulo,e.data.mensaje),i.value=!1,t.value.codigo=null,t.value.id=null,t.value.nombre=""})},S=o=>{b.get("eliminar-modalidad/"+o.id).then(e=>{u(),h("warning",e.data.titulo,e.data.mensaje)})},U=[{title:"Cod",dataIndex:"codigo"},{title:"Nombre",dataIndex:"nombre"},{title:"Acciones",dataIndex:"acciones"}],w=s([]),D=o=>{console.log("selectedRowKeys changed: ",o),w.value=o};A(()=>({selectedRowKeys:m(w),onChange:D,hideDefaultSelections:!0}));const h=(o,e,r)=>{Q[o]({message:e,description:r})};return u(),(o,e)=>{const r=W,_=X,E=H("row"),R=Y,$=ee,q=oe,z=ae,x=te,O=le,G=T;return g(),k(V,null,[a(m(Z),{title:"Modalidades"}),a(ne,null,{default:l(()=>[c("div",de,[a(E,{class:"flex justify-between mb-4"},{default:l(()=>[c("div",ue,[a(r,{type:"primary",onClick:I},{default:l(()=>e[6]||(e[6]=[y("Nuevo")])),_:1})]),c("div",me,[a(_,{type:"text",placeholder:"Buscar",value:p.value,"onUpdate:value":e[0]||(e[0]=n=>p.value=n),style:{"max-width":"300px","padding-left":"30px"}},null,8,["value"]),c("div",ce,[a(m(se))])])]),_:1}),a(q,{columns:U,"data-source":d.value,pagination:!1,size:"small"},{bodyCell:l(({column:n,index:F})=>[n.dataIndex==="acciones"?(g(),k(V,{key:0},[a(r,{type:"primary",onClick:K=>j(d.value[F]),size:"small"},{icon:l(()=>[a(m(ie))]),_:2},1032,["onClick"]),a(R,{type:"vertical"}),d.value.length?(g(),J($,{key:0,title:"Â¿Estas seguro de eliminar?",onConfirm:K=>S(d.value[F])},{default:l(()=>[a(r,{type:"danger",shape:"",size:"small"},{icon:l(()=>[a(m(re))]),_:1})]),_:2},1032,["onConfirm"])):N("",!0)],64)):N("",!0)]),_:1},8,["data-source"]),a(z,{current:v.value,"onUpdate:current":e[1]||(e[1]=n=>v.value=n),total:C.value,"show-less-items":""},null,8,["current","total"])])]),_:1}),c("div",null,[a(G,{visible:i.value,"onUpdate:visible":e[5]||(e[5]=n=>i.value=n),title:"Nuevo Programa",style:{"margin-top":"-40px"}},{footer:l(()=>[a(r,{style:{"margin-left":"10px"},onClick:o.resetForm},{default:l(()=>e[7]||(e[7]=[y("Cancelar")])),_:1},8,["onClick"]),a(r,{type:"primary",onClick:e[4]||(e[4]=n=>M())},{default:l(()=>e[8]||(e[8]=[y("Guardar")])),_:1})]),default:l(()=>[a(O,L({ref:"formRef",name:"custom-validation",model:o.formState,rules:B},P,{onFinish:o.handleFinish,onValidate:o.handleValidate,onFinishFailed:o.handleFinishFailed}),{default:l(()=>[a(x,{"has-feedback":"",label:"Codigo",name:"codigo"},{default:l(()=>[a(_,{type:"text",value:t.value.codigo,"onUpdate:value":e[2]||(e[2]=n=>t.value.codigo=n),autocomplete:"off"},null,8,["value"])]),_:1}),a(x,{"has-feedback":"",label:"Nombre",name:"nombre"},{default:l(()=>[a(_,{type:"text",value:t.value.nombre,"onUpdate:value":e[3]||(e[3]=n=>t.value.nombre=n),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["visible"])])],64)}}};export{Ie as default};
