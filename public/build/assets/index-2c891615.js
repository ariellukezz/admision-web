import{a,aX as le,r as m,e as $,C as ie,D as re,o as w,c as F,u as _,w as s,d as o,F as T,y as k,M as de,Z as ue,b,t as I,E as D,f as P,G as pe,n as ce,B as me,j as ve,I as ge,_ as fe,h as _e,i as be,k as ye,S as we,p as he,q as xe}from"./app-3f26fd52.js";import{_ as Se}from"./LayoutDirector-2869a725.js";import ke from"./Perfil-5415394e.js";import{A as Ie}from"./AntdIcon-6d3e8f3a.js";import{D as R}from"./DownloadOutlined-36fc9c0a.js";import{S as Oe}from"./SearchOutlined-e7834872.js";import{E as Ce}from"./EyeOutlined-17034c94.js";import{F as Fe}from"./FormOutlined-2fdd7fb5.js";import{D as Pe}from"./DeleteOutlined-4412bcca.js";import"./logotiny-c4b525af.js";import"./Header-4e16a768.js";import"./DropdownLink-2bc24d5d.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./DownOutlined-c3d8812d.js";function G(y){for(var p=1;p<arguments.length;p++){var v=arguments[p]!=null?Object(arguments[p]):{},d=Object.keys(v);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(v).filter(function(c){return Object.getOwnPropertyDescriptor(v,c).enumerable}))),d.forEach(function(c){$e(y,c,v[c])})}return y}function $e(y,p,v){return p in y?Object.defineProperty(y,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):y[p]=v,y}var V=function(p,v){var d=G({},p,v.attrs);return a(Ie,G({},d,{icon:le}),null)};V.displayName="PlusOutlined";V.inheritAttrs=!1;const Ue=V,ze={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4 pb-0 mb-4"},Ee={class:"flex justify-between"},je={class:"ml-0 mt-1"},De={style:{"font-size":"1.4rem"}},Re={class:"flex"},Ve={class:"mr-1"},Ae={class:"flex"},Ne={class:"mr-2",style:{"margin-top":"-3px"}},Me={class:"mr-1"},Le={class:"flex"},Be={class:"mr-2",style:{"margin-top":"-3px"}},Te={class:"flex"},Ge={class:"mr-2",style:{"margin-top":"-3px"}},Ye={class:"flex mt-4 mb-6 justify-between"},He={class:"mr-1"},Xe={class:"flex"},qe={class:"mr-2",style:{"margin-top":"-3px"},disabled:""},Ze={class:"flex"},Je={class:"mr-1"},Ke={class:"flex justify-between",style:{position:"relative"}},Qe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg py-4"},We={style:{"font-size":".81rem","font-weight":"bold"}},et={key:1,style:{"font-size":"0.9rem"}},tt={key:2,style:{"font-size":"0.8rem"}},at={key:3,style:{"font-size":"0.8rem","text-transform":"uppercase"}},ot={key:5,class:"flex justify-center",style:{}},nt={class:"mr-1"},st={class:"mr-1"},lt={class:""},it={class:""},St={__name:"index",setup(y){const p=m([]),v=m([]),d=m(null),c=m(""),A=m([]),z=m(!1),O=m(!1),h=m(1),E=m(null),C=m(20),l=m({id:null,codigo:"",id_posulante:"",id_programa:"",id_modalidad:"",estado:!0,observacion:""}),g=m({id:"",nombre:"",dni:""}),Y=()=>{z.value=!0};$(c,(t,e)=>{x()}),$(C,(t,e)=>{x()}),$(d,(t,e)=>{t==0&&(d.value=null),h.value=1,x()}),$(O,(t,e)=>{O.value==!1&&l.value.id!=null&&(l.value.id=null,l.value.id_posulante="",l.value.id_programa="",l.value.id_modalidad="",l.value.estado=!0,l.value.observacion="",g.value.nombre=null,g.value.dni=null,g.value.id=null)}),$(h,(t,e)=>{x()});const H=t=>{O.value=!0,l.value.id=t.id,l.value.codigo=t.codigo,l.value.id_programa=t.id_programa,l.value.id_modalidad=t.id_modalidad,l.value.observacion=t.observacion,g.value.id=t.id_postulante,g.value.dni=t.dni,g.value.nombre=t.dni+" - "+t.nombres+" "+t.paterno+" "+t.materno},X=async()=>{let t=await k.post("/segundas/select-programas-segundas?page="+h.value,{term:c.value,paginashoja:C.value,programa:d.value});v.value=t.data.datos},q=async()=>{let t=await k.post("/segundas/select-programas-segundas-autorizados?page="+h.value,{term:c.value,paginashoja:C.value,programa:d.value});p.value=t.data.datos};X(),q();const x=async()=>{let t=await k.post("/segundas/get-preinscripciones-segundas?page="+h.value,{term:c.value,paginashoja:C.value,programa:d.value});A.value=t.data.datos.data,E.value=t.data.datos.total},Z=()=>{let t={id:l.value.id,id_postulante:g.value.id,id_programa:l.value.id_programa,id_modalidad:l.value.id_modalidad,observacion:l.value.observacion,dni:g.value.dni};k.post("/segundas/actualizar-preinscripciones-segundas",t).then(e=>{x(),M("success",e.data.titulo,e.data.mensaje),O.value=!1})},J=t=>{console.log("eliminar"),k.post("eliminar-preinscripcion/",{id:t.id}).then(e=>{x(),M("warning",e.data.titulo,e.data.mensaje)})},K=[{title:"DNI",dataIndex:"dni",align:"center"},{title:"Postulante",dataIndex:"postulante"},{title:"Programa",dataIndex:"programa"},{title:"Modalidad",dataIndex:"modalidad",align:"center"},{title:"Estado",dataIndex:"estado",align:"center"},{title:"Observación",dataIndex:"observacion"},{title:"Acciones",dataIndex:"acciones",width:"140px",align:"center"}],N=m([]),Q=t=>{console.log("selectedRowKeys changed: ",t),N.value=t};ie(()=>({selectedRowKeys:_(N),onChange:Q,hideDefaultSelections:!0}));const M=(t,e,i)=>{ce[t]({message:e,description:i})};x();const W=async t=>{try{const e=await k.post("/segundas/get-detalle-preinscripcion-segundas",{term:c.value,programa:d.value},{responseType:"blob"});if(e.status!==200)throw new Error("Error al obtener el archivo");const i=window.URL.createObjectURL(new Blob([e.data])),u=document.createElement("a");u.href=i;const r=new Date,S=`${`${r.getDate().toString().padStart(2,"0")}-${(r.getMonth()+1).toString().padStart(2,"0")}-${r.getFullYear()}_${r.getHours().toString().padStart(2,"0")}-${r.getMinutes().toString().padStart(2,"0")}-${r.getSeconds().toString().padStart(2,"0")}`}_preinscritos.pdf`;u.setAttribute("download",S),document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(i)}catch(e){console.error("Error al descargar el archivo:",e)}},ee=async t=>{try{const e=await k.post("/segundas/get-resumen-preinscripcion-segundas",{term:c.value,programa:d.value},{responseType:"blob"});if(e.status!==200)throw new Error("Error al obtener el archivo");const i=window.URL.createObjectURL(new Blob([e.data])),u=document.createElement("a");u.href=i;const r=new Date,S=`${`${r.getDate().toString().padStart(2,"0")}-${(r.getMonth()+1).toString().padStart(2,"0")}-${r.getFullYear()}_${r.getHours().toString().padStart(2,"0")}-${r.getMinutes().toString().padStart(2,"0")}-${r.getSeconds().toString().padStart(2,"0")}`}_resumen.pdf`;u.setAttribute("download",S),document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(i)}catch(e){console.error("Error al descargar el archivo:",e)}};return(t,e)=>{const i=me,u=ve,r=ge,j=re("row"),S=fe,te=_e,ae=be,U=ye,oe=we,ne=he,se=xe,L=de;return w(),F(T,null,[a(_(ue),{title:"Preinscripciones"}),a(Se,null,{default:s(()=>[o("div",ze,[a(j,{class:"mb-4"},{default:s(()=>[o("div",Ee,[o("div",je,[e[13]||(e[13]=o("span",{style:{"font-size":"1.5rem"}},"Preinscripción",-1)),e[14]||(e[14]=b()),o("span",De," - "+I(E.value)+" registros",1)]),o("div",Re,[o("div",Ve,[a(i,{onClick:e[0]||(e[0]=n=>ee()),class:"bg-blue-900",style:{color:"white",border:"none"}},{default:s(()=>[o("div",Ae,[o("div",Ne,[a(_(R))]),e[15]||(e[15]=b(" RESUMEN "))])]),_:1})]),o("div",Me,[a(i,{class:"bg-green-600",style:{color:"white",border:"none"}},{default:s(()=>[o("div",Le,[o("div",Be,[a(_(R))]),e[16]||(e[16]=b(" EXCEL "))])]),_:1})]),o("div",null,[a(i,{onClick:e[1]||(e[1]=n=>W()),class:"bg-red-600",style:{color:"white",border:"none"}},{default:s(()=>[o("div",Te,[o("div",Ge,[a(_(R))]),e[17]||(e[17]=b(" PDF "))])]),_:1})])])]),o("div",Ye,[o("div",null,[o("div",He,[o("div",null,[a(i,{class:"bg-gray-400",style:{color:"white",border:"none"}},{default:s(()=>[o("div",Xe,[o("div",qe,[a(_(Ue))]),e[18]||(e[18]=b(" Nuevo Registro "))])]),_:1})])])]),o("div",Ze,[o("div",Je,[a(u,{ref:"select",value:d.value,"onUpdate:value":e[2]||(e[2]=n=>d.value=n),placeholder:"Seleccionar programa de estudios",options:p.value,allowClear:""},null,8,["value","options"])]),o("div",Ke,[a(r,{type:"text",placeholder:"Escribe para buscar..!!",value:c.value,"onUpdate:value":e[3]||(e[3]=n=>c.value=n),style:{"max-width":"200px","padding-left":"10px"}},{prefix:s(()=>[a(_(Oe))]),_:1},8,["value"])])])])]),_:1})]),o("div",Qe,[a(te,{columns:K,"data-source":A.value,pagination:!1,size:"small"},{bodyCell:s(({column:n,index:rt,record:f})=>[n.dataIndex==="dni"?(w(),D(S,{key:0,color:"#476175",style:{"padding-top":"3px"}},{default:s(()=>[o("span",We,I(f.dni),1)]),_:2},1024)):P("",!0),n.dataIndex==="postulante"?(w(),F("span",et,I(f.paterno)+" "+I(f.materno)+", "+I(f.nombres),1)):P("",!0),n.dataIndex==="modalidad"?(w(),F("span",tt,I(f.modalidad),1)):P("",!0),n.dataIndex==="programa"?(w(),F("span",at,I(f.programa),1)):P("",!0),n.dataIndex==="estado"?(w(),F(T,{key:4},[f.estado===0?(w(),D(S,{key:0,style:{"font-size":".5rem"},color:"#476175"},{default:s(()=>e[19]||(e[19]=[b("INSCRITO")])),_:1})):(w(),D(S,{key:1,color:"#b01030",style:{"font-size":".7rem"}},{default:s(()=>e[20]||(e[20]=[b("SIN INSCRIPCIÓN")])),_:1}))],64)):P("",!0),n.dataIndex==="acciones"?(w(),F("div",ot,[o("div",nt,[a(i,{type:"true",onClick:B=>Y(f),size:"small",style:{background:"#f3f3f3",height:"30px",border:"solid 1px #d9d9d9",color:"gray",display:"flex","align-items":"center"}},{default:s(()=>[a(_(Ce))]),_:2},1032,["onClick"])]),o("div",st,[a(i,{type:"true",onClick:B=>H(f),size:"small",style:{background:"#f3f3f3",height:"30px",border:"solid 1px #d9d9d9",color:"blue",display:"flex","align-items":"center"}},{default:s(()=>[a(_(Fe))]),_:2},1032,["onClick"])]),o("div",lt,[a(i,{type:"true",onClick:B=>J(f),size:"small",style:{background:"#f3f3f3",height:"30px",color:"crimson",border:"solid 1px #d9d9d9",display:"flex","align-items":"center"}},{default:s(()=>[a(_(Pe))]),_:2},1032,["onClick"])])])):P("",!0)]),_:1},8,["data-source"]),a(ae,{current:h.value,"onUpdate:current":e[4]||(e[4]=n=>h.value=n),total:E.value,pageSize:C.value,"onUpdate:pageSize":e[5]||(e[5]=n=>C.value=n),"show-less-items":""},null,8,["current","total","pageSize"])])]),_:1}),o("div",null,[a(L,{open:O.value,"onUpdate:open":e[11]||(e[11]=n=>O.value=n),title:"Modificar Pre inscripción",style:{"margin-top":"-40px"}},{footer:s(()=>[a(i,{style:{"margin-left":"10px"},onClick:t.resetForm},{default:s(()=>e[26]||(e[26]=[b("Cancelar")])),_:1},8,["onClick"]),a(i,{type:"primary",onClick:e[10]||(e[10]=n=>Z())},{default:s(()=>e[27]||(e[27]=[b("Guardar")])),_:1})]),default:s(()=>[a(se,pe({ref:"formRef",name:"custom-validation",model:t.formState},t.layout,{onFinish:t.handleFinish,onValidate:t.handleValidate,onFinishFailed:t.handleFinishFailed}),{default:s(()=>[a(U,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[21]||(e[21]=o("label",null,"Postulante",-1)),a(r,{type:"text",value:g.value.nombre,"onUpdate:value":e[6]||(e[6]=n=>g.value.nombre=n)},null,8,["value"])]),_:1}),a(U,{"has-feedback":"",name:"postulante"},{default:s(()=>[e[22]||(e[22]=o("label",null,"Programa",-1)),o("div",it,[a(u,{ref:"select",value:l.value.id_programa,"onUpdate:value":e[7]||(e[7]=n=>l.value.id_programa=n),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"},options:v.value},null,8,["value","options"])])]),_:1}),a(U,{"has-feedback":"",name:"tipo"},{default:s(()=>[e[24]||(e[24]=o("label",null,"Modalidad",-1)),a(u,{ref:"select",value:l.value.id_modalidad,"onUpdate:value":e[8]||(e[8]=n=>l.value.id_modalidad=n),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"}},{default:s(()=>[a(oe,{value:1},{default:s(()=>e[23]||(e[23]=[b("GRADUADOS Y TITULADOS")])),_:1})]),_:1},8,["value"])]),_:1}),a(U,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[25]||(e[25]=o("label",null,"Observaciones",-1)),a(ne,{type:"text",value:l.value.observacion,"onUpdate:value":e[9]||(e[9]=n=>l.value.observacion=n),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["open"])]),a(L,{open:z.value,"onUpdate:open":e[12]||(e[12]=n=>z.value=n),title:"Inscripción",style:{"margin-top":"-40px","min-width":"700px"}},{default:s(()=>[a(ke,{dni:"74820781"})]),_:1},8,["open"])],64)}}};export{St as default};
