import{r as l,e as H,o as r,c as p,d as o,a as t,w as n,y as f,B as J,h as K,M as Q,b as d,t as D,f as S,F as W,u as X,S as Y,j as Z,I as h,l as ee,m as te,L as ae}from"./app-6aa9a536.js";import{D as ne}from"./DownOutlined-85bddf79.js";import"./AntdIcon-b7305db6.js";const oe={class:"mt-0 mb-4"},le={class:"class flex justify-between"},se={class:"mt-0 mb-4"},ue={key:0,class:"mt-0 mb-4"},de={key:1,class:"mt-0 mb-4"},ie={key:0},re={key:0},pe={class:"mt-4"},ve={class:"mt-3"},ce={class:"flex justify-end"},me={class:"mr-2"},ge={__name:"calificacion",props:["proceso"],setup(B){const b=B,g=l(1),c=l(null),m=l(""),x=l([]),U=(s,e)=>{c.value=e};H(m,(s,e)=>{P()});const N=l([]),A=l(0),V=l(1),F=l(10);l("");const y=l(1),w=l(0),I=l(0),P=async()=>{let s=await f.post("get-ponderaciones-select?page="+V.value,{term:m.value,paginasize:F.value});N.value=s.data.datos.data,A.value=s.data.datos.total},M=async()=>{await f.post("/calificar-examen",{id_area:g.value,id_simulacro:b.proceso,id_ponderacion:c.value.key,correctas:y.value,incorrectas:w.value,blanco:I.value}),v.value=!1,E()},E=async()=>{let s=await f.post("/get-puntajes-examen",{id_simulacro:b.proceso});x.value=s.data.datos};E();const v=l(!1);P();const O=s=>Number(s).toFixed(2),$=l([{title:"N°",dataIndex:"nro",align:"center"},{title:"DNI",dataIndex:"dni"},{title:"Ap. Paterno",dataIndex:"paterno"},{title:"Ap. Materno",dataIndex:"materno"},{title:"Nombres",dataIndex:"nombres"},{title:"Puntaje",dataIndex:"puntaje",align:"center"},{title:"Condicion",dataIndex:"condicion",align:"center"}]),z=async()=>{f.get("/get-pdf-resultados/"+b.proceso).then(s=>{s.data.archivos.forEach(u=>{const i=document.createElement("a");i.href=u,i.download=u.split("/").pop(),document.body.appendChild(i),i.click(),document.body.removeChild(i)})}).catch(s=>{console.error("Error al generar los PDFs:",s)})};return(s,e)=>{const u=J,i=K,k=Y,L=Z,_=h,C=ee,R=te,G=ae,T=Q;return r(),p("div",null,[o("div",oe,[o("div",le,[o("div",se,[t(u,{onClick:e[0]||(e[0]=a=>v.value=!0)},{default:n(()=>e[11]||(e[11]=[d("Calificar")])),_:1})]),x.value!=[]?(r(),p("div",ue,[t(u,{style:{width:"140px",background:"green",border:"none",color:"white"},onClick:e[1]||(e[1]=a=>z())},{default:n(()=>e[12]||(e[12]=[d("Descargar")])),_:1})])):(r(),p("div",de,[t(u,{style:{width:"140px",background:"green",border:"none",color:"white"},onClick:e[2]||(e[2]=a=>v.value=!0),disabled:""},{default:n(()=>e[13]||(e[13]=[d("Descargar")])),_:1})]))])]),t(i,{dataSource:x.value,columns:$.value,size:"small",pagination:!1},{bodyCell:n(({column:a,index:q,record:j})=>[a.dataIndex==="nro"?(r(),p("span",ie,D(q+1),1)):S("",!0),a.dataIndex==="puntaje"?(r(),p(W,{key:1},[j.puntaje!==null&&j.puntaje!==void 0?(r(),p("div",re,[o("span",null,D(O(j.puntaje)),1)])):S("",!0)],64)):S("",!0)]),_:1},8,["dataSource","columns"]),t(T,{visible:v.value,"onUpdate:visible":e[10]||(e[10]=a=>v.value=a),footer:!1},{default:n(()=>[o("div",pe,[e[17]||(e[17]=o("label",null,"Area",-1)),t(L,{ref:"select",value:g.value,"onUpdate:value":e[3]||(e[3]=a=>g.value=a),style:{width:"100%"}},{default:n(()=>[t(k,{value:1},{default:n(()=>e[14]||(e[14]=[d("BIOMEDICAS")])),_:1}),t(k,{value:2},{default:n(()=>e[15]||(e[15]=[d("INGENIERIAS")])),_:1}),t(k,{value:3},{default:n(()=>e[16]||(e[16]=[d("SOCIALES")])),_:1})]),_:1},8,["value"])]),t(R,{gutter:"[16,16]"},{default:n(()=>[t(C,{span:8,xs:"{24}",sm:"{12}",md:"{8}"},{default:n(()=>[e[18]||(e[18]=o("label",null,"Correctas",-1)),t(_,{ref:"select",value:y.value,"onUpdate:value":e[4]||(e[4]=a=>y.value=a),style:{width:"100%"}},null,8,["value"])]),_:1}),t(C,{span:8,xs:"{24}",sm:"{12}",md:"{8}"},{default:n(()=>[e[19]||(e[19]=o("label",null,"Incorrectas",-1)),t(_,{ref:"select",value:w.value,"onUpdate:value":e[5]||(e[5]=a=>w.value=a),style:{width:"100%"}},null,8,["value"])]),_:1}),t(C,{span:8,xs:"{24}",sm:"{12}",md:"{8}"},{default:n(()=>[e[20]||(e[20]=o("label",null,"En Blanco",-1)),t(_,{ref:"select",value:I.value,"onUpdate:value":e[6]||(e[6]=a=>I.value=a),style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),o("div",ve,[e[21]||(e[21]=o("label",null,"Ponderacion",-1)),o("div",null,[t(G,{value:c.value,"onUpdate:value":e[8]||(e[8]=a=>c.value=a),options:N.value,onSelect:U,style:{width:"100%"}},{default:n(()=>[t(_,{placeholder:"Ponderación ...",value:m.value,"onUpdate:value":e[7]||(e[7]=a=>m.value=a)},{suffix:n(()=>[t(X(ne))]),_:1},8,["value"])]),_:1},8,["value","options"])])]),o("div",ce,[o("div",me,[t(u,{style:{"margin-left":"6px","border-radius":"4px"}},{default:n(()=>e[22]||(e[22]=[d("Cancelar s")])),_:1})]),o("div",null,[t(u,{type:"primary",onClick:e[9]||(e[9]=a=>M()),style:{background:"#476175",border:"none","border-radius":"4px"}},{default:n(()=>e[23]||(e[23]=[d("Calificar")])),_:1})])])]),_:1},8,["visible"])])}}};export{ge as default};
