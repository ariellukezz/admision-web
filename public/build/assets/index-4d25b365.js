import{_ as ue}from"./logotiny-c4b525af.js";import{_ as _e}from"./logoDAD-c76d0a0b.js";import{_ as pe}from"./_plugin-vue_export-helper-c27b6911.js";import{a as t,A as me,f as p,o as d,s as U,w as a,d as e,t as k,L as ve,p as fe,h as ge,r as y,x as F,c as v,u as x,F as D,Z as he,i as ye,D as be,g,E as xe,z as we,b as w,n as ke}from"./app-865e2c32.js";import je from"./certificado-544a6511.js";import Ie from"./dni-f81ce27c.js";import"./es-d3eaeea7.js";var Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const Ee=Ce;function V(r){for(var u=1;u<arguments.length;u++){var _=arguments[u]!=null?Object(arguments[u]):{},i=Object.keys(_);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(_).filter(function(h){return Object.getOwnPropertyDescriptor(_,h).enumerable}))),i.forEach(function(h){Ne(r,h,_[h])})}return r}function Ne(r,u,_){return u in r?Object.defineProperty(r,u,{value:_,enumerable:!0,configurable:!0,writable:!0}):r[u]=_,r}var S=function(u,_){var i=V({},u,_.attrs);return t(me,V({},i,{icon:Ee}),null)};S.displayName="UploadOutlined";S.inheritAttrs=!1;const Oe=S,Pe="/build/assets/image-b69d7d4b.png";const $=r=>(fe("data-v-05daf995"),r=r(),ge(),r),Ae={class:"headPre"},De=$(()=>e("div",{class:"flex justify-between mb-2 logo-container"},[e("div",{class:"logoPre"},[e("img",{src:ue,class:"logo-img"}),e("div",{class:"x"},[e("div",{class:"container-pre"},[e("span",{class:"puntajex"},"DIRECCIÓN DE")]),e("h1",{class:"logoPreAD"},"ADMISIÓN")]),e("img",{src:_e,class:"logo-img"})])],-1)),Ue={class:"flex justify-center title-proceso-container"},Se={class:"title-proceso text-center"},$e=$(()=>e("div",{class:"flex justify-center titulo-pre"},[e("div",null,[e("div",{class:"flex justify-center",style:{height:"40px"}},[e("hr",{class:"line-pre mr-2"}),e("span",{style:{"font-size":"1.4rem","text-transform":"capitalize"}},"Puntaje obtenido"),e("hr",{class:"line-pre ml-2"})])])],-1)),ze=$(()=>e("div",{style:{background:"#267ec5ea",height:"3px",width:"100%"}},null,-1)),Le={class:"container"},Re={__name:"LayoutPuntaje",props:["nombre"],setup(r){return(u,_)=>{const i=p("a-layout-content"),h=p("a-layout");return d(),U(h,{style:{"min-height":"100vh"}},{default:a(()=>[t(h,null,{default:a(()=>[e("div",Ae,[De,e("div",Ue,[e("span",Se,"EXAMEN "+k(r.nombre),1)]),$e]),ze,t(i,{class:"content flex justify-center"},{default:a(()=>[e("div",Le,[ve(u.$slots,"default",{},void 0,!0)])]),_:3})]),_:3})]),_:3})}}},Me=pe(Re,[["__scopeId","data-v-05daf995"]]);const Te=e("h1",{style:{"font-size":"1.7rem"}},"Resultados del examen",-1),Fe={style:{"text-align":"justify","font-size":"1em"}},Ve={class:"flex",style:{"min-height":"30px","align-items":"center"}},Be=e("div",{class:"mr-1",style:{width:"30px","min-width":"30px"}},[e("img",{src:Pe,alt:""})],-1),qe={class:"flex"},He={key:0,class:"mr-1"},Xe={class:"flex"},Ge={style:{"margin-top":"-2px"}},Je={class:"mr-1"},Ye={class:"flex"},Ze={style:{"margin-top":"-2px"}},Qe={class:"flex"},We={style:{"margin-top":"-2px"}},Ke={key:0,class:"mt-4"},eo={class:"flex"},oo=e("div",{class:"mr-1"},"Subir archivo",-1),to={style:{"margin-top":"-2px"}},so=e("div",{class:"mt-6"},null,-1),ao=e("h1",{style:{"font-size":"1.7rem"}},"Consultar puntaje",-1),no={class:"mt-6",style:{}},io={style:{"margin-top":"-10px","text-align":"left"}},lo={class:"ml-1 mb-2"},ro=e("div",{class:"ml-4"},[e("div",{class:"mb-2"},"1. Ingrese su DNI en el campo de texto proporcionado."),e("div",{class:"mb-2"},"2. Ingrese el código mostrado en pantalla."),e("div",null,'3. Haga clic en el botón "Consultar Puntaje".')],-1),co={class:"flex mt-6 justify-left",style:{}},uo={style:{width:"100%"}},_o={style:{"min-width":"360px","max-width":"420px"}},po=e("div",{style:{"margin-bottom":"7px"}},[e("label",null,"N° Documento")],-1),mo={class:"texto-imagen"},vo=e("div",{class:"overlay"},null,-1),fo={class:"mb-4"},go=e("div",{class:"mt-3"},[e("label",null,"Código")],-1),ho={class:"mt-4",style:{display:"flex","justify-content":"left"}},yo={key:1,class:"mt-6"},bo={key:0},xo={key:1},wo={key:0},ko={key:1},jo={class:"flex justify-center"},Io={key:2},Co={class:"flex justify-center"},Eo=e("div",null,null,-1),No={key:2,class:"mt-6"},Oo=e("div",{class:"mt-6"},null,-1),Po=e("h1",{style:{"font-size":"1.7rem"}},"Subir archivos ",-1),Ao={class:"mt-2"},Do=e("div",{style:{"margin-bottom":"7px"}},[e("label",null,"Descripción")],-1),Uo={class:"mb-4"},So=e("div",{class:"mt-3"},[e("label",null,"Observaciónes")],-1),$o={class:"mb-4"},zo=e("div",{class:"flex justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-upload"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"17 8 12 3 7 8"}),e("line",{x1:"12",y1:"3",x2:"12",y2:"15"})])],-1),Lo=e("p",{class:"ant-upload-text"},"Haz clic o arrastra el archivo aquí para cargarlo",-1),Ro=e("p",{class:"ant-upload-hint"},"No subir archivos no autorizados",-1),Mo={class:"flex justify-end"},To={class:"mr-2"},Fo=e("div",{class:"mr-1"},"Cancelar",-1),Vo=e("div",{class:"mr-1"},"Guardar",-1),Zo={__name:"index",props:["proceso_seleccionado","admin"],setup(r){const u=window.location.origin,_=y(!1),i=r,h=y(""),N=y(),c=F({descripcion:"",observacion:"",estado:1,file:[]}),B=y(),m=F({dni:"",codigo_secreto:""}),q=o=>{m.dni=o.target.value.replace(/\D/g,"")},H=async()=>{C.value=0;try{const o=await axios.post("/get-puntajes-proceso/",{dni:m.dni,id_proceso:i.proceso_seleccionado.id});if(o.data.estado==!1)W("error","No se han encontrado datos en este proceso",""),m.dni="",b.value=[];else if(o.data&&o.data.datos){b.value=o.data.datos;const s=b.value.some(l=>l.condicion==="SI");C.value=s?1:0,C.value==0&&(m.dni=""),L()}else b.value=[]}catch(o){console.error("Error al obtener puntajes:",o),b.value=[]}};function X(o,s){return new Promise((l,f)=>{s?j.value!==h.value?f(new Error("El código ingresado no coincide.")):l():f(new Error("Por favor, ingresa el código secreto."))})}const G=y([]),J=async()=>{let o=await axios.get("/get-puntajes-maximos-proceso/"+i.proceso_seleccionado.id);o.data.estado==!0&&(G.value=o.data.datos)},Y=()=>{_.value=!0},z=y([]),O=async()=>{let o=await axios.post("/get-documentos-resultados",{id_proceso:i.proceso_seleccionado.id});o.data.estado==!0&&(z.value=o.data.datos)},Z=o=>window.open(o,"_blank"),Q=async o=>{try{const s=await axios({url:o,method:"GET",responseType:"blob"}),l=window.URL.createObjectURL(new Blob([s.data])),f=document.createElement("a");f.href=l,f.setAttribute("download",o.split("/").pop()),document.body.appendChild(f),f.click(),f.remove()}catch(s){console.error("Error descargando archivo:",s)}};J(),O();const j=y(null),L=async()=>{let o=await axios.get("/generar-captcha");j.value=o.data.captcha},W=(o,s,l)=>{ke[o]({message:s,description:l})},b=y([]),C=y(null),K=[{title:"Nombre",dataIndex:"nombres"},{title:"Programa",dataIndex:"programa",responsive:["sm"]},{title:"Puntaje",dataIndex:"puntaje",align:"center"},{title:"Vocacional",dataIndex:"puntaje_vocacional",align:"center"},{title:"Fecha",dataIndex:"fecha",align:"center"},{title:"Condición",dataIndex:"condicion",align:"center"}];function ee(o){return o.split("-").reverse().join("-")}const oe=o=>(c.file=[o],!1),te=async()=>{if(await N.value.validateFields(),c.file.length===0){alert("Por favor, selecciona un archivo primero.");return}const o=new FormData;o.append("file",c.file[0]),o.append("descripcion",c.descripcion),o.append("estado",c.estado),o.append("observacion",c.observacion),o.append("id_proceso",i.proceso_seleccionado.id);try{const s=await fetch("/save-documento-resultado",{method:"POST",body:o,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}});if(!s.ok)throw new Error("Error en la subida del archivo");const l=await s.json();alert("Archivo subido con éxito: "+l.fileName),O(),R()}catch(s){alert("Error: "+s.message)}},se=async o=>{await axios.get("/delete-documento-resultados/"+o),await O()},R=()=>{c.file=[],c.descripcion="",N.estado=1,c.observacion="",_.value=!1};return L(),(o,s)=>{const l=p("a-button"),f=p("a-input"),E=p("a-form-item"),M=p("a-form"),P=p("a-tag"),ae=p("a-table"),ne=p("a-alert"),ie=p("a-card"),T=p("a-radio"),le=p("a-radio-group"),re=p("a-textarea"),ce=p("a-upload-dragger"),de=p("a-modal");return d(),v(D,null,[t(x(he),{title:"Resultados"}),t(Me,{nombre:i.proceso_seleccionado.nombre},{default:a(()=>[t(ie,null,{default:a(()=>[e("div",null,[Te,e("p",Fe," Para consultar la relación de ingresantes del EXAMEN "+k(i.proceso_seleccionado.nombre)+', haga clic en el botón "Descargar" correspondiente a la fecha de su interés. El archivo se descargará automáticamente, y podrá abrirlo para visualizar el listado de ingresantes ordenado por mérito. ',1)]),(d(!0),v(D,null,ye(z.value,n=>(d(),v("div",{key:n,class:"flex justify-between p-2",style:{"border-bottom":"solid 1px #d9d9d9"}},[e("div",Ve,[Be,e("div",null,[e("span",null,k(n.nombre),1)])]),e("div",null,[e("div",qe,[i.admin===1?(d(),v("div",He,[t(l,{onClick:A=>se(n.id),size:"small",style:{height:"30px",background:"crimson",color:"white",border:"none"}},{default:a(()=>[e("div",Xe,[e("div",Ge,[t(x(be))])])]),_:2},1032,["onClick"])])):g("",!0),e("div",Je,[t(l,{onClick:A=>Z(x(u)+"/"+n.url),size:"small",style:{height:"30px",background:"#256d7d",color:"white",border:"none"}},{default:a(()=>[e("div",Ye,[e("div",Ze,[t(x(xe))])])]),_:2},1032,["onClick"])]),e("div",null,[t(l,{onClick:A=>Q(x(u)+"/"+n.url),size:"small",style:{height:"30px",background:"#088dcf",color:"white",border:"none"}},{default:a(()=>[e("div",Qe,[e("div",We,[t(x(we))])])]),_:2},1032,["onClick"])])])])]))),128)),i.admin===1?(d(),v("div",Ke,[t(l,{onClick:s[0]||(s[0]=n=>Y()),style:{height:"36px",background:"#088dcf",color:"white",border:"none"}},{default:a(()=>[e("div",eo,[oo,e("div",to,[t(x(Oe))])])]),_:1})])):g("",!0),so,ao,e("div",no,[e("div",io,[e("div",lo," Para consultar el puntaje del EXAMEN "+k(i.proceso_seleccionado.nombre)+", siga estos pasos: ",1),ro]),e("div",co,[e("div",uo,[e("div",_o,[t(M,{ref_key:"formRef",ref:B,model:m,name:"inicio_dni"},{default:a(()=>[po,t(E,{name:"dni",rules:[{required:!0,message:"Por favor ingresa tu DNI",trigger:"change"},{min:8,message:"El dni debe tener 8 digitos",trigger:"blur"}]},{default:a(()=>[t(f,{value:m.dni,"onUpdate:value":s[1]||(s[1]=n=>m.dni=n),onInput:q,maxlength:8,placeholder:"N° Documento"},null,8,["value"])]),_:1}),e("div",mo,k(j.value),1),vo,e("div",fo,[go,t(E,{name:"codigo_secreto",rules:[{required:!0,message:"Ingresa el código del cuadro",trigger:"change"},{min:6,message:"El ubigeo debe tener 6 caracteres",trigger:"blur"},{validator:X,trigger:"change"}]},{default:a(()=>[t(f,{value:m.codigo_secreto,"onUpdate:value":s[2]||(s[2]=n=>m.codigo_secreto=n),maxlength:6,placeholder:"Ingresa el codigo"},null,8,["value"])]),_:1},8,["rules"])]),e("div",ho,[j.value!==m.codigo_secreto?(d(),U(l,{key:0,type:"primary",disabled:""},{default:a(()=>[w("CONSULTAR PUNTAJE")]),_:1})):g("",!0),m.codigo_secreto===j.value?(d(),U(l,{key:1,onClick:s[3]||(s[3]=n=>H()),style:{background:"goldenrod",border:"none",color:"white"}},{default:a(()=>[w("CONSULTAR PUNTAJE")]),_:1})):g("",!0)])]),_:1},8,["model"])])])])]),b.value.length>0?(d(),v("div",yo,[t(ae,{columns:K,"data-source":b.value,pagination:!1,size:"small"},{bodyCell:a(({column:n,index:A,record:I})=>[n.dataIndex==="puntaje"?(d(),v("div",bo,k(I.puntaje),1)):g("",!0),n.dataIndex==="fecha"?(d(),v("div",xo,k(ee(I.fecha)),1)):g("",!0),n.dataIndex==="condicion"?(d(),v(D,{key:2},[I.condicion=="SI"?(d(),v("div",wo,[t(P,{color:"blue"},{default:a(()=>[w(" Ingresó ")]),_:1})])):g("",!0),I.condicion=="NO"?(d(),v("div",ko,[e("div",jo,[t(P,{color:"orange"},{default:a(()=>[w(" No ingresó ")]),_:1})])])):g("",!0),I.condicion=="CL"?(d(),v("div",Io,[e("div",Co,[t(P,{color:"yellow"},{default:a(()=>[w(" Clasificado ")]),_:1})])])):g("",!0)],64)):g("",!0)]),_:1},8,["data-source"]),Eo])):g("",!0),C.value===1?(d(),v("div",No,[t(ne,{message:"! MUY IMPORTANTE !",description:"Los postulantes que hayan alcanzado una vacante deberán subir su Certificado de Estudios y DNI en formato PDF con un peso max. de 2mb",type:"info"}),Oo,Po,e("div",null,[t(je,{id_proceso:i.proceso_seleccionado.id,dni:m.dni},null,8,["id_proceso","dni"])]),e("div",Ao,[t(Ie,{id_proceso:i.proceso_seleccionado.id,dni:m.dni},null,8,["id_proceso","dni"])])])):g("",!0)]),_:1}),t(de,{visible:_.value,"onUpdate:visible":s[8]||(s[8]=n=>_.value=n),title:"Archivo Resultado",footer:!1},{default:a(()=>[t(M,{ref_key:"formRefArchivo",ref:N,model:c,name:"formArchivo"},{default:a(()=>[t(le,{value:c.estado,"onUpdate:value":s[4]||(s[4]=n=>c.estado=n),class:"flex justify-end",style:{display:"flex",width:"yellow"},name:"radioGroup"},{default:a(()=>[t(T,{value:1},{default:a(()=>[w("Activo")]),_:1}),t(T,{value:0},{default:a(()=>[w("Inactivo")]),_:1})]),_:1},8,["value"]),Do,t(E,{name:"descripcion",rules:[{required:!0,message:"Ingrese la descripción",trigger:"change"}]},{default:a(()=>[t(f,{value:c.descripcion,"onUpdate:value":s[5]||(s[5]=n=>c.descripcion=n),placeholder:"Descripción"},null,8,["value"])]),_:1}),e("div",Uo,[So,t(E,{name:"observacion"},{default:a(()=>[t(re,{value:c.observacion,"onUpdate:value":s[6]||(s[6]=n=>c.observacion=n),maxlength:100,placeholder:"Observación"},null,8,["value"])]),_:1})]),e("div",$o,[t(ce,{fileList:o.fileList,"onUpdate:fileList":s[7]||(s[7]=n=>o.fileList=n),"before-upload":oe,multiple:!1},{default:a(()=>[zo,Lo,Ro]),_:1},8,["fileList"])])]),_:1},8,["model"]),e("div",Mo,[e("div",To,[t(l,{onClick:R,style:{height:"36px",background:"none",color:"#088dcf",border:"#088dcf solid 1px"}},{default:a(()=>[Fo]),_:1})]),t(l,{onClick:te,style:{height:"36px",background:"#088dcf",color:"white",border:"none"}},{default:a(()=>[Vo]),_:1})])]),_:1},8,["visible"])]),_:1},8,["nombre"])],64)}}};export{Zo as default};
