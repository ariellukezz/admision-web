import{I as K,r as u,x as Q,f as d,o as r,c,d as e,a as s,w as t,F as B,i as W,l as D,b as _,g as f,t as Y,s as I,u as Z,a6 as C}from"./app-14f44714.js";import"./es-c5626578.js";const ee={class:"mt-12"},oe={class:"flex justify-between border-b-2",style:{"border-bottom":"solid 2px #009DD1","padding-bottom":"8px"}},te=e("div",null,[e("span",{style:{"font-weight":"bold","font-size":"1rem",color:"#009DD1"}},"DOCUMENTO DE IDENTIDAD")],-1),se={style:{"margin-top":"-5px"}},le={class:"mt-3"},ae={class:"flex justify-between",style:{}},ie={class:""},ne={key:0},re=e("span",{class:"font-bold",style:{"font-size":"1rem"}}," DNI BLANCO",-1),de=[re],ce={key:1},ue=e("span",{class:"font-bold",style:{"font-size":"1rem"}}," DNI AMARILLO",-1),pe=[ue],_e={key:2},fe=e("span",{class:"font-bold",style:{"font-size":"1rem"}}," DOCUMENTO C4",-1),ve=[fe],me={key:3},he=e("span",{class:"font-bold",style:{"font-size":"1rem"}}," CARNÉ DE EXTRANJERÍA",-1),ge=[he],be={class:"flex",style:{"margin-top":"0px"}},we=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1),ye=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#1a2843","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1),xe=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),ke={class:""},De=e("label",null,[_("Tipo"),e("span",{style:{color:"red"}},"*")],-1),Ce=e("label",null,[_("Observación"),e("span",{style:{color:"red"}})],-1),Le=e("label",null,[_("Archivo PDF (Max. 2mb)"),e("span",{style:{color:"red"}},"*")],-1),Ae={key:0,class:"mt-2"},Ne=["src"],Re={key:0,class:"mt-2"},Ee=["src"],Oe={class:"flex justify-end"},Fe={key:0,class:"mt-2"},Ue=["src"],Me={class:"flex justify-end"},Ie={__name:"dni",props:["id_proceso","dni"],setup(P){const L=window.location.origin;K.locale("es");const g=P,j=()=>{v.value=!0},z=o=>{l.value={id:null,observacion:"",tipo:null,fileList:[]},l.id=o.id,l.observacion=o.observacion,p.value=L+"/"+o.url,l.tipo=o.id_tipo,v.value=!0},v=u(!1),A=u([]),V=u([{value:3,label:"DNI BLANCO"},{value:4,label:"DNI AMARILLO"},{value:5,label:"DOCUMENTO C4"},{value:6,label:"CARNÉ DE EXTRANJERÍA"}]),b=u(!1),y=u(null),$=o=>{y.value=o,b.value=!0},N=u(),l=Q({id:null,observacion:"",tipo:null,fileList:[]}),S=o=>{console.log(`selected ${o}`)},q=async o=>{(await D.get("/eliminar-dni/"+o)).data.estado==!0?x():console.log("Ocurrió un error")},m=u(!1),p=u(null),R=u(0),E=o=>{if(o.type==="application/pdf"){const a=new FileReader;a.onload=n=>{p.value=n.target.result},a.readAsDataURL(o),l.fileList=[o]}else C.error("¡Solo puedes cargar archivos PDF!");return!1},x=async()=>{const o=await D.post("/get-dnis-postulante",{dni:g.dni,id_proceso:g.id_proceso});o.data.estado==!0?A.value=o.data.datos:console.log("No se encontraron datos")},O=()=>{p.value=null,l.fileList=[]},J=async()=>{await N.value.validateFields();const o=new FormData;l.fileList[0]&&o.append("file",l.fileList[0]),l.id!=null&&o.append("id",l.id),o.append("id_proceso",g.id_proceso),o.append("dni",g.dni),o.append("observacion",l.observacion),o.append("tipo",l.tipo);try{m.value=!0,R.value=0;const a=await D.post("/save-dni",o,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer your-auth-token"},onUploadProgress:n=>{R.value=Math.round(n.loaded*100/n.total)}});v.value=!1,m.value=!1,C.success("¡Archivo PDF cargado exitosamente!"),await x()}catch(a){m.value=!1,C.error("Error al cargar el archivo."),console.error("File upload failed:",a)}};return x(),(o,a)=>{const n=d("a-button"),h=d("a-col"),k=d("a-row"),X=d("a-select"),w=d("a-form-item"),G=d("a-input"),F=d("upload-outlined"),U=d("a-upload"),H=d("a-form"),M=d("a-modal");return r(),c(B,null,[e("div",ee,[e("div",null,[e("div",oe,[te,e("div",se,[s(n,{onClick:a[0]||(a[0]=i=>j())},{default:t(()=>[_("Agregar")]),_:1})])]),e("div",le,[(r(!0),c(B,null,W(A.value,i=>(r(),c("div",{class:"mb-2",key:i},[s(k,{gutter:16},{default:t(()=>[s(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[e("div",ae,[e("div",ie,[i.id_tipo==3?(r(),c("div",ne,de)):f("",!0),i.id_tipo==4?(r(),c("div",ce,pe)):f("",!0),i.id_tipo==5?(r(),c("div",_e,ve)):f("",!0),i.id_tipo==6?(r(),c("div",me,ge)):f("",!0)]),e("div",be,[s(n,{onClick:T=>$(i.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[we]),_:2},1032,["onClick"]),s(n,{onClick:T=>z(i),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[ye]),_:2},1032,["onClick"]),s(n,{danger:"",onClick:T=>q(i.id),style:{width:"20px",height:"20px","padding-left":"3px"}},{default:t(()=>[xe]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024)]))),128))])])]),e("div",ke,[s(M,{visible:v.value,"onUpdate:visible":a[3]||(a[3]=i=>v.value=i),width:"800px",class:"w-full md:w-3/4",title:"Registro de dni",onOk:o.handleOk},{footer:t(()=>[e("div",Oe,[s(n,{type:"primary",disabled:!p.value,loading:m.value,style:{"margin-top":"16px"},onClick:J},{default:t(()=>[_(Y(m.value?"Subiendo...":"Guardar datos"),1)]),_:1},8,["disabled","loading"])])]),default:t(()=>[s(H,{ref_key:"formDatos",ref:N,name:"form",model:l,rules:o.formRules},{default:t(()=>[s(k,{gutter:16},{default:t(()=>[s(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[De,s(w,{name:"tipo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[s(X,{ref:"select",value:l.tipo,"onUpdate:value":a[1]||(a[1]=i=>l.tipo=i),style:{width:"100%"},options:V.value,onFocus:o.focus,onChange:S},null,8,["value","options","onFocus"])]),_:1})]),_:1}),s(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[Ce,s(w,{name:"observacion"},{default:t(()=>[s(G,{value:l.observacion,"onUpdate:value":a[2]||(a[2]=i=>l.observacion=i),style:{height:"32px"}},{suffix:t(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),s(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[Le,l.id==null?(r(),I(w,{key:0,name:"fileList",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[s(U,{"file-list":l.fileList,"before-upload":E,onRemove:O},{default:t(()=>[s(n,null,{default:t(()=>[s(F),_(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),p.value?(r(),c("div",Ae,[e("iframe",{src:p.value,width:"100%",height:"300px"},null,8,Ne)])):f("",!0)]),_:1})):(r(),I(w,{key:1,name:"fileList"},{default:t(()=>[s(U,{"file-list":l.fileList,"before-upload":E,onRemove:O},{default:t(()=>[s(n,null,{default:t(()=>[s(F),_(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),p.value?(r(),c("div",Re,[e("iframe",{src:p.value,width:"100%",height:"300px"},null,8,Ee)])):f("",!0)]),_:1}))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","onOk"]),s(M,{visible:b.value,"onUpdate:visible":a[5]||(a[5]=i=>b.value=i),title:"Registro de título",style:{"min-width":"1000px"}},{footer:t(()=>[e("div",Me,[s(n,{onClick:a[4]||(a[4]=i=>b.value==!1)},{default:t(()=>[_(" Aceptar ")]),_:1})])]),default:t(()=>[s(k,{gutter:16},{default:t(()=>[s(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[y.value?(r(),c("div",Fe,[e("iframe",{src:Z(L)+"/"+y.value,width:"100%",height:"500px"},null,8,Ue)])):f("",!0)]),_:1})]),_:1})]),_:1},8,["visible"])])],64)}}};export{Ie as default};
