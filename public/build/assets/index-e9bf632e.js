import{a as t,r as c,e as U,C as ne,D as le,o as p,c as S,u as w,w as l,d,F as P,y as $,M as ie,Z as se,b as _,E as O,t as z,f as b,G as de,n as re,j as ue,B as pe,I as ce,_ as me,H as ve,h as fe,i as ge,N as _e,k as be,S as ye,p as we,q as xe}from"./app-02daa48e.js";import{_ as ke}from"./AuthenticatedLayout-0d088217.js";import{A as Ce}from"./AntdIcon-666c3050.js";import{D as he}from"./DownloadOutlined-942e4cc8.js";import{S as Se}from"./SearchOutlined-2412f6e3.js";import{P as Oe}from"./PrinterOutlined-a320720f.js";import{F as Ie}from"./FormOutlined-68f5ffc1.js";import{D as Fe}from"./DeleteOutlined-58102e21.js";import"./logotiny-c4b525af.js";import"./Header-71d983ce.js";import"./DownOutlined-b680cb82.js";/* empty css                                                            */var Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const Ue=Ee;function L(f){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?Object(arguments[r]):{},m=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(i).filter(function(y){return Object.getOwnPropertyDescriptor(i,y).enumerable}))),m.forEach(function(y){$e(f,y,i[y])})}return f}function $e(f,r,i){return r in f?Object.defineProperty(f,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):f[r]=i,f}var j=function(r,i){var m=L({},r,i.attrs);return t(Ce,L({},m,{icon:Ue}),null)};j.displayName="RedoOutlined";j.inheritAttrs=!1;const ze=j,De={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},Re={class:"mr-3"},Ve={class:"flex justify-between gap-3"},Pe={class:"flex justify-between",style:{position:"relative"}},je={style:{"font-size":"1rem","font-weight":"bold"}},Ae={key:1,style:{"font-size":"0.95rem"}},Ne={key:3},Be={key:5,style:{display:"flex",gap:"2px"}},Me={class:"flex justify-end"},Le={class:""},oa={__name:"index",setup(f){const r=window.location.origin,i=c(null),m=c(""),y=c([]),C=c(!1),I=c(1),A=c(null),D=c(20),o=c({id:null,codigo:"",id_posulante:"",id_programa:"",id_modalidad:"",estado:!0,observacion:""}),v=c({id:"",nombre:"",dni:""});U(m,(a,e)=>{x()}),U(D,(a,e)=>{x()}),U(i,(a,e)=>{a==0&&(i.value=null),I.value=1,x()}),U(C,(a,e)=>{C.value==!1&&o.value.id!=null&&(o.value.id=null,o.value.codigo="",o.value.id_posulante="",o.value.id_programa="",o.value.id_modalidad="",o.value.estado=!0,o.value.observacion="",v.value.nombre=null,v.value.dni=null,v.value.id=null)}),U(I,(a,e)=>{x()});const W=a=>{C.value=!0,o.value.id=a.id,o.value.codigo=a.codigo,o.value.id_programa=a.id_programa,o.value.id_modalidad=a.id_modalidad,a.estado==0?o.value.estado=!0:o.value.estado=3,o.value.observacion=a.observacion,v.value.id=a.id_postulante,v.value.dni=a.dni,v.value.nombre=a.dni+" - "+a.nombres+" "+a.paterno+" "+a.materno},x=async()=>{let a=await $.post("get-inscripciones-admin?page="+I.value,{term:m.value,paginashoja:D.value,programa:i.value});y.value=a.data.datos.data,A.value=a.data.datos.total},R=c([]);(async()=>{let a=await $.get("get-select-programas-proceso-admin");R.value=a.data.datos})();const G=()=>{let a=3;o.value.estado==!0&&(a=0);let e={id:o.value.id,id_postulante:v.value.id,id_programa:o.value.id_programa,id_modalidad:o.value.id_modalidad,observacion:o.value.observacion,estado:a,dni:v.value.dni};$.post("actualizar-inscripcion",e).then(s=>{x(),B("success",s.data.titulo,s.data.mensaje),C.value=!1})},T=a=>{$.get("eliminar-modalidad/"+a.id).then(e=>{x(),B("warning",e.data.titulo,e.data.mensaje)})},H=[{title:"Codigo",dataIndex:"codigo",width:"110px"},{title:"DNI",dataIndex:"dni",align:"center"},{title:"Postulante",dataIndex:"postulante"},{title:"Programa",dataIndex:"programa"},{title:"Modalidad",dataIndex:"modalidad",align:"center"},{title:"Estado",dataIndex:"estado",align:"center"},{title:"Acciones",dataIndex:"acciones",width:"140px",align:"center"}],N=c([]),q=a=>{console.log("selectedRowKeys changed: ",a),N.value=a};ne(()=>({selectedRowKeys:w(N),onChange:q,hideDefaultSelections:!0}));const B=(a,e,s)=>{re[a]({message:e,description:s})},X=(a,e)=>{var s=document.createElement("iframe");s.style.display="none",s.src=r+"/documentos/"+e+"/inscripciones/constancias/"+a+".pdf",document.body.appendChild(s),s.contentWindow.focus(),s.contentWindow.print()},Y=a=>{var e=document.createElement("iframe");e.style.display="none",e.src=r+"/admin/pdf-inscripción/"+a,document.body.appendChild(e),e.contentWindow.focus(),e.contentWindow.print()},Z=async()=>{try{const a=await $.get("inscripciones/descargar-lista",{params:{descargar:1},responseType:"blob"});if(a.status!==200)throw new Error("Error al obtener el archivo");const e=new Date,g=`${`${e.getDate().toString().padStart(2,"0")}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getFullYear()}_${e.getHours().toString().padStart(2,"0")}-${e.getMinutes().toString().padStart(2,"0")}-${e.getSeconds().toString().padStart(2,"0")}`}_lista_postulantes.xlsx`,h=window.URL.createObjectURL(new Blob([a.data])),k=document.createElement("a");k.href=h,k.setAttribute("download",g),document.body.appendChild(k),k.click(),document.body.removeChild(k),window.URL.revokeObjectURL(h)}catch(a){console.error("Error al descargar el archivo:",a)}};return x(),(a,e)=>{const s=ue,g=pe,h=ce,k=le("row"),F=me,J=ve,K=fe,Q=ge,ee=_e,E=be,M=ye,ae=we,te=xe,oe=ie;return p(),S(P,null,[t(w(se),{title:"Documentos"}),t(ke,null,{default:l(()=>[d("div",De,[t(k,{class:"flex justify-between mb-4"},{default:l(()=>[d("div",Re,[t(s,{ref:"select",value:i.value,"onUpdate:value":e[0]||(e[0]=n=>i.value=n),placeholder:"Seleccionar programa de estudios",options:R.value,allowClear:""},null,8,["value","options"])]),d("div",Ve,[d("div",null,[t(g,{onClick:e[1]||(e[1]=n=>Z()),type:"primary",style:{background:"#40DE7A"},size:a.size},{icon:l(()=>[t(w(he))]),default:l(()=>[e[13]||(e[13]=_(" xls "))]),_:1},8,["size"])]),d("div",null,[d("div",Pe,[t(h,{type:"text",placeholder:"Buscar",value:m.value,"onUpdate:value":e[2]||(e[2]=n=>m.value=n),style:{"max-width":"260px"}},{prefix:l(()=>[t(w(Se))]),_:1},8,["value"])])])])]),_:1}),t(K,{columns:H,"data-source":y.value,pagination:!1,size:"small"},{bodyCell:l(({column:n,index:Ge,record:u})=>[n.dataIndex==="codigo"?(p(),O(F,{key:0,color:"blue",style:{"padding-top":"3px",color:"#164753",width:"105px"}},{default:l(()=>[d("span",je,z(u.codigo),1)]),_:2},1024)):b("",!0),n.dataIndex==="postulante"?(p(),S("span",Ae,z(u.paterno)+" "+z(u.materno)+", "+z(u.nombres),1)):b("",!0),n.dataIndex==="estado"?(p(),S(P,{key:2},[u.estado===0?(p(),O(F,{key:0,color:"blue"},{default:l(()=>e[14]||(e[14]=[_("INSCRITO")])),_:1})):(p(),O(F,{key:1,color:"error"},{default:l(()=>e[15]||(e[15]=[_("ANULADO")])),_:1}))],64)):b("",!0),n.dataIndex==="programa"?(p(),S("div",Ne,z(u.programa),1)):b("",!0),n.dataIndex==="verificado"?(p(),S(P,{key:4},[u.verificado===0?(p(),O(F,{key:0,color:"error"},{default:l(()=>e[16]||(e[16]=[_("no verificado")])),_:1})):b("",!0),u.verificado===1?(p(),O(F,{key:1,color:"success"},{default:l(()=>e[17]||(e[17]=[_("verificado")])),_:1})):b("",!0)],64)):b("",!0),n.dataIndex==="acciones"?(p(),S("div",Be,[t(g,{size:"small",onClick:V=>Y(u.dni),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#23cd23",display:"flex","align-items":"center"}},{default:l(()=>[t(w(ze))]),_:2},1032,["onClick"]),t(g,{size:"small",onClick:V=>X(u.dni,u.id_proceso),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#164753",display:"flex","align-items":"center"}},{default:l(()=>[t(w(Oe))]),_:2},1032,["onClick"]),t(g,{size:"small",onClick:V=>W(u),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#af7200",display:"flex","align-items":"center"}},{default:l(()=>[t(w(Ie))]),_:2},1032,["onClick"]),y.value.length?(p(),O(J,{key:0,title:"¿Estas seguro de eliminar?",disabled:"",onConfirm:V=>T(u)},{default:l(()=>[t(g,{size:"small",style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#ff4d4f",display:"flex","align-items":"center"}},{default:l(()=>[t(w(Fe))]),_:1})]),_:2},1032,["onConfirm"])):b("",!0)])):b("",!0)]),_:1},8,["data-source"]),t(Q,{current:I.value,"onUpdate:current":e[3]||(e[3]=n=>I.value=n),total:A.value,pageSize:D.value,"onUpdate:pageSize":e[4]||(e[4]=n=>D.value=n),"show-less-items":""},null,8,["current","total","pageSize"])])]),_:1}),d("div",null,[t(oe,{open:C.value,"onUpdate:open":e[12]||(e[12]=n=>C.value=n),title:"Modificar Inscripción",style:{"margin-top":"-40px"}},{footer:l(()=>[t(g,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:l(()=>e[25]||(e[25]=[_("Cancelar")])),_:1},8,["onClick"]),t(g,{type:"primary",onClick:e[11]||(e[11]=n=>G())},{default:l(()=>e[26]||(e[26]=[_("Guardar")])),_:1})]),default:l(()=>[t(te,de({ref:"formRef",name:"custom-validation",model:a.formState},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:l(()=>[d("div",Me,[t(ee,{checked:o.value.estado,"onUpdate:checked":e[5]||(e[5]=n=>o.value.estado=n)},null,8,["checked"])]),t(E,{"has-feedback":"",name:"codigo"},{default:l(()=>[e[18]||(e[18]=d("label",null,"Codigo",-1)),t(h,{type:"text",value:o.value.codigo,"onUpdate:value":e[6]||(e[6]=n=>o.value.codigo=n),disabled:""},null,8,["value"])]),_:1}),t(E,{"has-feedback":"",name:"nombre"},{default:l(()=>[e[19]||(e[19]=d("label",null,"Postulante",-1)),t(h,{type:"text",value:v.value.nombre,"onUpdate:value":e[7]||(e[7]=n=>v.value.nombre=n),disabled:""},null,8,["value"])]),_:1}),t(E,{"has-feedback":"",name:"postulante"},{default:l(()=>[e[20]||(e[20]=d("label",null,"Programa",-1)),d("div",Le,[t(s,{ref:"select",value:o.value.id_programa,"onUpdate:value":e[8]||(e[8]=n=>o.value.id_programa=n),placeholder:"Seleccionar programa de estudios",options:R.value,allowClear:""},null,8,["value","options"])])]),_:1}),t(E,{"has-feedback":"",name:"tipo"},{default:l(()=>[e[23]||(e[23]=d("label",null,"Modalidad",-1)),t(s,{ref:"select",value:o.value.id_modalidad,"onUpdate:value":e[9]||(e[9]=n=>o.value.id_modalidad=n),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"}},{default:l(()=>[t(M,{value:8},{default:l(()=>e[21]||(e[21]=[_("EXAMEN GENERAL")])),_:1}),t(M,{value:7},{default:l(()=>e[22]||(e[22]=[_("CONADIS")])),_:1})]),_:1},8,["value"])]),_:1}),t(E,{"has-feedback":"",name:"nombre"},{default:l(()=>[e[24]||(e[24]=d("label",null,"Observaciones",-1)),t(ae,{type:"text",value:o.value.observacion,"onUpdate:value":e[10]||(e[10]=n=>o.value.observacion=n),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["open"])])],64)}}};export{oa as default};
