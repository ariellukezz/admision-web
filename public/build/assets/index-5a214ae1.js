import{r as i,x as _e,e as v,f as r,o as g,c as E,a as e,u as f,w as t,F as O,j as b,Z as ge,d as n,S as fe,k as be,b as d,t as N,g as T,E as ye,D as xe,s as Ae,n as Ie}from"./app-082124c5.js";import{L as Ee}from"./LayoutSimulacro-065ebc51.js";import{F as we}from"./FormOutlined-920b9cca.js";import"./DropdownLink-8d6ea15f.js";import"./logotiny-c4b525af.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./TopMenu-89bc8a5b.js";const Ce={class:"mb-4",style:{width:"100%"}},De={style:{background:"white","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},Re={class:"flex justify-end mt-5 mb-4 mr-4"},Ne={class:"flex justify-between",style:{position:"relative"}},Ve={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Se={key:1},he={class:"flex justify-between mb-6 mt-2 pr-4"},Te={clas:"",style:{scale:"0.9"}},ke={style:{display:"flex"}},Ue={key:0,style:{"font-weight":"bold","font-size":"1.1rem"}},Be={key:1,style:{"font-weight":"bold","font-size":"1.1rem"}},Le={class:"flex justify-center"},Pe=n("label",null,"Cod. Modular",-1),je=n("label",null,[d("Nombre del colegio"),n("span",{style:{color:"red"}},"*")],-1),ze=n("label",null,[d("Cod de local"),n("span",{style:{color:"red"}},"*")],-1),Oe=n("label",null,[d("Nivel"),n("span",{style:{color:"red"}},"*")],-1),qe=n("label",null,[d("Gestión"),n("span",{style:{color:"red"}},"*")],-1),Fe=n("label",null,[d("Ubicación: Dep/Prov/Dist "),n("span",{style:{color:"red"}},"*")],-1),Ge=n("label",null,"Dirección",-1),$e=n("label",null,"Observación",-1),Ke={class:"flex justify-end"},oo={__name:"index",setup(Ze){i([]);const w=i(""),C=i(1),k=i(null),y=i(10),x=i(!1),V=i(null),D=i(null),S=i([]),q=i(null),A=i(!1),F=i(),U=i(),B=i(),G=i(),$=i(),K=i(),Z=i(),J=i();i();const X=o=>{s.cod_modular=o.target.value.replace(/\D/g,"")},s=_e({cod_modular:"",nombre:"",cod_local:"",nivel:"",gestion:null,ubigeo:"",direccion:"",observacion:""}),L=i(null),M=async()=>{A.value=!0,setTimeout(()=>{console.log("Este código se ejecutará después de 2 segundos")},1500);try{const o=await L.value.validateFields(),a=await b.post("save",s);a.status===202?(console.log(a.data.errors),A.value=!1):(ee(),x.value=!1,oe("success",a.data.titulo,a.data.mensaje),A.value=!1)}catch(o){console.error(o),A.value=!1}},P=async()=>{b.post("/get-ubigeo",{term:D.value}).then(o=>{S.value=o.data.datos.data,console.log("Datos recibidos:",S)}).catch(o=>{o.response?console.error("Error de servidor:",o.response.data):o.request?console.error("Error de red:",o.request):console.error("Error de configuración:",o.message)})},j=i([]),R=async()=>{let o=await b.post("get-inscritos-simulacro?page="+C.value,{term:w.value,paginashoja:y.value});j.value=o.data.datos.data,k.value=o.data.datos.total};R();const z=async()=>{let o=await b.post("/get-departamentos-codigo",{term:U.value});F.value=o.data.datos.data},H=async()=>{let o=await b.post("/get-provincias-codigo?page=",{departamento:B.value});G.value=o.data.datos},Q=async o=>{let a=await b.post("/get-distritos-codigo?page=",{departamento:B.value,provincia:K.value});Z.value=a.data.datos};v(C,(o,a)=>{R()}),v(y,(o,a)=>{R()}),v(w,(o,a)=>{R()}),v(D,(o,a)=>{o.length>=3&&P()}),v(U,(o,a)=>{o.length>=3&&z()}),v($,(o,a)=>{o.length>=3&&H()}),v(J,(o,a)=>{o.length>=3&&Q()}),v(q,(o,a)=>{o.length>=3&&getColegios()});const W=(o,a)=>{s.ubigeo=a.key};z(),P();const Y=o=>{x.value=!0,s.id=o.id,s.cod_modular=o.cod_modular,s.nombre=o.nombre,s.cod_local=o.cod_local,s.gestion=o.gestion,s.nivel=o.nivel,s.ubigeo=o.ubigeo,V.value=o.lugar,s.direccion=o.direccion,s.observacion=o.observacion},ee=()=>{for(const o in s)s[o]=null},oe=(o,a,p)=>{Ie[o]({message:a,description:p})},ae=i([{title:"Nro_Doc",dataIndex:"nro_doc"},{title:"Nombres",dataIndex:"nombres",responsive:["xs","sm","md","lg"]},{title:"Programa",dataIndex:"programa",responsive:["md"]},{title:"Colegios",dataIndex:"colegio",responsive:["lg"]},{title:"Lugar",dataIndex:"lugar",responsive:["lg"]},{title:"Acciones",dataIndex:"acciones",width:"120px",align:"center"}]);return(o,a)=>{const p=r("a-input"),te=r("a-tag"),I=r("a-button"),le=r("a-popconfirm"),se=r("a-table"),ne=r("a-pagination"),u=r("a-select-option"),h=r("a-select"),m=r("a-form-item"),c=r("a-col"),ie=r("a-tooltip"),de=r("a-auto-complete"),re=r("a-textarea"),ue=r("a-row"),ce=r("a-form"),pe=r("row"),me=r("a-modal");return g(),E(O,null,[e(f(ge),{title:"Inscritos"}),e(Ee,null,{default:t(()=>[n("div",Ce,[n("div",De,[n("div",Re,[n("div",Ne,[e(p,{type:"text",placeholder:"Buscar",value:w.value,"onUpdate:value":a[0]||(a[0]=l=>w.value=l),style:{"max-width":"340px","padding-left":"30px","border-radius":"6px"}},null,8,["value"]),n("div",Ve,[e(f(fe))])])]),n("div",null,[e(se,{dataSource:j.value,size:"",columns:ae.value,pagination:!1},{bodyCell:t(({column:l,index:Je,record:_})=>[l.dataIndex==="nro_doc"?(g(),be(te,{key:0,color:"#4f4f4f",style:{width:"80px"}},{default:t(()=>[d(N(_.nro_doc),1)]),_:2},1024)):T("",!0),l.dataIndex==="nombres"?(g(),E("div",Se,[n("span",null,N(_.nombres)+" "+N(_.paterno)+" "+N(_.materno),1)])):T("",!0),l.dataIndex==="acciones"?(g(),E(O,{key:2},[e(I,{type:"success",class:"mr-1",style:{color:"#476175"},size:"small",disabled:""},{icon:t(()=>[e(f(ye))]),_:1}),e(I,{class:"mr-1",onClick:ve=>Y(_),style:{color:"blue"},size:"small",disabled:""},{icon:t(()=>[e(f(we))]),_:2},1032,["onClick"]),e(le,{title:"¿Estas seguro de eliminar?",onConfirm:ve=>o.eliminar(_),disabled:""},{default:t(()=>[e(I,{size:"small",style:{color:"crimson"},disabled:""},{icon:t(()=>[e(f(xe),{disabled:""})]),_:1})]),_:2},1032,["onConfirm"])],64)):T("",!0)]),_:1},8,["dataSource","columns"])]),n("div",he,[n("div",null,[e(ne,{current:C.value,"onUpdate:current":a[1]||(a[1]=l=>C.value=l),"page-size":y.value,simple:"",total:k.value,"show-less-items":""},null,8,["current","page-size","total"])]),n("div",Te,[e(h,{value:y.value,"onUpdate:value":a[2]||(a[2]=l=>y.value=l),style:{width:"90px"}},{default:t(()=>[e(u,{value:10},{default:t(()=>[d("10 Reg.")]),_:1}),e(u,{value:20},{default:t(()=>[d("20 Reg.")]),_:1}),e(u,{value:50},{default:t(()=>[d("50 Reg.")]),_:1}),e(u,{value:100},{default:t(()=>[d("100 Reg.")]),_:1})]),_:1},8,["value"])])])])]),e(me,{visible:x.value,"onUpdate:visible":a[14]||(a[14]=l=>x.value=l),footer:!1,centered:"",style:{width:"100%","max-width":"900px"}},{default:t(()=>[n("div",ke,[s.id===null?(g(),E("span",Ue,"Nuevo Colegio")):(g(),E("span",Be,"Editar Colegio"))]),n("div",Le,[e(pe,{style:{display:"flex","justify-content":"center"}},{default:t(()=>[e(c,{span:24},{default:t(()=>[e(ce,{ref_key:"formDatos",ref:L,name:"form",model:s,rules:o.formRules},{default:t(()=>[e(ue,{gutter:16,class:"mt-3"},{default:t(()=>[e(c,{xs:24,sm:12,md:8,lg:8},{default:t(()=>[Pe,e(m,{name:"cod_modular",rules:[{required:!0,message:"Ingrese el cod modular"},{min:7,message:"Debe tener 7 digitos",trigger:"blur"}]},{default:t(()=>[e(p,{value:s.cod_modular,"onUpdate:value":a[3]||(a[3]=l=>s.cod_modular=l),onInput:X,maxlength:7},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:16},{default:t(()=>[je,e(m,{name:"nombre",rules:[{required:!0,message:"Ingrese el nombre del colegio"}]},{default:t(()=>[e(p,{value:s.nombre,"onUpdate:value":a[4]||(a[4]=l=>s.nombre=l)},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:8},{default:t(()=>[ze,e(m,{name:"cod_local",rules:[{required:!0,message:"Ingrese el codigo del local"}]},{default:t(()=>[e(p,{value:s.cod_local,"onUpdate:value":a[5]||(a[5]=l=>s.cod_local=l)},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:8},{default:t(()=>[Oe,e(m,{name:"nivel",rules:[{required:!0,message:"Seleccione el nivel"}]},{default:t(()=>[e(h,{value:s.nivel,"onUpdate:value":a[6]||(a[6]=l=>s.nivel=l),style:{width:"100%"}},{default:t(()=>[e(u,{value:"SECUNDARIA"},{default:t(()=>[d("SECUNDARIA")]),_:1}),e(u,{value:"BASICA ALTERNATIVA"},{default:t(()=>[d("BASICA ALTERNATIVA")]),_:1}),e(u,{value:"BASICA ALTERNATIVA AVANZADO"},{default:t(()=>[d("BASICA ALTERNATIVA AVANZADO")]),_:1}),e(u,{value:"BÁSICA ALTERNATIVA SECUNDARIA"},{default:t(()=>[d("BÁSICA ALTERNATIVA SECUNDARIA")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:8},{default:t(()=>[qe,e(m,{name:"gestion",rules:[{required:!0,message:"Selecciona la gestión"}]},{default:t(()=>[e(h,{value:s.gestion,"onUpdate:value":a[7]||(a[7]=l=>s.gestion=l),style:{width:"100%"}},{default:t(()=>[e(u,{value:"PÚBLICA DE GESTIÓN DIRECTA"},{default:t(()=>[d("PÚBLICA DE GESTIÓN DIRECTA")]),_:1}),e(u,{value:"PRIVADA"},{default:t(()=>[d("PRIVADA")]),_:1}),e(u,{value:"PÚBLICA DE GESTIÓN PRIVADA"},{default:t(()=>[d("PÚBLICA DE GESTIÓN PRIVADA")]),_:1}),e(u,{value:"EXTRANJERO"},{default:t(()=>[d("EXTRANJERA")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:24,md:24,lg:12},{default:t(()=>[Fe,e(m,{name:"ubigeo"},{default:t(()=>[e(de,{value:V.value,"onUpdate:value":a[9]||(a[9]=l=>V.value=l),options:S.value,onSelect:W},{default:t(()=>[e(p,{placeholder:"Lugar",value:D.value,"onUpdate:value":a[8]||(a[8]=l=>D.value=l),onKeypress:o.handleKeyPress},{suffix:t(()=>[e(ie,{title:"Extra information"},{default:t(()=>[e(f(Ae))]),_:1})]),_:1},8,["value","onKeypress"])]),_:1},8,["value","options"])]),_:1})]),_:1}),e(c,{xs:24,sm:24,md:24,lg:12},{default:t(()=>[Ge,e(m,{name:"direccion"},{default:t(()=>[e(p,{value:s.direccion,"onUpdate:value":a[10]||(a[10]=l=>s.direccion=l)},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[$e,e(m,{name:"observacion"},{default:t(()=>[e(re,{value:s.observacion,"onUpdate:value":a[11]||(a[11]=l=>s.observacion=l)},null,8,["value"])]),_:1})]),_:1})]),_:1}),n("div",Ke,[n("div",null,[e(I,{type:"primary",class:"mr-2",onClick:a[12]||(a[12]=l=>x.value=!1),style:{"border-radius":"6px",background:"none",color:"#476175",border:"1px solid #476175"}},{default:t(()=>[d("Cancelar")]),_:1}),e(I,{type:"primary",onClick:a[13]||(a[13]=l=>M()),style:{"border-radius":"6px",background:"#476175",border:"none"},loading:A.value},{default:t(()=>[d("Guardar")]),_:1},8,["loading"])])])]),_:1},8,["model","rules"])]),_:1})]),_:1})])]),_:1},8,["visible"])]),_:1})],64)}}};export{oo as default};
