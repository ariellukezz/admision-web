import{r as u,e as F,C as Z,D as J,o as s,c as w,a,u as v,w as l,d as b,F as I,y as V,M as L,Z as Q,b as m,E as y,f as d,G as W,n as X,B as Y,I as ee,_ as oe,g as ae,H as te,h as le,i as ne,k as se,q as ie}from"./app-55b0f5ce.js";import{_ as ue}from"./AuthenticatedLayout-646b63d8.js";import{S as de}from"./SearchOutlined-aab33cde.js";import{E as re}from"./EyeOutlined-0476a071.js";import{F as me}from"./FormOutlined-8dc87a2b.js";import{D as pe}from"./DeleteOutlined-d6ac9703.js";import"./logotiny-c4b525af.js";import"./Header-9b46b246.js";import"./AntdIcon-f55e9e4a.js";import"./DownOutlined-8fb50513.js";/* empty css                                                            */const ve={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},ce={class:"mr-3"},fe={class:"flex justify-between",style:{position:"relative"}},_e={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Ee={__name:"index",setup(ge){const x=u(""),c=u([]);u([]);const r=u(!1),k=u(1),N=u(null),o=u({id:null,codigo:"",nombre:"",postulante:"",tipo:"",observacion:""}),j=()=>{r.value=!0};F(x,(t,e)=>{f()}),F(r,(t,e)=>{r.value==!1&&o.value.id!=null&&(o.value.id=null,o.value.codigo=null,o.value.nombre=null,o.value.postulante=null,o.value.tipo=null,o.value.observacion=null)}),F(k,(t,e)=>{f()});const O={labelCol:{span:7},wrapperCol:{span:14}},S={nombre:[{required:!0,validator:async(t,e)=>e===""?Promise.reject("Ingrese el nombre del documento"):Promise.resolve(),trigger:"change"}],codigo:[{required:!0,validator:async(t,e)=>e===""?Promise.reject("Ingrese el codigo del documento"):Promise.resolve(),trigger:"change"}]},D=t=>{r.value=!0,o.value.id=t.id,o.value.codigo=t.codigo,o.value.nombre=t.nombre,o.value.postulante=t.postulante,o.value.tipo=t.tipo,o.value.observacion=t.observacion},f=async(t="")=>{let e=await V.post("get-documentos-admin?page="+k.value,{term:x.value});c.value=e.data.datos.data,N.value=e.data.datos.total},$=()=>{let t={id:o.value.id,codigo:o.value.codigo,nombre:o.value.nombre,observacion:o.value.observacion};V.post("save-documento",t).then(e=>{f(),h("success",e.data.titulo,e.data.mensaje),r.value=!1,o.value.codigo=null,o.value.id=null,o.value.nombre=""})},z=t=>{V.get("eliminar-modalidad/"+t.id).then(e=>{f(),h("warning",e.data.titulo,e.data.mensaje)})},R=[{title:"ID",dataIndex:"id"},{title:"Codigo",dataIndex:"codigo"},{title:"Nombre",dataIndex:"nombre"},{title:"Tipo",dataIndex:"tipo"},{title:"DNI P.",dataIndex:"dni"},{title:"Postulante",dataIndex:"postulante"},{title:"Estado",dataIndex:"estado"},{title:"Verificado",dataIndex:"verificado",align:"center"},{title:"Observación",dataIndex:"observacion"},{title:"Acciones",dataIndex:"acciones"}],P=u([]),q=t=>{console.log("selectedRowKeys changed: ",t),P.value=t};Z(()=>({selectedRowKeys:v(P),onChange:q,hideDefaultSelections:!0}));const h=(t,e,i)=>{X[t]({message:e,description:i})};return f(),(t,e)=>{const i=Y,p=ee,M=J("row"),C=oe,E=ae,T=te,G=le,K=ne,_=se,A=ie,H=L;return s(),w(I,null,[a(v(Q),{title:"Documentos"}),a(ue,null,{default:l(()=>[b("div",ve,[a(M,{class:"flex justify-between mb-4"},{default:l(()=>[b("div",ce,[a(i,{type:"primary",disabled:"",onClick:j},{default:l(()=>e[9]||(e[9]=[m("Nuevo")])),_:1})]),b("div",fe,[a(p,{type:"text",placeholder:"Buscar",value:x.value,"onUpdate:value":e[0]||(e[0]=n=>x.value=n),style:{"max-width":"300px","padding-left":"30px"}},null,8,["value"]),b("div",_e,[a(v(de))])])]),_:1}),a(G,{columns:R,"data-source":c.value,pagination:!1,size:"small"},{bodyCell:l(({column:n,index:U,record:g})=>[n.dataIndex==="estado"?(s(),w(I,{key:0},[g.estado===0?(s(),y(C,{key:0,color:"red"},{default:l(()=>e[10]||(e[10]=[m("false")])),_:1})):d("",!0),g.estado===1?(s(),y(C,{key:1,color:"blue"},{default:l(()=>e[11]||(e[11]=[m("En uso")])),_:1})):d("",!0)],64)):d("",!0),n.dataIndex==="verificado"?(s(),w(I,{key:1},[g.verificado===0?(s(),y(C,{key:0,color:"error"},{default:l(()=>e[12]||(e[12]=[m("no verificado")])),_:1})):d("",!0),g.verificado===1?(s(),y(C,{key:1,color:"success"},{default:l(()=>e[13]||(e[13]=[m("verificado")])),_:1})):d("",!0)],64)):d("",!0),n.dataIndex==="acciones"?(s(),w(I,{key:2},[a(i,{type:"success",disabled:"",style:{background:"green",color:"white"},onClick:B=>D(c.value[U]),size:"small"},{icon:l(()=>[a(v(re))]),_:2},1032,["onClick"]),a(E,{type:"vertical"}),a(i,{type:"primary",onClick:B=>D(g),size:"small"},{icon:l(()=>[a(v(me))]),_:2},1032,["onClick"]),a(E,{type:"vertical"}),c.value.length?(s(),y(T,{key:0,title:"¿Estas seguro de eliminar?",onConfirm:B=>z(c.value[U])},{default:l(()=>[a(i,{type:"danger",shape:"",size:"small"},{icon:l(()=>[a(v(pe))]),_:1})]),_:2},1032,["onConfirm"])):d("",!0)],64)):d("",!0)]),_:1},8,["data-source"]),a(K,{current:k.value,"onUpdate:current":e[1]||(e[1]=n=>k.value=n),total:N.value,"show-less-items":""},null,8,["current","total"])])]),_:1}),b("div",null,[a(H,{visible:r.value,"onUpdate:visible":e[8]||(e[8]=n=>r.value=n),title:"Nuevo Documento",style:{"margin-top":"-40px"}},{footer:l(()=>[a(i,{style:{"margin-left":"10px"},onClick:t.resetForm},{default:l(()=>e[14]||(e[14]=[m("Cancelar")])),_:1},8,["onClick"]),a(i,{type:"primary",onClick:e[7]||(e[7]=n=>$())},{default:l(()=>e[15]||(e[15]=[m("Guardar")])),_:1})]),default:l(()=>[a(A,W({ref:"formRef",name:"custom-validation",model:t.formState,rules:S},O,{onFinish:t.handleFinish,onValidate:t.handleValidate,onFinishFailed:t.handleFinishFailed}),{default:l(()=>[a(_,{"has-feedback":"",label:"Codigo",name:"codigo"},{default:l(()=>[a(p,{type:"text",value:o.value.codigo,"onUpdate:value":e[2]||(e[2]=n=>o.value.codigo=n),autocomplete:"off"},null,8,["value"])]),_:1}),a(_,{"has-feedback":"",label:"Nombre",name:"nombre"},{default:l(()=>[a(p,{type:"text",value:o.value.nombre,"onUpdate:value":e[3]||(e[3]=n=>o.value.nombre=n),autocomplete:"off"},null,8,["value"])]),_:1}),a(_,{"has-feedback":"",label:"Postulante",name:"postulante"},{default:l(()=>[a(p,{disabled:"",type:"text",value:o.value.postulante,"onUpdate:value":e[4]||(e[4]=n=>o.value.postulante=n),autocomplete:"off"},null,8,["value"])]),_:1}),a(_,{"has-feedback":"",label:"Tipo",name:"tipo"},{default:l(()=>[a(p,{disabled:"",type:"text",value:o.value.tipo,"onUpdate:value":e[5]||(e[5]=n=>o.value.tipo=n),autocomplete:"off"},null,8,["value"])]),_:1}),a(_,{"has-feedback":"",label:"Observacion",name:"nombre"},{default:l(()=>[a(p,{type:"text",value:o.value.observacion,"onUpdate:value":e[6]||(e[6]=n=>o.value.observacion=n),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["visible"])])],64)}}};export{Ee as default};
