import{a,a3 as Q,r as i,e as b,C as W,D as X,o as p,c as _,u as h,w as c,F as A,y as k,Z as Y,d as s,b as I,t as N,f as w,n as E,j as ee,I as te,_ as ae,B as ne,h as oe,i as le}from"./app-0034f043.js";import{_ as se}from"./AuthenticatedLayout-0755e9ed.js";import{C as ie}from"./CheckOutlined-b752310d.js";import{A as re}from"./AntdIcon-748582a6.js";import{S as de}from"./SearchOutlined-18fd4aad.js";import"./logotiny-c4b525af.js";import"./Header-3addd6c1.js";import"./DropdownLink-bdc7cf9c.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./DownOutlined-47092423.js";/* empty css                                                            */function $(d){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?Object(arguments[n]):{},v=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(o).filter(function(m){return Object.getOwnPropertyDescriptor(o,m).enumerable}))),v.forEach(function(m){ue(d,m,o[m])})}return d}function ue(d,n,o){return n in d?Object.defineProperty(d,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):d[n]=o,d}var j=function(n,o){var v=$({},n,o.attrs);return a(re,$({},v,{icon:Q}),null)};j.displayName="EditOutlined";j.inheritAttrs=!1;const ce=j;const ve={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 98px)"}},pe={class:"mr-3"},_e={class:"flex justify-between",style:{position:"relative"}},me={style:{}},ge={key:0,class:"editable-cell"},fe={key:0,class:"editable-cell-input-wrapper"},he={key:1,class:"editable-cell-text-wrapper"},we={key:1,class:"flex",style:{"justify-content":"center"}},xe={key:0},ye={key:1},be={class:"flex",style:{"justify-content":"flex-end"}},Ae={__name:"index",setup(d){const n=i(""),o=i(1),v=i(null),m=i([]),x=i(1),C=i(!1),M=i(""),O=i([]),l=i({id:null,codigo:"",nombre:"",vacantes:"",estado:!0});b(n,(e,t)=>{f()}),b(M,(e,t)=>{getDepartamentos()}),b(C,(e,t)=>{C.value==!1&&l.value.id!=null&&(l.value.id=null,l.value.codigo=null,l.value.nombre=null,l.value.estado=!0)}),b(o,(e,t)=>{f()});const R=e=>{C.value=!0,l.value.id=e.id,l.value.codigo=e.codigo,l.value.nombre=e.nombre,l.value.nivel_academico=e.nivel_academico,l.value.tipo_autorizacion=e.tipo_autorizacion,l.value.id_facultad=e.id_fac,e.estado==1?l.value.estado=!0:l.value.estado=!1,l.value.area=e.area},U=async()=>{let e=await k.get("get-modalidades-activas");m.value=e.data.datos},f=async(e="")=>{let t=await k.post("get-vacantes-admin?page="+o.value,{term:n.value});O.value=t.data.datos.data,v.value=t.data.datos.total},F=e=>{k.post("delete-vacante",{id_vacante:e.id_vacante}).then(t=>{f(),G("warning","PROGRAMA ELIMINADO",t.data.mensaje)})},H=[{title:"Cod",dataIndex:"codigo_sunedu",width:"60px",align:"center",responsive:["md"]},{title:"Nombre",dataIndex:"programa"},{title:"Vacantes",dataIndex:"vacantes",width:"160px",align:"center",responsive:["md"]},{title:"Estado",dataIndex:"estado",align:"center",width:"60px",responsive:["md"]},{title:"",dataIndex:"acciones",width:"70px",align:"center"}],P=i([]),L=e=>{console.log("selectedRowKeys changed: ",e),P.value=e};W(()=>({selectedRowKeys:h(P),onChange:L,hideDefaultSelections:!0}));const G=(e,t,V)=>{E[e]({message:t,description:V})};U(),f();const y=i({}),T=e=>{y.value[e]={...O.value.find(t=>t.key===e)}},Z=i({id_modalidad:x.value,id_programa:null,estado:null,vacantes:null}),z=e=>{Z.value=e,delete y.value[e.id_programa],k.post("save-numero-vacantes",{id_vacante:e.id_vacante,id_programa:e.id_programa,vacantes:e.vacantes,id_modalidad:x.value}).then(()=>{E.success({message:"Registro actualizado"}),f()}).catch(()=>{E.error({message:"Error al actualizar"})})};return(e,t)=>{const V=ee,S=te,q=X("row"),B=ae,D=ne,J=oe,K=le;return p(),_(A,null,[a(h(Y),{title:"Procesos"}),a(se,null,{default:c(()=>[s("div",ve,[a(q,{class:"flex justify-between mb-4"},{default:c(()=>[s("div",pe,[a(V,{ref:"select",value:x.value,"onUpdate:value":t[0]||(t[0]=u=>x.value=u),options:m.value,onFocus:e.focus,onChange:e.handleChange},null,8,["value","options","onFocus","onChange"])]),s("div",_e,[a(S,{type:"text",placeholder:"Buscar",value:n.value,"onUpdate:value":t[1]||(t[1]=u=>n.value=u),style:{"max-width":"300px"}},{prefix:c(()=>[a(h(de))]),_:1},8,["value"])])]),_:1}),s("div",me,[a(J,{columns:H,"data-source":O.value,pagination:!1,size:"small",scroll:{x:380,y:"calc(100vh - 240px)"}},{bodyCell:c(({column:u,index:ke,record:r})=>[u.dataIndex==="vacantes"?(p(),_("div",ge,[y.value[r.id_programa]?(p(),_("div",fe,[a(S,{value:r.vacantes,"onUpdate:value":g=>r.vacantes=g,onPressEnter:g=>z(r)},{prefix:c(()=>t[3]||(t[3]=[s("div",null,null,-1)])),_:2},1032,["value","onUpdate:value","onPressEnter"]),a(h(ie),{class:"editable-cell-icon-check",onClick:g=>z(r)},null,8,["onClick"])])):(p(),_("div",he,[I(N(r.vacantes||" ")+" ",1),a(h(ce),{class:"editable-cell-icon",onClick:g=>T(r.id_programa)},null,8,["onClick"])]))])):w("",!0),u.dataIndex==="estado"?(p(),_("div",we,[r.estado==1?(p(),_("div",xe,[a(B,{color:"blue"},{default:c(()=>t[4]||(t[4]=[I("Activo")])),_:1})])):w("",!0),r.estado==0?(p(),_("div",ye,[a(B,{color:"red"},{default:c(()=>t[5]||(t[5]=[I("Inactivo")])),_:1})])):w("",!0)])):w("",!0),u.dataIndex==="acciones"?(p(),_(A,{key:2},[a(D,{type:"",onClick:g=>R(r),style:{"border-radius":"4px","margin-right":"4px",background:"#e5e5e5",color:"#1890ff"},size:"small"},{icon:c(()=>t[6]||(t[6]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit"},[s("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])),_:2},1032,["onClick"]),a(D,{type:"",class:"",onClick:g=>F(r),style:{"border-radius":"4px",background:"#e5e5e5",color:"red"},shape:"",size:"small"},{icon:c(()=>t[7]||(t[7]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[s("polyline",{points:"3 6 5 6 21 6"}),s("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])),_:2},1032,["onClick"])],64)):w("",!0)]),_:1},8,["data-source"])]),s("div",null,N(y.value),1),s("div",be,[a(K,{current:o.value,"onUpdate:current":t[2]||(t[2]=u=>o.value=u),simple:"","page-size":"50",total:v.value},null,8,["current","total"])])])]),_:1})],64)}}};export{Ae as default};
