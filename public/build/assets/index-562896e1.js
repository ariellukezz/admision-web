import{r as u,e as I,C as Y,D as ee,o as i,c as _,a as o,u as g,w as l,d as s,F as U,y as z,M as ae,Z as oe,E as f,t as F,f as p,b as m,G as te,n as ne,j as le,I as ie,_ as se,B as de,g as ue,H as re,h as pe,i as me,k as ve,S as ce,p as _e,q as ge}from"./app-e5730594.js";import{_ as fe}from"./AuthenticatedLayout-0e66d49f.js";import{S as be}from"./SearchOutlined-4e0c3639.js";import{P as ye}from"./PrinterOutlined-4b28acd6.js";import{F as xe}from"./FormOutlined-16890868.js";import{D as we}from"./DeleteOutlined-03d457b2.js";import"./logotiny-c4b525af.js";import"./Header-772d6509.js";import"./AntdIcon-d77a19ca.js";import"./DownOutlined-077bfda8.js";/* empty css                                                            */const ke={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},Ce={class:"mr-3"},Ie={class:"flex justify-between",style:{position:"relative"}},Fe={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Se={style:{"font-size":"1rem","font-weight":"bold"}},Ve={key:1,style:{"font-size":"0.95rem"}},Ue={key:3},ze={class:""},Ke={__name:"index",setup(De){const $=window.location.origin,b=u(null),S=u(""),D=u([]),c=u(!1),y=u(1),P=u(null),V=u(20),n=u({id:null,codigo:"",id_posulante:"",id_programa:"",id_modalidad:"",estado:!0,observacion:""}),r=u({id:"",nombre:"",dni:""});I(S,(a,e)=>{v()}),I(V,(a,e)=>{v()}),I(b,(a,e)=>{a==0&&(b.value=null),y.value=1,v()}),I(c,(a,e)=>{c.value==!1&&n.value.id!=null&&(n.value.id=null,n.value.codigo="",n.value.id_posulante="",n.value.id_programa="",n.value.id_modalidad="",n.value.estado=!0,n.value.observacion="",r.value.nombre=null,r.value.dni=null,r.value.id=null)}),I(y,(a,e)=>{v()});const R=a=>{c.value=!0,n.value.id=a.id,n.value.codigo=a.codigo,n.value.id_programa=a.id_programa,n.value.id_modalidad=a.id_modalidad,n.value.observacion=a.observaciones,r.value.id=a.id_postulante,r.value.dni=a.dni,r.value.nombre=a.dni+" - "+a.nombres+" "+a.paterno+" "+a.materno},v=async()=>{let a=await z.post("get-inscripciones-admin?page="+y.value,{term:S.value,paginashoja:V.value,programa:b.value});D.value=a.data.datos.data,P.value=a.data.datos.total},E=u([]);(async()=>{let a=await z.get("get-select-programas-proceso-admin");E.value=a.data.datos})();const G=()=>{let a={id:n.value.id,id_postulante:r.value.id,id_programa:n.value.id_programa,id_modalidad:n.value.id_modalidad,observacion:n.value.observacion,dni:r.value.dni};z.post("actualizar-inscripcion",a).then(e=>{v(),A("success",e.data.titulo,e.data.mensaje),c.value=!1})},L=a=>{z.get("eliminar-modalidad/"+a.id).then(e=>{v(),A("warning",e.data.titulo,e.data.mensaje)})},H=[{title:"Codigo",dataIndex:"codigo"},{title:"DNI",dataIndex:"dni",align:"center"},{title:"Postulante",dataIndex:"postulante"},{title:"Programa",dataIndex:"programa"},{title:"Modalidad",dataIndex:"modalidad",align:"center"},{title:"Estado",dataIndex:"estado",align:"center"},{title:"Observación",dataIndex:"observacion"},{title:"Acciones",dataIndex:"acciones",width:"140px",align:"center"}],N=u([]),K=a=>{console.log("selectedRowKeys changed: ",a),N.value=a};Y(()=>({selectedRowKeys:g(N),onChange:K,hideDefaultSelections:!0}));const A=(a,e,x)=>{ne[a]({message:e,description:x})},T=a=>{var e=document.createElement("iframe");e.style.display="none",e.src=$+"/documentos/6/inscripciones/constancias/"+a+".pdf",document.body.appendChild(e),e.contentWindow.focus(),e.contentWindow.print()};return v(),(a,e)=>{const x=le,O=ie,W=ee("row"),w=se,k=de,B=ue,h=re,q=pe,X=me,C=ve,j=ce,Z=_e,J=ge,Q=ae;return i(),_(U,null,[o(g(oe),{title:"Documentos"}),o(fe,null,{default:l(()=>[s("div",ke,[o(W,{class:"flex justify-between mb-4"},{default:l(()=>[s("div",Ce,[o(x,{ref:"select",value:b.value,"onUpdate:value":e[0]||(e[0]=t=>b.value=t),placeholder:"Seleccionar programa de estudios",options:E.value,allowClear:""},null,8,["value","options"])]),s("div",Ie,[o(O,{type:"text",placeholder:"Buscar",value:S.value,"onUpdate:value":e[1]||(e[1]=t=>S.value=t),style:{"max-width":"300px","padding-left":"30px"}},null,8,["value"]),s("div",Fe,[o(g(be))])])]),_:1}),o(q,{columns:H,"data-source":D.value,pagination:!1,size:"small"},{bodyCell:l(({column:t,index:Oe,record:d})=>[t.dataIndex==="codigo"?(i(),f(w,{key:0,color:"blue",style:{"padding-top":"3px",color:"#164753",width:"116px"}},{default:l(()=>[s("span",Se,F(d.codigo),1)]),_:2},1024)):p("",!0),t.dataIndex==="postulante"?(i(),_("span",Ve,F(d.paterno)+" "+F(d.materno)+", "+F(d.nombres),1)):p("",!0),t.dataIndex==="estado"?(i(),_(U,{key:2},[d.estado===0?(i(),f(w,{key:0,color:"blue"},{default:l(()=>e[11]||(e[11]=[m("HABILITADO")])),_:1})):(i(),f(w,{key:1,color:"error"},{default:l(()=>e[12]||(e[12]=[m("ANULADO")])),_:1}))],64)):p("",!0),t.dataIndex==="programa"?(i(),_("div",Ue,F(d.programa),1)):p("",!0),t.dataIndex==="verificado"?(i(),_(U,{key:4},[d.verificado===0?(i(),f(w,{key:0,color:"error"},{default:l(()=>e[13]||(e[13]=[m("no verificado")])),_:1})):p("",!0),d.verificado===1?(i(),f(w,{key:1,color:"success"},{default:l(()=>e[14]||(e[14]=[m("verificado")])),_:1})):p("",!0)],64)):p("",!0),t.dataIndex==="acciones"?(i(),_(U,{key:5},[o(k,{type:"success",style:{color:"#164753"},onClick:M=>T(d.dni),size:"small"},{icon:l(()=>[o(g(ye))]),_:2},1032,["onClick"]),o(B,{type:"vertical"}),o(k,{type:"",style:{color:"#af7200"},onClick:M=>R(d),size:"small"},{icon:l(()=>[o(g(xe))]),_:2},1032,["onClick"]),o(B,{type:"vertical"}),D.value.length?(i(),f(h,{key:0,title:"¿Estas seguro de eliminar?",disabled:"",onConfirm:M=>L(d)},{default:l(()=>[o(k,{style:{color:"crimson"},shape:"",size:"small"},{icon:l(()=>[o(g(we))]),_:1})]),_:2},1032,["onConfirm"])):p("",!0)],64)):p("",!0)]),_:1},8,["data-source"]),o(X,{current:y.value,"onUpdate:current":e[2]||(e[2]=t=>y.value=t),total:P.value,pageSize:V.value,"onUpdate:pageSize":e[3]||(e[3]=t=>V.value=t),"show-less-items":""},null,8,["current","total","pageSize"])])]),_:1}),s("div",null,[o(Q,{open:c.value,"onUpdate:open":e[10]||(e[10]=t=>c.value=t),title:"Modificar Inscripción",style:{"margin-top":"-40px"}},{footer:l(()=>[o(k,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:l(()=>e[22]||(e[22]=[m("Cancelar")])),_:1},8,["onClick"]),o(k,{type:"primary",onClick:e[9]||(e[9]=t=>G())},{default:l(()=>e[23]||(e[23]=[m("Guardar")])),_:1})]),default:l(()=>[o(J,te({ref:"formRef",name:"custom-validation",model:a.formState},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:l(()=>[o(C,{"has-feedback":"",name:"codigo"},{default:l(()=>[e[15]||(e[15]=s("label",null,"Codigo",-1)),o(O,{type:"text",value:n.value.codigo,"onUpdate:value":e[4]||(e[4]=t=>n.value.codigo=t),disabled:""},null,8,["value"])]),_:1}),o(C,{"has-feedback":"",name:"nombre"},{default:l(()=>[e[16]||(e[16]=s("label",null,"Postulante",-1)),o(O,{type:"text",value:r.value.nombre,"onUpdate:value":e[5]||(e[5]=t=>r.value.nombre=t),disabled:""},null,8,["value"])]),_:1}),o(C,{"has-feedback":"",name:"postulante"},{default:l(()=>[e[17]||(e[17]=s("label",null,"Programa",-1)),s("div",ze,[o(x,{ref:"select",value:n.value.id_programa,"onUpdate:value":e[6]||(e[6]=t=>n.value.id_programa=t),placeholder:"Seleccionar programa de estudios",options:E.value,allowClear:""},null,8,["value","options"])])]),_:1}),o(C,{"has-feedback":"",name:"tipo"},{default:l(()=>[e[20]||(e[20]=s("label",null,"Modalidad",-1)),o(x,{ref:"select",value:n.value.id_modalidad,"onUpdate:value":e[7]||(e[7]=t=>n.value.id_modalidad=t),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"}},{default:l(()=>[o(j,{value:8},{default:l(()=>e[18]||(e[18]=[m("EXAMEN GENERAL")])),_:1}),o(j,{value:7},{default:l(()=>e[19]||(e[19]=[m("CONADIS")])),_:1})]),_:1},8,["value"])]),_:1}),o(C,{"has-feedback":"",name:"nombre"},{default:l(()=>[e[21]||(e[21]=s("label",null,"Observaciones",-1)),o(Z,{type:"text",value:n.value.observacion,"onUpdate:value":e[8]||(e[8]=t=>n.value.observacion=t),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["open"])])],64)}}};export{Ke as default};
