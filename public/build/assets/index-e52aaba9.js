import{r as s,e as _,i as L,c as V,a as o,u as c,w as l,d as v,F as N,j as b,g as i,o as y,X as T,b as h,S as X,k as H,D as J,f as I,m as Q,n as W}from"./app-7831c28e.js";import{A as Y}from"./AuthenticatedLayout-f73e2cb1.js";import{F as Z}from"./FormOutlined-c1d0658f.js";import"./DropdownLink-86853b78.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logotiny-c4b525af.js";const ee={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},ae={class:"mr-3"},oe={class:"flex justify-between",style:{position:"relative"}},te={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},ve={__name:"index",setup(le){const p=s(""),u=s([]);s([]);const d=s(!1),f=s(1),C=s(null),t=s({id:null,codigo:"",nombre:""}),P=()=>{d.value=!0};_(p,(a,e)=>{m()}),_(d,(a,e)=>{d.value==!1&&t.value.id!=null&&(t.value.id=null,t.value.codigo=null,t.value.nombre=null)}),_(f,(a,e)=>{m()});const j={labelCol:{span:7},wrapperCol:{span:14}},U={nombre:[{required:!0,validator:async(a,e)=>e===""?Promise.reject("Ingrese su el nombre del filial"):Promise.resolve(),trigger:"change"}],codigo:[{required:!0,validator:async(a,e)=>e===""?Promise.reject("Ingrese la sede del filial"):Promise.resolve(),trigger:"change"}]};s([]);const B=a=>{d.value=!0,t.value.id=a.id,t.value.codigo=a.codigo,t.value.nombre=a.nombre},m=async(a="")=>{let e=await b.post("get-colegios-admin?page="+f.value,{term:p.value});u.value=e.data.datos.data,C.value=e.data.datos.total},S=()=>{let a={id:t.value.id,codigo:t.value.codigo,nombre:t.value.nombre};b.post("save-modalidad",a).then(e=>{m(),x("success",e.data.titulo,e.data.mensaje),d.value=!1,t.value.codigo=null,t.value.id=null,t.value.nombre=""})},D=a=>{b.get("eliminar-modalidad/"+a.id).then(e=>{m(),x("warning",e.data.titulo,e.data.mensaje)})},R=[{title:"ID",dataIndex:"id"},{title:"Codigo",dataIndex:"cod_modular"},{title:"Nombre",dataIndex:"nombre"},{title:"Ubigeo",dataIndex:"ubigeo"},{title:"Acciones",dataIndex:"acciones"}],w=s([]),z=a=>{console.log("selectedRowKeys changed: ",a),w.value=a};L(()=>({selectedRowKeys:c(w),onChange:z,hideDefaultSelections:!0}));const x=(a,e,r)=>{W[a]({message:e,description:r})};return m(),(a,e)=>{const r=i("a-button"),g=i("a-input"),A=i("row"),E=i("a-divider"),O=i("a-popconfirm"),$=i("a-table"),q=i("a-pagination"),k=i("a-form-item"),K=i("a-form"),M=i("a-modal");return y(),V(N,null,[o(c(T),{title:"Colegios"}),o(Y,null,{default:l(()=>[v("div",ee,[o(A,{class:"flex justify-between mb-4"},{default:l(()=>[v("div",ae,[o(r,{type:"primary",onClick:P},{default:l(()=>[h("Nuevo")]),_:1})]),v("div",oe,[o(g,{type:"text",placeholder:"Buscar",value:p.value,"onUpdate:value":e[0]||(e[0]=n=>p.value=n),style:{"max-width":"300px","padding-left":"30px"}},null,8,["value"]),v("div",te,[o(c(X))])])]),_:1}),o($,{columns:R,"data-source":u.value,pagination:!1,size:"small"},{bodyCell:l(({column:n,index:F})=>[n.dataIndex==="acciones"?(y(),V(N,{key:0},[o(r,{type:"primary",onClick:G=>B(u.value[F]),size:"small"},{icon:l(()=>[o(c(Z))]),_:2},1032,["onClick"]),o(E,{type:"vertical"}),u.value.length?(y(),H(O,{key:0,title:"Â¿Estas seguro de eliminar?",onConfirm:G=>D(u.value[F])},{default:l(()=>[o(r,{type:"danger",shape:"",size:"small"},{icon:l(()=>[o(c(J))]),_:1})]),_:2},1032,["onConfirm"])):I("",!0)],64)):I("",!0)]),_:1},8,["data-source"]),o(q,{current:f.value,"onUpdate:current":e[1]||(e[1]=n=>f.value=n),total:C.value,"show-less-items":""},null,8,["current","total"])])]),_:1}),v("div",null,[o(M,{visible:d.value,"onUpdate:visible":e[5]||(e[5]=n=>d.value=n),title:"Nuevo Programa",style:{"margin-top":"-40px"}},{footer:l(()=>[o(r,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:l(()=>[h("Cancelar")]),_:1},8,["onClick"]),o(r,{type:"primary",onClick:e[4]||(e[4]=n=>S())},{default:l(()=>[h("Guardar")]),_:1})]),default:l(()=>[o(K,Q({ref:"formRef",name:"custom-validation",model:a.formState,rules:U},j,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:l(()=>[o(k,{"has-feedback":"",label:"Codigo",name:"codigo"},{default:l(()=>[o(g,{type:"text",value:t.value.codigo,"onUpdate:value":e[2]||(e[2]=n=>t.value.codigo=n),autocomplete:"off"},null,8,["value"])]),_:1}),o(k,{"has-feedback":"",label:"Nombre",name:"nombre"},{default:l(()=>[o(g,{type:"text",value:t.value.nombre,"onUpdate:value":e[3]||(e[3]=n=>t.value.nombre=n),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["visible"])])],64)}}};export{ve as default};
