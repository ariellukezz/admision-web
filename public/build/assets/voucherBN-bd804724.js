import{r as y,e as z,f as v,o,c as i,a as d,w as s,d as p,b as r,F as b,s as A,t as k,g as l,l as _,n as M}from"./app-f31827be.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";const G={class:"flex pr-6",style:{width:"100%","justify-content":"end","margin-top":"-30px","margin-bottom":"16px"}},R={key:0},L={key:0},U={key:0},q={key:1},H={key:1},J={class:"pt-5",style:{width:"100%"}},K={key:0},Q={key:0},W={key:0},X={key:1},Y={key:1},Z={__name:"voucherBN",props:["dni","proceso"],setup(j){const f=y(!1);y([]);const u=j,h=y([]),B=y([]),O=async()=>{let t=await _.get("/get-pago-caja/"+u.dni);B.value=t.data},S=y([]),x=async()=>{let t=await _.get("/get-pago-BN/"+u.dni);S.value=t.data},w=async t=>{let a={dni:u.dni,operacion:t.paymentTitle,fecha:t.paymentDatetime,monto:t.paymentAmount};if(t.status)t.status==1?(await _.get("/eliminar-pago/"+a.dni+"/"+a.operacion),m(),x(),t.status=0):t.status=1;else{let n=await _.post("/insertar-pago",{pag:a});m(),x(),$("success",n.data.titulo,n.data.mensaje)}},I=async t=>{let a={dni:u.dni,operacion:t.paymentId,fecha:t.date,monto:t.amount};if(t.status)t.status==1?(await _.get("/eliminar-pago/"+a.dni+"/"+a.operacion),t.status=0,m()):t.status=1;else{t.status=1;let n=await _.post("/insertar-pago",{pag:a});m(),$(n.data.type,n.data.titulo,n.data.mensaje)}},m=async t=>{let a=await _.get("/get-pagos-dni/"+u.dni);h.value=a.data.data};z(()=>u.dni,async t=>{u.dni.length===8&&/^[0-9]+$/.test(u.dni)&&(await O(),await x(),await m())});const V=[{title:"N° Operación",dataIndex:"operacion"},{title:"Nombres",dataIndex:"nombres"},{title:"Fecha",dataIndex:"fecha"},{title:"Concepto",dataIndex:"concepto"},{title:"Monto",dataIndex:"monto"}],D=[{title:"N° Operación",dataIndex:"paymentId"},{title:"Nombres",dataIndex:"client"},{title:"Fecha",dataIndex:"date"},{title:"Concepto",dataIndex:"description"},{title:"Monto",dataIndex:"amount"},{title:"",dataIndex:"opcion",align:"center"}],F=[{title:"N° Operación",dataIndex:"paymentTitle"},{title:"Fecha",dataIndex:"paymentDatetime"},{title:"Concepto",dataIndex:"concepto"},{title:"Monto",dataIndex:"paymentAmount",align:"center"},{title:"",dataIndex:"opcion",align:"center"}];y([{paymentId:"2177229",document:"000000070080972",code:"000000000000000",client:"TICONA PONGO TANIA ROSARIO DEL",universityId:"000000000000000",description:"00000028",amount:"21.00",date:"2024-02-27 14:20",status:"0"}]);const $=(t,a,n)=>{M[t]({message:a,description:n})};return(t,a)=>{const n=v("a-button"),C=v("a-tag"),N=v("a-table"),T=v("a-modal"),P=v("a-row");return o(),i("div",null,[d(P,{gutter:16,class:"mb-3"},{default:s(()=>[p("div",G,[d(n,{onClick:a[0]||(a[0]=c=>f.value=!0),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>[r("Agregar Pagos")]),_:1})]),d(N,{dataSource:h.value,columns:V,pagination:!1,size:"small",style:{width:"100%"}},{bodyCell:s(({column:c,record:e})=>[c.dataIndex==="proceso"?(o(),i(b,{key:0},[e.id_modalidad_proceso===3?(o(),A(C,{key:0,color:"pink"},{default:s(()=>[r(k(e.proceso),1)]),_:2},1024)):l("",!0),e.id_modalidad_proceso===2?(o(),A(C,{key:1,color:"orange"},{default:s(()=>[r(k(e.proceso),1)]),_:2},1024)):l("",!0),e.id_modalidad_proceso===1?(o(),A(C,{key:2,color:"blue"},{default:s(()=>[r(k(e.proceso),1)]),_:2},1024)):l("",!0)],64)):l("",!0)]),_:1},8,["dataSource"]),h.value?(o(),i("div",R,[p("div",null,k(),1)])):l("",!0),d(T,{visible:f.value,"onUpdate:visible":a[2]||(a[2]=c=>f.value=c),width:"900px"},{footer:s(()=>[p("div",null,[d(n,{style:{background:"#133466",color:"white",border:"none"},onClick:a[1]||(a[1]=c=>f.value=!1)},{default:s(()=>[r("Aceptar")]),_:1})])]),default:s(()=>[p("div",null,[d(N,{dataSource:S.value,columns:D,pagination:!1,size:"small",style:{width:"100%"}},{bodyCell:s(({column:c,record:e})=>[c.dataIndex==="opcion"?(o(),i(b,{key:0},[c.dataIndex==="opcion"?(o(),i(b,{key:0},[e.status?(o(),i("div",L,[e.status===0?(o(),i("div",U,[d(n,{onClick:g=>I(e),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>[r(" seleccionar ")]),_:2},1032,["onClick"])])):l("",!0),e.status===1?(o(),i("div",q,[d(n,{onClick:g=>I(e),style:{background:"crimson","border-radius":"5px",border:"none",color:"white"}},{default:s(()=>[r(" seleccionado ")]),_:2},1032,["onClick"])])):l("",!0)])):(o(),i("div",H,[p("div",null,[d(n,{onClick:g=>I(e),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>[r(" seleccionar ")]),_:2},1032,["onClick"])])]))],64)):l("",!0)],64)):l("",!0)]),_:1},8,["dataSource"])]),p("div",J,[d(N,{dataSource:B.value,columns:F,pagination:!1,size:"small",style:{width:"100%"}},{bodyCell:s(({column:c,record:e})=>[c.dataIndex==="paymentAmount"?(o(),i("div",K,[p("strong",null,"S/ "+k(e.paymentAmount),1)])):l("",!0),c.dataIndex==="opcion"?(o(),i(b,{key:1},[e.estado?(o(),i("div",Q,[e.estado===0?(o(),i("div",W,[d(n,{onClick:g=>w(e),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>[r(" seleccionar ")]),_:2},1032,["onClick"])])):l("",!0),e.estado===1?(o(),i("div",X,[d(n,{onClick:g=>w(e),style:{background:"crimson","border-radius":"5px",border:"none",color:"white"}},{default:s(()=>[r(" seleccionado ")]),_:2},1032,["onClick"])])):l("",!0)])):(o(),i("div",Y,[p("div",null,[d(n,{onClick:g=>w(e),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>[r(" seleccionar ")]),_:2},1032,["onClick"])])]))],64)):l("",!0)]),_:1},8,["dataSource"])])]),_:1},8,["visible"])]),_:1})])}}},at=E(Z,[["__scopeId","data-v-d88091fc"]]);export{at as default};
