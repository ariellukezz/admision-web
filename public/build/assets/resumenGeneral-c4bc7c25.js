import{r as c,e as h,D,o as m,c as b,a,u as R,w as t,F as w,y as x,Z as E,d as s,b as v,t as i,f as S,E as F,B as L,a7 as N,a8 as U,a9 as V,h as j}from"./app-0077239c.js";import{_ as z}from"./AuthenticatedLayout-e5c423fe.js";import"./logotiny-c4b525af.js";import"./Header-ec496b21.js";import"./AntdIcon-c26d5307.js";import"./DownOutlined-aaf7e9bc.js";/* empty css                                                            */const A={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg pt-4 pl-4 pb-0",style:{height:"calc(100vh - 103px)"}},G={class:"mr-3"},M={style:{}},O={style:{"font-weight":"bold",color:"#476175"}},P={style:{"font-weight":"bold",color:"#476175"}},H={style:{"font-weight":"bold",color:"#476175"}},ee={__name:"resumenGeneral",setup(Y){const k=c(""),u=c(1),_=c([]),l=c([]),C=[{title:"Cod",dataIndex:"codigo",width:"50px"},{title:"Programa de estudios",dataIndex:"programa",align:"left"},{title:"Preinscripciones",dataIndex:"preinscripciones",align:"center",width:"120px"},{title:"Inscripciones",dataIndex:"inscripciones",align:"center",width:"120px"},{title:"Diferencia",dataIndex:"diferencia",align:"center",width:"120px"}],d=async()=>{try{let o=await x.post("reporte-programa");_.value=o.data.datos,l.value=o.data.totales}catch{}};h(u,()=>{d()});let g;h(k,()=>{clearTimeout(g),g=setTimeout(()=>{u.value=1,d()},500)});const $=async()=>{try{const o=await x.post("reporte-programa",{descargar:1},{responseType:"blob"});if(o.status!==200)throw new Error("Error al obtener el archivo");const e=new Date,p=`${`${e.getDate().toString().padStart(2,"0")}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getFullYear()}_${e.getHours().toString().padStart(2,"0")}-${e.getMinutes().toString().padStart(2,"0")}-${e.getSeconds().toString().padStart(2,"0")}`}_resumen_inscripciones.pdf`,n=window.URL.createObjectURL(new Blob([o.data])),r=document.createElement("a");r.href=n,r.setAttribute("download",p),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}catch(o){console.error("Error al descargar el archivo:",o)}};return d(),(o,e)=>{const f=L,p=D("row"),n=N,r=U,I=V,T=j;return m(),b(w,null,[a(R(E),{title:"Resumen inscripciones"}),a(z,null,{default:t(()=>[s("div",A,[a(p,{class:"flex justify-end mb-3"},{default:t(()=>[s("div",G,[a(f,{type:"primary",style:{"border-radius":"5px",background:"#476175",border:"none"},onClick:e[0]||(e[0]=y=>$())},{default:t(()=>e[1]||(e[1]=[v("Descargar")])),_:1})])]),_:1}),s("div",M,[a(T,{columns:C,"data-source":_.value,pagination:!1,size:"small",scroll:{x:200,y:"calc(100vh - 236px)"}},{bodyCell:t(({column:y,record:B})=>[y.dataIndex==="total"?(m(),b(w,{key:0},[v(i(B.total),1)],64)):S("",!0)]),summary:t(()=>[a(I,{fixed:"bottom"},{default:t(()=>[l.value.length>0?(m(),F(r,{key:0},{default:t(()=>[a(n,{"col-span":2,style:{"text-align":"left"}},{default:t(()=>e[2]||(e[2]=[s("span",{style:{"font-weight":"bold","font-size":"1rem",color:"#476175"}}," Totales ",-1)])),_:1}),a(n,{style:{"text-align":"center"}},{default:t(()=>[s("span",O,i(l.value[0].total_preinscripciones),1)]),_:1}),a(n,{style:{"text-align":"center"}},{default:t(()=>[s("span",P,i(l.value[0].total_inscripciones),1)]),_:1}),a(n,{style:{"text-align":"center"}},{default:t(()=>[s("span",H,i(l.value[0].total_diferencia),1)]),_:1})]),_:1})):S("",!0)]),_:1})]),_:1},8,["data-source"])])])]),_:1})],64)}}};export{ee as default};
