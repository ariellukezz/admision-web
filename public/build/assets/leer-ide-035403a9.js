import{r as c,e as de,D as ue,o as l,c as d,d as u,a as o,w as a,b as r,t as I,E as _,f as i,x as pe,v as ce,y as N,U as me,I as ve,B as fe,h as _e,M as ge,z as xe,u as v,F as B,a4 as P,n as ye,aZ as be,_ as ke,H as Ie,S as Ce,j as we,aS as he,A as Se}from"./app-76fa21fc.js";import{S as $e}from"./SearchOutlined-592a711e.js";import{S as R}from"./SaveOutlined-3f94dc96.js";import{F as X}from"./FormOutlined-b5a707ec.js";import{D as Y}from"./DeleteOutlined-a072b4c8.js";import"./AntdIcon-b1a687d1.js";const De={class:"pl-4",style:{background:"white",width:"100%","min-height":"calc(100vh - 190px)","border-radius":"12px"}},Ee={class:"flex justify-between mt-2"},ze={style:{color:"#0000009d","margin-top":"-6px"}},Ne={key:0,class:"mt-3 mb-3",style:{"margin-left":"-5px"}},Be={key:0},Me=["onDblclick"],Oe={key:2,class:"flex",style:{"justify-content":"center"}},Ue={key:0},Ae={key:1},je={key:2},Le={key:1,class:"mt-3 mb-3",style:{"margin-left":"-5px"}},Te={key:0},Ve={class:"flex justify-between mt-4 mb-4 ml-1"},qe={class:"justify-end mb-4"},Fe={class:"ant-upload-drag-icon"},Ge={__name:"leer-ide",props:["proceso"],setup(C){const M=window.location.origin,b=c([]),x=c("contenido"),O=C,w=c(!1),h=c(1),Z=t=>{const e=t.file.status;e!=="uploading"&&console.log(t.file,b.value),e==="done"?(P.success(`${t.file.name} archivo(s) subido(s) exitosamente.`),$()):e==="error"&&P.error(`${t.file.name} falló al subir.`)},G=()=>{b.value=null},k=c(!1),U=c(0),A=c(0),J=t=>{k.value=!0,U.value=t.clientY,A.value=t.clientX,t.preventDefault()},S=t=>{t==="1"&&(w.value=!0,k.value=!1)},K=t=>{k.value=!1},j=c([]),L=c([]),y=c(""),$=async()=>{N.post("/get-archivos",{term:y.value,proceso:O.proceso}).then(t=>{j.value=t.data.datos.data}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})},T=async()=>{N.post("/get-ides",{term:y.value,proceso:O.proceso}).then(t=>{L.value=t.data.datos.data}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})};let V;de(y,(t,e)=>{clearTimeout(V),V=setTimeout(()=>{T()},300)}),$(),T();const Q=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"Tipo",dataIndex:"tipo",align:"center",width:"100px"},{title:"Nombre",dataIndex:"nombre"},{title:"Area",dataIndex:"area"},{title:"Fecha",dataIndex:"fecha",align:"center"},{title:"Registros",dataIndex:"registros",align:"center"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}],W=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"N° lectura",dataIndex:"camp2",align:"center"},{title:"DNI",dataIndex:"dni",align:"center"},{title:"Aula",dataIndex:"aula",width:"60px",align:"center"},{title:"Tip",dataIndex:"tipo",width:"60px",align:"center"},{title:"Litho",dataIndex:"litho",align:"center"},{title:"Observaciones",dataIndex:"observaciones",align:"center"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}],q=t=>{N.get("eliminar-archivo/"+t.id).then(e=>{$(),ee("error",e.data.titulo,e.data.mensaje)})},ee=(t,e,p)=>{ye[t]({message:e,description:p})},te=t=>{const e=M+"/pdf-errores/"+t,p=document.createElement("a");p.href=e,p.download="observaciones.pdf",document.body.appendChild(p),p.click(),document.body.removeChild(p)};return(t,e)=>{const p=be,oe=me,ae=ve,m=ke,f=fe,F=Ie,H=_e,D=Ce,ne=we,se=ue("inbox-outlined"),le=he,ie=ge,E=Se,re=xe;return l(),d("div",{style:{},onClick:K,onContextmenu:ce(J,["prevent"])},[u("div",De,[u("div",Ee,[o(oe,{value:x.value,"onUpdate:value":e[0]||(e[0]=n=>x.value=n),style:{"margin-left":"-3px"}},{default:a(()=>[o(p,{value:"contenido",style:{"border-radius":"9px 0px 0px 9px"}},{default:a(()=>e[9]||(e[9]=[r("ide")])),_:1}),o(p,{value:"archivos",style:{"border-radius":"0px 9px 9px 0px"}},{default:a(()=>e[10]||(e[10]=[r("file")])),_:1})]),_:1},8,["value"]),r(" "+I(x.value)+" ",1),o(ae,{value:y.value,"onUpdate:value":e[1]||(e[1]=n=>y.value=n),style:{"max-width":"260px","border-radius":"6px",height:"32px"},placeholder:"Buscar"},{prefix:a(()=>[u("span",ze,[o(v($e))])]),_:1},8,["value"])]),x.value==="archivos"?(l(),d("div",Ne,[(l(),_(H,{columns:Q,"data-source":j.value,key:t.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:a(({column:n,index:z,record:s})=>[n.dataIndex==="nro"?(l(),d("span",Be,I(z+1),1)):i("",!0),n.dataIndex==="nombre"?(l(),d("div",{key:1,style:{width:"100%",cursor:"pointer"},onDblclick:g=>t.customRow(s)},[u("span",null,I(s.nombre),1)],40,Me)):i("",!0),n.dataIndex==="area"?(l(),d("div",Oe,[s.area===1?(l(),d("div",Ue,[o(m,{color:"cyan"},{default:a(()=>e[11]||(e[11]=[r("Biomedicas")])),_:1})])):i("",!0),s.area===2?(l(),d("div",Ae,[o(m,{color:"orange"},{default:a(()=>e[12]||(e[12]=[r("Ingenierías")])),_:1})])):i("",!0),s.area===3?(l(),d("div",je,[o(m,{color:"purple"},{default:a(()=>e[13]||(e[13]=[r("Sociales")])),_:1})])):i("",!0)])):i("",!0),n.dataIndex==="acciones"?(l(),d(B,{key:3},[o(f,{type:"success",class:"mr-1",style:{color:"#476175"},onClick:g=>t.cambiarSexo(s.id_postulante,s.sexo),size:"small"},{icon:a(()=>[o(v(R))]),_:2},1032,["onClick"]),o(f,{onClick:g=>t.abrirEditar(s),class:"mr-1",style:{color:"blue"},size:"small"},{icon:a(()=>[o(v(X))]),_:2},1032,["onClick"]),o(F,{title:"¿Estas seguro de eliminar?",onConfirm:g=>q(s)},{default:a(()=>[o(f,{shape:"",size:"small",style:{color:"crimson"}},{icon:a(()=>[o(v(Y))]),_:1})]),_:2},1032,["onConfirm"])],64)):i("",!0)]),_:1},8,["data-source"]))])):i("",!0),x.value==="contenido"?(l(),d("div",Le,[(l(),_(H,{columns:W,"data-source":L.value,key:t.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:a(({column:n,index:z,record:s})=>[n.dataIndex==="nro"?(l(),d("span",Te,I(z+1),1)):i("",!0),n.dataIndex==="observaciones"?(l(),d(B,{key:1},[s.dni===null?(l(),_(m,{key:0,color:"pink"},{default:a(()=>e[14]||(e[14]=[r(" Sin DNI")])),_:1})):i("",!0),s.aula===""?(l(),_(m,{key:1,color:"purple"},{default:a(()=>e[15]||(e[15]=[r(" Sin aula")])),_:1})):i("",!0),s.len_doc!==8&&s.dni!==null?(l(),_(m,{key:2,color:"green"},{default:a(()=>e[16]||(e[16]=[r(" Dni erroneo")])),_:1})):i("",!0),s.vaula===0&&s.aula!==""?(l(),_(m,{key:3,color:"blue"},{default:a(()=>e[17]||(e[17]=[r(" Error de aula")])),_:1})):i("",!0),s.tipo===""?(l(),_(m,{key:4,color:"yellow"},{default:a(()=>e[18]||(e[18]=[r(" Sin tipo")])),_:1})):i("",!0)],64)):i("",!0),n.dataIndex==="acciones"?(l(),d(B,{key:2},[o(f,{type:"success",class:"mr-1",style:{color:"#476175"},onClick:g=>t.cambiarSexo(s.id_postulante,s.sexo),size:"small"},{icon:a(()=>[o(v(R))]),_:2},1032,["onClick"]),o(f,{onClick:g=>t.abrirEditar(s),class:"mr-1",style:{color:"blue"},size:"small"},{icon:a(()=>[o(v(X))]),_:2},1032,["onClick"]),o(F,{title:"¿Estas seguro de eliminar?",onConfirm:g=>q(s)},{default:a(()=>[o(f,{shape:"",size:"small",style:{color:"crimson"}},{icon:a(()=>[o(v(Y))]),_:1})]),_:2},1032,["onConfirm"])],64)):i("",!0)]),_:1},8,["data-source"])),u("div",Ve,[o(f,{type:"primary",style:{background:"#476175",border:"none","border-radius":"4px"},onClick:e[2]||(e[2]=n=>te(C.proceso))},{default:a(()=>e[19]||(e[19]=[r("Descargar observaciones")])),_:1})])])):i("",!0),o(ie,{visible:w.value,"onUpdate:visible":e[5]||(e[5]=n=>w.value=n),title:"Cargar fichas de identificación",onOk:G,centered:!0,style:{"max-height":"calc(100vh - 100px)","overflow-x":"scroll",cursor:"pointer"}},{default:a(()=>[u("div",qe,[o(ne,{class:"mb-2",style:{width:"100%"},value:h.value,"onUpdate:value":e[3]||(e[3]=n=>h.value=n)},{default:a(()=>[o(D,{value:1},{default:a(()=>e[20]||(e[20]=[r("Biomédicas")])),_:1}),o(D,{value:2},{default:a(()=>e[21]||(e[21]=[r("Ingenierías")])),_:1}),o(D,{value:3},{default:a(()=>e[22]||(e[22]=[r("Sociales")])),_:1})]),_:1},8,["value"])]),o(le,{fileList:b.value,"onUpdate:fileList":e[4]||(e[4]=n=>b.value=n),name:"file",multiple:!0,action:v(M)+"/calificacion/carga-ide/"+C.proceso+"/"+h.value,onChange:Z,onDrop:t.handleDrop,"list-type":"picture"},{default:a(()=>[u("p",Fe,[o(se)]),e[23]||(e[23]=u("p",{class:"ant-upload-text",style:{width:"100%"}},"Haz clic o arrastra archivos a esta área para cargar",-1)),e[24]||(e[24]=u("p",{class:"ant-upload-hint"}," Soporte para carga única o múltiple. Prohibido subir datos de la empresa u otros archivos prohibidos. ",-1))]),_:1},8,["fileList","action","onDrop"])]),_:1},8,["visible"])]),k.value?(l(),d("div",{key:0,style:pe([{position:"absolute",border:"solid 1px #d9d9d943","padding-top":"0px","border-radius":"8px",overflow:"hidden"},{top:`${U.value}px`,left:`${A.value}px`}])},[o(re,{size:"small",style:{"margin-top":"-4px","margin-bottom":"-4px"}},{default:a(()=>[o(E,{key:"1",class:"selec-menu",onClick:e[6]||(e[6]=n=>S("1"))},{default:a(()=>e[25]||(e[25]=[u("div",{style:{"margin-top":"0px"}}," Cargar archivos ",-1)])),_:1}),o(E,{key:"2",class:"selec-menu",onClick:e[7]||(e[7]=n=>S("2"))},{default:a(()=>e[26]||(e[26]=[u("div",{style:{"margin-top":"0px"}}," Nuevos Ides ",-1)])),_:1}),o(E,{key:"2",class:"selec-menu",onClick:e[8]||(e[8]=n=>S("2"))},{default:a(()=>e[27]||(e[27]=[u("div",{style:{"margin-top":"0px"}}," selees ",-1)])),_:1})]),_:1})],4)):i("",!0)],32)}}};export{Ge as default};
