import{r as c,C,e as g,D as I,o as m,c as _,a as o,u as N,w as s,F as y,y as T,Z as V,d as a,s as j,t as p,b as $,f as M,a6 as O,B as z,a7 as A,a8 as G,a9 as H,h as P}from"./app-2058c8a9.js";import{_ as Y}from"./AuthenticatedLayout-4906934e.js";import"./logotiny-c4b525af.js";import"./Header-18b1c1b1.js";import"./AntdIcon-5ed3d5e4.js";import"./DownOutlined-d7c6d8bb.js";/* empty css                                                            */const Z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},q={class:"checkbox-group-container"},J={class:"totales-mini"},K={class:"area"},Q={class:"valor"},W={class:"mt-4 bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 250px)"}},X={class:"mr-3"},ee={style:{}},te={style:{"font-weight":"bold",color:"#476175"}},ue={__name:"biometrico",setup(ae){const h=c(""),f=c(1),R=c(0),v=c([]),r=c(["area"]),w=c([]),B=C(()=>v.value.reduce((t,e)=>t+e.total,0)),x=[{label:"Ãrea",value:"area"},{label:"Programa",value:"programa"},{label:"Modalidad",value:"modalidad"},{label:"Sexo",value:"sexo"},{label:"Usuario",value:"usuario"}],S=C(()=>[...r.value.map(t=>{const e=x.find(u=>u.value===t);return{title:e?e.label:t,dataIndex:t,key:t,align:"left"}}),{title:"Total",dataIndex:"total",key:"total",align:"center",width:"90px"}]),i=async()=>{try{let t=await T.post("resumen-biometrico",{group_by:r.value,term:h.value});v.value=t.data.data,w.value=t.data.total_esperado,R.value=t.data.datos.total}catch{}};g(r,()=>{i()}),g(f,()=>{i()});let k;g(h,()=>{clearTimeout(k),k=setTimeout(()=>{f.value=1,i()},500)});const D=async()=>{try{const t=await T.post("resumen-biometrico",{descargar:1,group_by:r.value},{responseType:"blob"});if(t.status!==200)throw new Error("Error al obtener el archivo");const e=new Date,b=`${`${e.getDate().toString().padStart(2,"0")}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getFullYear()}_${e.getHours().toString().padStart(2,"0")}-${e.getMinutes().toString().padStart(2,"0")}-${e.getSeconds().toString().padStart(2,"0")}`}_resumen_control_biometrico.pdf`,d=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=d,n.setAttribute("download",b),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(d)}catch(t){console.error("Error al descargar el archivo:",t)}};return i(),(t,e)=>{const u=O,b=z,d=I("row"),n=A,U=G,E=H,F=P;return m(),_(y,null,[o(N(V),{title:"Resumen inscripciones"}),o(Y,null,{default:s(()=>[a("div",Z,[e[2]||(e[2]=a("div",{class:"mb-4"},[a("span",{style:{"font-size":"1.3rem"}},"Control biometrico")],-1)),a("div",q,[o(u,{value:r.value,"onUpdate:value":e[0]||(e[0]=l=>r.value=l),options:x},null,8,["value"])]),a("div",null,[a("div",J,[(m(!0),_(y,null,j(w.value,l=>(m(),_("div",{class:"item",key:l},[a("span",K,p(l.area)+":",1),a("span",Q,p(l.total),1)]))),128))])])]),a("div",W,[o(d,{class:"flex justify-end mb-4"},{default:s(()=>[a("div",X,[o(b,{type:"primary",style:{"border-radius":"5px",background:"#476175",border:"none"},onClick:e[1]||(e[1]=l=>D())},{default:s(()=>e[3]||(e[3]=[$("Descargar")])),_:1})])]),_:1}),a("div",ee,[o(F,{columns:S.value,"data-source":v.value,pagination:!1,size:"small",scroll:{x:200,y:"calc(100vh - 400px)"}},{bodyCell:s(({column:l,record:L})=>[l.dataIndex==="total"?(m(),_(y,{key:0},[$(p(L.total),1)],64)):M("",!0)]),summary:s(()=>[o(E,{fixed:"bottom"},{default:s(()=>[o(U,null,{default:s(()=>[o(n,{"col-span":S.value.length-1,style:{"text-align":"right"}},{default:s(()=>e[4]||(e[4]=[a("span",{style:{"font-weight":"bold",color:"#476175"}}," Total Registros: ",-1)])),_:1},8,["col-span"]),o(n,{style:{"text-align":"center"}},{default:s(()=>[a("span",te,p(B.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","data-source"])])])]),_:1})],64)}}};export{ue as default};
