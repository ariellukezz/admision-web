import{r as d,f as p,o as h,c as v,g as P,d as a,a as c,w as x,H as A,F,j as B,b as y,p as M,h as V}from"./app-991edb8f.js";import{r as D,u as U}from"./xlsx-4f9172c7.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";const O=r=>(M("data-v-6fb0d583"),r=r(),V(),r),G=O(()=>a("h1",null,"Subir Resultados",-1)),H={key:0},T={class:"flex justify-between"},q={style:{display:"flex","justify-content":"flex-end"}},z={style:{display:"flex"}},J={__name:"SubirResultado",setup(r){const n=d([]),o=d(0),_=d(""),m=async()=>{o.value=0;try{const e=await B.post("subir-excel-simulacro",{data:n.value},{onUploadProgress:t=>{t.lengthComputable&&(o.value=Math.round(t.loaded/t.total*100))}});console.log("Respuesta del servidor:",e.data),o.value=100}catch(e){o.value=70,_.value="exception",console.error("Error:",e)}},g=e=>{const t=e.target.files[0],s=new FileReader;s.onload=u=>{const i=new Uint8Array(u.target.result),l=D(i,{type:"array"}),I=l.SheetNames[0],w=l.Sheets[I],f=U.sheet_to_json(w,{header:1}),j=f[0],k=f.slice(1).map(C=>{const b={};return j.forEach((N,R)=>{b[N]=C[R]}),b});n.value=k},s.readAsArrayBuffer(t)},S=d([{title:"DNI",dataIndex:"dni"},{title:"Ap. Paterno",dataIndex:"paterno"},{title:"Ap. Materno",dataIndex:"materno"},{title:"Mombres",dataIndex:"nombres"},{title:"Puntaje",dataIndex:"puntaje"},{title:"Fecha",dataIndex:"fecha"},{title:"Puesto Programa",dataIndex:"puesto_programa"},{title:"Puesto General",dataIndex:"puesto_general"}]);return(e,t)=>{const s=p("a-button"),u=p("a-progress"),i=p("a-table");return h(),v(F,null,[G,n.value?(h(),v("div",H)):P("",!0),a("form",{onSubmit:t[0]||(t[0]=A((...l)=>e.submit&&e.submit(...l),["prevent"]))},[a("div",T,[a("input",{type:"file",onChange:g},null,32),a("div",q,[c(s,{class:"mr-2",style:{"border-radius":"5px",height:"38px",border:"solid 1px var(--primary-color)",color:"var(--primary-color)"},onClick:m},{default:x(()=>[y("Ejemplo")]),_:1}),c(s,{style:{height:"38px","border-radius":"5px",border:"none",color:"white",background:"var(--primary-color)"},onClick:m},{default:x(()=>[y(" Subir resultado")]),_:1})])])],32),a("div",z,[c(u,{percent:o.value,status:_.value},null,8,["percent","status"])]),a("div",null,[c(i,{dataSource:n.value,columns:S.value},null,8,["dataSource","columns"])])],64)}}},W=E(J,[["__scopeId","data-v-6fb0d583"]]);export{W as default};
