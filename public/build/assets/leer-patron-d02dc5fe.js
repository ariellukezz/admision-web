import{r as i,e as pe,D as ce,o as n,c as r,d as u,a,w as o,b as p,t as b,E as X,f as d,x as me,v as ve,y as A,U as _e,I as fe,h as ge,M as xe,z as ye,u as c,F as Q,aL as Y,n as be,aX as ke,_ as he,B as Ce,H as Ie,S as we,j as $e,aQ as Ee,A as ze}from"./app-0034f043.js";import Se from"./ficha-99021048.js";import{S as De}from"./SearchOutlined-18fd4aad.js";import{S as Ue}from"./SaveOutlined-5260b911.js";import{F as G}from"./FormOutlined-71f39711.js";import{D as J}from"./DeleteOutlined-0bfcfa70.js";import{E as Ae}from"./EyeOutlined-d48b8457.js";import"./logotiny-c4b525af.js";import"./logoDAD-c76d0a0b.js";import"./AntdIcon-748582a6.js";const Be={class:"pl-4",style:{background:"white",width:"100%","min-height":"calc(100vh - 190px)","border-radius":"12px"}},Me={class:"flex justify-between mt-2"},Ne={style:{color:"#0000009d","margin-top":"-6px"}},Le={key:0,class:"mt-3 mb-3",style:{"margin-left":"-5px"}},Oe={key:0},Fe=["onDblclick"],Te={key:2,class:"flex",style:{"justify-content":"center"}},Ve={key:0},je={key:1},qe={key:2},Re={key:1,class:"mt-3 mb-3",style:{"margin-left":"-5px"}},He={key:0},Pe={class:"flex justify-between mb-4"},Xe={class:"ant-upload-drag-icon"},ot={__name:"leer-patron",props:["proceso"],setup(B){const K=window.location.origin,_=i("contenido"),g=i([]),M=i(null),N=B,k=i(!1),h=i(1),W=t=>{const e=t.file.status;e!=="uploading"&&console.log(t.file,g.value),e==="done"?(Y.success(`${t.file.name} archivo(s) subido(s) exitosamente.`),I()):e==="error"&&Y.error(`${t.file.name} falló al subir.`)},Z=()=>{g.value=null},x=i(!1),L=i(0),O=i(0),ee=t=>{x.value=!0,L.value=t.clientY,O.value=t.clientX,t.preventDefault()},C=t=>{t==="1"&&(k.value=!0,x.value=!1)},te=t=>{x.value=!1},F=i([]),T=i([]),f=i(""),I=async()=>{A.post("/get-archivos-pat",{term:f.value,proceso:N.proceso}).then(t=>{F.value=t.data.datos.data}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})},w=async()=>{A.post("/get-pat",{term:f.value,proceso:N.proceso}).then(t=>{T.value=t.data.datos.data}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})};let V;pe(f,(t,e)=>{clearTimeout(V),V=setTimeout(()=>{w()},300)});const $=i(""),E=i(!1),ae=t=>{M.value=t,E.value=!0};I(),w();const oe=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"Tipo",dataIndex:"tipo",align:"center",width:"100px"},{title:"Nombre",dataIndex:"nombre"},{title:"Area",dataIndex:"area"},{title:"Fecha",dataIndex:"fecha",align:"center"},{title:"Registros",dataIndex:"registros",align:"center"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}],se=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"N° lectura",dataIndex:"n_lectura",align:"center"},{title:"Tip",dataIndex:"tipo",width:"60px",align:"center"},{title:"Litho",dataIndex:"res_litho",align:"center"},{title:"Area",dataIndex:"area",align:"center"},{title:"Respuestas",dataIndex:"respuestas",align:"center"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}],j=t=>{A.get("eliminar-archivo/"+t.id).then(e=>{I(),w(),ne("error",e.data.titulo,e.data.mensaje)})},ne=(t,e,y)=>{be[t]({message:e,description:y})};return(t,e)=>{const y=ke,le=_e,q=fe,z=he,m=Ce,R=Ie,H=ge,S=we,ie=$e,re=ce("inbox-outlined"),de=Ee,P=xe,D=ze,ue=ye;return n(),r("div",{style:{},onClick:te,onContextmenu:ve(ee,["prevent"])},[u("div",Be,[u("div",Me,[a(le,{value:_.value,"onUpdate:value":e[0]||(e[0]=s=>_.value=s),style:{"margin-left":"-3px"}},{default:o(()=>[a(y,{value:"contenido",style:{"border-radius":"9px 0px 0px 9px"}},{default:o(()=>e[10]||(e[10]=[p("Respuestas")])),_:1}),a(y,{value:"archivos",style:{"border-radius":"0px 9px 9px 0px"}},{default:o(()=>e[11]||(e[11]=[p("Archivos")])),_:1})]),_:1},8,["value"]),p(" "+b(_.value)+" ",1),a(q,{value:f.value,"onUpdate:value":e[1]||(e[1]=s=>f.value=s),style:{"max-width":"260px","border-radius":"6px",height:"32px"},placeholder:"Buscar"},{prefix:o(()=>[u("span",Ne,[a(c(De))])]),_:1},8,["value"])]),_.value==="archivos"?(n(),r("div",Le,[(n(),X(H,{columns:oe,"data-source":F.value,key:t.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:o(({column:s,index:U,record:l})=>[s.dataIndex==="nro"?(n(),r("span",Oe,b(U+1),1)):d("",!0),s.dataIndex==="nombre"?(n(),r("div",{key:1,style:{width:"100%",cursor:"pointer"},onDblclick:v=>t.customRow(l)},[u("span",null,b(l.nombre),1)],40,Fe)):d("",!0),s.dataIndex==="area"?(n(),r("div",Te,[l.area===1?(n(),r("div",Ve,[a(z,{color:"cyan"},{default:o(()=>e[12]||(e[12]=[p("Biomedicas")])),_:1})])):d("",!0),l.area===2?(n(),r("div",je,[a(z,{color:"orange"},{default:o(()=>e[13]||(e[13]=[p("Ingenierías")])),_:1})])):d("",!0),l.area===3?(n(),r("div",qe,[a(z,{color:"purple"},{default:o(()=>e[14]||(e[14]=[p("Sociales")])),_:1})])):d("",!0)])):d("",!0),s.dataIndex==="acciones"?(n(),r(Q,{key:3},[a(m,{type:"success",class:"mr-1",style:{color:"#476175"},onClick:v=>t.cambiarSexo(l.id_postulante,l.sexo),size:"small"},{icon:o(()=>[a(c(Ue))]),_:2},1032,["onClick"]),a(m,{onClick:v=>t.abrirEditar(l),class:"mr-1",style:{color:"blue"},size:"small"},{icon:o(()=>[a(c(G))]),_:2},1032,["onClick"]),a(R,{title:"¿Estas seguro de eliminar?",onConfirm:v=>j(l)},{default:o(()=>[a(m,{shape:"",size:"small",style:{color:"crimson"}},{icon:o(()=>[a(c(J))]),_:1})]),_:2},1032,["onConfirm"])],64)):d("",!0)]),_:1},8,["data-source"]))])):d("",!0),_.value==="contenido"?(n(),r("div",Re,[(n(),X(H,{columns:se,"data-source":T.value,key:t.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:o(({column:s,index:U,record:l})=>[s.dataIndex==="nro"?(n(),r("span",He,b(U+1),1)):d("",!0),s.dataIndex==="acciones"?(n(),r(Q,{key:1},[a(m,{type:"success",class:"mr-1",style:{color:"#476175"},size:"small",onClick:v=>ae(l.id)},{icon:o(()=>[a(c(Ae))]),_:2},1032,["onClick"]),a(m,{onClick:v=>t.abrirEditar(l),class:"mr-1",style:{color:"blue"},size:"small"},{icon:o(()=>[a(c(G))]),_:2},1032,["onClick"]),a(R,{title:"¿Estas seguro de eliminar?",onConfirm:v=>j(l)},{default:o(()=>[a(m,{shape:"",size:"small",style:{color:"crimson"}},{icon:o(()=>[a(c(J))]),_:1})]),_:2},1032,["onConfirm"])],64)):d("",!0)]),_:1},8,["data-source"]))])):d("",!0),a(P,{visible:k.value,"onUpdate:visible":e[5]||(e[5]=s=>k.value=s),title:"Cargar fichas de respuestas",onOk:Z,centered:!0,style:{"max-height":"calc(100vh - 100px)","overflow-x":"scroll",cursor:"pointer"}},{default:o(()=>[u("div",Pe,[a(ie,{class:"mb-2",style:{width:"75%"},value:h.value,"onUpdate:value":e[2]||(e[2]=s=>h.value=s)},{default:o(()=>[a(S,{value:1},{default:o(()=>e[15]||(e[15]=[p("Biomédicas")])),_:1}),a(S,{value:2},{default:o(()=>e[16]||(e[16]=[p("Ingenierías")])),_:1}),a(S,{value:3},{default:o(()=>e[17]||(e[17]=[p("Sociales")])),_:1})]),_:1},8,["value"]),a(q,{style:{width:"23%"},value:$.value,"onUpdate:value":e[3]||(e[3]=s=>$.value=s),placeholder:"Aula"},null,8,["value"])]),a(de,{fileList:g.value,"onUpdate:fileList":e[4]||(e[4]=s=>g.value=s),name:"file",multiple:!0,action:c(K)+"/calificacion/carga-pat/"+B.proceso+"/"+h.value+$.value,onChange:W,onDrop:t.handleDrop,"list-type":"picture"},{default:o(()=>[u("p",Xe,[a(re)]),e[18]||(e[18]=u("p",{class:"ant-upload-text",style:{width:"100%"}},"Haz clic o arrastra archivos a esta área para cargar",-1)),e[19]||(e[19]=u("p",{class:"ant-upload-hint"}," Soporte para carga única o múltiple. Prohibido subir datos de la empresa u otros archivos prohibidos. ",-1))]),_:1},8,["fileList","action","onDrop"])]),_:1},8,["visible"])]),x.value?(n(),r("div",{key:0,style:me([{position:"absolute",border:"solid 1px #d9d9d943","padding-top":"0px","border-radius":"8px",overflow:"hidden"},{top:`${L.value}px`,left:`${O.value}px`}])},[a(ue,{size:"small",style:{"margin-top":"-4px","margin-bottom":"-4px"}},{default:o(()=>[a(D,{key:"1",class:"selec-menu",onClick:e[6]||(e[6]=s=>C("1"))},{default:o(()=>e[20]||(e[20]=[u("div",{style:{"margin-top":"0px"}}," Cargar respuestas ",-1)])),_:1}),a(D,{key:"2",class:"selec-menu",onClick:e[7]||(e[7]=s=>C("2"))},{default:o(()=>e[21]||(e[21]=[u("div",{style:{"margin-top":"0px"}}," Nueva respuesta ",-1)])),_:1}),a(D,{key:"2",class:"selec-menu",onClick:e[8]||(e[8]=s=>C("2"))},{default:o(()=>e[22]||(e[22]=[u("div",{style:{"margin-top":"0px"}}," asdfas ",-1)])),_:1})]),_:1})],4)):d("",!0),a(P,{visible:E.value,"onUpdate:visible":e[9]||(e[9]=s=>E.value=s),footer:!1,style:{width:"880px"}},{default:o(()=>[a(Se,{id_resp:M.value},null,8,["id_resp"])]),_:1},8,["visible"])],32)}}};export{ot as default};
