import{r,e as w,A as Z,c as _,a as t,u as y,w as l,d as g,F as D,q as A,g as i,o as c,X as ee,b as s,S as ae,l as R,t as N,f as v,D as oe,R as te,n as le}from"./app-f1aa59b6.js";import{A as ne}from"./AuthenticatedLayout-1e585537.js";import{F as ie}from"./FormOutlined-08cd8942.js";import"./DropdownLink-5cb880e2.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logotiny-c4b525af.js";const se={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},ue={class:"mr-3"},re={class:"flex justify-between",style:{position:"relative"}},de={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},ce={key:0,class:"flex",style:{"justify-content":"center"}},ve={key:1,class:"flex",style:{"justify-content":"center"}},me={key:0},pe={key:1},fe={class:"flex",style:{"justify-content":"flex-end"}},Fe={__name:"programas",setup(_e){const I=r(""),O=r(1),E=r(null);r("PUNO");const P=r([]),m=r(!1),z=r(""),u=r([]),o=r({id:null,codigo:"",nombre:"",nivel_academico:"CARRERA PROFESIONAL",tipo_autorizacion:"RECONOCIDO POR LIC.",id_facultad:1,estado:!0,area:"BIOMEDICAS"}),j=()=>{m.value=!0};w(I,(a,e)=>{C()}),w(z,(a,e)=>{getDepartamentos()}),w(m,(a,e)=>{m.value==!1&&o.value.id!=null&&(o.value.id=null,o.value.codigo=null,o.value.nombre=null,o.value.estado=!0)}),w(O,(a,e)=>{C()});const B={labelCol:{span:7},wrapperCol:{span:14}},L={nombre:[{required:!0,validator:async(a,e)=>e===""?Promise.reject("Ingrese su el nombre del filial"):Promise.resolve(),trigger:"change"}],codigo:[{required:!0,validator:async(a,e)=>e===""?Promise.reject("Ingrese la sede del filial"):Promise.resolve(),trigger:"change"}],nivel_academico:[{required:!0,validator:async(a,e)=>e===""?Promise.reject("Seleccione un departamento"):Promise.resolve(),trigger:"change"}],tipo_autorizacion:[{required:!0,validator:async(a,e)=>e===""?Promise.reject("Seleccione una provincia"):Promise.resolve(),trigger:"change"}]};r([]);const U=a=>{m.value=!0,o.value.id=a.id,o.value.codigo=a.codigo,o.value.nombre=a.nombre,o.value.nivel_academico=a.nivel_academico,o.value.tipo_autorizacion=a.tipo_autorizacion,o.value.id_facultad=a.id_fac,a.estado==1?o.value.estado=!0:o.value.estado=!1,o.value.area=a.area},x=async()=>{let a=await A.get("get-facultades");P.value=a.data.datos},C=async(a="")=>{let e=await A.post("programas/get-programas?page="+O.value,{term:I.value});u.value=e.data.datos.data,E.value=e.data.datos.total},M=()=>{let a={id:o.value.id,codigo:o.value.codigo,nombre:o.value.nombre,nivel_academico:o.value.nivel_academico,tipo_autorizacion:o.value.tipo_autorizacion,estado:o.value.estado,id_facultad:o.value.id_facultad,area:o.value.area};A.post("save-programa",a).then(e=>{C(),V("success",e.data.titulo,e.data.mensaje),m.value=!1,o.value.codigo=null,o.value.id=null,o.value.nombre=""})},q=a=>{A.get("eliminar-programa/"+a.id).then(e=>{C(),V("warning","PROGRAMA ELIMINADO",e.data.mensaje)})},G=[{title:"Cod",dataIndex:"codigo"},{title:"Nombre",dataIndex:"nombre"},{title:"Facultad",dataIndex:"facultad"},{title:"Area",dataIndex:"area"},{title:"Vigente",dataIndex:"estado"},{title:"Acciones",dataIndex:"acciones"}],S=r([]),T=a=>{console.log("selectedRowKeys changed: ",a),S.value=a};Z(()=>({selectedRowKeys:y(S),onChange:T,hideDefaultSelections:!0}));const V=(a,e,p)=>{le[a]({message:e,description:p})};return x(),C(),(a,e)=>{const p=i("a-button"),F=i("a-input"),$=i("row"),h=i("a-tag"),K=i("a-divider"),X=i("a-table"),H=i("a-pagination"),f=i("a-form-item"),b=i("a-select-option"),k=i("a-select"),J=i("a-switch"),Q=i("a-form"),W=i("a-modal");return c(),_(D,null,[t(y(ee),{title:"Procesos"}),t(ne,null,{default:l(()=>[g("div",se,[t($,{class:"flex justify-between mb-4"},{default:l(()=>[g("div",ue,[t(p,{type:"primary",onClick:j},{default:l(()=>[s("Nuevo")]),_:1})]),g("div",re,[t(F,{type:"text",placeholder:"Buscar",value:I.value,"onUpdate:value":e[0]||(e[0]=n=>I.value=n),style:{"max-width":"300px","padding-left":"30px"}},null,8,["value"]),g("div",de,[t(y(ae))])])]),_:1}),t(X,{columns:G,"data-source":u.value,pagination:!1,size:"small"},{bodyCell:l(({column:n,index:d})=>[n.dataIndex==="area"?(c(),_("div",ce,[u.value[d].area=="BIOMÉDICAS"?(c(),R(h,{key:0,color:"#8B0000"},{default:l(()=>[s(N(u.value[d].area),1)]),_:2},1024)):v("",!0),u.value[d].area=="SOCIALES"?(c(),R(h,{key:1,color:"#252850"},{default:l(()=>[s(N(u.value[d].area),1)]),_:2},1024)):v("",!0),u.value[d].area=="INGENIERÍAS"?(c(),R(h,{key:2,color:"#EFB810"},{default:l(()=>[s(N(u.value[d].area),1)]),_:2},1024)):v("",!0)])):v("",!0),n.dataIndex==="estado"?(c(),_("div",ve,[u.value[d].estado==1?(c(),_("div",me,[t(h,{color:"green"},{default:l(()=>[s("Vigente")]),_:1})])):v("",!0),u.value[d].estado==0?(c(),_("div",pe,[t(h,{color:"red"},{default:l(()=>[s("No Vigente")]),_:1})])):v("",!0)])):v("",!0),n.dataIndex==="acciones"?(c(),_(D,{key:2},[t(p,{type:"primary",onClick:Y=>U(u.value[d]),size:"small"},{icon:l(()=>[t(y(ie))]),_:2},1032,["onClick"]),t(K,{type:"vertical"}),t(p,{type:"danger",onClick:Y=>q(u.value[d]),shape:"",size:"small"},{icon:l(()=>[t(y(oe))]),_:2},1032,["onClick"])],64)):v("",!0)]),_:1},8,["data-source"]),g("div",fe,[t(H,{current:O.value,"onUpdate:current":e[1]||(e[1]=n=>O.value=n),total:E.value,"show-less-items":""},null,8,["current","total"])])])]),_:1}),g("div",null,[t(W,{visible:m.value,"onUpdate:visible":e[10]||(e[10]=n=>m.value=n),title:"Nuevo Programa",style:{"margin-top":"-40px"}},{footer:l(()=>[t(p,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:l(()=>[s("Cancelar")]),_:1},8,["onClick"]),t(p,{type:"primary",onClick:e[9]||(e[9]=n=>M())},{default:l(()=>[s("Guardar")]),_:1})]),default:l(()=>[t(Q,te({ref:"formRef",name:"custom-validation",model:a.formState,rules:L},B,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:l(()=>[t(f,{"has-feedback":"",label:"Codigo",name:"codigo"},{default:l(()=>[t(F,{type:"text",value:o.value.codigo,"onUpdate:value":e[2]||(e[2]=n=>o.value.codigo=n),autocomplete:"off"},null,8,["value"])]),_:1}),t(f,{"has-feedback":"",label:"Nombre",name:"nombre"},{default:l(()=>[t(F,{type:"text",value:o.value.nombre,"onUpdate:value":e[3]||(e[3]=n=>o.value.nombre=n),autocomplete:"off"},null,8,["value"])]),_:1}),t(f,{"has-feedback":"",label:"Nivel Académico",name:"nivel_academico"},{default:l(()=>[t(k,{ref:"Tipo",style:{width:"100%"},onFocus:a.focus,onChange:a.handleChange,value:o.value.nivel_academico,"onUpdate:value":e[4]||(e[4]=n=>o.value.nivel_academico=n)},{default:l(()=>[t(b,{value:"CARRERA PROFESIONAL"},{default:l(()=>[s(" CARRERA PROFESIONAL ")]),_:1})]),_:1},8,["onFocus","onChange","value"])]),_:1}),t(f,{"has-feedback":"",label:"Tipo autorizacion",name:"tipo_autorizacion"},{default:l(()=>[t(k,{ref:"Tipo",style:{width:"100%"},onFocus:a.focus,onChange:a.handleChange,value:o.value.tipo_autorizacion,"onUpdate:value":e[5]||(e[5]=n=>o.value.tipo_autorizacion=n)},{default:l(()=>[t(b,{value:"RECONOCIDO POR LIC."},{default:l(()=>[s(" RECONOCIDO POR LIC. ")]),_:1})]),_:1},8,["onFocus","onChange","value"])]),_:1}),t(f,{"has-feedback":"",label:"Facultad",name:"facultad"},{default:l(()=>[t(k,{options:P.value,ref:"Tipo",style:{width:"100%"},onFocus:a.focus,onChange:a.handleChange,value:o.value.id_facultad,"onUpdate:value":e[6]||(e[6]=n=>o.value.id_facultad=n)},null,8,["options","onFocus","onChange","value"])]),_:1}),t(f,{"has-feedback":"",label:"Area",name:"area"},{default:l(()=>[t(k,{style:{width:"100%"},onFocus:a.focus,onChange:a.handleChange,value:o.value.area,"onUpdate:value":e[7]||(e[7]=n=>o.value.area=n)},{default:l(()=>[t(b,{value:"BIOMEDICAS"},{default:l(()=>[s(" BIOMEDICAS ")]),_:1}),t(b,{value:"INGRENIERÍAS"},{default:l(()=>[s(" INGENIERÍAS ")]),_:1}),t(b,{value:"SOCIALES"},{default:l(()=>[s(" SOCIALES ")]),_:1})]),_:1},8,["onFocus","onChange","value"])]),_:1}),t(f,{"has-feedback":"",label:"Vigente",name:"estado"},{default:l(()=>[t(J,{checked:o.value.estado,"onUpdate:checked":e[8]||(e[8]=n=>o.value.estado=n)},null,8,["checked"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["visible"])])],64)}}};export{Fe as default};
