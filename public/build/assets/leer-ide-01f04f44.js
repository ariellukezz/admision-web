import{r as m,e as ve,D as fe,o as n,c,d as i,a as o,w as t,E as v,f as d,x as ge,v as xe,F as $,y as S,V as ye,I as _e,B as be,h as ke,M as Ie,z as we,b as s,u as y,t as f,a5 as A,n as Ce,aN as Ne,_ as he,K as ze,S as De,j as Ee,aY as $e,A as Se,k as Ae,q as Oe}from"./app-ae3dbf01.js";import{S as Ue}from"./SearchOutlined-ee275daa.js";import{D as je}from"./DownloadOutlined-02f89bb1.js";import{S as Be}from"./SaveOutlined-19989f60.js";import{F as W}from"./FormOutlined-29ac0008.js";import{D as Z}from"./DeleteOutlined-709e6863.js";import{E as Me}from"./EyeOutlined-39405d92.js";import"./AntdIcon-bae9e399.js";const Ve={class:"pl-4",style:{background:"white",width:"100%","min-height":"calc(100vh - 190px)","border-radius":"12px"}},qe={class:"flex justify-between mt-2"},Te={class:"flex"},Le={class:"flex justify-between ml-2"},Fe={key:0,class:"mt-3 mb-3",style:{"margin-left":"-5px"}},He={key:0},Pe=["onDblclick"],Re={key:2,class:"flex",style:{"justify-content":"center"}},Ye={key:0},Ge={key:1},Ke={key:2},Xe={key:1,class:"mt-3 mb-3",style:{"margin-left":"0px"}},Je={key:0},Qe={key:3,style:{display:"flex",gap:"3px","padding-right":"0px"}},We={class:"justify-end mb-4"},Ze={class:"ant-upload-drag-icon"},et={class:"flex items-center justify-between mb-6"},tt={class:"flex items-center space-x-3"},ot={class:"text-lg font-semibold text-gray-900 leading-none"},at={class:"text-blue-600 ml-2",style:{"font-size":"1.2rem"}},lt={class:"text-lg text-gray-500"},st={class:"font-medium text-gray-700"},nt={class:"font-medium text-gray-700"},it={style:{}},rt={class:"mt-8 border-t border-gray-200 pt-4"},dt={class:"flex flex-wrap gap-2"},ut={class:"flex justify-end mt-8 space-x-2 border-t border-gray-200 pt-4"},_t={__name:"leer-ide",props:["proceso"],setup(O){const L=window.location.origin,C=m([]),N=m("contenido"),F=O,h=m(!1),U=m(1),b=m(!1),u=m({}),j=a=>{u.value=a,b.value=!0},ee=a=>{const e=a.file.status;e!=="uploading"&&console.log(a.file,C.value),e==="done"?(A.success(`${a.file.name} archivo(s) subido(s) exitosamente.`),M(),I(),h.value=!1):e==="error"&&A.error(`${a.file.name} falló al subir.`)},te=()=>{C.value=null},z=m(!1),H=m(0),P=m(0),oe=a=>{z.value=!0,H.value=a.clientY,P.value=a.clientX,a.preventDefault()},B=a=>{a==="1"&&(h.value=!0,z.value=!1)},ae=a=>{z.value=!1},R=m([]),Y=m([]),k=m(""),M=async()=>{S.post("/get-archivos",{term:k.value,proceso:F.proceso}).then(a=>{R.value=a.data.datos.data}).catch(a=>{a.response?console.error("Error de servidor:",a.response.data):a.request?console.error("Error de red:",a.request):console.error("Error de configuración:",a.message)})},I=async()=>{S.post("/get-ides",{term:k.value,proceso:F.proceso}).then(a=>{Y.value=a.data.datos.data}).catch(a=>{a.response?console.error("Error de servidor:",a.response.data):a.request?console.error("Error de red:",a.request):console.error("Error de configuración:",a.message)})},le=async()=>{S.post("/calificacion/actualizar-ide",u.value).then(a=>{a.status==200?(A.success("Cambios guardados correctamente"),b.value=!1,I()):A.error("Error al guardar los cambios")}).catch(a=>{a.response?console.error("Error de servidor:",a.response.data):a.request?console.error("Error de red:",a.request):console.error("Error de configuración:",a.message)})};let G;ve(k,(a,e)=>{clearTimeout(G),G=setTimeout(()=>{I()},300)}),M(),I();const se=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"Tipo",dataIndex:"tipo",align:"center",width:"100px"},{title:"Nombre",dataIndex:"nombre"},{title:"Area",dataIndex:"area"},{title:"Fecha",dataIndex:"fecha",align:"center"},{title:"Registros",dataIndex:"registros",align:"center"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}],ne=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"N° lectura",dataIndex:"camp2",align:"center",width:"90px"},{title:"DNI",dataIndex:"dni",align:"center",width:"100px"},{title:"Aula",dataIndex:"aula",width:"60px",align:"center"},{title:"Tip",dataIndex:"tipo",width:"60px",align:"center"},{title:"Calificar",dataIndex:"estado",width:"70px",align:"center"},{title:"Litho",dataIndex:"litho",align:"center",width:"80px"},{title:"Observaciones",dataIndex:"observaciones",align:"left"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"110px"}],V=a=>{S.get("eliminar-archivo/"+a.id).then(e=>{M(),I(),ie("error",e.data.titulo,e.data.mensaje)})},ie=(a,e,g)=>{Ce[a]({message:e,description:g})},re=a=>{const e=L+"/pdf-errores/"+a,g=document.createElement("a");g.href=e,g.download="observaciones.pdf",document.body.appendChild(g),g.click(),document.body.removeChild(g)};return(a,e)=>{const g=Ne,de=ye,D=_e,x=be,p=he,K=ze,X=ke,w=De,J=Ee,ue=fe("inbox-outlined"),pe=$e,Q=Ie,q=Se,ce=we,E=Ae,me=Oe;return n(),c($,null,[i("div",{style:{},onClick:ae,onContextmenu:xe(oe,["prevent"])},[i("div",Ve,[i("div",qe,[o(de,{value:N.value,"onUpdate:value":e[0]||(e[0]=l=>N.value=l),style:{"margin-left":"-3px"}},{default:t(()=>[o(g,{value:"contenido",style:{"border-radius":"9px 0px 0px 9px"}},{default:t(()=>e[16]||(e[16]=[s("Identficadores")])),_:1}),o(g,{value:"archivos",style:{"border-radius":"0px 9px 9px 0px"}},{default:t(()=>e[17]||(e[17]=[s("Archivos")])),_:1})]),_:1},8,["value"]),i("div",Te,[o(D,{value:k.value,"onUpdate:value":e[1]||(e[1]=l=>k.value=l),style:{"max-width":"200px","border-radius":"6px",height:"32px"},placeholder:"Buscar"},{prefix:t(()=>[o(y(Ue))]),_:1},8,["value"]),i("div",Le,[o(x,{type:"primary",style:{background:"#476175",border:"none","border-radius":"4px"},onClick:e[2]||(e[2]=l=>re(O.proceso))},{icon:t(()=>[o(y(je))]),default:t(()=>[e[18]||(e[18]=s("Observaciones "))]),_:1})])])]),N.value==="archivos"?(n(),c("div",Fe,[(n(),v(X,{columns:se,"data-source":R.value,key:a.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:t(({column:l,index:T,record:r})=>[l.dataIndex==="nro"?(n(),c("span",He,f(T+1),1)):d("",!0),l.dataIndex==="nombre"?(n(),c("div",{key:1,style:{width:"100%",cursor:"pointer"},onDblclick:_=>a.customRow(r)},[i("span",null,f(r.nombre),1)],40,Pe)):d("",!0),l.dataIndex==="area"?(n(),c("div",Re,[r.area===1?(n(),c("div",Ye,[o(p,{color:"cyan"},{default:t(()=>e[19]||(e[19]=[s("Biomedicas")])),_:1})])):d("",!0),r.area===2?(n(),c("div",Ge,[o(p,{color:"orange"},{default:t(()=>e[20]||(e[20]=[s("Ingenierías")])),_:1})])):d("",!0),r.area===3?(n(),c("div",Ke,[o(p,{color:"purple"},{default:t(()=>e[21]||(e[21]=[s("Sociales")])),_:1})])):d("",!0)])):d("",!0),l.dataIndex==="acciones"?(n(),c($,{key:3},[o(x,{type:"success",class:"mr-1",style:{color:"#476175"},onClick:_=>a.cambiarSexo(r.id_postulante,r.sexo),size:"small"},{icon:t(()=>[o(y(Be))]),_:2},1032,["onClick"]),o(x,{onClick:_=>j(r),class:"mr-1",style:{color:"blue"},size:"small"},{icon:t(()=>[o(y(W))]),_:2},1032,["onClick"]),o(K,{title:"¿Estas seguro de eliminar?",onConfirm:_=>V(r)},{default:t(()=>[o(x,{shape:"",size:"small",style:{color:"crimson"}},{icon:t(()=>[o(y(Z))]),_:1})]),_:2},1032,["onConfirm"])],64)):d("",!0)]),_:1},8,["data-source"]))])):d("",!0),N.value==="contenido"?(n(),c("div",Xe,[(n(),v(X,{columns:ne,"data-source":Y.value,key:a.id,size:"small",scroll:{y:"calc(100vh - 300px)"},pagination:!1,style:{scale:".7rem"}},{bodyCell:t(({column:l,index:T,record:r})=>[l.dataIndex==="nro"?(n(),c("span",Je,f(T+1),1)):d("",!0),l.dataIndex==="observaciones"?(n(),c($,{key:1},[r.dni===null?(n(),v(p,{key:0,color:"pink"},{default:t(()=>e[22]||(e[22]=[s(" Sin DNI")])),_:1})):d("",!0),r.aula===""?(n(),v(p,{key:1,color:"purple"},{default:t(()=>e[23]||(e[23]=[s(" Sin aula")])),_:1})):d("",!0),r.len_doc!==8&&r.dni!==null?(n(),v(p,{key:2,color:"green"},{default:t(()=>e[24]||(e[24]=[s(" Dni erroneo")])),_:1})):d("",!0),r.vaula===0&&r.aula!==""?(n(),v(p,{key:3,color:"blue"},{default:t(()=>e[25]||(e[25]=[s(" Error de aula")])),_:1})):d("",!0),r.tipo===""?(n(),v(p,{key:4,color:"yellow"},{default:t(()=>e[26]||(e[26]=[s(" Sin tipo")])),_:1})):d("",!0),r.participa!==""?(n(),v(p,{key:5,color:"orange"},{default:t(()=>e[27]||(e[27]=[s(" No participa")])),_:1})):d("",!0),r.estado!==1?(n(),v(p,{key:6,color:"red"},{default:t(()=>e[28]||(e[28]=[s(" No se calificará ")])),_:1})):d("",!0)],64)):d("",!0),l.dataIndex==="estado"?(n(),c($,{key:2},[r.estado==1?(n(),v(p,{key:0,color:"cyan",style:{color:"blue"}},{default:t(()=>e[29]||(e[29]=[s(" Si ")])),_:1})):d("",!0),r.estado==0?(n(),v(p,{key:1,color:"red"},{default:t(()=>e[30]||(e[30]=[s(" No ")])),_:1})):d("",!0)],64)):d("",!0),l.dataIndex==="acciones"?(n(),c("div",Qe,[o(x,{size:"small",onClick:_=>j(r),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"gray",display:"flex","align-items":"center"}},{default:t(()=>[o(y(Me))]),_:2},1032,["onClick"]),o(x,{size:"small",onClick:_=>j(r),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#af7200",display:"flex","align-items":"center"}},{default:t(()=>[o(y(W))]),_:2},1032,["onClick"]),o(K,{title:"¿Estas seguro de eliminar?",onConfirm:_=>V(r)},{default:t(()=>[o(x,{size:"small",onClick:_=>V(r),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"crimson",display:"flex","align-items":"center"}},{default:t(()=>[o(y(Z))]),_:2},1032,["onClick"])]),_:2},1032,["onConfirm"])])):d("",!0)]),_:1},8,["data-source"]))])):d("",!0),o(Q,{open:h.value,"onUpdate:open":e[5]||(e[5]=l=>h.value=l),title:"Cargar fichas de identificación",onOk:te,centered:!0,style:{"max-height":"calc(100vh - 100px)","overflow-x":"scroll",cursor:"pointer"}},{default:t(()=>[i("div",We,[o(J,{class:"mb-2",style:{width:"100%"},value:U.value,"onUpdate:value":e[3]||(e[3]=l=>U.value=l)},{default:t(()=>[o(w,{value:1},{default:t(()=>e[31]||(e[31]=[s("Biomédicas")])),_:1}),o(w,{value:2},{default:t(()=>e[32]||(e[32]=[s("Ingenierías")])),_:1}),o(w,{value:3},{default:t(()=>e[33]||(e[33]=[s("Sociales")])),_:1})]),_:1},8,["value"])]),o(pe,{fileList:C.value,"onUpdate:fileList":e[4]||(e[4]=l=>C.value=l),name:"file",multiple:!0,action:y(L)+"/calificacion/carga-ide/"+O.proceso+"/"+U.value,onChange:ee,onDrop:a.handleDrop,"list-type":"picture"},{default:t(()=>[i("p",Ze,[o(ue)]),e[34]||(e[34]=i("p",{class:"ant-upload-text",style:{width:"100%"}},"Haz clic o arrastra archivos a esta área para cargar",-1)),e[35]||(e[35]=i("p",{class:"ant-upload-hint"}," Soporte para carga única o múltiple. Prohibido subir datos de la empresa u otros archivos prohibidos. ",-1))]),_:1},8,["fileList","action","onDrop"])]),_:1},8,["open"])]),z.value?(n(),c("div",{key:0,style:ge([{position:"absolute",border:"solid 1px #d9d9d943","padding-top":"0px","border-radius":"8px",overflow:"hidden"},{top:`${H.value}px`,left:`${P.value}px`}])},[o(ce,{size:"small",style:{"margin-top":"-4px","margin-bottom":"-4px"}},{default:t(()=>[o(q,{key:"1",class:"selec-menu",onClick:e[6]||(e[6]=l=>B("1"))},{default:t(()=>e[36]||(e[36]=[i("div",{style:{"margin-top":"0px"}}," Cargar archivos ",-1)])),_:1}),o(q,{key:"2",class:"selec-menu",onClick:e[7]||(e[7]=l=>B("2"))},{default:t(()=>e[37]||(e[37]=[i("div",{style:{"margin-top":"0px"}}," Nuevos Ides ",-1)])),_:1}),o(q,{key:"2",class:"selec-menu",onClick:e[8]||(e[8]=l=>B("2"))},{default:t(()=>e[38]||(e[38]=[i("div",{style:{"margin-top":"0px"}}," selees ",-1)])),_:1})]),_:1})],4)):d("",!0)],32),o(Q,{open:b.value,"onUpdate:open":e[15]||(e[15]=l=>b.value=l),footer:null,centered:"",width:"520px",class:"macos-form-modal"},{default:t(()=>[i("div",et,[i("div",tt,[i("div",null,[i("h2",ot,[e[39]||(e[39]=s(" Hoja de Identificación ")),i("span",at,"#"+f(u.value.litho),1)]),i("p",lt,[e[40]||(e[40]=s(" Aula ")),i("span",st,f(u.value.aula),1),e[41]||(e[41]=s(" · Tipo ")),i("span",nt,f(u.value.tipo||"N/A"),1)])])]),o(p,{color:"processing",class:"rounded-full text-lg shadow-sm"},{default:t(()=>[e[42]||(e[42]=s(" Lectura ")),i("span",it,f(u.value.camp2),1)]),_:1})]),o(me,{layout:"vertical",model:u.value,class:"grid grid-cols-1 sm:grid-cols-2 gap-5"},{default:t(()=>[o(E,{label:"DNI"},{default:t(()=>[o(D,{value:u.value.dni,"onUpdate:value":e[9]||(e[9]=l=>u.value.dni=l),size:"large",placeholder:"Ingrese DNI"},{suffix:t(()=>e[43]||(e[43]=[])),_:1},8,["value"])]),_:1}),o(E,{label:"Aula"},{default:t(()=>[o(D,{value:u.value.aula,"onUpdate:value":e[10]||(e[10]=l=>u.value.aula=l),size:"large",placeholder:"Ingrese aula"},{suffix:t(()=>e[44]||(e[44]=[])),_:1},8,["value"])]),_:1}),o(E,{label:"Tipo"},{default:t(()=>[o(D,{value:u.value.tipo,"onUpdate:value":e[11]||(e[11]=l=>u.value.tipo=l),size:"large",placeholder:"Ingrese tipo"},{suffix:t(()=>e[45]||(e[45]=[])),_:1},8,["value"])]),_:1}),o(E,{label:"Calificar"},{default:t(()=>[o(J,{value:u.value.estado,"onUpdate:value":e[12]||(e[12]=l=>u.value.estado=l),size:"large",placeholder:"Seleccione una opción"},{default:t(()=>[o(w,{value:1},{default:t(()=>e[46]||(e[46]=[s("Si")])),_:1}),o(w,{value:0},{default:t(()=>e[47]||(e[47]=[s("No")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"]),i("div",rt,[e[48]||(e[48]=i("h3",{class:"text-sm font-medium text-gray-600 mb-2"},"Observaciones",-1)),i("div",dt,[o(p,{color:"blue"},{default:t(()=>[s("DNI: "+f(u.value.len_doc)+" digitos",1)]),_:1}),o(p,{color:u.value.vdni?"green":"red"},{default:t(()=>[s(" DNI: "+f(u.value.vdni?"Válido":"Inválido"),1)]),_:1},8,["color"]),o(p,{color:u.value.vaula?"green":"red"},{default:t(()=>[s(" Aula: "+f(u.value.vaula?"Válido":"Inválido"),1)]),_:1},8,["color"]),o(p,{color:u.value.estado?"green":"red"},{default:t(()=>[s(" Calificar: "+f(u.value.estado==1?"":"No se va calificar"),1)]),_:1},8,["color"])])]),i("div",ut,[o(x,{onClick:e[13]||(e[13]=l=>b.value=!1),class:"hover:opacity-80"},{default:t(()=>e[49]||(e[49]=[s("Cancelar")])),_:1}),o(x,{type:"primary",onClick:e[14]||(e[14]=l=>le()),class:"shadow-sm hover:shadow-md"},{default:t(()=>e[50]||(e[50]=[s(" Guardar cambios ")])),_:1})])]),_:1},8,["open"])],64)}}};export{_t as default};
