import{a as t,r as u,e as ne,J as re,o as _,c as y,u as w,w as s,d as n,F as I,M as ie,Z as de,b,t as F,f as P,E as ue,G as pe,x as me,n as ce,B as fe,I as ve,_ as ge,h as _e,N as xe,k as ye,l as be,j as ke,m as we,q as Pe}from"./app-0034f043.js";import{_ as he}from"./AuthenticatedLayout-0755e9ed.js";import{A as Ce}from"./AntdIcon-748582a6.js";import{S as Oe}from"./SearchOutlined-18fd4aad.js";import{F as Ie}from"./FormOutlined-71f39711.js";import{D as Fe}from"./DeleteOutlined-0bfcfa70.js";import"./logotiny-c4b525af.js";import"./Header-3addd6c1.js";import"./DropdownLink-bdc7cf9c.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./DownOutlined-47092423.js";/* empty css                                                            */var ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const Ue=ze;function N(d){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?Object(arguments[r]):{},g=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(g=g.concat(Object.getOwnPropertySymbols(i).filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable}))),g.forEach(function(p){je(d,p,i[p])})}return d}function je(d,r,i){return r in d?Object.defineProperty(d,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):d[r]=i,d}var z=function(r,i){var g=N({},r,i.attrs);return t(Ce,N({},g,{icon:Ue}),null)};z.displayName="LockOutlined";z.inheritAttrs=!1;const Ve=z,Ne={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-5"},Se={class:"flex justify-between mb-2"},Le={class:"mr-3"},$e={class:"flex justify-between",style:{position:"relative"}},Be={class:"mr-2",style:{position:"absolute",left:"10px",top:"6px"}},qe={key:0,style:{"text-transform":"capitalize"},size:"small"},Me={key:0,style:{"text-align":"center"}},Re={key:1,style:{"text-align":"center"}},Ae={class:"flex justify-end"},Ee={style:{"margin-top":"-2px"}},oo={__name:"index",props:["usuarios"],setup(d){const r=u(""),i=u([]),g=u(""),p=u([]),U=u([]);let j;ne(r,(a,e)=>{clearTimeout(j),j=setTimeout(()=>{C()},500)});const x=u(!1),S=()=>{x.value=!0},L=a=>{console.log(a),x.value=!1},V=a=>{o.id=a.id,o.name=a.name,o.paterno=a.paterno,o.materno=a.materno,o.email=a.email,o.rol=a.id_rol,o.id_proceso=a.id_proceso,o.proceso=a.proceso,o.estado=a.estado==1,g.value=a.id_rol,x.value=!0},h=u(),o=re({id:null,name:"",paterno:"",materno:"",email:"",pass:"",checkPass:"",rol:u(null),estado:!0,id_proceso:null,proceso:9});let $=async(a,e)=>e===""?Promise.reject("Ingrese su correo electrónico"):Promise.resolve(),B=async(a,e)=>e===""?Promise.reject("Ingrese su nombre"):Promise.resolve(),q=async(a,e)=>e===""?Promise.reject("Ingrese la contraseña"):(o.checkPass!==""&&h.value.validateFields("checkPass"),Promise.resolve()),M=async(a,e)=>e===""?Promise.reject("Ingrese la contraseña nuevamente"):e!==o.pass?Promise.reject("Las contraseñas no coenciden"):Promise.resolve();const R={pageSize:20},A=a=>{console.log(a,o)},E=a=>{console.log(a)},D=()=>{h.value.resetFields()},H=(...a)=>{console.log(a)},T={required:"Ingrese ${label}",types:{email:"${label} no valido"}},C=async()=>{let a=await axios.post("get-usuarios",{term:r.value});p.value=a.data.usuarios},G=async()=>{let a=await axios.get("get-roles-u");i.value=a.data.datos},J=async()=>{let a=await axios.get("get-select-procesos");U.value=a.data.datos};G(),C(),J();const Z=()=>{let a={id:o.id,name:o.name,paterno:o.paterno,materno:o.materno,email:o.email,estado:o.estado,rol:2,id_proceso:o.id_proceso};o.pass&&o.pass.trim()!==""&&(a.password=o.pass),axios.post("save-user",a).then(e=>{console.log(e.data.user),x.value=!1,o.id=null,o.name="",o.paterno="",o.materno="",o.email="",o.pass="",o.checkPass="",o.rol=u(null),o.id_proceso=null,o.proceso=9,C(),Q("success","Nuevo Usuario Agregado",e.data.user.name)})},Q=(a,e,m)=>{ce[a]({message:e,description:m})},W={pass:[{required:!0,validator:q,trigger:"change"}],checkPass:[{required:!0,validator:M,trigger:"change"}],name:[{required:!0,validator:B,trigger:"change"}],email:[{validator:$,trigger:"change"}]},X=[{title:"Nombre",dataIndex:"name"},{title:"Correo",dataIndex:"email"},{title:"Rol",dataIndex:"role_name",align:"center"},{title:"Proceso",dataIndex:"proceso",align:"center"},{title:"Estado",dataIndex:"estado",align:"center"},{title:"operation",dataIndex:"operation"}];return(a,e)=>{const m=fe,c=ve,O=ge,Y=_e,K=xe,f=ye,v=be,ee=ke,oe=we,te=Pe,ae=ie;return _(),y(I,null,[t(w(de),{title:"Usuarios"}),t(he,null,{default:s(()=>[n("div",Ne,[n("div",Se,[n("div",Le,[t(m,{class:"mb-3",style:{"border-radius":"5px",border:"none",background:"#476175"},type:"primary",onClick:S},{default:s(()=>e[11]||(e[11]=[b("Usuario nuevo")])),_:1})]),n("div",$e,[t(c,{type:"text",placeholder:"Buscar",value:r.value,"onUpdate:value":e[0]||(e[0]=l=>r.value=l),style:{height:"36px","max-width":"300px","border-radius":"6px","padding-left":"30px"}},null,8,["value"]),n("div",Be,[t(w(Oe))])])]),t(Y,{bordered:"","data-source":p.value,columns:X,size:"small",pagination:R},{bodyCell:s(({column:l,index:se,record:k})=>[l.dataIndex==="name"?(_(),y("span",qe,F(k.name.toLowerCase())+" "+F(k.paterno.toLowerCase()),1)):P("",!0),l.dataIndex==="role_name"?(_(),ue(O,{key:1,color:"cyan",size:"small"},{default:s(()=>[b(F(p.value[se].role_name),1)]),_:2},1024)):P("",!0),l.dataIndex==="estado"?(_(),y(I,{key:2},[k.estado==1?(_(),y("div",Me,[t(O,{color:"#476175",size:"small"},{default:s(()=>e[12]||(e[12]=[b(" activo ")])),_:1})])):(_(),y("div",Re,[t(O,{color:"gray",size:"small"},{default:s(()=>e[13]||(e[13]=[b(" inactivo ")])),_:1})]))],64)):P("",!0),l.dataIndex==="operation"?(_(),y(I,{key:3},[t(m,{class:"mr-1",type:"primary",onClick:le=>V(k),style:{"border-radius":"4px",background:"none",border:"1px solid gray",color:"gray",width:"20px"},size:"small"},{icon:s(()=>[t(w(Ve))]),_:2},1032,["onClick"]),t(m,{class:"mr-1",type:"primary",onClick:le=>V(k),style:{"border-radius":"4px",background:"none",color:"blue",width:"20px"},size:"small"},{icon:s(()=>[t(w(Ie))]),_:2},1032,["onClick"]),t(m,{type:"danger",style:{"border-radius":"4px",background:"none",color:"red",border:"red 1px solid",width:"20px"},size:"small"},{icon:s(()=>[t(w(Fe))]),_:1})],64)):P("",!0)]),_:1},8,["data-source"])])]),_:1}),n("div",null,[t(ae,{visible:x.value,"onUpdate:visible":e[10]||(e[10]=l=>x.value=l),title:"Nuevo Usuario",style:{"margin-top":"-50px"},onOk:L},{footer:s(()=>[t(m,{style:{"border-radius":"5px"},onClick:D},{default:s(()=>e[23]||(e[23]=[b("Cancelar")])),_:1}),t(m,{type:"primary",onClick:e[9]||(e[9]=l=>Z()),style:{"border-radius":"5px",border:"none",background:"#476175"}},{default:s(()=>e[24]||(e[24]=[b("Guardar")])),_:1})]),default:s(()=>[n("div",null,[t(te,pe({ref_key:"formRef",ref:h,name:"custom-validation",model:o,rules:W},a.layout,{onFinish:A,onValidate:H,"validate-messages":T,onFinishFailed:E}),{default:s(()=>[n("div",null,[n("div",Ae,[e[14]||(e[14]=n("div",{class:"mr-2"},"Estado",-1)),n("div",Ee,[t(K,{style:me(o.estado?{backgroundColor:"#476175"}:{backgroundColor:"grey"}),checked:o.estado,"onUpdate:checked":e[1]||(e[1]=l=>o.estado=l)},null,8,["style","checked"])])])]),t(oe,{gutter:[16,0],class:"form-row mb-0"},{default:s(()=>[t(v,{span:24,md:24,lg:12,xl:24,xxl:24},{default:s(()=>[e[15]||(e[15]=n("div",null,"Nombres",-1)),t(f,{"has-feedback":"",name:"name"},{default:s(()=>[t(c,{value:o.name,"onUpdate:value":e[2]||(e[2]=l=>o.name=l),type:"text",autocomplete:"off"},null,8,["value"])]),_:1})]),_:1}),t(v,{span:24,md:24,lg:12,xl:12,xxl:12},{default:s(()=>[e[16]||(e[16]=n("div",null,"Ap. paterno",-1)),t(f,{"has-feedback":"",name:"paterno"},{default:s(()=>[t(c,{value:o.paterno,"onUpdate:value":e[3]||(e[3]=l=>o.paterno=l),type:"text",autocomplete:"off"},null,8,["value"])]),_:1})]),_:1}),t(v,{span:24,md:24,lg:12,xl:12,xxl:12},{default:s(()=>[e[17]||(e[17]=n("div",null,"Ap. materno",-1)),t(f,{"has-feedback":"",name:"materno"},{default:s(()=>[t(c,{value:o.materno,"onUpdate:value":e[4]||(e[4]=l=>o.materno=l),type:"text",autocomplete:"off"},null,8,["value"])]),_:1})]),_:1}),t(v,{span:24,md:24,lg:12,xl:24,xxl:24},{default:s(()=>[e[18]||(e[18]=n("div",null,"Correo",-1)),t(f,{"has-feedback":"",name:"email",rules:[{type:"email",required:!0}]},{default:s(()=>[t(c,{value:o.email,"onUpdate:value":e[5]||(e[5]=l=>o.email=l),type:"text",autocomplete:"off"},null,8,["value"])]),_:1})]),_:1}),t(v,{span:24,md:24,lg:12,xl:12,xxl:12},{default:s(()=>[e[19]||(e[19]=n("div",null,"Contraseña",-1)),t(f,{"has-feedback":"",name:"pass"},{default:s(()=>[t(c,{value:o.pass,"onUpdate:value":e[6]||(e[6]=l=>o.pass=l),type:"password",autocomplete:"off"},null,8,["value"])]),_:1})]),_:1}),t(v,{span:24,md:24,lg:12,xl:12,xxl:12},{default:s(()=>[e[20]||(e[20]=n("div",null,"Confirmar contraseña",-1)),t(f,{"has-feedback":"",name:"checkPass"},{default:s(()=>[t(c,{value:o.checkPass,"onUpdate:value":e[7]||(e[7]=l=>o.checkPass=l),type:"password",autocomplete:"off"},null,8,["value"])]),_:1})]),_:1}),t(v,{span:24,md:24,lg:12,xl:12,xxl:12},{default:s(()=>[e[21]||(e[21]=n("div",null,"Rol",-1)),t(f,{"has-feedback":""},{default:s(()=>[t(c,{value:"Revisor",disabled:""})]),_:1})]),_:1}),t(v,{span:24,md:24,lg:12,xl:12,xxl:12},{default:s(()=>[e[22]||(e[22]=n("div",null,"Examen",-1)),t(f,{name:"proceso",rules:[{required:!0,message:"Seleccine el rol",trigger:"change"}]},{default:s(()=>[t(ee,{ref:"select",value:o.id_proceso,"onUpdate:value":e[8]||(e[8]=l=>o.id_proceso=l),style:{width:"100%"},options:U.value,onFocus:a.focus,onChange:a.handleChange},null,8,["value","options","onFocus","onChange"])]),_:1})]),_:1})]),_:1})]),_:1},16,["model"])])]),_:1},8,["visible"])])],64)}}};export{oo as default};
