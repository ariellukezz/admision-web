import{r as t,x as ee,e as r,f as u,o as i,c as p,a,u as _,w as s,F as V,l as x,Z as te,d as n,S as ae,s as C,b as v,t as f,g as m,E as oe,D as se}from"./app-c0a860c3.js";import{L as le}from"./LayoutSimulacro-48a41c13.js";import{F as ne}from"./FormOutlined-788f6398.js";import"./DropdownLink-fa373470.js";import"./logotiny-c4b525af.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./TopMenu-b03e03db.js";const ie={class:"mb-4",style:{width:"100%"}},de={style:{background:"white","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},ce={class:"flex justify-end mt-5 mb-4 mr-4"},re={class:"flex justify-between",style:{position:"relative"}},ue={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},pe={key:1},ve={key:2},me={key:3},ge={key:4},_e={class:"flex justify-between mb-6 mt-2 pr-4"},xe={clas:"",style:{scale:"0.9"}},ze={__name:"consulta",setup(fe){t([]);const b=t(""),y=t(1),z=t(null),g=t(10),U=t(!1),j=t(null),D=t(null),E=t([]),O=t(null);t(!1);const P=t(),S=t(),F=t(),T=t(),q=t(),L=t(),$=t(),A=t();t();const d=ee({cod_modular:"",nombre:"",cod_local:"",nivel:"",gestion:null,ubigeo:"",direccion:"",observacion:""});t(null);const N=async()=>{x.post("/get-ubigeo",{term:D.value}).then(e=>{E.value=e.data.datos.data,console.log("Datos recibidos:",E)}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})},R=t([]),h=async()=>{let e=await x.post("get-pagos-simulacro-consulta?page="+y.value,{term:b.value,paginashoja:g.value});R.value=e.data.datos.data,z.value=e.data.datos.total};h();const B=async()=>{let e=await x.post("/get-departamentos-codigo",{term:S.value});P.value=e.data.datos.data},Z=async()=>{let e=await x.post("/get-provincias-codigo?page=",{departamento:F.value});T.value=e.data.datos},G=async e=>{let o=await x.post("/get-distritos-codigo?page=",{departamento:F.value,provincia:L.value});$.value=o.data.datos};r(y,(e,o)=>{h()}),r(g,(e,o)=>{h()}),r(b,(e,o)=>{h()}),r(D,(e,o)=>{e.length>=3&&N()}),r(S,(e,o)=>{e.length>=3&&B()}),r(q,(e,o)=>{e.length>=3&&Z()}),r(A,(e,o)=>{e.length>=3&&G()}),r(O,(e,o)=>{e.length>=3&&getColegios()}),B(),N();const H=e=>{U.value=!0,d.id=e.id,d.cod_modular=e.cod_modular,d.nombre=e.nombre,d.cod_local=e.cod_local,d.gestion=e.gestion,d.nivel=e.nivel,d.ubigeo=e.ubigeo,j.value=e.lugar,d.direccion=e.direccion,d.observacion=e.observacion},J=t([{title:"Nro_Doc",width:"100px",dataIndex:"nro_doc",fixed:"left"},{title:"Nombres",dataIndex:"nombre",responsive:["xs","sm","md","lg"]},{title:"Apellidos",dataIndex:"apellidos",responsive:["xs","sm","md","lg"]},{title:"Concepto",dataIndex:"concepto",responsive:["md"]},{title:"F.Confirmacion",dataIndex:"fecha",responsive:["lg"]},{title:"autorizacion",dataIndex:"cod_autorizacion",responsive:["lg"]},{title:"Total",dataIndex:"total",align:"center",responsive:["md","lg"]},{title:"Comision",dataIndex:"comision",align:"center",responsive:["md","lg"]},{title:"Tipo",dataIndex:"medio",align:"center",responsive:["md"]},{title:"Estado",dataIndex:"est",align:"center",responsive:["xs","sm","md","lg"]}]);return(e,o)=>{const K=u("a-input"),I=u("a-tag"),k=u("a-button"),M=u("a-popconfirm"),Q=u("a-table"),W=u("a-pagination"),w=u("a-select-option"),X=u("a-select");return i(),p(V,null,[a(_(te),{title:"Pagos"}),a(le,null,{default:s(()=>[n("div",ie,[n("div",de,[n("div",ce,[n("div",re,[a(K,{type:"text",placeholder:"Buscar",value:b.value,"onUpdate:value":o[0]||(o[0]=l=>b.value=l),style:{"max-width":"340px","padding-left":"30px","border-radius":"6px"}},null,8,["value"]),n("div",ue,[a(_(ae))])])]),n("div",null,[a(Q,{dataSource:R.value,size:"",columns:J.value,scroll:{x:900},pagination:!1},{bodyCell:s(({column:l,index:be,record:c})=>[l.dataIndex==="nro_doc"?(i(),C(I,{key:0,color:"#4f4f4f",style:{width:"78px"}},{default:s(()=>[v(f(c.dni),1)]),_:2},1024)):m("",!0),l.dataIndex==="nombre"?(i(),p("div",pe,[n("span",null,f(c.nombres),1)])):m("",!0),l.dataIndex==="apellidos"?(i(),p("div",ve,[n("span",null,f(c.apellidos),1)])):m("",!0),l.dataIndex==="total"?(i(),p("div",me,[n("span",null,"S/ "+f(parseInt(c.total).toFixed(2)),1)])):m("",!0),l.dataIndex==="comision"?(i(),p("div",ge,[n("span",null,"S/ "+f((c.subtotal-c.total).toFixed(2)),1)])):m("",!0),l.dataIndex==="acciones"?(i(),p(V,{key:5},[a(k,{type:"success",class:"mr-1",style:{color:"#476175"},size:"small",disabled:""},{icon:s(()=>[a(_(oe))]),_:1}),a(k,{class:"mr-1",onClick:Y=>H(c),style:{color:"blue"},size:"small",disabled:""},{icon:s(()=>[a(_(ne))]),_:2},1032,["onClick"]),a(M,{title:"¿Estas seguro de eliminar?",onConfirm:Y=>e.eliminar(c),disabled:""},{default:s(()=>[a(k,{size:"small",style:{color:"crimson"},disabled:""},{icon:s(()=>[a(_(se),{disabled:""})]),_:1})]),_:2},1032,["onConfirm"])],64)):m("",!0),l.dataIndex==="est"?(i(),p(V,{key:6},[c.est==="0"?(i(),C(I,{key:0,color:"red",style:{width:"70px"}},{default:s(()=>[v(" Usado ")]),_:1})):(i(),C(I,{key:1,color:"purple",style:{width:"70px"}},{default:s(()=>[v("No usado ")]),_:1}))],64)):m("",!0)]),_:1},8,["dataSource","columns"])]),n("div",_e,[n("div",null,[a(W,{current:y.value,"onUpdate:current":o[1]||(o[1]=l=>y.value=l),"page-size":g.value,simple:"",total:z.value,"show-less-items":""},null,8,["current","page-size","total"])]),n("div",xe,[a(X,{value:g.value,"onUpdate:value":o[2]||(o[2]=l=>g.value=l),style:{width:"90px"}},{default:s(()=>[a(w,{value:10},{default:s(()=>[v("10 Reg.")]),_:1}),a(w,{value:20},{default:s(()=>[v("20 Reg.")]),_:1}),a(w,{value:50},{default:s(()=>[v("50 Reg.")]),_:1}),a(w,{value:100},{default:s(()=>[v("100 Reg.")]),_:1})]),_:1},8,["value"])])])])])]),_:1})],64)}}};export{ze as default};
