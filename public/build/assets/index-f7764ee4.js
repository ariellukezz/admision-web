import{r as u,e as F,H as J,D as Z,o as i,c as w,a as t,u as v,w as l,d as b,F as I,y as V,M as L,Z as Q,b as m,E as y,f as d,J as W,n as X,B as Y,I as ee,_ as oe,g as te,K as ae,h as le,i as ne,k as ie,q as se}from"./app-cb2b04a1.js";import{_ as ue}from"./AuthenticatedLayout-10056df6.js";import{S as de}from"./SearchOutlined-4de8140b.js";import{E as re}from"./EyeOutlined-fae3f109.js";import{F as me}from"./FormOutlined-e4d30c9c.js";import{D as pe}from"./DeleteOutlined-5ad8ecc3.js";import"./logotiny-c4b525af.js";import"./Header-2baa8187.js";import"./AntdIcon-03e9de4c.js";import"./perfil-8f870394.js";/* empty css                                                               */import"./_plugin-vue_export-helper-c27b6911.js";import"./UserOutlined-d22982c2.js";import"./SafetyCertificateOutlined-b9de7e86.js";import"./EditOutlined-349992f9.js";import"./DownOutlined-93bf85fe.js";/* empty css                                                            */const ve={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},ce={class:"mr-3"},fe={class:"flex justify-between",style:{position:"relative"}},_e={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},$e={__name:"index",setup(ge){const x=u(""),c=u([]);u([]);const r=u(!1),k=u(1),N=u(null),o=u({id:null,codigo:"",nombre:"",postulante:"",tipo:"",observacion:""}),j=()=>{r.value=!0};F(x,(a,e)=>{f()}),F(r,(a,e)=>{r.value==!1&&o.value.id!=null&&(o.value.id=null,o.value.codigo=null,o.value.nombre=null,o.value.postulante=null,o.value.tipo=null,o.value.observacion=null)}),F(k,(a,e)=>{f()});const O={labelCol:{span:7},wrapperCol:{span:14}},S={nombre:[{required:!0,validator:async(a,e)=>e===""?Promise.reject("Ingrese el nombre del documento"):Promise.resolve(),trigger:"change"}],codigo:[{required:!0,validator:async(a,e)=>e===""?Promise.reject("Ingrese el codigo del documento"):Promise.resolve(),trigger:"change"}]},D=a=>{r.value=!0,o.value.id=a.id,o.value.codigo=a.codigo,o.value.nombre=a.nombre,o.value.postulante=a.postulante,o.value.tipo=a.tipo,o.value.observacion=a.observacion},f=async(a="")=>{let e=await V.post("get-documentos-admin?page="+k.value,{term:x.value});c.value=e.data.datos.data,N.value=e.data.datos.total},$=()=>{let a={id:o.value.id,codigo:o.value.codigo,nombre:o.value.nombre,observacion:o.value.observacion};V.post("save-documento",a).then(e=>{f(),h("success",e.data.titulo,e.data.mensaje),r.value=!1,o.value.codigo=null,o.value.id=null,o.value.nombre=""})},z=a=>{V.get("eliminar-modalidad/"+a.id).then(e=>{f(),h("warning",e.data.titulo,e.data.mensaje)})},R=[{title:"ID",dataIndex:"id"},{title:"Codigo",dataIndex:"codigo"},{title:"Nombre",dataIndex:"nombre"},{title:"Tipo",dataIndex:"tipo"},{title:"DNI P.",dataIndex:"dni"},{title:"Postulante",dataIndex:"postulante"},{title:"Estado",dataIndex:"estado"},{title:"Verificado",dataIndex:"verificado",align:"center"},{title:"Observación",dataIndex:"observacion"},{title:"Acciones",dataIndex:"acciones"}],P=u([]),q=a=>{console.log("selectedRowKeys changed: ",a),P.value=a};J(()=>({selectedRowKeys:v(P),onChange:q,hideDefaultSelections:!0}));const h=(a,e,s)=>{X[a]({message:e,description:s})};return f(),(a,e)=>{const s=Y,p=ee,K=Z("row"),C=oe,E=te,M=ae,T=le,A=ne,_=ie,G=se,H=L;return i(),w(I,null,[t(v(Q),{title:"Documentos"}),t(ue,null,{default:l(()=>[b("div",ve,[t(K,{class:"flex justify-between mb-4"},{default:l(()=>[b("div",ce,[t(s,{type:"primary",disabled:"",onClick:j},{default:l(()=>e[9]||(e[9]=[m("Nuevo")])),_:1})]),b("div",fe,[t(p,{type:"text",placeholder:"Buscar",value:x.value,"onUpdate:value":e[0]||(e[0]=n=>x.value=n),style:{"max-width":"300px","padding-left":"30px"}},null,8,["value"]),b("div",_e,[t(v(de))])])]),_:1}),t(T,{columns:R,"data-source":c.value,pagination:!1,size:"small"},{bodyCell:l(({column:n,index:U,record:g})=>[n.dataIndex==="estado"?(i(),w(I,{key:0},[g.estado===0?(i(),y(C,{key:0,color:"red"},{default:l(()=>e[10]||(e[10]=[m("false")])),_:1})):d("",!0),g.estado===1?(i(),y(C,{key:1,color:"blue"},{default:l(()=>e[11]||(e[11]=[m("En uso")])),_:1})):d("",!0)],64)):d("",!0),n.dataIndex==="verificado"?(i(),w(I,{key:1},[g.verificado===0?(i(),y(C,{key:0,color:"error"},{default:l(()=>e[12]||(e[12]=[m("no verificado")])),_:1})):d("",!0),g.verificado===1?(i(),y(C,{key:1,color:"success"},{default:l(()=>e[13]||(e[13]=[m("verificado")])),_:1})):d("",!0)],64)):d("",!0),n.dataIndex==="acciones"?(i(),w(I,{key:2},[t(s,{type:"success",disabled:"",style:{background:"green",color:"white"},onClick:B=>D(c.value[U]),size:"small"},{icon:l(()=>[t(v(re))]),_:2},1032,["onClick"]),t(E,{type:"vertical"}),t(s,{type:"primary",onClick:B=>D(g),size:"small"},{icon:l(()=>[t(v(me))]),_:2},1032,["onClick"]),t(E,{type:"vertical"}),c.value.length?(i(),y(M,{key:0,title:"¿Estas seguro de eliminar?",onConfirm:B=>z(c.value[U])},{default:l(()=>[t(s,{type:"danger",shape:"",size:"small"},{icon:l(()=>[t(v(pe))]),_:1})]),_:2},1032,["onConfirm"])):d("",!0)],64)):d("",!0)]),_:1},8,["data-source"]),t(A,{current:k.value,"onUpdate:current":e[1]||(e[1]=n=>k.value=n),total:N.value,"show-less-items":""},null,8,["current","total"])])]),_:1}),b("div",null,[t(H,{visible:r.value,"onUpdate:visible":e[8]||(e[8]=n=>r.value=n),title:"Nuevo Documento",style:{"margin-top":"-40px"}},{footer:l(()=>[t(s,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:l(()=>e[14]||(e[14]=[m("Cancelar")])),_:1},8,["onClick"]),t(s,{type:"primary",onClick:e[7]||(e[7]=n=>$())},{default:l(()=>e[15]||(e[15]=[m("Guardar")])),_:1})]),default:l(()=>[t(G,W({ref:"formRef",name:"custom-validation",model:a.formState,rules:S},O,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:l(()=>[t(_,{"has-feedback":"",label:"Codigo",name:"codigo"},{default:l(()=>[t(p,{type:"text",value:o.value.codigo,"onUpdate:value":e[2]||(e[2]=n=>o.value.codigo=n),autocomplete:"off"},null,8,["value"])]),_:1}),t(_,{"has-feedback":"",label:"Nombre",name:"nombre"},{default:l(()=>[t(p,{type:"text",value:o.value.nombre,"onUpdate:value":e[3]||(e[3]=n=>o.value.nombre=n),autocomplete:"off"},null,8,["value"])]),_:1}),t(_,{"has-feedback":"",label:"Postulante",name:"postulante"},{default:l(()=>[t(p,{disabled:"",type:"text",value:o.value.postulante,"onUpdate:value":e[4]||(e[4]=n=>o.value.postulante=n),autocomplete:"off"},null,8,["value"])]),_:1}),t(_,{"has-feedback":"",label:"Tipo",name:"tipo"},{default:l(()=>[t(p,{disabled:"",type:"text",value:o.value.tipo,"onUpdate:value":e[5]||(e[5]=n=>o.value.tipo=n),autocomplete:"off"},null,8,["value"])]),_:1}),t(_,{"has-feedback":"",label:"Observacion",name:"nombre"},{default:l(()=>[t(p,{type:"text",value:o.value.observacion,"onUpdate:value":e[6]||(e[6]=n=>o.value.observacion=n),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["visible"])])],64)}}};export{$e as default};
