import{r as d,e as j,H as W,D as O,o as u,c as r,a as t,u as g,w as n,F as X,y as f,Z as Y,d as s,b as v,t as ee,f as x,n as A,j as ae,I as te,_ as se,B as oe,h as ne,i as le,U as de,V as ie,M as ue}from"./app-8e8079e5.js";import{_ as re}from"./LayoutDirector-408415a2.js";import{S as ve}from"./SearchOutlined-fdeb8de4.js";import{C as pe}from"./CheckOutlined-4ddf6181.js";import{E as ce}from"./EditOutlined-5ccbc793.js";import"./logotiny-c4b525af.js";import"./Header-e183acb1.js";import"./AntdIcon-606193ea.js";import"./DownOutlined-e386c5f2.js";const me={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 98px)"}},_e={class:"mr-3"},ge={class:"flex justify-between",style:{position:"relative"}},fe={key:0,class:"editable-cell"},xe={key:0,class:"editable-cell-input-wrapper"},we={key:1,class:"editable-cell-text-wrapper"},ye={key:1,class:"flex",style:{"justify-content":"center"}},be={key:0},he={key:1},ke={key:2,class:"flex"},Ce={class:"mr-1"},Ie={class:"flex",style:{"justify-content":"flex-end"}},Ue={class:"flex flex-col"},Ve={class:"flex justify-end"},je={class:"mt-4 mb-4"},Ae={class:"mb-4"},Me={class:"mb-4"},Pe={class:"flex justify-end mt-4"},ze={class:"mr-2"},Le={__name:"index",setup(Ee){const w=d(""),y=d(1),M=d(null),C=d([]),p=d(1),_=d(!1),I=d(!1);d("");const U=d([]),l=d({id:null,codigo:"",nombre:"",vacantes:"",estado:!0});j(w,()=>{c()}),j(I,()=>{I.value==!1&&l.value.id!=null&&(l.value.id=null,l.value.codigo=null,l.value.nombre=null,l.value.estado=!0)}),j(y,()=>{c()});const D=a=>{_.value=!0,l.value=a},N=async()=>{let a=await f.get("/segundas/get-modalidades-segundas-activas");C.value=a.data.datos},S=async()=>{let a=await f.post("/segundas/actualizar-vacantes-segundas",l.value);c(),z("success","PROGRAMA ACTUALIZADO",a.data.mensaje),l.value={id:null,codigo:"",nombre:"",vacantes:"",estado:!0},_.value=!1},c=async()=>{let a=await f.post("/segundas/get-vacantes-segundas-admin?page="+y.value,{term:w.value});U.value=a.data.datos.data,M.value=a.data.datos.total},F=a=>{f.post("delete-vacante-segundas",{id_vacante:a.id_vacante}).then(e=>{c(),z("warning","PROGRAMA ELIMINADO",e.data.mensaje)})},G=[{title:"Cod",dataIndex:"codigo_sunedu",width:"60px",align:"center",responsive:["md"]},{title:"Nombre",dataIndex:"programa"},{title:"Vacantes",dataIndex:"vacantes",width:"160px",align:"center",responsive:["md"]},{title:"Estado",dataIndex:"estado",align:"center",width:"60px",responsive:["md"]},{title:"",dataIndex:"acciones",width:"70px",align:"center"}],P=d([]),H=a=>{P.value=a};W(()=>({selectedRowKeys:g(P),onChange:H,hideDefaultSelections:!0}));const z=(a,e,b)=>{A[a]({message:e,description:b})};N(),c();const V=d({}),L=a=>{V.value[a]={...U.value.find(e=>e.id_programa===a)}},K=d({id_modalidad:p.value,id_programa:null,estado:null,vacantes:null}),E=a=>{K.value=a,delete V.value[a.id_programa],f.post("save-numero-vacantes-segundas",{id_vacante:a.id_vacante,id_programa:a.id_programa,vacantes:a.vacantes,id_modalidad:p.value}).then(()=>{A.success({message:"Registro actualizado"}),c()}).catch(()=>{A.error({message:"Error al actualizar"})})};return(a,e)=>{const b=ae,h=te,T=O("row"),R=se,k=oe,Z=ne,q=le,$=de,J=ie,B=O("user-icon"),Q=ue;return u(),r(X,null,[t(g(Y),{title:"Procesos"}),t(re,null,{default:n(()=>[s("div",me,[t(T,{class:"flex justify-between mb-4"},{default:n(()=>[s("div",_e,[t(b,{ref:"select",value:p.value,"onUpdate:value":e[0]||(e[0]=o=>p.value=o),options:C.value,onFocus:a.focus,onChange:a.handleChange},null,8,["value","options","onFocus","onChange"])]),s("div",ge,[t(h,{type:"text",placeholder:"Buscar",value:w.value,"onUpdate:value":e[1]||(e[1]=o=>w.value=o),style:{"max-width":"300px"}},{prefix:n(()=>[t(g(ve))]),_:1},8,["value"])])]),_:1}),s("div",null,[t(Z,{columns:G,"data-source":U.value,pagination:!1,size:"small",scroll:{x:380,y:"calc(100vh - 240px)"}},{bodyCell:n(({column:o,index:Re,record:i})=>[o.dataIndex==="vacantes"?(u(),r("div",fe,[V.value[i.id_programa]?(u(),r("div",xe,[t(h,{value:i.vacantes,"onUpdate:value":m=>i.vacantes=m,onPressEnter:m=>E(i)},{prefix:n(()=>e[11]||(e[11]=[s("div",null,null,-1)])),_:2},1032,["value","onUpdate:value","onPressEnter"]),t(g(pe),{class:"editable-cell-icon-check",onClick:m=>E(i)},null,8,["onClick"])])):(u(),r("div",we,[v(ee(i.vacantes||" ")+" ",1),t(g(ce),{class:"editable-cell-icon",onClick:m=>L(i.id_programa)},null,8,["onClick"])]))])):x("",!0),o.dataIndex==="estado"?(u(),r("div",ye,[i.estado==1?(u(),r("div",be,[t(R,{color:"blue"},{default:n(()=>e[12]||(e[12]=[v("Activo")])),_:1})])):x("",!0),i.estado==0?(u(),r("div",he,[t(R,{color:"red"},{default:n(()=>e[13]||(e[13]=[v("Inactivo")])),_:1})])):x("",!0)])):x("",!0),o.dataIndex==="acciones"?(u(),r("div",ke,[s("div",Ce,[t(k,{type:"",onClick:m=>D(i),style:{"border-radius":"4px","margin-right":"4px",width:"26px",border:"solid 1px #9d9d9d",background:"#f2f3f5",color:"#1890ff"},size:"small"},{default:n(()=>e[14]||(e[14]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit"},[s("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])),_:2},1032,["onClick"])]),s("div",null,[t(k,{type:"",class:"",onClick:m=>F(i),style:{"border-radius":"4px",background:"#f3f3f3",width:"28px",border:"solid 1px #9d9d9d",color:"red"},shape:"",size:"small"},{default:n(()=>e[15]||(e[15]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[s("polyline",{points:"3 6 5 6 21 6"}),s("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])),_:2},1032,["onClick"])])])):x("",!0)]),_:1},8,["data-source"])]),s("div",Ie,[t(q,{current:y.value,"onUpdate:current":e[2]||(e[2]=o=>y.value=o),simple:"","page-size":"50",total:M.value},null,8,["current","total"])]),t(Q,{open:_.value,"onUpdate:open":e[9]||(e[9]=o=>_.value=o),title:"Registrar Programa",footer:null,width:"400px",onCancel:e[10]||(e[10]=o=>I.value=!1)},{default:n(()=>[s("div",Ue,[s("div",Ve,[t(J,{value:l.value.estado,"onUpdate:value":e[3]||(e[3]=o=>l.value.estado=o),style:{"margin-bottom":"16px"}},{default:n(()=>[t($,{value:1},{default:n(()=>e[16]||(e[16]=[v("Activo")])),_:1}),t($,{value:0},{default:n(()=>e[17]||(e[17]=[v("Inactivo")])),_:1})]),_:1},8,["value"])]),s("div",je,[e[18]||(e[18]=s("label",{for:""},"Modalidad",-1)),t(b,{value:p.value,"onUpdate:value":e[4]||(e[4]=o=>p.value=o),options:C.value,onChange:a.handleChange,style:{width:"100%"}},null,8,["value","options","onChange"])]),s("div",Ae,[e[19]||(e[19]=s("label",{for:""},"Programa acadÃ©mico",-1)),t(h,{value:l.value.programa,"onUpdate:value":e[5]||(e[5]=o=>l.value.programa=o),placeholder:"Programa"},{prefix:n(()=>[t(B)]),_:1},8,["value"])]),s("div",Me,[e[20]||(e[20]=s("label",{for:""},"Vacantes",-1)),t(h,{value:l.value.vacantes,"onUpdate:value":e[6]||(e[6]=o=>l.value.vacantes=o),placeholder:"Vacantes"},{prefix:n(()=>[t(B)]),_:1},8,["value"])]),s("div",Pe,[s("div",ze,[t(k,{onClick:e[7]||(e[7]=o=>_.value=!1)},{default:n(()=>e[21]||(e[21]=[v("Cancelar")])),_:1})]),t(k,{type:"primary",onClick:e[8]||(e[8]=o=>S())},{default:n(()=>e[22]||(e[22]=[v("Guardar")])),_:1})])])]),_:1},8,["open"])])]),_:1})],64)}}};export{Le as default};
