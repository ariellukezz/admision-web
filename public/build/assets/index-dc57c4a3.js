import{r as d,e as I,C as Y,D as ee,o as i,c as _,a as o,u as g,w as n,d as u,F as U,y as z,M as ae,Z as oe,E as f,t as F,f as p,b as m,G as te,n as ne,j as le,I as ie,_ as se,B as de,g as ue,H as re,h as pe,i as me,k as ve,S as ce,p as _e,q as ge}from"./app-e08cab8d.js";import{_ as fe}from"./AuthenticatedLayout-1c6f068f.js";import{S as be}from"./SearchOutlined-1baf635a.js";import{P as ye}from"./PrinterOutlined-02b6a6c6.js";import{F as we}from"./FormOutlined-6d429376.js";import{D as xe}from"./DeleteOutlined-3875e8ef.js";import"./logotiny-c4b525af.js";import"./Header-350d22a8.js";import"./AntdIcon-57e0f234.js";import"./DownOutlined-6ca53b8d.js";/* empty css                                                            */const ke={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},Ce={class:"mr-3"},Ie={class:"flex justify-between",style:{position:"relative"}},Fe={style:{"font-size":"1rem","font-weight":"bold"}},Se={key:1,style:{"font-size":"0.95rem"}},Ve={key:3},Ue={class:""},He={__name:"index",setup(ze){const $=window.location.origin,b=d(null),S=d(""),D=d([]),c=d(!1),y=d(1),P=d(null),V=d(20),l=d({id:null,codigo:"",id_posulante:"",id_programa:"",id_modalidad:"",estado:!0,observacion:""}),r=d({id:"",nombre:"",dni:""});I(S,(a,e)=>{v()}),I(V,(a,e)=>{v()}),I(b,(a,e)=>{a==0&&(b.value=null),y.value=1,v()}),I(c,(a,e)=>{c.value==!1&&l.value.id!=null&&(l.value.id=null,l.value.codigo="",l.value.id_posulante="",l.value.id_programa="",l.value.id_modalidad="",l.value.estado=!0,l.value.observacion="",r.value.nombre=null,r.value.dni=null,r.value.id=null)}),I(y,(a,e)=>{v()});const R=a=>{c.value=!0,l.value.id=a.id,l.value.codigo=a.codigo,l.value.id_programa=a.id_programa,l.value.id_modalidad=a.id_modalidad,l.value.observacion=a.observaciones,r.value.id=a.id_postulante,r.value.dni=a.dni,r.value.nombre=a.dni+" - "+a.nombres+" "+a.paterno+" "+a.materno},v=async()=>{let a=await z.post("get-inscripciones-admin?page="+y.value,{term:S.value,paginashoja:V.value,programa:b.value});D.value=a.data.datos.data,P.value=a.data.datos.total},E=d([]);(async()=>{let a=await z.get("get-select-programas-proceso-admin");E.value=a.data.datos})();const G=()=>{let a={id:l.value.id,id_postulante:r.value.id,id_programa:l.value.id_programa,id_modalidad:l.value.id_modalidad,observacion:l.value.observacion,dni:r.value.dni};z.post("actualizar-inscripcion",a).then(e=>{v(),A("success",e.data.titulo,e.data.mensaje),c.value=!1})},L=a=>{z.get("eliminar-modalidad/"+a.id).then(e=>{v(),A("warning",e.data.titulo,e.data.mensaje)})},H=[{title:"Codigo",dataIndex:"codigo"},{title:"DNI",dataIndex:"dni",align:"center"},{title:"Postulante",dataIndex:"postulante"},{title:"Programa",dataIndex:"programa"},{title:"Modalidad",dataIndex:"modalidad",align:"center"},{title:"Estado",dataIndex:"estado",align:"center"},{title:"Observación",dataIndex:"observacion"},{title:"Acciones",dataIndex:"acciones",width:"140px",align:"center"}],N=d([]),K=a=>{console.log("selectedRowKeys changed: ",a),N.value=a};Y(()=>({selectedRowKeys:g(N),onChange:K,hideDefaultSelections:!0}));const A=(a,e,w)=>{ne[a]({message:e,description:w})},T=a=>{var e=document.createElement("iframe");e.style.display="none",e.src=$+"/documentos/6/inscripciones/constancias/"+a+".pdf",document.body.appendChild(e),e.contentWindow.focus(),e.contentWindow.print()};return v(),(a,e)=>{const w=le,O=ie,W=ee("row"),x=se,k=de,B=ue,q=re,X=pe,Z=me,C=ve,j=ce,h=_e,J=ge,Q=ae;return i(),_(U,null,[o(g(oe),{title:"Documentos"}),o(fe,null,{default:n(()=>[u("div",ke,[o(W,{class:"flex justify-between mb-4"},{default:n(()=>[u("div",Ce,[o(w,{ref:"select",value:b.value,"onUpdate:value":e[0]||(e[0]=t=>b.value=t),placeholder:"Seleccionar programa de estudios",options:E.value,allowClear:""},null,8,["value","options"])]),u("div",Ie,[o(O,{type:"text",placeholder:"Buscar",value:S.value,"onUpdate:value":e[1]||(e[1]=t=>S.value=t),style:{"max-width":"300px"}},{prefix:n(()=>[o(g(be))]),_:1},8,["value"])])]),_:1}),o(X,{columns:H,"data-source":D.value,pagination:!1,size:"small"},{bodyCell:n(({column:t,index:Ee,record:s})=>[t.dataIndex==="codigo"?(i(),f(x,{key:0,color:"blue",style:{"padding-top":"3px",color:"#164753",width:"116px"}},{default:n(()=>[u("span",Fe,F(s.codigo),1)]),_:2},1024)):p("",!0),t.dataIndex==="postulante"?(i(),_("span",Se,F(s.paterno)+" "+F(s.materno)+", "+F(s.nombres),1)):p("",!0),t.dataIndex==="estado"?(i(),_(U,{key:2},[s.estado===0?(i(),f(x,{key:0,color:"blue"},{default:n(()=>e[11]||(e[11]=[m("HABILITADO")])),_:1})):(i(),f(x,{key:1,color:"error"},{default:n(()=>e[12]||(e[12]=[m("ANULADO")])),_:1}))],64)):p("",!0),t.dataIndex==="programa"?(i(),_("div",Ve,F(s.programa),1)):p("",!0),t.dataIndex==="verificado"?(i(),_(U,{key:4},[s.verificado===0?(i(),f(x,{key:0,color:"error"},{default:n(()=>e[13]||(e[13]=[m("no verificado")])),_:1})):p("",!0),s.verificado===1?(i(),f(x,{key:1,color:"success"},{default:n(()=>e[14]||(e[14]=[m("verificado")])),_:1})):p("",!0)],64)):p("",!0),t.dataIndex==="acciones"?(i(),_(U,{key:5},[o(k,{type:"success",style:{color:"#164753"},onClick:M=>T(s.dni),size:"small"},{icon:n(()=>[o(g(ye))]),_:2},1032,["onClick"]),o(B,{type:"vertical"}),o(k,{type:"",style:{color:"#af7200"},onClick:M=>R(s),size:"small"},{icon:n(()=>[o(g(we))]),_:2},1032,["onClick"]),o(B,{type:"vertical"}),D.value.length?(i(),f(q,{key:0,title:"¿Estas seguro de eliminar?",disabled:"",onConfirm:M=>L(s)},{default:n(()=>[o(k,{style:{color:"crimson"},shape:"",size:"small"},{icon:n(()=>[o(g(xe))]),_:1})]),_:2},1032,["onConfirm"])):p("",!0)],64)):p("",!0)]),_:1},8,["data-source"]),o(Z,{current:y.value,"onUpdate:current":e[2]||(e[2]=t=>y.value=t),total:P.value,pageSize:V.value,"onUpdate:pageSize":e[3]||(e[3]=t=>V.value=t),"show-less-items":""},null,8,["current","total","pageSize"])])]),_:1}),u("div",null,[o(Q,{open:c.value,"onUpdate:open":e[10]||(e[10]=t=>c.value=t),title:"Modificar Inscripción",style:{"margin-top":"-40px"}},{footer:n(()=>[o(k,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:n(()=>e[22]||(e[22]=[m("Cancelar")])),_:1},8,["onClick"]),o(k,{type:"primary",onClick:e[9]||(e[9]=t=>G())},{default:n(()=>e[23]||(e[23]=[m("Guardar")])),_:1})]),default:n(()=>[o(J,te({ref:"formRef",name:"custom-validation",model:a.formState},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:n(()=>[o(C,{"has-feedback":"",name:"codigo"},{default:n(()=>[e[15]||(e[15]=u("label",null,"Codigo",-1)),o(O,{type:"text",value:l.value.codigo,"onUpdate:value":e[4]||(e[4]=t=>l.value.codigo=t),disabled:""},null,8,["value"])]),_:1}),o(C,{"has-feedback":"",name:"nombre"},{default:n(()=>[e[16]||(e[16]=u("label",null,"Postulante",-1)),o(O,{type:"text",value:r.value.nombre,"onUpdate:value":e[5]||(e[5]=t=>r.value.nombre=t),disabled:""},null,8,["value"])]),_:1}),o(C,{"has-feedback":"",name:"postulante"},{default:n(()=>[e[17]||(e[17]=u("label",null,"Programa",-1)),u("div",Ue,[o(w,{ref:"select",value:l.value.id_programa,"onUpdate:value":e[6]||(e[6]=t=>l.value.id_programa=t),placeholder:"Seleccionar programa de estudios",options:E.value,allowClear:""},null,8,["value","options"])])]),_:1}),o(C,{"has-feedback":"",name:"tipo"},{default:n(()=>[e[20]||(e[20]=u("label",null,"Modalidad",-1)),o(w,{ref:"select",value:l.value.id_modalidad,"onUpdate:value":e[7]||(e[7]=t=>l.value.id_modalidad=t),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"}},{default:n(()=>[o(j,{value:8},{default:n(()=>e[18]||(e[18]=[m("EXAMEN GENERAL")])),_:1}),o(j,{value:7},{default:n(()=>e[19]||(e[19]=[m("CONADIS")])),_:1})]),_:1},8,["value"])]),_:1}),o(C,{"has-feedback":"",name:"nombre"},{default:n(()=>[e[21]||(e[21]=u("label",null,"Observaciones",-1)),o(h,{type:"text",value:l.value.observacion,"onUpdate:value":e[8]||(e[8]=t=>l.value.observacion=t),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["open"])])],64)}}};export{He as default};
