import{r as s,e as x,z as ce,f as u,o as g,c as h,a as e,u as w,w as a,d as o,F as z,l as k,Z as me,b as i,S as pe,s as ve,t as H,g as J,E as fe,D as _e,v as ge,i as be,n as ye}from"./app-38779b78.js";import{L as xe}from"./LayoutCalificador-8b4f9994.js";import{F as he}from"./FormOutlined-9d76352b.js";import"./DropdownLink-e7ec23f1.js";import"./logotiny-c4b525af.js";/* empty css                                                                          */import"./_plugin-vue_export-helper-c27b6911.js";import"./TopMenu-dcf137ca.js";const we={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{"border-radius":"10px",width:"100%","min-height":"calc(100vh - 95px)"}},ke={class:"flex justify-between mb-2"},Ce={class:"mr-3"},Ie={class:"flex justify-between",style:{position:"relative"}},Ue={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Ee={key:0,class:"flex",style:{"justify-content":"center"}},Se={style:{"font-weight":"bold"}},Ve={class:"flex justify-between mt-2 pr-4",style:{"margin-bottom":"-5px"}},Fe={clas:"",style:{scale:"0.9","margin-right":"-20px"}},ze={style:{background:"#476175",height:"36px","margin-left":"-24px","margin-right":"-24px","margin-top":"-24px","margin-bottom":"28px"}},Ne={class:"flex justify-between ml-3 mr-1",style:{height:"36px","align-items":"center"}},Pe=o("div",null,[o("span",{style:{"font-weight":"bold",color:"white","font-size":"1rem"}}," Ponderacion ")],-1),je={style:{background:"#476175",height:"36px","margin-left":"-24px","margin-right":"-24px","margin-top":"-24px","margin-bottom":"28px"}},De={class:"flex justify-between ml-3 mr-1",style:{height:"36px","align-items":"center"}},Oe=o("div",null,[o("span",{style:{"font-weight":"bold",color:"white","font-size":"1rem"}}," Detalle Ponderacion ")],-1),Re={style:{width:"100%"}},Ae={class:"mr-2"},$e=o("label",null,[o("br")],-1),Te={class:"flex justify-center"},Be={class:"mr-2"},Le=o("label",null,"Asignatura",-1),qe=o("label",null,"N° preguntas",-1),Ge={class:"mr-2"},Me=o("label",null,"Ponderacion",-1),Xe={class:"flex justify-end"},la={__name:"ponderacion",setup(Ze){const N=s(!1),C=s("");s([]);const p=s(!1);s();const K=s(""),I=s(1),f=s(10),P=s(1),Q=()=>{p.value=!0};let j;x(C,(l,t)=>{clearTimeout(j),j=setTimeout(()=>{getFiliales()},500)}),x(I,(l,t)=>{getFiliales()}),x(f,(l,t)=>{getFiliales()});let D;x(K,(l,t)=>{clearTimeout(D),D=setTimeout(()=>{getUbigeosResidencia()},500)});const W=l=>{p.value=!0,filial.id=l.id,filial.codigo=l.codigo,filial.nombre=l.nombre,filial.lugar=l.ubigeo,filial.direccion=l.direccion,residencia.value=l.lugar,l.estado==1?filial.estado=!0:filial.estado=!1},Y=l=>{k.get("eliminar-filial/"+l.id).then(t=>{getFiliales(),E("error","PROCESO ELIMINADO",t.data.mensaje)})},O=()=>{filial.id=null,filial.codigo="",filial.nombre="",filial.lugar=null,filial.direccion="",filial.estado="",residencia.value="",redseleccionado.value="",S()},E=(l,t,r)=>{ye[l]({message:t,description:r})},S=()=>{p.value=!1};s([]);const R=s([]),V=async()=>{let l=await k.post("get-ponderaciones?page="+I.value,{term:C.value,paginasize:f.value});R.value=l.data.datos.data,P.value=l.data.datos.total},A=s(),_=ce({id:null,nombre:"",area:null,simulacro:""}),$=s("");s(null);const ee=s([]);s(1);const F=s(!1),T=async()=>{k.post("/get-simulacros",{term:$.value}).then(l=>{ee.value=l.data.datos.data}).catch(l=>{l.response?console.error("Error de servidor:",l.response.data):l.request?console.error("Error de red:",l.request):console.error("Error de configuración:",l.message)})};let B;x($,(l,t)=>{clearTimeout(B),B=setTimeout(()=>{T()},500)});const ae=async()=>{N.value=!0;try{const l=await A.value.validateFields();k.post("save-ponderacion",_).then(t=>{E("success",t.data.titulo,t.data.mensaje),V(),p.value=!1})}catch(l){console.error(l)}},le=async()=>{N.value=!0;try{k.post("save-ponderacion-detalle",{pesos:d.value,id_ponderacion:L.value}).then(l=>{E("success",l.data.titulo,l.data.mensaje),V(),p.value=!1})}catch(l){console.error(l)}};T(),V();const L=s(null),q=s(1),d=s([{nombre:null,ponderacion:null,n_preguntas:null}]),te=l=>{F.value=!0,L.value=l},oe=()=>{d.value.push({nombre:null,ponderacion:null,n_preguntas:null}),q.value+=1},ne={labelCol:{span:4},wrapperCol:{span:20}},se=[{title:"N°",dataIndex:"nro"},{title:"Nombre",dataIndex:"nombre"},{title:"Area",dataIndex:"area"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}];return(l,t)=>{const r=u("a-button"),b=u("a-input"),ie=u("a-popconfirm"),re=u("a-table"),ue=u("a-pagination"),v=u("a-select-option"),G=u("a-select"),y=u("a-form-item"),M=u("a-form"),X=u("a-modal"),U=u("a-col"),de=u("a-row");return g(),h(z,null,[e(w(me),{title:"Ponderacion"}),e(xe,null,{default:a(()=>[o("div",we,[o("div",ke,[o("div",Ce,[e(r,{type:"primary",onClick:Q,style:{background:"#476175",border:"none","border-radius":"5px"}},{default:a(()=>[i("Nuevo")]),_:1})]),o("div",Ie,[e(b,{type:"text",placeholder:"Buscar",value:C.value,"onUpdate:value":t[0]||(t[0]=n=>C.value=n),style:{"max-width":"300px","border-radius":"6px","padding-left":"30px"}},null,8,["value"]),o("div",Ue,[e(w(pe))])])]),(g(),ve(re,{columns:se,"data-source":R.value,key:l.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:a(({column:n,index:c,record:m})=>[n.dataIndex==="nro"?(g(),h("div",Ee,[o("span",Se,H(c+1),1)])):J("",!0),n.dataIndex==="acciones"?(g(),h(z,{key:1},[e(r,{type:"success",class:"mr-1",style:{color:"#476175"},onClick:Z=>te(m.id),size:"small"},{icon:a(()=>[e(w(fe))]),_:2},1032,["onClick"]),e(r,{onClick:Z=>W(m),class:"mr-1",style:{color:"blue"},size:"small"},{icon:a(()=>[e(w(he))]),_:2},1032,["onClick"]),e(ie,{title:"¿Estas seguro de eliminar?",onConfirm:Z=>Y(m)},{default:a(()=>[e(r,{shape:"",size:"small",style:{color:"crimson"}},{icon:a(()=>[e(w(_e))]),_:1})]),_:2},1032,["onConfirm"])],64)):J("",!0)]),_:1},8,["data-source"])),o("div",Ve,[o("div",null,[e(ue,{current:I.value,"onUpdate:current":t[1]||(t[1]=n=>I.value=n),simple:"",total:P.value,pageSize:f.value,"onUpdate:pageSize":t[2]||(t[2]=n=>f.value=n),"show-less-items":""},null,8,["current","total","pageSize"])]),o("div",Fe,[e(G,{value:f.value,"onUpdate:value":t[3]||(t[3]=n=>f.value=n),style:{width:"90px"}},{default:a(()=>[e(v,{value:10},{default:a(()=>[i("10 Reg.")]),_:1}),e(v,{value:20},{default:a(()=>[i("20 Reg.")]),_:1}),e(v,{value:50},{default:a(()=>[i("50 Reg.")]),_:1}),e(v,{value:100},{default:a(()=>[i("100 Reg.")]),_:1})]),_:1},8,["value"])])])])]),_:1}),o("div",null,[e(X,{visible:p.value,"onUpdate:visible":t[8]||(t[8]=n=>p.value=n),style:{"margin-top":"-40px","margin-bottom":"-40px"},closable:!1},{footer:a(()=>[e(r,{style:{"margin-left":"6px","border-radius":"4px"},onClick:O},{default:a(()=>[i("Cancelar")]),_:1}),e(r,{type:"primary",style:{background:"#476175",border:"none","border-radius":"4px"},onClick:t[7]||(t[7]=n=>ae())},{default:a(()=>[i("Guardar")]),_:1})]),default:a(()=>[o("div",ze,[o("div",Ne,[Pe,o("div",null,[o("span",null,[e(r,{onClick:t[4]||(t[4]=n=>S()),style:{background:"none",border:"none",color:"white"}},{default:a(()=>[i("X")]),_:1})])])])]),e(M,ge({ref_key:"formPonderacion",ref:A,name:"form",model:_},ne,{style:{"margin-bottom":"-30px"}}),{default:a(()=>[e(y,{label:"Nombre",rules:[{required:!0,message:"Ingrese el nombre",trigger:"change"}],name:"nombre"},{default:a(()=>[e(b,{style:{"border-radius":"6px"},type:"text",placeholder:"Ingrese el nombre",value:_.nombre,"onUpdate:value":t[5]||(t[5]=n=>_.nombre=n),autocomplete:"off"},null,8,["value"])]),_:1}),e(y,{name:"area",label:"Area",rules:[{required:!0,message:"Seleccione un area",trigger:"change"}]},{default:a(()=>[e(G,{ref:"select",value:_.area,"onUpdate:value":t[6]||(t[6]=n=>_.area=n),style:{width:"100%"}},{default:a(()=>[e(v,{value:1},{default:a(()=>[i("BIOMEDICAS")]),_:1}),e(v,{value:2},{default:a(()=>[i("INGENIERIAS")]),_:1}),e(v,{value:3},{default:a(()=>[i("SOCIALES")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},16,["model"])]),_:1},8,["visible"])]),o("div",null,[e(X,{visible:F.value,"onUpdate:visible":t[12]||(t[12]=n=>F.value=n),style:{"margin-top":"-40px","margin-bottom":"-40px",width:"900px"},closable:!1},{footer:a(()=>[e(r,{style:{"margin-left":"6px","border-radius":"4px"},onClick:O},{default:a(()=>[i("Cancelar")]),_:1}),e(r,{type:"primary",style:{background:"#476175",border:"none","border-radius":"4px"},onClick:t[11]||(t[11]=n=>le())},{default:a(()=>[i("Guardar")]),_:1})]),default:a(()=>[o("div",je,[o("div",De,[Oe,o("div",null,[o("span",null,[e(r,{onClick:t[9]||(t[9]=n=>S()),style:{background:"none",border:"none",color:"white"}},{default:a(()=>[i("X")]),_:1})])])])]),o("div",Re,[e(M,{ref:"formPesos",name:"formpesos",model:d.value,style:{"margin-bottom":"-30px"}},{default:a(()=>[(g(!0),h(z,null,be(q.value,(n,c)=>(g(),h("div",null,[e(de,{gutter:[16,10]},{default:a(()=>[e(U,{xs:24,sm:12,md:8,lg:1},{default:a(()=>[o("div",Ae,[$e,o("div",Te,[e(r,null,{default:a(()=>[i(H(c+1),1)]),_:2},1024)])])]),_:2},1024),e(U,{xs:24,sm:12,md:8,lg:15},{default:a(()=>[o("div",Be,[Le,e(y,{name:"nombre"},{default:a(()=>[e(b,{value:d.value[c].nombre,"onUpdate:value":m=>d.value[c].nombre=m},null,8,["value","onUpdate:value"])]),_:2},1024)])]),_:2},1024),e(U,{xs:24,sm:12,md:8,lg:4},{default:a(()=>[o("div",null,[qe,e(y,{name:"npreguntas"},{default:a(()=>[e(b,{value:d.value[c].n_preguntas,"onUpdate:value":m=>d.value[c].n_preguntas=m},null,8,["value","onUpdate:value"])]),_:2},1024)])]),_:2},1024),e(U,{xs:24,sm:12,md:8,lg:4},{default:a(()=>[o("div",Ge,[Me,e(y,{name:"ponderacion"},{default:a(()=>[e(b,{value:d.value[c].ponderacion,"onUpdate:value":m=>d.value[c].ponderacion=m},null,8,["value","onUpdate:value"])]),_:2},1024)])]),_:2},1024)]),_:2},1024)]))),256)),o("div",Xe,[e(r,{onClick:t[10]||(t[10]=n=>oe())},{default:a(()=>[i("1 más")]),_:1})])]),_:1},8,["model"])])]),_:1},8,["visible"])])],64)}}};export{la as default};
