import{r as d,e as A,C as W,D as O,o as u,c as r,a as t,u as f,w as n,F as X,y as x,Z as Y,d as s,b as v,t as ee,f as w,n as V,j as ae,B as te,I as se,_ as oe,h as ne,i as le,T as de,U as ie,M as ue}from"./app-77b97469.js";import{_ as re}from"./LayoutDirector-c3f977f0.js";import{S as ve}from"./SearchOutlined-e77b5c0a.js";import{C as pe}from"./CheckOutlined-711e27ea.js";import{E as ce}from"./EditOutlined-b6289982.js";import"./logotiny-c4b525af.js";import"./Header-fb91bf9e.js";import"./AntdIcon-23273bd6.js";import"./DownOutlined-485f1c0c.js";const me={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 98px)"}},_e={class:"mr-3"},ge={class:"flex justify-between",style:{position:"relative"}},fe={key:0,class:"editable-cell"},xe={key:0,class:"editable-cell-input-wrapper"},we={key:1,class:"editable-cell-text-wrapper"},ye={key:1,class:"flex",style:{"justify-content":"center"}},be={key:0},Ce={key:1},he={key:2,class:"flex"},ke={class:"mr-1"},Ie={class:"flex",style:{"justify-content":"flex-end"}},Ue={class:"flex flex-col"},je={class:"flex justify-end"},Ae={class:"mt-4 mb-4"},Ve={class:"mb-4"},Me={class:"mb-4"},Pe={class:"flex justify-end mt-4"},$e={class:"mr-2"},Te={__name:"index",setup(ze){const y=d(""),b=d(1),M=d(null),k=d([]),p=d(1),c=d(!1),I=d(!1);d("");const U=d([]),l=d({id:null,codigo:"",nombre:"",vacantes:"",estado:!0});A(y,()=>{m()}),A(I,()=>{I.value==!1&&l.value.id!=null&&(l.value.id=null,l.value.codigo=null,l.value.nombre=null,l.value.estado=!0)}),A(b,()=>{m()});const D=a=>{c.value=!0,l.value=a},N=async()=>{let a=await x.get("/segundas/get-modalidades-segundas-activas");k.value=a.data.datos},S=async()=>{let a=await x.post("/segundas/actualizar-vacantes-segundas",l.value);m(),$("success","PROGRAMA ACTUALIZADO",a.data.mensaje),l.value={id:null,codigo:"",nombre:"",vacantes:"",estado:!0},c.value=!1},m=async()=>{let a=await x.post("/segundas/get-vacantes-segundas-admin?page="+b.value,{term:y.value});U.value=a.data.datos.data,M.value=a.data.datos.total},F=a=>{x.post("delete-vacante-segundas",{id_vacante:a.id_vacante}).then(e=>{m(),$("warning","PROGRAMA ELIMINADO",e.data.mensaje)})},G=[{title:"Cod",dataIndex:"codigo_sunedu",width:"60px",align:"center",responsive:["md"]},{title:"Nombre",dataIndex:"programa"},{title:"Vacantes",dataIndex:"vacantes",width:"160px",align:"center",responsive:["md"]},{title:"Estado",dataIndex:"estado",align:"center",width:"60px",responsive:["md"]},{title:"",dataIndex:"acciones",width:"70px",align:"center"}],P=d([]),L=a=>{P.value=a};W(()=>({selectedRowKeys:f(P),onChange:L,hideDefaultSelections:!0}));const $=(a,e,C)=>{V[a]({message:e,description:C})};N(),m();const j=d({}),T=a=>{j.value[a]={...U.value.find(e=>e.id_programa===a)}},H=d({id_modalidad:p.value,id_programa:null,estado:null,vacantes:null}),z=a=>{H.value=a,delete j.value[a.id_programa],x.post("save-numero-vacantes-segundas",{id_vacante:a.id_vacante,id_programa:a.id_programa,vacantes:a.vacantes,id_modalidad:p.value}).then(()=>{V.success({message:"Registro actualizado"}),m()}).catch(()=>{V.error({message:"Error al actualizar"})})};return(a,e)=>{const C=ae,g=te,h=se,K=O("row"),E=oe,Z=ne,q=le,R=de,J=ie,B=O("user-icon"),Q=ue;return u(),r(X,null,[t(f(Y),{title:"Procesos"}),t(re,null,{default:n(()=>[s("div",me,[t(K,{class:"flex justify-between mb-4"},{default:n(()=>[s("div",_e,[t(C,{ref:"select",value:p.value,"onUpdate:value":e[0]||(e[0]=o=>p.value=o),options:k.value,onFocus:a.focus,onChange:a.handleChange},null,8,["value","options","onFocus","onChange"]),s("div",null,[t(g,{onClick:e[1]||(e[1]=o=>c.value=!0)},{default:n(()=>e[12]||(e[12]=[v(" Abrir ")])),_:1})])]),s("div",ge,[t(h,{type:"text",placeholder:"Buscar",value:y.value,"onUpdate:value":e[2]||(e[2]=o=>y.value=o),style:{"max-width":"300px"}},{prefix:n(()=>[t(f(ve))]),_:1},8,["value"])])]),_:1}),s("div",null,[t(Z,{columns:G,"data-source":U.value,pagination:!1,size:"small",scroll:{x:380,y:"calc(100vh - 240px)"}},{bodyCell:n(({column:o,index:Ee,record:i})=>[o.dataIndex==="vacantes"?(u(),r("div",fe,[j.value[i.id_programa]?(u(),r("div",xe,[t(h,{value:i.vacantes,"onUpdate:value":_=>i.vacantes=_,onPressEnter:_=>z(i)},{prefix:n(()=>e[13]||(e[13]=[s("div",null,null,-1)])),_:2},1032,["value","onUpdate:value","onPressEnter"]),t(f(pe),{class:"editable-cell-icon-check",onClick:_=>z(i)},null,8,["onClick"])])):(u(),r("div",we,[v(ee(i.vacantes||" ")+" ",1),t(f(ce),{class:"editable-cell-icon",onClick:_=>T(i.id_programa)},null,8,["onClick"])]))])):w("",!0),o.dataIndex==="estado"?(u(),r("div",ye,[i.estado==1?(u(),r("div",be,[t(E,{color:"blue"},{default:n(()=>e[14]||(e[14]=[v("Activo")])),_:1})])):w("",!0),i.estado==0?(u(),r("div",Ce,[t(E,{color:"red"},{default:n(()=>e[15]||(e[15]=[v("Inactivo")])),_:1})])):w("",!0)])):w("",!0),o.dataIndex==="acciones"?(u(),r("div",he,[s("div",ke,[t(g,{type:"",onClick:_=>D(i),style:{"border-radius":"4px","margin-right":"4px",width:"26px",border:"solid 1px #9d9d9d",background:"#f2f3f5",color:"#1890ff"},size:"small"},{default:n(()=>e[16]||(e[16]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit"},[s("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])),_:2},1032,["onClick"])]),s("div",null,[t(g,{type:"",class:"",onClick:_=>F(i),style:{"border-radius":"4px",background:"#f3f3f3",width:"28px",border:"solid 1px #9d9d9d",color:"red"},shape:"",size:"small"},{default:n(()=>e[17]||(e[17]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[s("polyline",{points:"3 6 5 6 21 6"}),s("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])),_:2},1032,["onClick"])])])):w("",!0)]),_:1},8,["data-source"])]),s("div",Ie,[t(q,{current:b.value,"onUpdate:current":e[3]||(e[3]=o=>b.value=o),simple:"","page-size":"50",total:M.value},null,8,["current","total"])]),t(Q,{open:c.value,"onUpdate:open":e[10]||(e[10]=o=>c.value=o),title:"Registrar Programa",footer:null,width:"400px",onCancel:e[11]||(e[11]=o=>I.value=!1)},{default:n(()=>[s("div",Ue,[s("div",je,[t(J,{value:l.value.estado,"onUpdate:value":e[4]||(e[4]=o=>l.value.estado=o),style:{"margin-bottom":"16px"}},{default:n(()=>[t(R,{value:1},{default:n(()=>e[18]||(e[18]=[v("Activo")])),_:1}),t(R,{value:0},{default:n(()=>e[19]||(e[19]=[v("Inactivo")])),_:1})]),_:1},8,["value"])]),s("div",Ae,[e[20]||(e[20]=s("label",{for:""},"Modalidad",-1)),t(C,{value:p.value,"onUpdate:value":e[5]||(e[5]=o=>p.value=o),options:k.value,onChange:a.handleChange,style:{width:"100%"}},null,8,["value","options","onChange"])]),s("div",Ve,[e[21]||(e[21]=s("label",{for:""},"Programa acadÃ©mico",-1)),t(h,{value:l.value.programa,"onUpdate:value":e[6]||(e[6]=o=>l.value.programa=o),placeholder:"Programa"},{prefix:n(()=>[t(B)]),_:1},8,["value"])]),s("div",Me,[e[22]||(e[22]=s("label",{for:""},"Vacantes",-1)),t(h,{value:l.value.vacantes,"onUpdate:value":e[7]||(e[7]=o=>l.value.vacantes=o),placeholder:"Vacantes"},{prefix:n(()=>[t(B)]),_:1},8,["value"])]),s("div",Pe,[s("div",$e,[t(g,{onClick:e[8]||(e[8]=o=>c.value=!1)},{default:n(()=>e[23]||(e[23]=[v("Cancelar")])),_:1})]),t(g,{type:"primary",onClick:e[9]||(e[9]=o=>S())},{default:n(()=>e[24]||(e[24]=[v("Guardar")])),_:1})])])]),_:1},8,["open"])])]),_:1})],64)}}};export{Te as default};
