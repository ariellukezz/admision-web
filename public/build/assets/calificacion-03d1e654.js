import{r as n,x as pe,e as C,f as i,o as r,c,a as t,u as d,w as s,F as U,l as E,Z as me,d as o,j as _e,i as ve,t as q,S as fe,s as ge,g as _,b as m,E as he,D as ye,k as be,m as xe,y as ke}from"./app-74f9aad7.js";import{L as we}from"./LayoutCalificador-1039e2b3.js";import Ce from"./leer-ide-a4577e51.js";import Ee from"./leer-resp-e46c33e5.js";import Ie from"./leer-patron-3d68ea1d.js";import $e from"./participantes-913622e2.js";import Ve from"./calificacion-6bc237a2.js";import{H as Ne}from"./HomeOutlined-9916fc82.js";import{F as Se}from"./FormOutlined-dd773cf8.js";import{E as A}from"./EnvironmentOutlined-1b88f069.js";import"./DropdownLink-2c9762fa.js";import"./logotiny-c4b525af.js";/* empty css                                                                          */import"./_plugin-vue_export-helper-c27b6911.js";import"./TopMenu-b42f7dda.js";import"./SaveOutlined-a65ced7e.js";import"./ficha-61e39bb9.js";import"./logoDAD-c76d0a0b.js";import"./xlsx-4f9172c7.js";const ze={class:"mb-4",style:{width:"100%"}},De={class:"ml-0 flex mb-0 mt-0"},Ue={class:"flex"},qe={style:{"margin-top":"-4px"}},Fe=["onClick"],Me={class:"flex",style:{height:"20px","align-items":"center"}},Oe={class:"carpetas-select px-1"},je={key:0},Be={class:"flex justify-end mt-0 mb-3",style:{"margin-top":"-2px"}},Te={style:{color:"#0000009d","margin-top":"-6px"}},Ye={key:0},Ke=["onDblclick"],Le={key:2,class:"flex",style:{"justify-content":"center"}},Pe={key:0},Re={key:1},He=o("div",{style:{"margin-top":"0px"}}," Nuevo Proceso ",-1),Ae=o("div",{style:{"margin-top":"0px"}}," Subir archivo ",-1),Ge=o("div",{style:{"margin-top":"0px"}}," selees ",-1),Xe={style:{background:"#476175",height:"42px","margin-left":"-24px","margin-right":"-24px","margin-top":"-24px"}},Ze={class:"flex justify-between ml-3 mr-1",style:{height:"36px","align-items":"center"}},Je=o("div",{class:"flex pt-2"},[o("div",{class:"mt-0",style:{"margin-top":"2px"}},[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 22 24",fill:"none",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-folder"},[o("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})])]),o("span",{class:"ml-2",style:{"font-weight":"500",color:"white","font-size":"1rem"}},"Nuevo proceso")],-1),Qe={class:"flex"},We={style:{width:"100%"},class:"mt-4"},et=o("label",null,[m("Nombre"),o("span",{style:{}},"*")],-1),tt={style:{color:"#0000009d","margin-top":"-6px"}},ot={class:"mt-2",style:{width:"100%"}},at=o("label",null,[m("Ubicación"),o("span",{style:{color:"red"}},"*")],-1),st={style:{color:"#0000009d","margin-top":"-6px"}},lt={class:"mt-2",style:{width:"100%"}},nt=o("label",null,[m("Fecha"),o("span",{style:{color:"red"}},"*")],-1),it={style:{color:"#0000009d","margin-top":"-6px"}},rt={class:"mt-0 mb-2"},ct={style:{margin:"-24px","margin-top":"-5px"},class:"px-6 pt-4 pb-3 flex justify-end"},dt={class:"mr-2"},ut={key:1,class:"mt-3"},Dt={__name:"calificacion",setup(pt){const p=n([{id:0,nombre:"Simulacros"}]);n([]);const G=n(null),X=n([]),I=n(1),h=n(!1);n("");const v=n(null),F=n(),u=pe({nombre:"",fecha:"",ubigeo:null}),M=n(null),O=n(null),b=n(null),j=n([]);let x;const B=n("1"),T=n([]),k=n(""),Z=e=>{p.value.push({id:e.id,nombre:"/ "+e.nombre}),v.value=e.id};C(O,(e,a)=>{u.ubigeo=e}),C(b,(e,a)=>{clearTimeout(x),x=setTimeout(()=>{Y()},500)}),C(k,(e,a)=>{clearTimeout(x),x=setTimeout(()=>{$()},400)});const J=(e,a)=>{O.value=a.key},Y=async()=>{E.post("/get-ubigeo",{term:b.value}).then(e=>{j.value=e.data.datos.data}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})},$=async()=>{E.post("/get-sim",{term:k.value}).then(e=>{T.value=e.data.datos.data}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})};$();const Q=async()=>{await F.value.validateFields(),await E.post("/simulacro/save-simulacro",{nombre:u.nombre,estado:1,ubigeo:u.ubigeo,anio:"2024",fecha:u.fecha}),h.value=!1,await $()},K=async()=>{try{const e=await E.get("/raiz/ver-contenido-carpeta/"+I.value);X.value=e.data.carpetas,G.value=e.data.carpeta}catch(e){e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)}},W=async e=>{const a=p.value.indexOf(e);a!==-1?p.value.splice(a+1,p.value.length-a):p.value.push(e),I.value=e.id};C(I,(e,a)=>{K()});const ee=e=>{w.value=!1},te=()=>{h.value=!1};K();const w=n(!1),L=n(0),P=n(0),oe=e=>{w.value=!0,L.value=e.clientY,P.value=e.clientX,e.preventDefault()},V=e=>{e==="1"?(h.value=!0,w.value=!1):console.log("2")},ae=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"Nombre",dataIndex:"nombre"},{title:"Fecha",dataIndex:"fecha",align:"center"},{title:"Vigente",dataIndex:"estado",align:"center",width:"100px"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}];return Y(),(e,a)=>{const N=i("a-input"),R=i("a-tag"),f=i("a-button"),se=i("a-popconfirm"),le=i("a-table"),S=i("a-menu-item"),ne=i("a-menu"),z=i("a-form-item"),ie=i("a-auto-complete"),re=i("a-date-picker"),ce=i("a-form"),de=i("a-modal"),y=i("a-tab-pane"),ue=i("a-tabs");return r(),c(U,null,[t(d(me),{title:"Calificación"}),t(we,null,{default:s(()=>[o("div",ze,[o("div",{class:"p-4",style:{background:"white",width:"100%","min-height":"calc(100vh - 90px)","border-radius":"12px"},onClick:ee,onContextmenu:_e(oe,["prevent"])},[o("div",De,[o("div",Ue,[o("div",qe,[t(d(Ne))]),(r(!0),c(U,null,ve(p.value,l=>(r(),c("div",{key:l.id,onClick:H=>W(l)},[o("div",Me,[o("div",Oe,q(l.nombre),1)])],8,Fe))),128))])]),p.value.length===1?(r(),c("div",je,[o("div",Be,[t(N,{value:k.value,"onUpdate:value":a[0]||(a[0]=l=>k.value=l),style:{"max-width":"300px","border-radius":"6px",height:"36px"},placeholder:"Buscar"},{prefix:s(()=>[o("span",Te,[t(d(fe))])]),_:1},8,["value"])]),(r(),ge(le,{columns:ae,"data-source":T.value,key:e.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:s(({column:l,index:H,record:g})=>[l.dataIndex==="nro"?(r(),c("span",Ye,q(H+1),1)):_("",!0),l.dataIndex==="nombre"?(r(),c("div",{key:1,style:{width:"100%",cursor:"pointer"},onDblclick:D=>Z(g)},[o("span",null,q(g.nombre),1)],40,Ke)):_("",!0),l.dataIndex==="estado"?(r(),c("div",Le,[g.estado===1?(r(),c("div",Pe,[t(R,{color:"cyan"},{default:s(()=>[m("Vigente")]),_:1})])):(r(),c("div",Re,[t(R,{color:"red"},{default:s(()=>[m("No Vigente")]),_:1})]))])):_("",!0),l.dataIndex==="acciones"?(r(),c(U,{key:3},[t(f,{type:"gray",class:"mr-1",style:{color:"#476175"},onClick:D=>e.verFicha(g.id),size:"small"},{icon:s(()=>[t(d(he))]),_:2},1032,["onClick"]),t(f,{onClick:D=>e.abrirEditar(g),class:"mr-1",style:{color:"blue"},size:"small"},{icon:s(()=>[t(d(Se))]),_:2},1032,["onClick"]),t(se,{title:"¿Estas seguro de eliminar?",onConfirm:D=>e.eliminar(g)},{default:s(()=>[t(f,{shape:"",size:"small",style:{color:"crimson"}},{icon:s(()=>[t(d(ye))]),_:1})]),_:2},1032,["onConfirm"])],64)):_("",!0)]),_:1},8,["data-source"])),w.value?(r(),c("div",{key:0,style:be([{position:"absolute",border:"solid 1px #d9d9d943","padding-top":"0px","border-radius":"8px",overflow:"hidden"},{top:`${L.value}px`,left:`${P.value}px`}])},[t(ne,{size:"small",style:{"margin-top":"-4px","margin-bottom":"-4px"}},{default:s(()=>[t(S,{key:"1",class:"selec-menu",onClick:a[1]||(a[1]=l=>V("1"))},{default:s(()=>[He]),_:1}),t(S,{key:"2",class:"selec-menu",onClick:a[2]||(a[2]=l=>V("2"))},{default:s(()=>[Ae]),_:1}),t(S,{key:"2",class:"selec-menu",onClick:a[3]||(a[3]=l=>V("2"))},{default:s(()=>[Ge]),_:1})]),_:1})],4)):_("",!0),t(de,{visible:h.value,"onUpdate:visible":a[10]||(a[10]=l=>h.value=l),closable:!1,centered:"",style:{},footer:!1},{default:s(()=>[o("div",Xe,[o("div",Ze,[Je,o("div",null,[o("span",null,[t(f,{onClick:a[4]||(a[4]=l=>te()),style:{background:"none",border:"none",color:"white","font-size":"1.1rem"}},{default:s(()=>[m("x")]),_:1})])])])]),t(ce,{ref_key:"formDatos",ref:F,name:"form",model:u,rules:e.formRules},{default:s(()=>[o("div",Qe,[o("div",We,[o("div",null,[t(z,{name:"nombre",rules:[{required:!0,message:"Ingresa el nombre del proceso",trigger:"change"}]},{default:s(()=>[et,t(N,{value:u.nombre,"onUpdate:value":a[5]||(a[5]=l=>u.nombre=l),style:{width:"100%","border-radius":"4px",height:"36px"},placeholder:"Nombre del proceso"},{prefix:s(()=>[o("span",tt,[t(d(xe))])]),_:1},8,["value"])]),_:1})]),o("div",ot,[at,t(z,{name:"ubigeo",rules:[{required:!0,message:"Seleccione la ubicación",trigger:["change","blur"]}]},{default:s(()=>[t(ie,{value:M.value,"onUpdate:value":a[7]||(a[7]=l=>M.value=l),options:j.value,onSelect:J},{default:s(()=>[t(N,{placeholder:"Procedencia del Colegio",value:b.value,"onUpdate:value":a[6]||(a[6]=l=>b.value=l),style:{"border-radius":"4px",height:"36px"}},{prefix:s(()=>[o("span",st,[t(d(A))])]),suffix:s(()=>[t(d(ke))]),_:1},8,["value"])]),_:1},8,["value","options"])]),_:1})]),o("div",lt,[nt,t(z,{name:"fecha",rules:[{required:!0,message:"Ingresa tu fecha de nacimiento",trigger:"change"}]},{default:s(()=>[t(re,{style:{width:"100%","border-radius":"4px",height:"36px"},placeholder:"Seleccionar fec. nacimiento",value:u.fecha,"onUpdate:value":a[8]||(a[8]=l=>u.fecha=l),format:"DD/MM/YYYY"},{prefix:s(()=>[o("span",it,[t(d(A))])]),_:1},8,["value"])]),_:1})])])])]),_:1},8,["model","rules"]),o("div",rt,[o("div",ct,[o("div",dt,[t(f,{style:{border:"1px solid #476175",color:"#476175",width:"100px",height:"36px","border-radius":"4px"}},{default:s(()=>[m(" Cancelar ")]),_:1})]),o("div",null,[t(f,{onClick:a[9]||(a[9]=l=>Q()),style:{background:"#476175",border:"none",color:"white",width:"100px",height:"36px","border-radius":"4px"}},{default:s(()=>[m(" _Guardar ")]),_:1})])])])]),_:1},8,["visible"])])):_("",!0),p.value.length===2?(r(),c("div",ut,[t(ue,{activeKey:B.value,"onUpdate:activeKey":a[11]||(a[11]=l=>B.value=l),type:"card","tab-position":"top"},{default:s(()=>[t(y,{key:"1",tab:"Participantes",style:{margin:"-10px"}},{default:s(()=>[o("div",null,[t($e,{proceso:v.value},null,8,["proceso"])])]),_:1}),t(y,{key:"2",tab:"Ides",style:{margin:"-10px"}},{default:s(()=>[o("div",null,[t(Ce,{proceso:v.value},null,8,["proceso"])])]),_:1}),t(y,{key:"3",tab:"Respuestas",style:{margin:"-10px"}},{default:s(()=>[o("div",null,[t(Ee,{proceso:v.value},null,8,["proceso"])])]),_:1}),t(y,{key:"4",tab:"Res correctas"},{default:s(()=>[o("div",null,[t(Ie,{proceso:v.value},null,8,["proceso"])])]),_:1}),t(y,{key:"5",tab:"Calificación"},{default:s(()=>[t(Ve,{proceso:v.value},null,8,["proceso"])]),_:1})]),_:1},8,["activeKey"])])):_("",!0)],32)])]),_:1})],64)}}};export{Dt as default};
