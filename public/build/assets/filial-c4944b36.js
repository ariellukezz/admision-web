import{r,x as se,e as I,f as i,o as c,c as f,a as t,u as _,w as o,d as n,F as $,l as V,Z as ne,b as d,S as ie,s as re,t as de,g as S,D as ue,v as ce,y as pe,n as me}from"./app-28f3ad09.js";import{A as ge}from"./AuthenticatedLayout-37d8b666.js";import{S as ve}from"./SaveOutlined-9e29c2a4.js";import{F as fe}from"./FormOutlined-299381d7.js";import"./DropdownLink-4a2f7a73.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logotiny-c4b525af.js";import"./TeamOutlined-5f750d64.js";const _e={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{"border-radius":"10px","min-height":"calc(100vh - 92px)"}},be={class:"flex justify-between mb-2"},ye={class:"mr-3"},xe={class:"flex justify-between",style:{position:"relative"}},he={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},we={key:0,class:"flex",style:{"justify-content":"center"}},ke={class:"px-2",style:{background:"#e3e3e3","border-radius":"4px"}},Ce={style:{"font-weight":"bold"}},Ie={key:1,class:"flex",style:{"justify-content":"center"}},Ve={key:0},Se={key:1},Fe={class:"flex justify-between mt-2 pr-4",style:{"margin-bottom":"-5px"}},Ue={clas:"",style:{scale:"0.9","margin-right":"-20px"}},ze={style:{background:"#476175",height:"36px","margin-left":"-24px","margin-right":"-24px","margin-top":"-24px","margin-bottom":"28px"}},Ne={class:"flex justify-between ml-3 mr-1",style:{height:"36px","align-items":"center"}},Ee=n("div",null,[n("span",{style:{"font-weight":"bold",color:"white","font-size":"1rem"}},"Nueva filial")],-1),Me={__name:"filial",setup(Re){const A=r(!1),h=r(""),F=r([]),p=r(!1),U=r(),s=se({id:null,codigo:"",nombre:"",lugar:null,direccion:"",estado:null}),b=r(null),z=r([]),w=r(null),L=r(null),k=r(1),m=r(10),N=r(1),M=(a,e)=>{b.value=e.value,s.lugar=e.key},P=()=>{p.value=!0};let E;I(h,(a,e)=>{clearTimeout(E),E=setTimeout(()=>{g()},500)}),I(k,(a,e)=>{g()}),I(m,(a,e)=>{g()});let R;I(w,(a,e)=>{clearTimeout(R),R=setTimeout(()=>{j()},500)});const G=async()=>{A.value=!0;try{const a=await U.value.validateFields();V.post("save-filial",s).then(e=>{O("success",e.data.titulo,e.data.mensaje),g(),p.value=!1,D()})}catch(a){console.error(a)}},j=async()=>{V.post("/get-ubigeo",{term:w.value}).then(a=>{z.value=a.data.datos.data}).catch(a=>{a.response?console.error("Error de servidor:",a.response.data):a.request?console.error("Error de red:",a.request):console.error("Error de configuración:",a.message)})},X=a=>{p.value=!0,s.id=a.id,s.codigo=a.codigo,s.nombre=a.nombre,s.lugar=a.ubigeo,s.direccion=a.direccion,b.value=a.lugar,a.estado==1?s.estado=!0:s.estado=!1},g=async()=>{let a=await V.post("filiales/get-filiales?page="+k.value,{term:h.value,paginasize:m.value});F.value=a.data.datos.data,N.value=a.data.datos.total},Z=a=>{V.get("eliminar-filial/"+a.id).then(e=>{g(),O("error","PROCESO ELIMINADO",e.data.mensaje)})},D=()=>{s.id=null,s.codigo="",s.nombre="",s.lugar=null,s.direccion="",s.estado="",b.value="",L.value="",q()},O=(a,e,u)=>{me[a]({message:e,description:u})},q=()=>{p.value=!1};g(),j();const H={labelCol:{span:6},wrapperCol:{span:18}},J=[{title:"Codigo",dataIndex:"codigo"},{title:"Nombre",dataIndex:"nombre"},{title:"Lugar",dataIndex:"lugar"},{title:"Dirección",dataIndex:"direccion"},{title:"Vigente",dataIndex:"estado",align:"center",width:"100px"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}];return(a,e)=>{const u=i("a-button"),y=i("a-input"),B=i("a-tag"),K=i("a-popconfirm"),Q=i("a-table"),W=i("a-pagination"),C=i("a-select-option"),Y=i("a-select"),x=i("a-form-item"),ee=i("a-tooltip"),te=i("a-auto-complete"),ae=i("a-switch"),oe=i("a-form"),le=i("a-modal");return c(),f($,null,[t(_(ne),{title:"Filiales"}),t(ge,null,{default:o(()=>[n("div",_e,[n("div",be,[n("div",ye,[t(u,{type:"primary",onClick:P,style:{background:"#476175",border:"none","border-radius":"5px"}},{default:o(()=>[d("Nuevo")]),_:1})]),n("div",xe,[t(y,{type:"text",placeholder:"Buscar",value:h.value,"onUpdate:value":e[0]||(e[0]=l=>h.value=l),style:{"max-width":"300px","border-radius":"6px","padding-left":"30px"}},null,8,["value"]),n("div",he,[t(_(ie))])])]),(c(),re(Q,{columns:J,"data-source":F.value,key:a.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:o(({column:l,index:je,record:v})=>[l.dataIndex==="codigo"?(c(),f("div",we,[n("div",ke,[n("span",Ce,de(v.codigo),1)])])):S("",!0),l.dataIndex==="estado"?(c(),f("div",Ie,[v.estado===1?(c(),f("div",Ve,[t(B,{color:"cyan"},{default:o(()=>[d("Vigente")]),_:1})])):(c(),f("div",Se,[t(B,{color:"red"},{default:o(()=>[d("No Vigente")]),_:1})]))])):S("",!0),l.dataIndex==="acciones"?(c(),f($,{key:2},[t(u,{type:"success",class:"mr-1",style:{color:"#476175"},onClick:T=>a.cambiarSexo(v.id_postulante,v.sexo),size:"small"},{icon:o(()=>[t(_(ve))]),_:2},1032,["onClick"]),t(u,{onClick:T=>X(v),class:"mr-1",style:{color:"blue"},size:"small"},{icon:o(()=>[t(_(fe))]),_:2},1032,["onClick"]),t(K,{title:"¿Estas seguro de eliminar?",onConfirm:T=>Z(v)},{default:o(()=>[t(u,{shape:"",size:"small",style:{color:"crimson"}},{icon:o(()=>[t(_(ue))]),_:1})]),_:2},1032,["onConfirm"])],64)):S("",!0)]),_:1},8,["data-source"])),n("div",Fe,[n("div",null,[t(W,{current:k.value,"onUpdate:current":e[1]||(e[1]=l=>k.value=l),simple:"",total:N.value,pageSize:m.value,"onUpdate:pageSize":e[2]||(e[2]=l=>m.value=l),"show-less-items":""},null,8,["current","total","pageSize"])]),n("div",Ue,[t(Y,{value:m.value,"onUpdate:value":e[3]||(e[3]=l=>m.value=l),style:{width:"90px"}},{default:o(()=>[t(C,{value:10},{default:o(()=>[d("10 Reg.")]),_:1}),t(C,{value:20},{default:o(()=>[d("20 Reg.")]),_:1}),t(C,{value:50},{default:o(()=>[d("50 Reg.")]),_:1}),t(C,{value:100},{default:o(()=>[d("100 Reg.")]),_:1})]),_:1},8,["value"])])])])]),_:1}),n("div",null,[t(le,{visible:p.value,"onUpdate:visible":e[12]||(e[12]=l=>p.value=l),style:{"margin-top":"-40px","margin-bottom":"-40px"},closable:!1},{footer:o(()=>[t(u,{style:{"margin-left":"6px","border-radius":"4px"},onClick:D},{default:o(()=>[d("Cancelar")]),_:1}),t(u,{type:"primary",style:{background:"#476175",border:"none","border-radius":"4px"},onClick:e[11]||(e[11]=l=>G())},{default:o(()=>[d("Guardar")]),_:1})]),default:o(()=>[n("div",ze,[n("div",Ne,[Ee,n("div",null,[n("span",null,[t(u,{onClick:e[4]||(e[4]=l=>q()),style:{background:"none",border:"none",color:"white"}},{default:o(()=>[d("X")]),_:1})])])])]),t(oe,ce({ref_key:"formFilial",ref:U,name:"filial",model:s},H,{style:{"margin-bottom":"-30px"}}),{default:o(()=>[t(x,{label:"Codigo",name:"codigo",rules:[{required:!0,message:"Ingrese el codigo",trigger:"change"}]},{default:o(()=>[t(y,{style:{"border-radius":"6px"},type:"text",placeholder:"Ingrese el codigo",value:s.codigo,"onUpdate:value":e[5]||(e[5]=l=>s.codigo=l),autocomplete:"off"},null,8,["value"])]),_:1}),t(x,{label:"Nombre",rules:[{required:!0,message:"Ingrese el nombre",trigger:"change"}],name:"nombre"},{default:o(()=>[t(y,{style:{"border-radius":"6px"},type:"text",placeholder:"Ingrese el nombre",value:s.nombre,"onUpdate:value":e[6]||(e[6]=l=>s.nombre=l),autocomplete:"off"},null,8,["value"])]),_:1}),t(x,{label:"lugar",name:"lugar",rules:[{required:!0,message:"Seleccione el lugar",trigger:"blur"}]},{default:o(()=>[t(te,{value:b.value,"onUpdate:value":e[8]||(e[8]=l=>b.value=l),options:z.value,onSelect:M,style:{"border-radius":"6px",overflow:"hidden",border:"none"}},{default:o(()=>[t(y,{placeholder:"Dep/prov/dist",value:w.value,"onUpdate:value":e[7]||(e[7]=l=>w.value=l),style:{"border-radius":"6px"}},{suffix:o(()=>[t(ee,{title:"Extra information"},{default:o(()=>[t(_(pe))]),_:1})]),_:1},8,["value"])]),_:1},8,["value","options"])]),_:1}),t(x,{label:"Dirección",rules:[{required:!0,message:"Ingrese la dirección",trigger:"change"}],name:"direccion"},{default:o(()=>[t(y,{style:{"border-radius":"6px"},type:"text",placeholder:"Ingrese el nombre",value:s.direccion,"onUpdate:value":e[9]||(e[9]=l=>s.direccion=l),autocomplete:"off"},null,8,["value"])]),_:1}),t(x,{label:"Vigente",name:"estado"},{default:o(()=>[t(ae,{checked:s.estado,"onUpdate:checked":e[10]||(e[10]=l=>s.estado=l)},null,8,["checked"])]),_:1})]),_:1},16,["model"])]),_:1},8,["visible"])])],64)}}};export{Me as default};
