import{r as i,H as C,e as g,D as I,o as m,c as p,a,u as N,w as s,F as y,y as T,Z as V,d as o,s as j,t as _,b as $,f as M,a9 as O,B as z,aa as A,ab as H,ac as G,h as P}from"./app-6dd2fb5e.js";import{_ as Y}from"./AuthenticatedLayout-b9ac0019.js";import"./logotiny-c4b525af.js";import"./Header-ae457ec7.js";import"./AntdIcon-8fcb511c.js";import"./perfil-8483bf70.js";/* empty css                                                               */import"./_plugin-vue_export-helper-c27b6911.js";import"./UserOutlined-ab3658c5.js";import"./SafetyCertificateOutlined-69c10da4.js";import"./EditOutlined-9229ec09.js";import"./DownOutlined-0336cddf.js";/* empty css                                                            */const Z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4 pr-0"},q={class:"checkbox-group-container"},J={style:{"margin-top":"-10px"}},K={class:"totales-mini"},Q={class:"area"},W={class:"valor"},X={class:"mt-4 bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 245px)"}},tt={class:"mr-3"},et={style:{}},ot={style:{"font-weight":"bold",color:"#476175"}},gt={__name:"biometrico",setup(at){const h=i(""),f=i(1),R=i(0),b=i([]),l=i(["area"]),w=i([]),B=C(()=>b.value.reduce((e,t)=>e+t.total,0)),x=[{label:"Ãrea",value:"area"},{label:"Programa",value:"programa"},{label:"Modalidad",value:"modalidad"},{label:"Sexo",value:"sexo"},{label:"Usuario",value:"usuario"}],S=C(()=>[...l.value.map(e=>{const t=x.find(u=>u.value===e);return{title:t?t.label:e,dataIndex:e,key:e,align:"left"}}),{title:"Total",dataIndex:"total",key:"total",align:"center",width:"90px"}]),c=async()=>{try{let e=await T.post("resumen-biometrico",{group_by:l.value,term:h.value});b.value=e.data.data,w.value=e.data.total_esperado,R.value=e.data.datos.total}catch{}};g(l,()=>{c()}),g(f,()=>{c()});let k;g(h,()=>{clearTimeout(k),k=setTimeout(()=>{f.value=1,c()},500)});const D=async()=>{try{const e=await T.post("resumen-biometrico",{descargar:1,group_by:l.value},{responseType:"blob"});if(e.status!==200)throw new Error("Error al obtener el archivo");const t=new Date,v=`${`${t.getDate().toString().padStart(2,"0")}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getFullYear()}_${t.getHours().toString().padStart(2,"0")}-${t.getMinutes().toString().padStart(2,"0")}-${t.getSeconds().toString().padStart(2,"0")}`}_resumen_control_biometrico.pdf`,d=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=d,r.setAttribute("download",v),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(d)}catch(e){console.error("Error al descargar el archivo:",e)}};return c(),(e,t)=>{const u=O,v=z,d=I("row"),r=A,U=H,E=G,F=P;return m(),p(y,null,[a(N(V),{title:"Resumen Biometrico"}),a(Y,null,{default:s(()=>[o("div",Z,[t[2]||(t[2]=o("div",{class:"mb-4"},[o("span",{style:{"font-size":"1.3rem"}},"Control biometrico")],-1)),o("div",q,[a(u,{value:l.value,"onUpdate:value":t[0]||(t[0]=n=>l.value=n),options:x},null,8,["value"])]),o("div",J,[o("div",K,[(m(!0),p(y,null,j(w.value,n=>(m(),p("div",{class:"item",key:n},[o("span",Q,_(n.area)+":",1),o("span",W,_(n.total),1)]))),128))])])]),o("div",X,[a(d,{class:"flex justify-end mb-4"},{default:s(()=>[o("div",tt,[a(v,{type:"primary",style:{"border-radius":"5px",background:"#476175",border:"none"},onClick:t[1]||(t[1]=n=>D())},{default:s(()=>t[3]||(t[3]=[$("Descargar")])),_:1})])]),_:1}),o("div",et,[a(F,{columns:S.value,"data-source":b.value,pagination:!1,size:"small",scroll:{x:200,y:"calc(100vh - 400px)"}},{bodyCell:s(({column:n,record:L})=>[n.dataIndex==="total"?(m(),p(y,{key:0},[$(_(L.total),1)],64)):M("",!0)]),summary:s(()=>[a(E,{fixed:"bottom"},{default:s(()=>[a(U,null,{default:s(()=>[a(r,{"col-span":S.value.length-1,style:{"text-align":"right"}},{default:s(()=>t[4]||(t[4]=[o("span",{style:{"font-weight":"bold",color:"#476175"}}," Total Registros: ",-1)])),_:1},8,["col-span"]),a(r,{style:{"text-align":"center"}},{default:s(()=>[o("span",ot,_(B.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","data-source"])])])]),_:1})],64)}}};export{gt as default};
