import{a,r as u,e as C,o as g,c as M,u as v,w as o,F as W,y as b,n as X,M as Y,Z as K,d as E,b as y,E as $,t as z,x as ee,f as B,B as ae,I as te,_ as oe,K as ne,h as le,i as se,k as de,O as ie,q as re}from"./app-ae3dbf01.js";import{_ as ce}from"./AuthenticatedLayout-6af1929c.js";import{A as ue}from"./AntdIcon-bae9e399.js";import{P as me}from"./PlusOutlined-79a5a495.js";import{S as pe}from"./SearchOutlined-ee275daa.js";import{E as fe}from"./EditOutlined-afabac95.js";import{D as ve}from"./DeleteOutlined-709e6863.js";import"./logotiny-c4b525af.js";import"./Header-35365308.js";import"./DownOutlined-c6f00e6c.js";/* empty css                                                            */var _e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M705.6 124.9a8 8 0 00-11.6 7.2v64.2c0 5.5 2.9 10.6 7.5 13.6a352.2 352.2 0 0162.2 49.8c32.7 32.8 58.4 70.9 76.3 113.3a355 355 0 0127.9 138.7c0 48.1-9.4 94.8-27.9 138.7a355.92 355.92 0 01-76.3 113.3 353.06 353.06 0 01-113.2 76.4c-43.8 18.6-90.5 28-138.5 28s-94.7-9.4-138.5-28a353.06 353.06 0 01-113.2-76.4A355.92 355.92 0 01184 650.4a355 355 0 01-27.9-138.7c0-48.1 9.4-94.8 27.9-138.7 17.9-42.4 43.6-80.5 76.3-113.3 19-19 39.8-35.6 62.2-49.8 4.7-2.9 7.5-8.1 7.5-13.6V132c0-6-6.3-9.8-11.6-7.2C178.5 195.2 82 339.3 80 506.3 77.2 745.1 272.5 943.5 511.2 944c239 .5 432.8-193.3 432.8-432.4 0-169.2-97-315.7-238.4-386.7zM480 560h64c4.4 0 8-3.6 8-8V88c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v464c0 4.4 3.6 8 8 8z"}}]},name:"poweroff",theme:"outlined"};const ge=_e;function S(c){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?Object(arguments[n]):{},d=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(i).filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable}))),d.forEach(function(r){be(c,r,i[r])})}return c}function be(c,n,i){return n in c?Object.defineProperty(c,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):c[n]=i,c}var P=function(n,i){var d=S({},n,i.attrs);return a(ue,S({},d,{icon:ge}),null)};P.displayName="PoweroffOutlined";P.inheritAttrs=!1;const ye=P,he={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},we={class:"flex justify-between mb-4"},xe={key:1,class:"flex gap-1 justify-center"},ke={class:"mt-2 text-right"},je={__name:"index",setup(c){const n=u(""),i=u([]),d=u(!1),r=u(1),N=u(0),h=u(!1),w=u(!1),l=u({id:null,codigo:"",nombre:"",estado:!0}),x=u(null),_=async()=>{h.value=!0;try{const t=await b.post(`modalidad/get-modalidades?page=${r.value}`,{term:n.value});i.value=t.data.datos.data,N.value=t.data.datos.total}catch{p("error","Error","No se pudieron cargar las modalidades")}finally{h.value=!1}},j=()=>{d.value=!0},A=t=>{l.value={...t},d.value=!0},U=async()=>{try{await x.value.validate()}catch{return}w.value=!0;try{const t={...l.value,codigo:String(l.value.codigo),estado:!!l.value.estado},e=await b.post("save-modalidad",t);p("success",e.data.titulo,e.data.mensaje),_(),d.value=!1}finally{w.value=!1}},V=async t=>{const e=!t.estado;try{await b.post(`cambiar-estado-modalidad/${t.id}`,{estado:e}),t.estado=e,p("success","Estado actualizado",`Modalidad ${e?"activada":"desactivada"}`)}catch{p("error","Error","No se pudo cambiar el estado")}},D=async t=>{try{const e=await b.get(`eliminar-modalidad/${t.id}`);p("warning",e.data.titulo,e.data.mensaje),_()}catch{p("error","Error","No se pudo eliminar")}},F=()=>{d.value=!1},R=()=>{var t;l.value={id:null,codigo:"",nombre:"",estado:!0},(t=x.value)==null||t.resetFields()},p=(t,e,m)=>{X[t]({message:e,description:m})};C(n,()=>{r.value=1,_()}),C(r,()=>{_()}),C(d,t=>{t||R()});const q=[{title:"Código",dataIndex:"codigo",align:"center",width:90},{title:"Nombre",dataIndex:"nombre"},{title:"Estado",dataIndex:"estado",align:"center",width:90},{title:"Acciones",dataIndex:"acciones",align:"center",width:150}];return _(),(t,e)=>{const m=ae,k=te,G=oe,T=ne,Z=le,H=se,O=de,J=ie,L=re,Q=Y;return g(),M(W,null,[a(v(K),{title:"Modalidades"}),a(ce,null,{default:o(()=>[E("div",he,[E("div",we,[a(m,{type:"primary",onClick:j},{icon:o(()=>[a(v(me))]),default:o(()=>[e[6]||(e[6]=y(" Nuevo "))]),_:1}),a(k,{value:n.value,"onUpdate:value":e[0]||(e[0]=s=>n.value=s),placeholder:"Buscar",style:{width:"220px"}},{prefix:o(()=>[a(v(pe))]),_:1},8,["value"])]),a(Z,{columns:q,"data-source":i.value,pagination:!1,size:"small",loading:h.value,"row-key":"id"},{bodyCell:o(({column:s,record:f})=>[s.dataIndex==="estado"?(g(),$(G,{key:0,color:f.estado?"cyan":"red"},{default:o(()=>[y(z(f.estado?"Activo":"Inactivo"),1)]),_:2},1032,["color"])):s.dataIndex==="acciones"?(g(),M("div",xe,[a(m,{size:"small",style:{background:"white",border:"1px solid #d9d9d9",height:"32px",width:"32px"},onClick:I=>A(f)},{default:o(()=>[a(v(fe))]),_:2},1032,["onClick"]),a(m,{size:"small",style:ee({background:"white",width:"32px",height:"32px",border:"1px solid #d9d9d9",color:f.estado?"#faad14":"#52c41a"}),onClick:I=>V(f)},{default:o(()=>[a(v(ye))]),_:2},1032,["style","onClick"]),a(T,{title:"¿Estas seguro de eliminar?",onConfirm:I=>D(f)},{default:o(()=>[a(m,{size:"small",style:{background:"white",border:"1px solid #d9d9d9",color:"#ff4d4f",height:"32px",width:"32px"}},{default:o(()=>[a(v(ve))]),_:1})]),_:2},1032,["onConfirm"])])):B("",!0)]),_:1},8,["data-source","loading"]),E("div",ke,[a(H,{current:r.value,"onUpdate:current":e[1]||(e[1]=s=>r.value=s),total:N.value,"show-less-items":"",size:"middle"},null,8,["current","total"])])])]),_:1}),a(Q,{open:d.value,"onUpdate:open":e[5]||(e[5]=s=>d.value=s),title:l.value.id?"Editar Modalidad":"Nueva Modalidad","destroy-on-close":""},{footer:o(()=>[a(m,{onClick:F},{default:o(()=>e[7]||(e[7]=[y("Cancelar")])),_:1}),a(m,{type:"primary",loading:w.value,onClick:U},{default:o(()=>[y(z(l.value.id?"Actualizar":"Guardar"),1)]),_:1},8,["loading"])]),default:o(()=>[a(L,{ref_key:"formRef",ref:x,model:l.value,rules:t.rules,"label-col":{span:7},"wrapper-col":{span:14}},{default:o(()=>[a(O,{label:"Código",name:"codigo","has-feedback":""},{default:o(()=>[a(k,{value:l.value.codigo,"onUpdate:value":e[2]||(e[2]=s=>l.value.codigo=s)},null,8,["value"])]),_:1}),a(O,{label:"Nombre",name:"nombre","has-feedback":""},{default:o(()=>[a(k,{value:l.value.nombre,"onUpdate:value":e[3]||(e[3]=s=>l.value.nombre=s)},null,8,["value"])]),_:1}),l.value.id?(g(),$(O,{key:0,label:"Estado",name:"estado"},{default:o(()=>[a(J,{checked:l.value.estado,"onUpdate:checked":e[4]||(e[4]=s=>l.value.estado=s),"checked-children":"Activo","un-checked-children":"Inactivo"},null,8,["checked"])]),_:1})):B("",!0)]),_:1},8,["model","rules"])]),_:1},8,["open","title"])],64)}}};export{je as default};
