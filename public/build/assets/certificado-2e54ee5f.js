import{I as W,r as c,x as X,f as r,o as d,c as _,d as e,a as s,w as t,F as j,i as Y,l as C,b as u,t as D,g as h,s as M,u as Z,a6 as L}from"./app-c54fd312.js";import"./es-92bd824d.js";const ee={class:"mt-6"},oe={class:"flex justify-between border-b-2",style:{"border-bottom":"solid 2px #009DD1","padding-bottom":"8px"}},te=e("div",null,[e("span",{style:{"font-weight":"bold","font-size":"1rem",color:"#009DD1"}},"CERTIFICADO DE ESTUDIOS")],-1),se={style:{"margin-top":"-5px"}},le={class:"mt-3"},ae={class:"flex justify-between",style:{}},ie={class:""},ne={class:"font-bold",style:{"font-size":"1rem"}},re={key:0},de=e("span",{class:"font-bold",style:{"font-size":"1rem"}}," CERTIFICADO BLANCO",-1),ce=[de],ue={key:1},pe=e("span",{class:"font-bold",style:{"font-size":"1rem"}}," CERTIFICADO AMARILLO",-1),_e=[pe],fe=e("span",{class:""},"TIPO DE COLEGIO: ",-1),ve={class:"flex",style:{"margin-top":"0px"}},me=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1),he=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#1a2843","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1),ge=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),be={class:""},we=e("label",null,[u("Tipo"),e("span",{style:{color:"red"}},"*")],-1),xe=e("label",null,[u("Observación"),e("span",{style:{color:"red"}})],-1),ye=e("label",null,[u("Archivo PDF (Max. 2mb)"),e("span",{style:{color:"red"}},"*")],-1),ke={key:0,class:"mt-2"},Ce=["src"],De={key:0,class:"mt-2"},Le=["src"],Fe={class:"flex justify-end"},Oe={key:0,class:"mt-2"},Ae=["src"],Ie={class:"flex justify-end"},Te={__name:"certificado",props:["id_proceso","dni"],setup(z){const F=window.location.origin;W.locale("es");const g=z,N=()=>{f.value=!0},S=o=>{l.value={id:null,observacion:"",tipo:null,fileList:[]},l.id=o.id,l.observacion=o.observacion,p.value=F+"/"+o.url,l.tipo=o.id_tipo,f.value=!0},f=c(!1),O=c([]),V=c([{value:1,label:"CERTIFICADO BLANCO"},{value:2,label:"CERTIFICADO AMARILLO"}]),b=c(!1),x=c(null),$=o=>{x.value=o,b.value=!0},A=c(),l=X({id:null,observacion:"",tipo:null,fileList:[]}),q=o=>{console.log(`selected ${o}`)},G=async o=>{(await C.get("/eliminar-certificado/"+o)).data.estado==!0?y():console.log("Ocurrió un error")},v=c(!1),p=c(null),I=c(0),R=o=>{if(o.type==="application/pdf"){const a=new FileReader;a.onload=n=>{p.value=n.target.result},a.readAsDataURL(o),l.fileList=[o]}else L.error("¡Solo puedes cargar archivos PDF!");return!1},y=async()=>{const o=await C.post("/get-certificados-postulante",{dni:g.dni,id_proceso:g.id_proceso});o.data.estado==!0?O.value=o.data.datos:console.log("No se encontraron datos")},E=()=>{p.value=null,l.fileList=[]},H=async()=>{await A.value.validateFields();const o=new FormData;l.fileList[0]&&o.append("file",l.fileList[0]),l.id!=null&&o.append("id",l.id),o.append("id_proceso",g.id_proceso),o.append("dni",g.dni),o.append("observacion",l.observacion),o.append("tipo",l.tipo);try{v.value=!0,I.value=0;const a=await C.post("/save-certificado",o,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer your-auth-token"},onUploadProgress:n=>{I.value=Math.round(n.loaded*100/n.total)}});f.value=!1,v.value=!1,L.success("¡Archivo PDF cargado exitosamente!"),await y()}catch(a){v.value=!1,L.error("Error al cargar el archivo."),console.error("File upload failed:",a)}};return y(),(o,a)=>{const n=r("a-button"),m=r("a-col"),k=r("a-row"),J=r("a-select"),w=r("a-form-item"),K=r("a-input"),T=r("upload-outlined"),B=r("a-upload"),Q=r("a-form"),P=r("a-modal");return d(),_(j,null,[e("div",ee,[e("div",null,[e("div",oe,[te,e("div",se,[s(n,{onClick:a[0]||(a[0]=i=>N())},{default:t(()=>[u("Agregar")]),_:1})])]),e("div",le,[(d(!0),_(j,null,Y(O.value,i=>(d(),_("div",{class:"mb-2",key:i},[s(k,{gutter:16},{default:t(()=>[s(m,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[e("div",ae,[e("div",ie,[e("div",null,[e("span",ne,D(),1)]),i.id_tipo==1?(d(),_("div",re,ce)):h("",!0),i.id_tipo==2?(d(),_("div",ue,_e)):h("",!0),e("div",null,[fe,u(" "+D(i.gestion),1)])]),e("div",ve,[s(n,{onClick:U=>$(i.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[me]),_:2},1032,["onClick"]),s(n,{onClick:U=>S(i),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[he]),_:2},1032,["onClick"]),s(n,{danger:"",onClick:U=>G(i.id),style:{width:"20px",height:"20px","padding-left":"3px"}},{default:t(()=>[ge]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024)]))),128))])])]),e("div",be,[s(P,{visible:f.value,"onUpdate:visible":a[3]||(a[3]=i=>f.value=i),width:"800px",class:"w-full md:w-3/4",title:"Registro de certificado",onOk:o.handleOk},{footer:t(()=>[e("div",Fe,[s(n,{type:"primary",disabled:!p.value,loading:v.value,style:{"margin-top":"16px"},onClick:H},{default:t(()=>[u(D(v.value?"Subiendo...":"Guardar datos"),1)]),_:1},8,["disabled","loading"])])]),default:t(()=>[s(Q,{ref_key:"formDatos",ref:A,name:"form",model:l,rules:o.formRules},{default:t(()=>[s(k,{gutter:16},{default:t(()=>[s(m,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[we,s(w,{name:"tipo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[s(J,{ref:"select",value:l.tipo,"onUpdate:value":a[1]||(a[1]=i=>l.tipo=i),style:{width:"100%"},options:V.value,onFocus:o.focus,onChange:q},null,8,["value","options","onFocus"])]),_:1})]),_:1}),s(m,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[xe,s(w,{name:"observacion"},{default:t(()=>[s(K,{value:l.observacion,"onUpdate:value":a[2]||(a[2]=i=>l.observacion=i),style:{height:"32px"}},{suffix:t(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),s(m,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[ye,l.id==null?(d(),M(w,{key:0,name:"fileList",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[s(B,{"file-list":l.fileList,"before-upload":R,onRemove:E},{default:t(()=>[s(n,null,{default:t(()=>[s(T),u(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),p.value?(d(),_("div",ke,[e("iframe",{src:p.value,width:"100%",height:"300px"},null,8,Ce)])):h("",!0)]),_:1})):(d(),M(w,{key:1,name:"fileList"},{default:t(()=>[s(B,{"file-list":l.fileList,"before-upload":R,onRemove:E},{default:t(()=>[s(n,null,{default:t(()=>[s(T),u(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),p.value?(d(),_("div",De,[e("iframe",{src:p.value,width:"100%",height:"300px"},null,8,Le)])):h("",!0)]),_:1}))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","onOk"]),s(P,{visible:b.value,"onUpdate:visible":a[5]||(a[5]=i=>b.value=i),title:"Registro de título",style:{"min-width":"1000px"}},{footer:t(()=>[e("div",Ie,[s(n,{onClick:a[4]||(a[4]=i=>b.value==!1)},{default:t(()=>[u(" Aceptar ")]),_:1})])]),default:t(()=>[s(k,{gutter:16},{default:t(()=>[s(m,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[x.value?(d(),_("div",Oe,[e("iframe",{src:Z(F)+"/"+x.value,width:"100%",height:"500px"},null,8,Ae)])):h("",!0)]),_:1})]),_:1})]),_:1},8,["visible"])])],64)}}};export{Te as default};
