import{r as y,e as E,f as v,o as n,c as i,a as d,w as s,d as p,b as r,F as b,s as N,t as k,g as l,l as _,n as G}from"./app-4861b1c9.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";const L={class:"flex pr-6",style:{width:"100%","justify-content":"end","margin-top":"-30px","margin-bottom":"16px"}},U={key:0},q={key:0},H={key:0},J={key:1},K={key:1},Q={class:"pt-5",style:{width:"100%"}},W={key:0},X={key:0},Y={key:0},Z={key:1},ee={key:1},te={__name:"voucherBN",props:["dni","proceso"],setup($){const f=y(!1),j=y([]),u=$,h=y([]),O=async()=>{let e=await _.post("get-pagos-banco",{dni:u.dni});j.value=e.data.datos},A=y([]),V=async()=>{let e=await _.get("/get-pago-caja/"+u.dni);A.value=e.data},B=y([]),D=async()=>{let e=await _.get("/get-pago-BN/"+u.dni);B.value=e.data},x=async e=>{let a={dni:u.dni,operacion:e.paymentTitle,fecha:e.paymentDatetime,monto:e.paymentAmount};if(e.estado)e.estado==1?(await _.get("/eliminar-pago/"+a.dni+"/"+a.operacion),e.estado=0,g()):e.estado=1;else{e.estado=1;let o=await _.post("/insertar-pago",{pag:a});g(),S(o.data.type,o.data.titulo,o.data.mensaje)}},w=async e=>{let a={dni:u.dni,operacion:e.paymentId,fecha:e.date,monto:e.amount};if(e.estado)e.estado==1?(await _.get("/eliminar-pago/"+a.dni+"/"+a.operacion),e.estado=0,g()):e.estado=1;else{e.estado=1;let o=await _.post("/insertar-pago",{pag:a});g(),S(o.data.type,o.data.titulo,o.data.mensaje)}},g=async e=>{let a=await _.get("/get-pagos-dni/"+u.dni);h.value=a.data.data};E(()=>u.dni,async e=>{u.dni.length===8&&/^[0-9]+$/.test(u.dni)&&(await O(),await V(),await D(),await g())});const F=[{title:"N° Operación",dataIndex:"operacion"},{title:"Nombres",dataIndex:"nombres"},{title:"Fecha",dataIndex:"fecha"},{title:"Concepto",dataIndex:"concepto"},{title:"Monto",dataIndex:"monto"}],T=[{title:"N° Operación",dataIndex:"paymentId"},{title:"Nombres",dataIndex:"client"},{title:"Fecha",dataIndex:"date"},{title:"Concepto",dataIndex:"description"},{title:"Monto",dataIndex:"amount"},{title:"",dataIndex:"opcion",align:"center"}],P=[{title:"N° Operación",dataIndex:"paymentTitle"},{title:"Fecha",dataIndex:"paymentDatetime"},{title:"Concepto",dataIndex:"concepto"},{title:"Monto",dataIndex:"paymentAmount",align:"center"},{title:"",dataIndex:"opcion",align:"center"}];y([{paymentId:"2177229",document:"000000070080972",code:"000000000000000",client:"TICONA PONGO TANIA ROSARIO DEL",universityId:"000000000000000",description:"00000028",amount:"21.00",date:"2024-02-27 14:20",status:"0"}]);const S=(e,a,o)=>{G[e]({message:a,description:o})};return(e,a)=>{const o=v("a-button"),C=v("a-tag"),I=v("a-table"),z=v("a-modal"),M=v("a-row");return n(),i("div",null,[d(M,{gutter:16,class:"mb-3"},{default:s(()=>[p("div",L,[d(o,{onClick:a[0]||(a[0]=c=>f.value=!0),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>[r("Agregar Pagos")]),_:1})]),d(I,{dataSource:h.value,columns:F,pagination:!1,size:"small",style:{width:"100%"}},{bodyCell:s(({column:c,record:t})=>[c.dataIndex==="proceso"?(n(),i(b,{key:0},[t.id_modalidad_proceso===3?(n(),N(C,{key:0,color:"pink"},{default:s(()=>[r(k(t.proceso),1)]),_:2},1024)):l("",!0),t.id_modalidad_proceso===2?(n(),N(C,{key:1,color:"orange"},{default:s(()=>[r(k(t.proceso),1)]),_:2},1024)):l("",!0),t.id_modalidad_proceso===1?(n(),N(C,{key:2,color:"blue"},{default:s(()=>[r(k(t.proceso),1)]),_:2},1024)):l("",!0)],64)):l("",!0)]),_:1},8,["dataSource"]),h.value?(n(),i("div",U,[p("div",null,k(),1)])):l("",!0),d(z,{visible:f.value,"onUpdate:visible":a[2]||(a[2]=c=>f.value=c),width:"900px"},{footer:s(()=>[p("div",null,[d(o,{style:{background:"#133466",color:"white",border:"none"},onClick:a[1]||(a[1]=c=>f.value=!1)},{default:s(()=>[r("Aceptar")]),_:1})])]),default:s(()=>[p("div",null,[d(I,{dataSource:B.value,columns:T,pagination:!1,size:"small",style:{width:"100%"}},{bodyCell:s(({column:c,record:t})=>[c.dataIndex==="opcion"?(n(),i(b,{key:0},[c.dataIndex==="opcion"?(n(),i(b,{key:0},[t.estado?(n(),i("div",q,[t.estado===0?(n(),i("div",H,[d(o,{onClick:m=>w(t),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>[r(" seleccionar ")]),_:2},1032,["onClick"])])):l("",!0),t.estado===1?(n(),i("div",J,[d(o,{onClick:m=>w(t),style:{background:"crimson","border-radius":"5px",border:"none",color:"white"}},{default:s(()=>[r(" seleccionado ")]),_:2},1032,["onClick"])])):l("",!0)])):(n(),i("div",K,[p("div",null,[d(o,{onClick:m=>w(t),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>[r(" seleccionar ")]),_:2},1032,["onClick"])])]))],64)):l("",!0)],64)):l("",!0)]),_:1},8,["dataSource"])]),p("div",Q,[d(I,{dataSource:A.value,columns:P,pagination:!1,size:"small",style:{width:"100%"}},{bodyCell:s(({column:c,record:t})=>[c.dataIndex==="paymentAmount"?(n(),i("div",W,[p("strong",null,"S/ "+k(t.paymentAmount),1)])):l("",!0),c.dataIndex==="opcion"?(n(),i(b,{key:1},[t.estado?(n(),i("div",X,[t.estado===0?(n(),i("div",Y,[d(o,{onClick:m=>x(t),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>[r(" seleccionar ")]),_:2},1032,["onClick"])])):l("",!0),t.estado===1?(n(),i("div",Z,[d(o,{onClick:m=>x(t),style:{background:"crimson","border-radius":"5px",border:"none",color:"white"}},{default:s(()=>[r(" seleccionado ")]),_:2},1032,["onClick"])])):l("",!0)])):(n(),i("div",ee,[p("div",null,[d(o,{onClick:m=>x(t),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>[r(" seleccionar ")]),_:2},1032,["onClick"])])]))],64)):l("",!0)]),_:1},8,["dataSource"])])]),_:1},8,["visible"])]),_:1})])}}},ne=R(te,[["__scopeId","data-v-7f34c869"]]);export{ne as default};
