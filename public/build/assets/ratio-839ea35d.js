import{r as g,e as S,D as j,o as t,c as e,a as s,u as B,w as n,F as u,y as I,Z as D,d as c,b as E,t as a,f as m,E as F,B as N,aa as V,ab as L,ac as U,h as z}from"./app-6dd2fb5e.js";import{_ as A}from"./AuthenticatedLayout-b9ac0019.js";import"./logotiny-c4b525af.js";import"./Header-ae457ec7.js";import"./AntdIcon-8fcb511c.js";import"./perfil-8483bf70.js";/* empty css                                                               */import"./_plugin-vue_export-helper-c27b6911.js";import"./UserOutlined-ab3658c5.js";import"./SafetyCertificateOutlined-69c10da4.js";import"./EditOutlined-9229ec09.js";import"./DownOutlined-0336cddf.js";/* empty css                                                            */const M={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg pt-4 pl-4 pb-0",style:{height:"calc(100vh - 103px)"}},O={class:"mr-3"},P={style:{}},H={key:0,style:{color:"#476175","font-weight":"bold"}},Y={key:1},Z={key:0,style:{color:"#476175","font-weight":"bold"}},q={key:1},G={key:0,style:{color:"#476175","font-weight":"bold"}},J={key:1},K={key:0,style:{color:"#476175","font-weight":"bold"}},Q={key:1},W={key:0,style:{color:"#476175","font-weight":"bold"}},X={key:1},tt={key:0,style:{color:"#476175","font-weight":"bold"}},et={key:1},ot={style:{"font-weight":"bold",color:"#476175"}},at={style:{"font-weight":"bold",color:"#476175"}},nt={style:{"font-weight":"bold",color:"#476175"}},ft={__name:"ratio",setup(st){const b=g(""),h=g(1),w=g([]),y=g([]),$=[{title:"Nro",dataIndex:"codigo",width:"50px",align:"center"},{title:"Programa de estudios",dataIndex:"programa",align:"left"},{title:"Postulantes",dataIndex:"cantidad",align:"center",width:"120px"},{title:"Vacantes",dataIndex:"vacantes",align:"center",width:"120px"},{title:"Ratio",dataIndex:"porcentaje_ocupado",align:"center",width:"120px"},{title:"2da etapa",dataIndex:"veinte_por_ciento",align:"center",width:"120px"}],v=async()=>{try{let r=await I.post("get-ratio",{buscar:b.value,pagina:h.value});w.value=r.data.datos,y.value=r.data.totales}catch{}};S(h,()=>{v()});let k;S(b,()=>{clearTimeout(k),k=setTimeout(()=>{h.value=1,v()},500)});const C=async()=>{try{const r=await I.post("get-ratio",{descargar:1},{responseType:"blob"});if(r.status!==200)throw new Error("Error al obtener el archivo");const o=new Date,f=`${`${o.getDate().toString().padStart(2,"0")}-${(o.getMonth()+1).toString().padStart(2,"0")}-${o.getFullYear()}_${o.getHours().toString().padStart(2,"0")}-${o.getMinutes().toString().padStart(2,"0")}-${o.getSeconds().toString().padStart(2,"0")}`}_resumen_inscripciones.pdf`,i=window.URL.createObjectURL(new Blob([r.data])),_=document.createElement("a");_.href=i,_.setAttribute("download",f),document.body.appendChild(_),_.click(),document.body.removeChild(_),window.URL.revokeObjectURL(i)}catch(r){console.error("Error al descargar el archivo:",r)}};return v(),(r,o)=>{const x=N,f=j("row"),i=V,_=L,R=U,T=z;return t(),e(u,null,[s(B(D),{title:"Resumen inscripciones"}),s(A,null,{default:n(()=>[c("div",M,[s(f,{class:"flex justify-end mb-3"},{default:n(()=>[c("div",O,[s(x,{type:"primary",style:{"border-radius":"5px",background:"#476175",border:"none"},onClick:o[0]||(o[0]=p=>C())},{default:n(()=>o[1]||(o[1]=[E("Descargar")])),_:1})])]),_:1}),c("div",P,[s(T,{columns:$,"data-source":w.value,pagination:!1,size:"small",scroll:{x:200,y:"calc(100vh - 240px)"}},{bodyCell:n(({column:p,index:d,record:l})=>[p.dataIndex==="codigo"?(t(),e(u,{key:0},[d<8?(t(),e("div",H,a(d+1),1)):(t(),e("div",Y,a(d+1),1))],64)):m("",!0),p.dataIndex==="programa"?(t(),e(u,{key:1},[d<8?(t(),e("div",Z,a(l.programa),1)):(t(),e("div",q,a(l.programa),1))],64)):m("",!0),p.dataIndex==="cantidad"?(t(),e(u,{key:2},[d<8?(t(),e("div",G,a(l.cantidad),1)):(t(),e("div",J,a(l.cantidad),1))],64)):m("",!0),p.dataIndex==="vacantes"?(t(),e(u,{key:3},[d<8?(t(),e("div",K,a(l.vacantes),1)):(t(),e("div",Q,a(l.vacantes),1))],64)):m("",!0),p.dataIndex==="porcentaje_ocupado"?(t(),e(u,{key:4},[d<8?(t(),e("div",W,a(l.porcentaje_ocupado),1)):(t(),e("div",X,a(l.porcentaje_ocupado),1))],64)):m("",!0),p.dataIndex==="veinte_por_ciento"?(t(),e(u,{key:5},[d<8?(t(),e("div",tt,a(l.veinte_por_ciento),1)):(t(),e("div",et))],64)):m("",!0)]),summary:n(()=>[s(R,{fixed:"bottom"},{default:n(()=>[y.value.cantidad>0?(t(),F(_,{key:0},{default:n(()=>[s(i,{"col-span":2,style:{"text-align":"left"}},{default:n(()=>o[2]||(o[2]=[c("span",{style:{"font-weight":"bold","font-size":"1rem",color:"#476175"}}," Totales ",-1)])),_:1}),s(i,{style:{"text-align":"center"}},{default:n(()=>[c("span",ot,a(y.value.cantidad),1)]),_:1}),s(i,{style:{"text-align":"center"}},{default:n(()=>[c("span",at,a(y.value.vacantes),1)]),_:1}),s(i,{style:{"text-align":"center"}},{default:n(()=>o[3]||(o[3]=[c("span",{style:{"font-weight":"bold",color:"#476175"}},null,-1)])),_:1}),s(i,{style:{"text-align":"center"}},{default:n(()=>[c("span",nt,a(y.value.suma_veinte_por_ciento_top_8),1)]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1},8,["data-source"])])])]),_:1})],64)}}};export{ft as default};
