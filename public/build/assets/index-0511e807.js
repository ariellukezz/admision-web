import{r as i,q as E,f as l,o as b,c as w,a as e,u,w as a,d as C,F as x,l as p,Z as O,b as d,D as P,g as T}from"./app-1e64e39f.js";import{A as U}from"./AuthenticatedLayout-1ccd8fce.js";import{F as $}from"./FormOutlined-331231e3.js";import"./DropdownLink-8c18e3d1.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logotiny-c4b525af.js";import"./TeamOutlined-8409008a.js";const q={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-5"},X={__name:"index",setup(G){const c=i(""),m=i([]),_=i([]),n=i(!1),R=()=>{k(),n.value=!0},k=async()=>{let t=await p.get("get-permission");_.value=t.data.permisos},v=async()=>{let t=await p.get("get-roles");m.value=t.data.datos.data},h=t=>{n.value=!0,c.value=t.name},z=()=>{let t={name:c.value,permisos:g.value.selectedRowKeys};p.post("save-rol",t).then(o=>{console.log(o),v(),n.value=!1})},I=[{title:"Rol",dataIndex:"name",sorter:!0},{title:"Tipo permisos",dataIndex:"guard_name"},{title:"Acciones",dataIndex:"acciones"}],N=[{title:"Nombre",dataIndex:"name",sorter:!0},{title:"Permisos",dataIndex:"guard_name"}],f=i([]),F=t=>{console.log("selectedRowKeys changed: ",t),f.value=t},g=E(()=>({selectedRowKeys:u(f),onChange:F,hideDefaultSelections:!0}));return v(),(t,o)=>{const r=l("a-button"),S=l("a-divider"),y=l("a-table"),V=l("a-label"),A=l("a-input"),B=l("a-form-item"),D=l("a-modal");return b(),w(x,null,[e(u(O),{title:"Roles"}),e(U,null,{default:a(()=>[C("div",q,[e(r,{class:"mb-3",type:"primary",onClick:R},{default:a(()=>[d("Nuevo")]),_:1}),e(y,{columns:I,"data-source":m.value,pagination:{pageSize:5},size:"small"},{bodyCell:a(({column:s,index:K})=>[s.dataIndex==="acciones"?(b(),w(x,{key:0},[e(r,{type:"primary",onClick:L=>h(m.value[K]),size:"small"},{icon:a(()=>[e(u($))]),_:2},1032,["onClick"]),e(S,{type:"vertical"}),e(r,{type:"danger",shape:"",size:"small"},{icon:a(()=>[e(u(P))]),_:1})],64)):T("",!0)]),_:1},8,["data-source"])])]),_:1}),C("div",null,[e(D,{visible:n.value,"onUpdate:visible":o[2]||(o[2]=s=>n.value=s),title:"Crear Roles"},{footer:a(()=>[e(r,{style:{"margin-left":"10px"},onClick:t.resetForm},{default:a(()=>[d("Cancelar")]),_:1},8,["onClick"]),e(r,{type:"primary",onClick:o[1]||(o[1]=s=>z())},{default:a(()=>[d("Guardar")]),_:1})]),default:a(()=>[e(B,{name:"email"},{default:a(()=>[e(V,null,{default:a(()=>[d("Rol")]),_:1}),e(A,{value:c.value,"onUpdate:value":o[0]||(o[0]=s=>c.value=s),type:"text",autocomplete:"off"},null,8,["value"])]),_:1}),e(y,{"row-selection":g.value,columns:N,"data-source":_.value,pagination:{pageSize:10},size:"small"},null,8,["row-selection","data-source"])]),_:1},8,["visible"])])],64)}}};export{X as default};
