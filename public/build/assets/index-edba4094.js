import{C as b,e as S,f as j,g as q,h as K}from"./chart-3443aee3.js";import{Q as O,V as w,W as D,X as U,r as $,C as A,Y as Q,e as T,_ as C,$ as L}from"./app-9738b48d.js";const R={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},V={type:{type:String,required:!0},...R},W=U[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function i(t){return L(t)?C(t):t}function X(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return L(e)?new Proxy(t,{}):t}function Y(t,e){const a=t.options;a&&e&&Object.assign(a,e)}function B(t,e){t.labels=e}function I(t,e,a){const r=[];t.datasets=e.map(s=>{const n=t.datasets.find(c=>c[a]===s[a]);return!n||!s.data||r.includes(n)?{...s}:(r.push(n),Object.assign(n,s),n)})}function _(t,e){const a={labels:[],datasets:[]};return B(a,t.labels),I(a,t.datasets,e),a}const k=O({props:V,setup(t,e){let{expose:a}=e;const r=$(null),s=w(null);a({chart:s});const n=()=>{if(!r.value)return;const{type:o,data:f,options:y,plugins:p,datasetIdKey:x}=t,g=_(f,x),l=X(g,f);s.value=new b(r.value,{type:o,data:l,options:{...y},plugins:p})},c=()=>{const o=C(s.value);o&&(o.destroy(),s.value=null)},d=o=>{o.update(t.updateMode)};return A(n),Q(c),T([()=>t.options,()=>t.data],(o,f)=>{let[y,p]=o,[x,g]=f;const l=C(s.value);if(!l)return;let v=!1;if(y){const u=i(y),P=i(x);u&&u!==P&&(Y(l,u),v=!0)}if(p){const u=i(p.labels),P=i(g.labels),m=i(p.datasets),M=i(g.datasets);u!==P&&(B(l.config.data,u),v=!0),m&&m!==M&&(I(l.config.data,m,t.datasetIdKey),v=!0)}v&&d(l)},{deep:!0}),()=>D("canvas",{ref:r})}});function h(t,e){return b.register(e),O({props:R,setup(a,r){let{expose:s}=r;const n=w(null),c=d=>{n.value=d==null?void 0:d.chart};return s({chart:n}),()=>D(k,W({ref:c},{type:t,...a}))}})}const F=h("bar",S),G=h("line",j),H=h("pie",q),J=h("radar",K);export{F as B,G as L,H as P,J as R};
