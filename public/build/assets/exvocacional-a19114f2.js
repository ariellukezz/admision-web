import{L as I}from"./LayoutExVocacional-677c8874.js";import{o,E as g,w as n,c as p,d as s,a0 as w,t as i,f as U,F as c,s as h,a as l,b as v,R as A,T as E,B as O,I as R,k as V,O as j,M as z}from"./app-0333044c.js";import"./logotiny-c4b525af.js";import"./logoDAD-c76d0a0b.js";import"./_plugin-vue_export-helper-c27b6911.js";const x={key:0,class:"p-5",style:{padding:"30px 60px"}},B={class:"counter",style:{position:"fixed",top:"5px",right:"20px",background:"#00000052",height:"75px",padding:"0px 10px"}},P={class:"flex",style:{"font-weight":"bold","font-size":"2.6rem","margin-top":"-15px"}},S={key:0,class:""},L={key:1},D={style:{margin:"auto","min-height":"calc(100vh - 160px)",display:"flex","justify-content":"center","align-items":"center"}},M={style:{display:"flex","justify-content":"center","margin-top":"20px"}},T={class:"flex justify-center mt-4 mb-3"},F={props:["id_postulante","actualiza","dni"],data(){return{visible:!1,preguntas:null,preguntasperfiles:null,respuestas:[],datos:[],ex:0,dni:"",codigo:"",tiempoRestante:20*60,minutos:null,segundos:"00",contadorIniciado:!1}},mounted(){setInterval(()=>{this.contadorIniciado===!0&&this.tiempoRestante>=0&&(this.minutos=Math.floor(this.tiempoRestante/60),this.segundos=this.tiempoRestante%60,this.tiempoRestante--)},1e3)},methods:{async getPreguntas(){const r=await axios.post("get-preguntas",{id_postulante:this.datos[0].id,id_programa:this.datos[0].id_vocacional});this.preguntas=r.data.datos},async getPreguntasPerfiles(){const r=await axios.post("get-preguntas-perfiles",{id_postulante:this.datos[0].id});this.preguntasperfiles=r.data.datos,this.contadorIniciado=!0},async getDatos(){const r=await axios.post("get-datos-examen2",{dni:this.dni,codigo:this.codigo});this.datos=r.data.datos,this.getPreguntas(),this.getPreguntasPerfiles(),this.ex=1},async saveVocacional(){let r=110;try{const e=await axios.post("save-vocacional",{id_postulante:this.datos[0].id,id_examen:this.datos[0].id_vocacional,respuestas:this.respuestas,actualizar:this.actualiza,proceso:4,name:"Examen vocacional completado",nro:7,dni:this.datos[0].nro_doc,avance:r});return this.respuestas=[],this.ex=0,this.visible=!0,this.dni="",this.codigo="",this.actualiza==="si"?1:0}catch{}},formatNumber(r){return r!=null?r.toString().padStart(2,"0"):""}}},H=Object.assign(F,{__name:"exvocacional",setup(r){return(e,t)=>{const f=A,y=E,_=O,b=R,k=V,N=j,C=z;return o(),g(I,null,{default:n(()=>[e.ex==1?(o(),p("div",x,[s("div",B,[t[6]||(t[6]=s("div",{style:{"font-weight":"bold","font-size":"1.3rem","margin-bottom":"-10px",color:"white","margin-top":"0px"}},"Tiempo restante",-1)),s("div",P,[s("h1",{style:{color:"white"},class:w({"contador-minutos":e.minutos>0})},"00:"+i(e.minutos.toString().padStart(2,"0"))+":",3),s("h1",{style:{color:"white"},class:w({"contador-segundos":e.segundos>0})},i(e.segundos.toString().padStart(2,"0")),3)])]),e.datos.length>0?(o(),p("div",S,[s("h1",null,"DNI: "+i(e.datos[0].nro_doc),1),s("h1",null,"Nombre: "+i(e.datos[0].nombres)+" "+i(e.datos[0].primer_apellido)+" "+i(e.datos[0].segundo_apellido),1),s("h1",null,"Programa: "+i(e.datos[0].nombre),1)])):U("",!0),(o(!0),p(c,null,h(e.preguntas,(a,d)=>(o(),p("div",{class:"mb-3",key:a.id},[s("h3",null,i(d+1)+". "+i(a.pregunta),1),(o(!0),p(c,null,h(a.respuestas,u=>(o(),p("div",{key:u.ide},[e.tiempoRestante>0?(o(),g(y,{key:0,value:e.respuestas[d],"onUpdate:value":m=>e.respuestas[d]=m},{default:n(()=>[l(f,{value:u},{default:n(()=>[v(i(u.respuesta),1)]),_:2},1032,["value"])]),_:2},1032,["value","onUpdate:value"])):(o(),g(y,{key:1,value:e.respuestas[d],"onUpdate:value":m=>e.respuestas[d]=m,disabled:""},{default:n(()=>[l(f,{value:u},{default:n(()=>[v(i(u.respuesta),1)]),_:2},1032,["value"])]),_:2},1032,["value","onUpdate:value"]))]))),128))]))),128)),(o(!0),p(c,null,h(e.preguntasperfiles,(a,d)=>(o(),p("div",{class:"mb-3",key:a.id},[s("h3",null,i(d+11)+". "+i(a.pregunta),1),(o(!0),p(c,null,h(a.respuestas,u=>(o(),p("div",{key:u.ide},[e.tiempoRestante>0?(o(),g(y,{key:0,value:e.respuestas[d+10],"onUpdate:value":m=>e.respuestas[d+10]=m},{default:n(()=>[l(f,{value:u},{default:n(()=>[v(i(u.respuesta),1)]),_:2},1032,["value"])]),_:2},1032,["value","onUpdate:value"])):(o(),g(y,{key:1,value:e.respuestas[d+10],"onUpdate:value":m=>e.respuestas[d+10]=m,disabled:""},{default:n(()=>[l(f,{value:u},{default:n(()=>[v(i(u.respuesta),1)]),_:2},1032,["value"])]),_:2},1032,["value","onUpdate:value"]))]))),128))]))),128)),s("div",null,[l(_,{type:"primary",onClick:t[0]||(t[0]=a=>e.saveVocacional())},{default:n(()=>t[7]||(t[7]=[v(" FINALIZAR EXAMEN VOCACIONAL ")])),_:1})])])):(o(),p("div",L,[s("div",D,[l(N,{style:{"min-width":"320px"}},{default:n(()=>[t[9]||(t[9]=s("div",{style:{"margin-bottom":"7px"}},[s("label",null,"N° Documento")],-1)),l(k,null,{default:n(()=>[l(b,{value:e.dni,"onUpdate:value":t[1]||(t[1]=a=>e.dni=a),maxlength:12,placeholder:"N° Documento"},null,8,["value"])]),_:1}),t[10]||(t[10]=s("div",{style:{"margin-bottom":"7px"}},[s("label",null,"Codigo")],-1)),l(k,null,{default:n(()=>[l(b,{value:e.codigo,"onUpdate:value":t[2]||(t[2]=a=>e.codigo=a),maxlength:12,placeholder:"codigo"},null,8,["value"])]),_:1}),s("div",M,[l(_,{type:"primary",onClick:t[3]||(t[3]=a=>e.getDatos())},{default:n(()=>t[8]||(t[8]=[v("Iniciar Examen")])),_:1})])]),_:1})])])),l(C,{visible:e.visible,"onUpdate:visible":t[5]||(t[5]=a=>e.visible=a),onOk:e.handleOk,style:{width:"330px"},footer:!1},{default:n(()=>[t[12]||(t[12]=s("div",{class:"flex justify-center mt-4 mb-3"},[s("span",{style:{color:"#3caaf3",opacity:"1"}},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"72",height:"72",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-check-circle"},[s("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),s("polyline",{points:"22 4 12 14.01 9 11.01"})])])],-1)),t[13]||(t[13]=s("div",{class:"flex justify-center mt-1 mb-1"},[s("span",{style:{"font-size":"2.3rem"}},"Buen Trabajo")],-1)),t[14]||(t[14]=s("div",{class:"flex justify-center",style:{"text-align":"center"}},[s("span",{style:{"font-size":"1.1rem"}},"FINALIZÓ CON EXITO SU EXAMEN VOCACIONAL")],-1)),s("div",T,[l(_,{type:"primary",onClick:t[4]||(t[4]=a=>e.visible=!1)},{default:n(()=>t[11]||(t[11]=[v("ACEPTAR")])),_:1})])]),_:1},8,["visible","onOk"])]),_:1})}}});export{H as default};
