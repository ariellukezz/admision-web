import{r as d,x as fe,e as m,f as r,o as f,c as h,a as e,u as g,w as a,F as q,j as b,Z as ge,d as s,S as be,k,b as i,t as V,g as D,E as xe,D as ye,s as Ae,n as Ie}from"./app-0e54e4c1.js";import{L as Ee}from"./LayoutSimulacro-97e72ce2.js";import{F as we}from"./FormOutlined-687d82c9.js";import"./DropdownLink-7ed616fb.js";import"./logotiny-c4b525af.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./TopMenu-9299faa3.js";const he={class:"mb-4",style:{width:"100%"}},De={style:{background:"white","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},Ce={class:"flex justify-end mt-5 mb-4 mr-4"},Re={class:"flex justify-between",style:{position:"relative"}},Ne={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Se={key:1},Ve=s("span",null,"SEC TERMINADA",-1),Te=s("span",null,"5TO AÑO",-1),Ue=s("span",null,"4TO AÑO",-1),ke=s("span",null,"3ER AÑO",-1),Be=s("span",{style:{color:"blue"}},"M",-1),Le=s("span",{style:{color:"red"}},"F",-1),Oe={class:"flex justify-between mb-6 mt-2 pr-4"},Pe={clas:"",style:{scale:"0.9"}},je={style:{display:"flex"}},ze={key:0,style:{"font-weight":"bold","font-size":"1.1rem"}},Fe={key:1,style:{"font-weight":"bold","font-size":"1.1rem"}},qe={class:"flex justify-center"},Ge=s("label",null,"Cod. Modular",-1),$e=s("label",null,[i("Nombre del colegio"),s("span",{style:{color:"red"}},"*")],-1),Ke=s("label",null,[i("Cod de local"),s("span",{style:{color:"red"}},"*")],-1),Me=s("label",null,[i("Nivel"),s("span",{style:{color:"red"}},"*")],-1),Ze=s("label",null,[i("Gestión"),s("span",{style:{color:"red"}},"*")],-1),Je=s("label",null,[i("Ubicación: Dep/Prov/Dist "),s("span",{style:{color:"red"}},"*")],-1),Xe=s("label",null,"Dirección",-1),He=s("label",null,"Observación",-1),Qe={class:"flex justify-end"},da={__name:"index",setup(We){d([]);const C=d(""),R=d(1),B=d(0),x=d(10),y=d(!1),T=d(null),N=d(null),U=d([]),G=d(null),A=d(!1),$=d(),L=d(),O=d(),K=d(),M=d(),Z=d(),J=d(),X=d();d();const H=t=>{n.cod_modular=t.target.value.replace(/\D/g,"")},n=fe({cod_modular:"",nombre:"",cod_local:"",nivel:"",gestion:null,ubigeo:"",direccion:"",observacion:""}),P=d(null),Q=async()=>{A.value=!0,setTimeout(()=>{console.log("Este código se ejecutará después de 2 segundos")},1500);try{const t=await P.value.validateFields(),o=await b.post("save",n);o.status===202?(console.log(o.data.errors),A.value=!1):(te(),y.value=!1,oe("success",o.data.titulo,o.data.mensaje),A.value=!1)}catch(t){console.error(t),A.value=!1}},j=async()=>{b.post("/get-ubigeo",{term:N.value}).then(t=>{U.value=t.data.datos.data,console.log("Datos recibidos:",U)}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})},z=d([]),S=async()=>{let t=await b.post("get-participantes-simulacro?page="+R.value,{term:C.value,paginashoja:x.value});B.value=t.data.datos.total,z.value=t.data.datos.data};S();const F=async()=>{let t=await b.post("/get-departamentos-codigo",{term:L.value});$.value=t.data.datos.data},W=async()=>{let t=await b.post("/get-provincias-codigo?page=",{departamento:O.value});K.value=t.data.datos},Y=async t=>{let o=await b.post("/get-distritos-codigo?page=",{departamento:O.value,provincia:Z.value});J.value=o.data.datos};m(R,(t,o)=>{S()}),m(x,(t,o)=>{S()}),m(C,(t,o)=>{S()}),m(N,(t,o)=>{t.length>=3&&j()}),m(L,(t,o)=>{t.length>=3&&F()}),m(M,(t,o)=>{t.length>=3&&W()}),m(X,(t,o)=>{t.length>=3&&Y()}),m(G,(t,o)=>{t.length>=3&&getColegios()});const ee=(t,o)=>{n.ubigeo=o.key};F(),j();const ae=t=>{y.value=!0,n.id=t.id,n.cod_modular=t.cod_modular,n.nombre=t.nombre,n.cod_local=t.cod_local,n.gestion=t.gestion,n.nivel=t.nivel,n.ubigeo=t.ubigeo,T.value=t.lugar,n.direccion=t.direccion,n.observacion=t.observacion},te=()=>{for(const t in n)n[t]=null},oe=(t,o,v)=>{Ie[t]({message:o,description:v})},le=d([{title:"Nro_Doc",dataIndex:"nro_doc"},{title:"Nombres",dataIndex:"nombres",responsive:["xs","sm","md","lg"]},{title:"Sexo",dataIndex:"sexo",responsive:["md"]},{title:"F. Nac",dataIndex:"fec_nacimiento",responsive:["lg"]},{title:"Instruccion",dataIndex:"instruccion",width:"120px",align:"center"},{title:"Lugar",dataIndex:"lugar",responsive:["lg"]},{title:"Acciones",dataIndex:"acciones",width:"120px",align:"center"}]);return(t,o)=>{const v=r("a-input"),se=r("a-tag"),u=r("a-select-option"),I=r("a-select"),E=r("a-button"),ne=r("a-popconfirm"),de=r("a-table"),ie=r("a-pagination"),_=r("a-form-item"),p=r("a-col"),ue=r("a-tooltip"),re=r("a-auto-complete"),ce=r("a-textarea"),pe=r("a-row"),ve=r("a-form"),_e=r("row"),me=r("a-modal");return f(),h(q,null,[e(g(ge),{title:"participantes"}),e(Ee,null,{default:a(()=>[s("div",he,[s("div",De,[s("div",Ce,[s("div",Re,[e(v,{type:"text",placeholder:"Buscar",value:C.value,"onUpdate:value":o[0]||(o[0]=l=>C.value=l),style:{"max-width":"340px","padding-left":"30px","border-radius":"6px"}},null,8,["value"]),s("div",Ne,[e(g(be))])])]),s("div",null,[e(de,{dataSource:z.value,columns:le.value,pagination:!1},{bodyCell:a(({column:l,index:Ye,record:c})=>[l.dataIndex==="nro_doc"?(f(),k(se,{key:0,color:"#4f4f4f",style:{width:"80px"}},{default:a(()=>[i(V(c.nro_doc),1)]),_:2},1024)):D("",!0),l.dataIndex==="nombres"?(f(),h("div",Se,[s("span",null,V(c.nombres)+" "+V(c.paterno)+" "+V(c.materno),1)])):D("",!0),l.dataIndex==="instruccion"?(f(),k(I,{key:2,ref:"select",value:c.instruccion,"onUpdate:value":w=>c.instruccion=w,placeholder:"Seleccionar",style:{width:"100px"}},{default:a(()=>[e(u,{value:1},{default:a(()=>[Ve]),_:1}),e(u,{value:2},{default:a(()=>[Te]),_:1}),e(u,{value:3},{default:a(()=>[Ue]),_:1}),e(u,{value:4},{default:a(()=>[ke]),_:1})]),_:2},1032,["value","onUpdate:value"])):D("",!0),l.dataIndex==="sexo"?(f(),k(I,{key:3,ref:"select",value:c.sexo,"onUpdate:value":w=>c.sexo=w,placeholder:"Seleccionar",style:{width:"60px"}},{default:a(()=>[e(u,{value:"1"},{default:a(()=>[Be]),_:1}),e(u,{value:"2"},{default:a(()=>[Le]),_:1})]),_:2},1032,["value","onUpdate:value"])):D("",!0),l.dataIndex==="acciones"?(f(),h(q,{key:4},[e(E,{type:"success",class:"mr-1",style:{color:"#476175"},size:"small",disabled:""},{icon:a(()=>[e(g(xe))]),_:1}),e(E,{class:"mr-1",onClick:w=>ae(c),style:{color:"blue"},size:"small",disabled:""},{icon:a(()=>[e(g(we))]),_:2},1032,["onClick"]),e(ne,{title:"¿Estas seguro de eliminar?",onConfirm:w=>t.eliminar(c),disabled:""},{default:a(()=>[e(E,{size:"small",style:{color:"crimson"},disabled:""},{icon:a(()=>[e(g(ye),{disabled:""})]),_:1})]),_:2},1032,["onConfirm"])],64)):D("",!0)]),_:1},8,["dataSource","columns"])]),s("div",Oe,[s("div",null,[e(ie,{current:R.value,"onUpdate:current":o[1]||(o[1]=l=>R.value=l),"page-size":x.value,simple:"",total:B.value,"show-less-items":""},null,8,["current","page-size","total"])]),s("div",Pe,[e(I,{value:x.value,"onUpdate:value":o[2]||(o[2]=l=>x.value=l),style:{width:"90px"}},{default:a(()=>[e(u,{value:3},{default:a(()=>[i("3 Reg.")]),_:1}),e(u,{value:10},{default:a(()=>[i("10 Reg.")]),_:1}),e(u,{value:20},{default:a(()=>[i("20 Reg.")]),_:1}),e(u,{value:50},{default:a(()=>[i("50 Reg.")]),_:1}),e(u,{value:100},{default:a(()=>[i("100 Reg.")]),_:1})]),_:1},8,["value"])])])])]),e(me,{visible:y.value,"onUpdate:visible":o[14]||(o[14]=l=>y.value=l),footer:!1,centered:"",style:{width:"100%","max-width":"900px"}},{default:a(()=>[s("div",je,[n.id===null?(f(),h("span",ze,"Nuevo Colegio")):(f(),h("span",Fe,"Editar Colegio"))]),s("div",qe,[e(_e,{style:{display:"flex","justify-content":"center"}},{default:a(()=>[e(p,{span:24},{default:a(()=>[e(ve,{ref_key:"formDatos",ref:P,name:"form",model:n,rules:t.formRules},{default:a(()=>[e(pe,{gutter:16,class:"mt-3"},{default:a(()=>[e(p,{xs:24,sm:12,md:8,lg:8},{default:a(()=>[Ge,e(_,{name:"cod_modular",rules:[{required:!0,message:"Ingrese el cod modular"},{min:7,message:"Debe tener 7 digitos",trigger:"blur"}]},{default:a(()=>[e(v,{value:n.cod_modular,"onUpdate:value":o[3]||(o[3]=l=>n.cod_modular=l),onInput:H,maxlength:7},null,8,["value"])]),_:1})]),_:1}),e(p,{xs:24,sm:12,md:8,lg:16},{default:a(()=>[$e,e(_,{name:"nombre",rules:[{required:!0,message:"Ingrese el nombre del colegio"}]},{default:a(()=>[e(v,{value:n.nombre,"onUpdate:value":o[4]||(o[4]=l=>n.nombre=l)},null,8,["value"])]),_:1})]),_:1}),e(p,{xs:24,sm:12,md:8,lg:8},{default:a(()=>[Ke,e(_,{name:"cod_local",rules:[{required:!0,message:"Ingrese el codigo del local"}]},{default:a(()=>[e(v,{value:n.cod_local,"onUpdate:value":o[5]||(o[5]=l=>n.cod_local=l)},null,8,["value"])]),_:1})]),_:1}),e(p,{xs:24,sm:12,md:8,lg:8},{default:a(()=>[Me,e(_,{name:"nivel",rules:[{required:!0,message:"Seleccione el nivel"}]},{default:a(()=>[e(I,{value:n.nivel,"onUpdate:value":o[6]||(o[6]=l=>n.nivel=l),style:{width:"100%"}},{default:a(()=>[e(u,{value:"SECUNDARIA"},{default:a(()=>[i("SECUNDARIA")]),_:1}),e(u,{value:"BASICA ALTERNATIVA"},{default:a(()=>[i("BASICA ALTERNATIVA")]),_:1}),e(u,{value:"BASICA ALTERNATIVA AVANZADO"},{default:a(()=>[i("BASICA ALTERNATIVA AVANZADO")]),_:1}),e(u,{value:"BÁSICA ALTERNATIVA SECUNDARIA"},{default:a(()=>[i("BÁSICA ALTERNATIVA SECUNDARIA")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(p,{xs:24,sm:12,md:8,lg:8},{default:a(()=>[Ze,e(_,{name:"gestion",rules:[{required:!0,message:"Selecciona la gestión"}]},{default:a(()=>[e(I,{value:n.gestion,"onUpdate:value":o[7]||(o[7]=l=>n.gestion=l),style:{width:"100%"}},{default:a(()=>[e(u,{value:"PÚBLICA DE GESTIÓN DIRECTA"},{default:a(()=>[i("PÚBLICA DE GESTIÓN DIRECTA")]),_:1}),e(u,{value:"PRIVADA"},{default:a(()=>[i("PRIVADA")]),_:1}),e(u,{value:"PÚBLICA DE GESTIÓN PRIVADA"},{default:a(()=>[i("PÚBLICA DE GESTIÓN PRIVADA")]),_:1}),e(u,{value:"EXTRANJERO"},{default:a(()=>[i("EXTRANJERA")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(p,{xs:24,sm:24,md:24,lg:12},{default:a(()=>[Je,e(_,{name:"ubigeo"},{default:a(()=>[e(re,{value:T.value,"onUpdate:value":o[9]||(o[9]=l=>T.value=l),options:U.value,onSelect:ee},{default:a(()=>[e(v,{placeholder:"Lugar",value:N.value,"onUpdate:value":o[8]||(o[8]=l=>N.value=l),onKeypress:t.handleKeyPress},{suffix:a(()=>[e(ue,{title:"Extra information"},{default:a(()=>[e(g(Ae))]),_:1})]),_:1},8,["value","onKeypress"])]),_:1},8,["value","options"])]),_:1})]),_:1}),e(p,{xs:24,sm:24,md:24,lg:12},{default:a(()=>[Xe,e(_,{name:"direccion"},{default:a(()=>[e(v,{value:n.direccion,"onUpdate:value":o[10]||(o[10]=l=>n.direccion=l)},null,8,["value"])]),_:1})]),_:1}),e(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[He,e(_,{name:"observacion"},{default:a(()=>[e(ce,{value:n.observacion,"onUpdate:value":o[11]||(o[11]=l=>n.observacion=l)},null,8,["value"])]),_:1})]),_:1})]),_:1}),s("div",Qe,[s("div",null,[e(E,{type:"primary",class:"mr-2",onClick:o[12]||(o[12]=l=>y.value=!1),style:{"border-radius":"6px",background:"none",color:"#476175",border:"1px solid #476175"}},{default:a(()=>[i("Cancelar")]),_:1}),e(E,{type:"primary",onClick:o[13]||(o[13]=l=>Q()),style:{"border-radius":"6px",background:"#476175",border:"none"},loading:A.value},{default:a(()=>[i("Guardar")]),_:1},8,["loading"])])])]),_:1},8,["model","rules"])]),_:1})]),_:1})])]),_:1},8,["visible"])]),_:1})],64)}}};export{da as default};
