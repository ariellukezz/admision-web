import{r as l,C as h,e as g,D as I,o as w,c as x,a,u as L,w as o,F as S,y as k,Z as N,d as s,b as C,t as R,f as V,a6 as j,B as M,a7 as O,a8 as z,a9 as A,h as G}from"./app-4942be61.js";import{_ as H}from"./AuthenticatedLayout-9891cd53.js";import"./logotiny-c4b525af.js";import"./Header-cf7aa195.js";import"./AntdIcon-7f1e898e.js";import"./DownOutlined-8a0e9428.js";/* empty css                                                            */const P={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},Y={class:"checkbox-group-container"},Z={class:"mt-4 bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 230px)"}},q={class:"mr-3"},J={style:{}},K={style:{"font-weight":"bold",color:"#476175"}},ne={__name:"inscripciones",setup(Q){const v=l(""),m=l(1),T=l(0),p=l([]),r=l(["area"]),$=h(()=>p.value.reduce((t,e)=>t+e.total,0)),b=[{label:"Área",value:"area"},{label:"Programa",value:"programa"},{label:"Modalidad",value:"modalidad"},{label:"Sexo",value:"sexo"},{label:"Usuario",value:"usuario"}],y=h(()=>[...r.value.map(t=>{const e=b.find(i=>i.value===t);return{title:e?e.label:t,dataIndex:t,key:t,align:"left"}}),{title:"Total",dataIndex:"total",key:"total",align:"center",width:"90px"}]),c=async()=>{try{let t=await k.post("resumen-inscripciones?page="+m.value,{group_by:r.value,term:v.value});p.value=t.data.data,T.value=t.data.datos.total}catch{}};g(r,()=>{c()}),g(m,()=>{c()});let f;g(v,()=>{clearTimeout(f),f=setTimeout(()=>{m.value=1,c()},500)});const B=async()=>{try{const t=await k.post("resumen-inscripciones",{descargar:1,group_by:r.value},{responseType:"blob"});if(t.status!==200)throw new Error("Error al obtener el archivo");const e=new Date,_=`${`${e.getDate().toString().padStart(2,"0")}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getFullYear()}_${e.getHours().toString().padStart(2,"0")}-${e.getMinutes().toString().padStart(2,"0")}-${e.getSeconds().toString().padStart(2,"0")}`}_resumen_inscripciones.pdf`,u=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=u,n.setAttribute("download",_),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(u)}catch(t){console.error("Error al descargar el archivo:",t)}};return c(),(t,e)=>{const i=j,_=M,u=I("row"),n=O,D=z,U=A,E=G;return w(),x(S,null,[a(L(N),{title:"Resumen inscripciones"}),a(H,null,{default:o(()=>[s("div",P,[e[2]||(e[2]=s("div",{class:"mb-4"},[s("span",{style:{"font-size":"1.3rem"}},"Resumen inscripción")],-1)),s("div",Y,[a(i,{value:r.value,"onUpdate:value":e[0]||(e[0]=d=>r.value=d),options:b},null,8,["value"])])]),s("div",Z,[a(u,{class:"flex justify-end mb-4"},{default:o(()=>[s("div",q,[a(_,{type:"primary",style:{"border-radius":"5px",background:"#476175",border:"none"},onClick:e[1]||(e[1]=d=>B())},{default:o(()=>e[3]||(e[3]=[C("Descargar")])),_:1})])]),_:1}),s("div",J,[a(E,{columns:y.value,"data-source":p.value,pagination:!1,size:"small",scroll:{x:200,y:"calc(100vh - 400px)"}},{bodyCell:o(({column:d,record:F})=>[d.dataIndex==="total"?(w(),x(S,{key:0},[C(R(F.total),1)],64)):V("",!0)]),summary:o(()=>[a(U,{fixed:"bottom"},{default:o(()=>[a(D,null,{default:o(()=>[a(n,{"col-span":y.value.length-1,style:{"text-align":"right"}},{default:o(()=>e[4]||(e[4]=[s("span",{style:{"font-weight":"bold",color:"#476175"}}," Total Registros: ",-1)])),_:1},8,["col-span"]),a(n,{style:{"text-align":"center"}},{default:o(()=>[s("span",K,R($.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","data-source"])])])]),_:1})],64)}}};export{ne as default};
