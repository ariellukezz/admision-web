import{I as K,r as c,x as Q,f as d,o as r,c as u,d as e,a as s,w as t,F as P,i as W,l as D,b as _,g as f,t as Y,s as j,u as Z,a6 as C}from"./app-5bdd146e.js";import"./es-a6dea740.js";const ee={class:"mt-12"},oe={class:"flex justify-between border-b-2",style:{"border-bottom":"solid 2px #009DD1","padding-bottom":"8px"}},te=e("div",null,[e("span",{style:{"font-weight":"bold","font-size":"1rem",color:"#009DD1"}},"DOCUMENTO DE IDENTIDAD")],-1),se={style:{"margin-top":"-5px"}},le={class:"mt-3"},ae={class:"flex justify-between",style:{}},ie={class:""},ne={key:0},re=e("span",{class:"font-bold",style:{"font-size":"1rem"}}," DNI",-1),de=[re],ce={key:1},ue=e("span",{class:"font-bold",style:{"font-size":"1rem"}}," DOCUMENTO C4",-1),pe=[ue],_e={key:2},fe=e("span",{class:"font-bold",style:{"font-size":"1rem"}}," CARNÉ DE EXTRANJERÍA",-1),ve=[fe],me={class:"flex",style:{"margin-top":"0px"}},he=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1),ge=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#1a2843","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1),be=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),we={class:""},ye=e("label",null,[_("Tipo"),e("span",{style:{color:"red"}},"*")],-1),xe=e("label",null,[_("Observación"),e("span",{style:{color:"red"}})],-1),ke=e("label",null,[_("Archivo PDF (Max. 2mb)"),e("span",{style:{color:"red"}},"*")],-1),De={key:0,class:"mt-2"},Ce=["src"],Ee={key:0,class:"mt-2"},Ne=["src"],Fe={class:"flex justify-end"},Le={key:0,class:"mt-2"},Re=["src"],Ae={class:"flex justify-end"},Te={__name:"dni",props:["id_proceso","dni"],setup(B){const E=window.location.origin;K.locale("es");const g=B,z=()=>{v.value=!0},I=o=>{l.value={id:null,observacion:"",tipo:null,fileList:[]},l.id=o.id,l.observacion=o.observacion,p.value=E+"/"+o.url,l.tipo=o.id_tipo,v.value=!0},v=c(!1),N=c([]),V=c([{value:3,label:"DNI"},{value:5,label:"DOCUMENTO C4"},{value:6,label:"CARNÉ DE EXTRANJERÍA"}]),b=c(!1),y=c(null),$=o=>{y.value=o,b.value=!0},F=c(),l=Q({id:null,observacion:"",tipo:null,fileList:[]}),S=o=>{console.log(`selected ${o}`)},q=async o=>{(await D.get("/eliminar-dni/"+o)).data.estado==!0?x():console.log("Ocurrió un error")},m=c(!1),p=c(null),L=c(0),R=o=>{if(o.type==="application/pdf"){const a=new FileReader;a.onload=n=>{p.value=n.target.result},a.readAsDataURL(o),l.fileList=[o]}else C.error("¡Solo puedes cargar archivos PDF!");return!1},x=async()=>{const o=await D.post("/get-dnis-postulante",{dni:g.dni,id_proceso:g.id_proceso});o.data.estado==!0?N.value=o.data.datos:console.log("No se encontraron datos")},A=()=>{p.value=null,l.fileList=[]},J=async()=>{await F.value.validateFields();const o=new FormData;l.fileList[0]&&o.append("file",l.fileList[0]),l.id!=null&&o.append("id",l.id),o.append("id_proceso",g.id_proceso),o.append("dni",g.dni),o.append("observacion",l.observacion),o.append("tipo",l.tipo);try{m.value=!0,L.value=0;const a=await D.post("/save-dni",o,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer your-auth-token"},onUploadProgress:n=>{L.value=Math.round(n.loaded*100/n.total)}});v.value=!1,m.value=!1,C.success("¡Archivo PDF cargado exitosamente!"),await x()}catch(a){m.value=!1,C.error("Error al cargar el archivo."),console.error("File upload failed:",a)}};return x(),(o,a)=>{const n=d("a-button"),h=d("a-col"),k=d("a-row"),X=d("a-select"),w=d("a-form-item"),G=d("a-input"),U=d("upload-outlined"),O=d("a-upload"),H=d("a-form"),T=d("a-modal");return r(),u(P,null,[e("div",ee,[e("div",null,[e("div",oe,[te,e("div",se,[s(n,{onClick:a[0]||(a[0]=i=>z())},{default:t(()=>[_("Agregar")]),_:1})])]),e("div",le,[(r(!0),u(P,null,W(N.value,i=>(r(),u("div",{class:"mb-2",key:i},[s(k,{gutter:16},{default:t(()=>[s(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[e("div",ae,[e("div",ie,[i.id_tipo==3?(r(),u("div",ne,de)):f("",!0),i.id_tipo==5?(r(),u("div",ce,pe)):f("",!0),i.id_tipo==6?(r(),u("div",_e,ve)):f("",!0)]),e("div",me,[s(n,{onClick:M=>$(i.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[he]),_:2},1032,["onClick"]),s(n,{onClick:M=>I(i),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[ge]),_:2},1032,["onClick"]),s(n,{danger:"",onClick:M=>q(i.id),style:{width:"20px",height:"20px","padding-left":"3px"}},{default:t(()=>[be]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024)]))),128))])])]),e("div",we,[s(T,{visible:v.value,"onUpdate:visible":a[3]||(a[3]=i=>v.value=i),width:"800px",class:"w-full md:w-3/4",title:"Registro de dni",onOk:o.handleOk},{footer:t(()=>[e("div",Fe,[s(n,{type:"primary",disabled:!p.value,loading:m.value,style:{"margin-top":"16px"},onClick:J},{default:t(()=>[_(Y(m.value?"Subiendo...":"Guardar datos"),1)]),_:1},8,["disabled","loading"])])]),default:t(()=>[s(H,{ref_key:"formDatos",ref:F,name:"form",model:l,rules:o.formRules},{default:t(()=>[s(k,{gutter:16},{default:t(()=>[s(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[ye,s(w,{name:"tipo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[s(X,{ref:"select",value:l.tipo,"onUpdate:value":a[1]||(a[1]=i=>l.tipo=i),style:{width:"100%"},options:V.value,onFocus:o.focus,onChange:S},null,8,["value","options","onFocus"])]),_:1})]),_:1}),s(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[xe,s(w,{name:"observacion"},{default:t(()=>[s(G,{value:l.observacion,"onUpdate:value":a[2]||(a[2]=i=>l.observacion=i),style:{height:"32px"}},{suffix:t(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),s(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[ke,l.id==null?(r(),j(w,{key:0,name:"fileList",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[s(O,{"file-list":l.fileList,"before-upload":R,onRemove:A},{default:t(()=>[s(n,null,{default:t(()=>[s(U),_(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),p.value?(r(),u("div",De,[e("iframe",{src:p.value,width:"100%",height:"300px"},null,8,Ce)])):f("",!0)]),_:1})):(r(),j(w,{key:1,name:"fileList"},{default:t(()=>[s(O,{"file-list":l.fileList,"before-upload":R,onRemove:A},{default:t(()=>[s(n,null,{default:t(()=>[s(U),_(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),p.value?(r(),u("div",Ee,[e("iframe",{src:p.value,width:"100%",height:"300px"},null,8,Ne)])):f("",!0)]),_:1}))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","onOk"]),s(T,{visible:b.value,"onUpdate:visible":a[5]||(a[5]=i=>b.value=i),title:"Registro de título",style:{"min-width":"1000px"}},{footer:t(()=>[e("div",Ae,[s(n,{onClick:a[4]||(a[4]=i=>b.value==!1)},{default:t(()=>[_(" Aceptar ")]),_:1})])]),default:t(()=>[s(k,{gutter:16},{default:t(()=>[s(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[y.value?(r(),u("div",Le,[e("iframe",{src:Z(E)+"/"+y.value,width:"100%",height:"500px"},null,8,Re)])):f("",!0)]),_:1})]),_:1})]),_:1},8,["visible"])])],64)}}};export{Te as default};
