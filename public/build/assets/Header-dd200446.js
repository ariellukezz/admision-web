import{A as g}from"./AntdIcon-99e056ff.js";import{a as r,r as v,J as k,D as H,o as N,c as V,w as s,d,v as E,b as B,t as L,u as U,y as O,n as q,A as I,aj as R,z as T,Q as G,I as J,k as Q,q as Z,M as W}from"./app-118d4e8c.js";import{D as X}from"./DownOutlined-44475326.js";var Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zM464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z"}}]},name:"appstore",theme:"filled"};const K=Y;var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"};const te=ee;var ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1a110.96 110.96 0 00-79.1-32.8zm412.3 235.5l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9a32.03 32.03 0 009.3-35.2l-.9-2.6a442.5 442.5 0 00-79.6-137.7l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52-9.4-106.8-9.4-158.8 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.3a353.44 353.44 0 00-98.9 57.3l-81.8-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a445.93 445.93 0 00-79.6 137.7l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3a32.05 32.05 0 0025.8 25.7l2.7.5a448.27 448.27 0 00158.8 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l.9-2.6c4.3-12.4.6-26.3-9.5-35zm-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"}}]},name:"setting",theme:"filled"};const ne=ae,ue="/build/assets/usuario-8193463b.png";function y(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),o.forEach(function(n){re(a,n,t[n])})}return a}function re(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var _=function(e,t){var o=y({},e,t.attrs);return r(g,y({},o,{icon:K}),null)};_.displayName="AppstoreFilled";_.inheritAttrs=!1;const de=_;function h(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),o.forEach(function(n){oe(a,n,t[n])})}return a}function oe(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var w=function(e,t){var o=h({},e,t.attrs);return r(g,h({},o,{icon:te}),null)};w.displayName="MenuFoldOutlined";w.inheritAttrs=!1;const fe=w;function S(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),o.forEach(function(n){le(a,n,t[n])})}return a}function le(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var b=function(e,t){var o=S({},e,t.attrs);return r(g,S({},o,{icon:ne}),null)};b.displayName="SettingFilled";b.inheritAttrs=!1;const pe=b,me={__name:"Header",setup(a){const e=v(!1),t=v(!1),o=v(null),n=k({oldPassword:"",newPassword:"",confirmPassword:""}),A={oldPassword:[{required:!0,message:"Por favor, ingresa tu contraseña antigua."}],newPassword:[{required:!0,message:"Por favor, ingresa una nueva contraseña."},{min:6,message:"La nueva contraseña debe tener al menos 6 caracteres."}],confirmPassword:[{required:!0,message:"Por favor, confirma tu nueva contraseña."},{validator:(c,l)=>l!==n.newPassword?Promise.reject("Las contraseñas no coinciden."):Promise.resolve()}]},F=()=>{o.value.validate().then(()=>{t.value=!0,O.post("cambiar-contra",n).then(c=>{P("info","CONTRASEÑA ACTUALIZADA",""),e.value=!1}).catch(c=>{P("error","",c.response.data.mensaje),console.error("Error en la solicitud:",c.response.data.mensaje)}).finally(()=>{t.value=!1})}).catch(c=>{console.log("Error de validación:",c)})},C=()=>{e.value=!1},M=async()=>{try{await O.post("/logout"),location.href="/login"}catch{}},P=(c,l,u)=>{q[c]({message:l,description:u})};return(c,l)=>{const u=I,j=R,z=T,$=G,f=H("user-outlined"),p=J,m=Q,x=Z,D=W;return N(),V("div",null,[r($,{trigger:["click"]},{overlay:s(()=>[r(z,null,{default:s(()=>[r(u,{key:"0"},{default:s(()=>[d("button",{onClick:l[1]||(l[1]=(...i)=>c.toggleDropdown&&c.toggleDropdown(...i)),class:"relative block overflow-hidden"}," Perfil ")]),_:1}),r(u,{key:"1"},{default:s(()=>[d("a",{onClick:l[2]||(l[2]=i=>e.value=!0)}," Cambiar contraseña ")]),_:1}),r(j),r(u,{key:"2"},{default:s(()=>[d("a",{onClick:M}," Salir del sistema ")]),_:1})]),_:1})]),default:s(()=>[d("a",{onClick:l[0]||(l[0]=E(()=>{},["prevent"])),style:{"text-decoration":"none",color:"black"}},[B(L(c.$page.props.auth.user.name)+"   ",1),r(U(X))])]),_:1}),r(D,{open:e.value,"onUpdate:open":l[6]||(l[6]=i=>e.value=i),title:"Cambiar Contraseña","ok-text":"Guardar","cancel-text":"Cancelar",onOk:F,"confirm-loading":t.value,onCancel:C},{default:s(()=>[r(x,{model:n,rules:A,ref_key:"formRef",ref:o,layout:"vertical"},{default:s(()=>[r(m,{label:"Contraseña Antigua",name:"oldPassword"},{default:s(()=>[r(p,{type:"password",value:n.oldPassword,"onUpdate:value":l[3]||(l[3]=i=>n.oldPassword=i),autocomplete:"current-password"},{prefix:s(()=>[r(f)]),_:1},8,["value"])]),_:1}),r(m,{label:"Nueva Contraseña",name:"newPassword"},{default:s(()=>[r(p,{type:"password",value:n.newPassword,"onUpdate:value":l[4]||(l[4]=i=>n.newPassword=i),autocomplete:"new-password"},{prefix:s(()=>[r(f)]),_:1},8,["value"])]),_:1}),r(m,{label:"Confirmar Nueva Contraseña",name:"confirmPassword"},{default:s(()=>[r(p,{type:"password",value:n.confirmPassword,"onUpdate:value":l[5]||(l[5]=i=>n.confirmPassword=i),autocomplete:"new-password"},{prefix:s(()=>[r(f)]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","confirm-loading"])])}}};export{de as A,fe as M,pe as S,ue as _,me as a};
