import{r as i,J as ae,e as C,o as u,c as _,a as t,u as v,w as l,d as s,F as $,y as V,M as ne,Z as se,b as r,E as ie,t as re,f as S,G as de,n as ue,B as pe,I as ce,_ as me,H as ge,h as _e,i as ve,S as fe,j as be,k as ye,K as xe,L as we,N as ke,q as Ie}from"./app-c39b6060.js";import{_ as Ce}from"./AuthenticatedLayout-6f27df51.js";import{S as Ve}from"./SearchOutlined-46355157.js";import{S as Se}from"./SaveOutlined-9aa58398.js";import{F as he}from"./FormOutlined-3985f5a8.js";import{D as Fe}from"./DeleteOutlined-d54c0eec.js";import{D as Ue}from"./DownOutlined-d2ba4533.js";import"./logotiny-c4b525af.js";import"./DropdownLink-4ea8cc87.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                            */import"./AntdIcon-c82fec05.js";const Ne={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{"border-radius":"10px","min-height":"calc(100vh - 92px)"}},ze={class:"flex justify-between mb-2"},Ee={class:"mr-3"},je={class:"flex justify-between",style:{position:"relative"}},De={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Oe={key:0,class:"flex",style:{"justify-content":"center"}},Re={class:"px-2",style:{background:"#e3e3e3","border-radius":"4px"}},qe={style:{"font-weight":"bold"}},Be={key:1,class:"flex",style:{"justify-content":"center"}},$e={key:0},Te={key:1},Me={class:"flex justify-between mt-2 pr-4",style:{"margin-bottom":"-5px"}},Le={clas:"",style:{scale:"0.9","margin-right":"-20px"}},Ae={style:{background:"#476175",height:"36px","margin-left":"-24px","margin-right":"-24px","margin-top":"-24px","margin-bottom":"28px"}},Ge={class:"flex justify-between ml-3 mr-1",style:{height:"36px","align-items":"center"}},at={__name:"filial",setup(Pe){const T=i(!1),x=i(""),h=i([]),p=i(!1),F=i(),n=ae({id:null,codigo:"",nombre:"",lugar:null,direccion:"",estado:null}),f=i(null),U=i([]),w=i(null),M=i(null),k=i(1),c=i(10),N=i(1),L=(o,e)=>{f.value=e.value,n.lugar=e.key},A=()=>{p.value=!0};let z;C(x,(o,e)=>{clearTimeout(z),z=setTimeout(()=>{m()},500)}),C(k,(o,e)=>{m()}),C(c,(o,e)=>{m()});let E;C(w,(o,e)=>{clearTimeout(E),E=setTimeout(()=>{j()},500)});const G=async()=>{T.value=!0;try{const o=await F.value.validateFields();V.post("save-filial",n).then(e=>{O("success",e.data.titulo,e.data.mensaje),m(),p.value=!1,D()})}catch(o){console.error(o)}},j=async()=>{V.post("/get-ubigeo",{term:w.value}).then(o=>{U.value=o.data.datos.data}).catch(o=>{o.response?console.error("Error de servidor:",o.response.data):o.request?console.error("Error de red:",o.request):console.error("Error de configuración:",o.message)})},P=o=>{p.value=!0,n.id=o.id,n.codigo=o.codigo,n.nombre=o.nombre,n.lugar=o.ubigeo,n.direccion=o.direccion,f.value=o.lugar,o.estado==1?n.estado=!0:n.estado=!1},m=async()=>{let o=await V.post("filiales/get-filiales?page="+k.value,{term:x.value,paginasize:c.value});h.value=o.data.datos.data,N.value=o.data.datos.total},H=o=>{V.get("eliminar-filial/"+o.id).then(e=>{m(),O("error","PROCESO ELIMINADO",e.data.mensaje)})},D=()=>{n.id=null,n.codigo="",n.nombre="",n.lugar=null,n.direccion="",n.estado="",f.value="",M.value="",R()},O=(o,e,d)=>{ue[o]({message:e,description:d})},R=()=>{p.value=!1};m(),j();const J={labelCol:{span:6},wrapperCol:{span:18}},K=[{title:"Codigo",dataIndex:"codigo"},{title:"Nombre",dataIndex:"nombre"},{title:"Lugar",dataIndex:"lugar"},{title:"Dirección",dataIndex:"direccion"},{title:"Vigente",dataIndex:"estado",align:"center",width:"100px"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}];return(o,e)=>{const d=pe,b=ce,q=me,X=ge,Z=_e,Q=ve,I=fe,W=be,y=ye,Y=xe,ee=we,te=ke,oe=Ie,le=ne;return u(),_($,null,[t(v(se),{title:"Filiales"}),t(Ce,null,{default:l(()=>[s("div",Ne,[s("div",ze,[s("div",Ee,[t(d,{type:"primary",onClick:A,style:{background:"#476175",border:"none","border-radius":"5px"}},{default:l(()=>e[13]||(e[13]=[r("Nuevo")])),_:1})]),s("div",je,[t(b,{type:"text",placeholder:"Buscar",value:x.value,"onUpdate:value":e[0]||(e[0]=a=>x.value=a),style:{"max-width":"300px","border-radius":"6px","padding-left":"30px"}},null,8,["value"]),s("div",De,[t(v(Ve))])])]),(u(),ie(Z,{columns:K,"data-source":h.value,key:o.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:l(({column:a,record:g})=>[a.dataIndex==="codigo"?(u(),_("div",Oe,[s("div",Re,[s("span",qe,re(g.codigo),1)])])):S("",!0),a.dataIndex==="estado"?(u(),_("div",Be,[g.estado===1?(u(),_("div",$e,[t(q,{color:"cyan"},{default:l(()=>e[14]||(e[14]=[r("Vigente")])),_:1})])):(u(),_("div",Te,[t(q,{color:"red"},{default:l(()=>e[15]||(e[15]=[r("No Vigente")])),_:1})]))])):S("",!0),a.dataIndex==="acciones"?(u(),_($,{key:2},[t(d,{type:"success",class:"mr-1",style:{color:"#476175"},onClick:B=>o.cambiarSexo(g.id_postulante,g.sexo),size:"small"},{icon:l(()=>[t(v(Se))]),_:2},1032,["onClick"]),t(d,{onClick:B=>P(g),class:"mr-1",style:{color:"blue"},size:"small"},{icon:l(()=>[t(v(he))]),_:2},1032,["onClick"]),t(X,{title:"¿Estas seguro de eliminar?",onConfirm:B=>H(g)},{default:l(()=>[t(d,{shape:"",size:"small",style:{color:"crimson"}},{icon:l(()=>[t(v(Fe))]),_:1})]),_:2},1032,["onConfirm"])],64)):S("",!0)]),_:1},8,["data-source"])),s("div",Me,[s("div",null,[t(Q,{current:k.value,"onUpdate:current":e[1]||(e[1]=a=>k.value=a),simple:"",total:N.value,pageSize:c.value,"onUpdate:pageSize":e[2]||(e[2]=a=>c.value=a),"show-less-items":""},null,8,["current","total","pageSize"])]),s("div",Le,[t(W,{value:c.value,"onUpdate:value":e[3]||(e[3]=a=>c.value=a),style:{width:"90px"}},{default:l(()=>[t(I,{value:10},{default:l(()=>e[16]||(e[16]=[r("10 Reg.")])),_:1}),t(I,{value:20},{default:l(()=>e[17]||(e[17]=[r("20 Reg.")])),_:1}),t(I,{value:50},{default:l(()=>e[18]||(e[18]=[r("50 Reg.")])),_:1}),t(I,{value:100},{default:l(()=>e[19]||(e[19]=[r("100 Reg.")])),_:1})]),_:1},8,["value"])])])])]),_:1}),s("div",null,[t(le,{visible:p.value,"onUpdate:visible":e[12]||(e[12]=a=>p.value=a),style:{"margin-top":"-40px","margin-bottom":"-40px"},closable:!1},{footer:l(()=>[t(d,{style:{"margin-left":"6px","border-radius":"4px"},onClick:D},{default:l(()=>e[22]||(e[22]=[r("Cancelar")])),_:1}),t(d,{type:"primary",style:{background:"#476175",border:"none","border-radius":"4px"},onClick:e[11]||(e[11]=a=>G())},{default:l(()=>e[23]||(e[23]=[r("Guardar")])),_:1})]),default:l(()=>[s("div",Ae,[s("div",Ge,[e[21]||(e[21]=s("div",null,[s("span",{style:{"font-weight":"bold",color:"white","font-size":"1rem"}},"Nueva filial")],-1)),s("div",null,[s("span",null,[t(d,{onClick:e[4]||(e[4]=a=>R()),style:{background:"none",border:"none",color:"white"}},{default:l(()=>e[20]||(e[20]=[r("X")])),_:1})])])])]),t(oe,de({ref_key:"formFilial",ref:F,name:"filial",model:n},J,{style:{"margin-bottom":"-30px"}}),{default:l(()=>[t(y,{label:"Codigo",name:"codigo",rules:[{required:!0,message:"Ingrese el codigo",trigger:"change"}]},{default:l(()=>[t(b,{style:{"border-radius":"6px"},type:"text",placeholder:"Ingrese el codigo",value:n.codigo,"onUpdate:value":e[5]||(e[5]=a=>n.codigo=a),autocomplete:"off"},null,8,["value"])]),_:1}),t(y,{label:"Nombre",rules:[{required:!0,message:"Ingrese el nombre",trigger:"change"}],name:"nombre"},{default:l(()=>[t(b,{style:{"border-radius":"6px"},type:"text",placeholder:"Ingrese el nombre",value:n.nombre,"onUpdate:value":e[6]||(e[6]=a=>n.nombre=a),autocomplete:"off"},null,8,["value"])]),_:1}),t(y,{label:"lugar",name:"lugar",rules:[{required:!0,message:"Seleccione el lugar",trigger:"blur"}]},{default:l(()=>[t(ee,{value:f.value,"onUpdate:value":e[8]||(e[8]=a=>f.value=a),options:U.value,onSelect:L,style:{"border-radius":"6px",overflow:"hidden",border:"none"}},{default:l(()=>[t(b,{placeholder:"Dep/prov/dist",value:w.value,"onUpdate:value":e[7]||(e[7]=a=>w.value=a),style:{"border-radius":"6px"}},{suffix:l(()=>[t(Y,{title:"Extra information"},{default:l(()=>[t(v(Ue))]),_:1})]),_:1},8,["value"])]),_:1},8,["value","options"])]),_:1}),t(y,{label:"Dirección",rules:[{required:!0,message:"Ingrese la dirección",trigger:"change"}],name:"direccion"},{default:l(()=>[t(b,{style:{"border-radius":"6px"},type:"text",placeholder:"Ingrese el nombre",value:n.direccion,"onUpdate:value":e[9]||(e[9]=a=>n.direccion=a),autocomplete:"off"},null,8,["value"])]),_:1}),t(y,{label:"Vigente",name:"estado"},{default:l(()=>[t(te,{checked:n.estado,"onUpdate:checked":e[10]||(e[10]=a=>n.estado=a)},null,8,["checked"])]),_:1})]),_:1},16,["model"])]),_:1},8,["visible"])])],64)}}};export{at as default};
