import{r,e as I,C as Y,D as ee,o as d,c as b,a as o,u as f,w as l,d as u,F as N,y as h,M as ae,Z as oe,E as y,t as S,f as m,b as c,G as te,n as le,j as ne,I as ie,_ as de,B as se,H as re,h as ue,i as pe,k as me,S as ce,p as ve,q as fe}from"./app-a43c6566.js";import{_ as ge}from"./AuthenticatedLayout-f3c61b7a.js";import{U as _e}from"./UploadOutlined-b1a69f51.js";import{S as be}from"./SearchOutlined-9113484f.js";import{P as ye}from"./PrinterOutlined-4f1da75b.js";import{F as xe}from"./FormOutlined-5a3f4a7d.js";import{D as we}from"./DeleteOutlined-d3c3e6ee.js";import"./logotiny-c4b525af.js";import"./Header-00879b47.js";import"./AntdIcon-1bb86ba6.js";import"./DownOutlined-f3262074.js";/* empty css                                                            */const ke={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},Ce={class:"mr-3"},Ie={class:"flex justify-between",style:{position:"relative"}},Se={style:{"font-size":"1rem","font-weight":"bold"}},Fe={key:1,style:{"font-size":"0.95rem"}},Ve={key:3},he={key:5,style:{display:"flex",gap:"2px"}},Ue={class:""},Le={__name:"index",setup(ze){const O=window.location.origin,x=r(null),F=r(""),U=r([]),g=r(!1),w=r(1),P=r(null),V=r(20),n=r({id:null,codigo:"",id_posulante:"",id_programa:"",id_modalidad:"",estado:!0,observacion:""}),p=r({id:"",nombre:"",dni:""});I(F,(a,e)=>{v()}),I(V,(a,e)=>{v()}),I(x,(a,e)=>{a==0&&(x.value=null),w.value=1,v()}),I(g,(a,e)=>{g.value==!1&&n.value.id!=null&&(n.value.id=null,n.value.codigo="",n.value.id_posulante="",n.value.id_programa="",n.value.id_modalidad="",n.value.estado=!0,n.value.observacion="",p.value.nombre=null,p.value.dni=null,p.value.id=null)}),I(w,(a,e)=>{v()});const M=a=>{g.value=!0,n.value.id=a.id,n.value.codigo=a.codigo,n.value.id_programa=a.id_programa,n.value.id_modalidad=a.id_modalidad,n.value.observacion=a.observaciones,p.value.id=a.id_postulante,p.value.dni=a.dni,p.value.nombre=a.dni+" - "+a.nombres+" "+a.paterno+" "+a.materno},v=async()=>{let a=await h.post("get-inscripciones-admin?page="+w.value,{term:F.value,paginashoja:V.value,programa:x.value});U.value=a.data.datos.data,P.value=a.data.datos.total},z=r([]);(async()=>{let a=await h.get("get-select-programas-proceso-admin");z.value=a.data.datos})();const R=()=>{let a={id:n.value.id,id_postulante:p.value.id,id_programa:n.value.id_programa,id_modalidad:n.value.id_modalidad,observacion:n.value.observacion,dni:p.value.dni};h.post("actualizar-inscripcion",a).then(e=>{v(),j("success",e.data.titulo,e.data.mensaje),g.value=!1})},$=a=>{h.get("eliminar-modalidad/"+a.id).then(e=>{v(),j("warning",e.data.titulo,e.data.mensaje)})},W=[{title:"Codigo",dataIndex:"codigo",width:"110px"},{title:"DNI",dataIndex:"dni",align:"center"},{title:"Postulante",dataIndex:"postulante"},{title:"Programa",dataIndex:"programa"},{title:"Modalidad",dataIndex:"modalidad",align:"center"},{title:"Estado",dataIndex:"estado",align:"center"},{title:"Acciones",dataIndex:"acciones",width:"140px",align:"center"}],B=r([]),G=a=>{console.log("selectedRowKeys changed: ",a),B.value=a};Y(()=>({selectedRowKeys:f(B),onChange:G,hideDefaultSelections:!0}));const j=(a,e,s)=>{le[a]({message:e,description:s})},K=(a,e)=>{var s=document.createElement("iframe");s.style.display="none",s.src=O+"/documentos/"+e+"/inscripciones/constancias/"+a+".pdf",document.body.appendChild(s),s.contentWindow.focus(),s.contentWindow.print()},L=a=>{var e=document.createElement("iframe");e.style.display="none",e.src=O+"/admin/pdf-inscripción/"+a,document.body.appendChild(e),e.contentWindow.focus(),e.contentWindow.print()};return v(),(a,e)=>{const s=ne,E=ie,T=ee("row"),k=de,_=se,q=re,H=ue,X=pe,C=me,A=ce,Z=ve,J=fe,Q=ae;return d(),b(N,null,[o(f(oe),{title:"Documentos"}),o(ge,null,{default:l(()=>[u("div",ke,[o(T,{class:"flex justify-between mb-4"},{default:l(()=>[u("div",Ce,[o(s,{ref:"select",value:x.value,"onUpdate:value":e[0]||(e[0]=t=>x.value=t),placeholder:"Seleccionar programa de estudios",options:z.value,allowClear:""},null,8,["value","options"])]),u("div",Ie,[o(E,{type:"text",placeholder:"Buscar",value:F.value,"onUpdate:value":e[1]||(e[1]=t=>F.value=t),style:{"max-width":"300px"}},{prefix:l(()=>[o(f(be))]),_:1},8,["value"])])]),_:1}),o(H,{columns:W,"data-source":U.value,pagination:!1,size:"small"},{bodyCell:l(({column:t,index:De,record:i})=>[t.dataIndex==="codigo"?(d(),y(k,{key:0,color:"blue",style:{"padding-top":"3px",color:"#164753",width:"105px"}},{default:l(()=>[u("span",Se,S(i.codigo),1)]),_:2},1024)):m("",!0),t.dataIndex==="postulante"?(d(),b("span",Fe,S(i.paterno)+" "+S(i.materno)+", "+S(i.nombres),1)):m("",!0),t.dataIndex==="estado"?(d(),b(N,{key:2},[i.estado===0?(d(),y(k,{key:0,color:"blue"},{default:l(()=>e[11]||(e[11]=[c("INSCRITO")])),_:1})):(d(),y(k,{key:1,color:"error"},{default:l(()=>e[12]||(e[12]=[c("ANULADO")])),_:1}))],64)):m("",!0),t.dataIndex==="programa"?(d(),b("div",Ve,S(i.programa),1)):m("",!0),t.dataIndex==="verificado"?(d(),b(N,{key:4},[i.verificado===0?(d(),y(k,{key:0,color:"error"},{default:l(()=>e[13]||(e[13]=[c("no verificado")])),_:1})):m("",!0),i.verificado===1?(d(),y(k,{key:1,color:"success"},{default:l(()=>e[14]||(e[14]=[c("verificado")])),_:1})):m("",!0)],64)):m("",!0),t.dataIndex==="acciones"?(d(),b("div",he,[o(_,{size:"small",onClick:D=>L(i.dni),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#23cd23",display:"flex","align-items":"center"}},{default:l(()=>[o(f(_e))]),_:2},1032,["onClick"]),o(_,{size:"small",onClick:D=>K(i.dni,i.id_proceso),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#164753",display:"flex","align-items":"center"}},{default:l(()=>[o(f(ye))]),_:2},1032,["onClick"]),o(_,{size:"small",onClick:D=>M(i),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#af7200",display:"flex","align-items":"center"}},{default:l(()=>[o(f(xe))]),_:2},1032,["onClick"]),U.value.length?(d(),y(q,{key:0,title:"¿Estas seguro de eliminar?",disabled:"",onConfirm:D=>$(i)},{default:l(()=>[o(_,{size:"small",style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#ff4d4f",display:"flex","align-items":"center"}},{default:l(()=>[o(f(we))]),_:1})]),_:2},1032,["onConfirm"])):m("",!0)])):m("",!0)]),_:1},8,["data-source"]),o(X,{current:w.value,"onUpdate:current":e[2]||(e[2]=t=>w.value=t),total:P.value,pageSize:V.value,"onUpdate:pageSize":e[3]||(e[3]=t=>V.value=t),"show-less-items":""},null,8,["current","total","pageSize"])])]),_:1}),u("div",null,[o(Q,{open:g.value,"onUpdate:open":e[10]||(e[10]=t=>g.value=t),title:"Modificar Inscripción",style:{"margin-top":"-40px"}},{footer:l(()=>[o(_,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:l(()=>e[22]||(e[22]=[c("Cancelar")])),_:1},8,["onClick"]),o(_,{type:"primary",onClick:e[9]||(e[9]=t=>R())},{default:l(()=>e[23]||(e[23]=[c("Guardar")])),_:1})]),default:l(()=>[o(J,te({ref:"formRef",name:"custom-validation",model:a.formState},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:l(()=>[o(C,{"has-feedback":"",name:"codigo"},{default:l(()=>[e[15]||(e[15]=u("label",null,"Codigo",-1)),o(E,{type:"text",value:n.value.codigo,"onUpdate:value":e[4]||(e[4]=t=>n.value.codigo=t),disabled:""},null,8,["value"])]),_:1}),o(C,{"has-feedback":"",name:"nombre"},{default:l(()=>[e[16]||(e[16]=u("label",null,"Postulante",-1)),o(E,{type:"text",value:p.value.nombre,"onUpdate:value":e[5]||(e[5]=t=>p.value.nombre=t),disabled:""},null,8,["value"])]),_:1}),o(C,{"has-feedback":"",name:"postulante"},{default:l(()=>[e[17]||(e[17]=u("label",null,"Programa",-1)),u("div",Ue,[o(s,{ref:"select",value:n.value.id_programa,"onUpdate:value":e[6]||(e[6]=t=>n.value.id_programa=t),placeholder:"Seleccionar programa de estudios",options:z.value,allowClear:""},null,8,["value","options"])])]),_:1}),o(C,{"has-feedback":"",name:"tipo"},{default:l(()=>[e[20]||(e[20]=u("label",null,"Modalidad",-1)),o(s,{ref:"select",value:n.value.id_modalidad,"onUpdate:value":e[7]||(e[7]=t=>n.value.id_modalidad=t),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"}},{default:l(()=>[o(A,{value:8},{default:l(()=>e[18]||(e[18]=[c("EXAMEN GENERAL")])),_:1}),o(A,{value:7},{default:l(()=>e[19]||(e[19]=[c("CONADIS")])),_:1})]),_:1},8,["value"])]),_:1}),o(C,{"has-feedback":"",name:"nombre"},{default:l(()=>[e[21]||(e[21]=u("label",null,"Observaciones",-1)),o(Z,{type:"text",value:n.value.observacion,"onUpdate:value":e[8]||(e[8]=t=>n.value.observacion=t),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["open"])])],64)}}};export{Le as default};
