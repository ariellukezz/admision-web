import{x as i,g as E,c as w,a as e,u as c,w as a,d as _,F as x,z as p,r as l,o as C,X as O,b as d,D as P,f as T}from"./app-2d85268a.js";import{A as U}from"./AuthenticatedLayout-04bffa6c.js";import{F as $}from"./FormOutlined-7ec09bae.js";import"./DropdownLink-fa80a7ed.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logotiny-c4b525af.js";import"./logoDAD-c76d0a0b.js";const G={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},L=_("h1",null," Roles ",-1),Z={__name:"index",setup(M){const u=i(""),m=i([]),v=i([]),n=i(!1),R=()=>{h(),n.value=!0},h=async()=>{let t=await p.get("get-permission");v.value=t.data.permisos},f=async()=>{let t=await p.get("get-roles");m.value=t.data.datos.data},k=t=>{n.value=!0,u.value=t.name},z=()=>{let t={name:u.value,permisos:y.value.selectedRowKeys};p.post("save-rol",t).then(o=>{console.log(o),f(),n.value=!1})},I=[{title:"Rol",dataIndex:"name",sorter:!0},{title:"Tipo permisos",dataIndex:"guard_name"},{title:"Acciones",dataIndex:"acciones"}],N=[{title:"Nombre",dataIndex:"name",sorter:!0},{title:"Permisos",dataIndex:"guard_name"}],g=i([]),F=t=>{console.log("selectedRowKeys changed: ",t),g.value=t},y=E(()=>({selectedRowKeys:c(g),onChange:F,hideDefaultSelections:!0}));return f(),(t,o)=>{const r=l("a-button"),S=l("a-divider"),b=l("a-table"),V=l("a-label"),A=l("a-input"),B=l("a-form-item"),D=l("a-modal");return C(),w(x,null,[e(c(O),{title:"Roles"}),e(U,null,{default:a(()=>[_("div",G,[L,e(r,{type:"primary",onClick:R},{default:a(()=>[d("Nuevo")]),_:1}),e(b,{columns:I,"data-source":m.value,pagination:{pageSize:5},size:"small"},{bodyCell:a(({column:s,index:K})=>[s.dataIndex==="acciones"?(C(),w(x,{key:0},[e(r,{type:"primary",onClick:X=>k(m.value[K]),size:"small"},{icon:a(()=>[e(c($))]),_:2},1032,["onClick"]),e(S,{type:"vertical"}),e(r,{type:"danger",shape:"",size:"small"},{icon:a(()=>[e(c(P))]),_:1})],64)):T("",!0)]),_:1},8,["data-source"])])]),_:1}),_("div",null,[e(D,{visible:n.value,"onUpdate:visible":o[2]||(o[2]=s=>n.value=s),title:"Crear Roles"},{footer:a(()=>[e(r,{style:{"margin-left":"10px"},onClick:t.resetForm},{default:a(()=>[d("Cancelar")]),_:1},8,["onClick"]),e(r,{type:"primary",onClick:o[1]||(o[1]=s=>z())},{default:a(()=>[d("Guardar")]),_:1})]),default:a(()=>[e(B,{name:"email"},{default:a(()=>[e(V,null,{default:a(()=>[d("Rol")]),_:1}),e(A,{value:u.value,"onUpdate:value":o[0]||(o[0]=s=>u.value=s),type:"text",autocomplete:"off"},null,8,["value"])]),_:1}),e(b,{"row-selection":c(y),columns:N,"data-source":v.value,pagination:{pageSize:10},size:"small"},null,8,["row-selection","data-source"])]),_:1},8,["visible"])])],64)}}};export{Z as default};
