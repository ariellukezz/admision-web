import{_ as le}from"./logotiny-c4b525af.js";import{_ as re}from"./logoDAD-c76d0a0b.js";import{_ as de}from"./_plugin-vue_export-helper-c27b6911.js";import{o as i,E as P,w as n,a as s,d as e,t as b,ac as ce,ag as ue,ah as pe,r as f,J as z,c,u as y,F as A,Z as me,b as v,f as u,s as _e,n as ve,B as fe,I as ge,k as ye,q as be,_ as xe,h as he,aN as we,O as ke,T as je,U as Ce,p as Ie,aO as Ee,M as Ne}from"./app-e5730594.js";import De from"./certificado-1037f6be.js";import Ue from"./dni-c36c8412.js";import{D as Ae}from"./DeleteOutlined-03d457b2.js";import{E as Pe}from"./EyeOutlined-9348f21b.js";import{D as Le}from"./DownloadOutlined-704bf1dd.js";import{U as Re}from"./UploadOutlined-7be65bce.js";import"./es-c2aa75bf.js";import"./AntdIcon-d77a19ca.js";const Oe="/build/assets/image-b69d7d4b.png";const Se={class:"headPre"},$e={class:"flex justify-center title-proceso-container"},ze={class:"title-proceso text-center"},Te={class:"container"},Fe={__name:"LayoutPuntaje",props:["nombre"],setup(I){return(w,_)=>{const r=ue,k=pe;return i(),P(k,{style:{"min-height":"100vh"}},{default:n(()=>[s(k,null,{default:n(()=>[e("div",Se,[_[0]||(_[0]=e("div",{class:"flex justify-between mb-2 logo-container"},[e("div",{class:"logoPre"},[e("img",{src:le,class:"logo-img"}),e("div",{class:"x"},[e("div",{class:"container-pre"},[e("span",{class:"puntajex"},"DIRECCIÓN DE")]),e("h1",{class:"logoPreAD"},"ADMISIÓN")]),e("img",{src:re,class:"logo-img"})])],-1)),e("div",$e,[e("span",ze,b(I.nombre),1)]),_[1]||(_[1]=e("div",{class:"flex justify-center titulo-pre"},[e("div",null,[e("div",{class:"flex justify-center",style:{height:"40px"}},[e("hr",{class:"line-pre mr-2"}),e("span",{style:{"font-size":"1.4rem","text-transform":"capitalize"}},"RESULTADOS"),e("hr",{class:"line-pre ml-2"})])])],-1))]),_[2]||(_[2]=e("div",{style:{background:"#267ec5ea",height:"3px",width:"100%"}},null,-1)),s(r,{class:"content flex justify-center"},{default:n(()=>[e("div",Te,[ce(w.$slots,"default",{},void 0,!0)])]),_:3})]),_:3})]),_:3})}}},Me=de(Fe,[["__scopeId","data-v-62787fe5"]]);const Be={style:{"font-size":"1.7rem"}},qe={key:0},Ve={style:{"text-align":"justify","font-size":"1em"}},Ge={key:0},He={class:"flex",style:{"min-height":"30px","align-items":"center"}},Je={class:"flex"},Xe={key:0,class:"mr-1"},Ke={class:"flex"},Ye={style:{"margin-top":"-2px"}},Ze={class:"mr-1"},Qe={class:"flex"},We={style:{"margin-top":"-2px"}},eo={class:"flex"},oo={style:{"margin-top":"-2px"}},to={key:0,class:"mt-4"},so={class:"flex"},no={style:{"margin-top":"-2px"}},ao={key:1},io={class:"mt-6",style:{}},lo={style:{"margin-top":"-10px","text-align":"left"}},ro={class:"ml-1 mb-2"},co={class:"flex mt-6 justify-left",style:{}},uo={style:{width:"100%"}},po={style:{"min-width":"360px","max-width":"420px"}},mo={class:"texto-imagen"},_o={class:"mb-4"},vo={class:"mt-4",style:{display:"flex","justify-content":"left"}},fo={key:0,class:"mt-6"},go={key:0},yo={key:1},bo={key:0},xo={key:1},ho={class:"flex justify-center"},wo={key:2},ko={class:"flex justify-center"},jo={key:2,class:"mt-6"},Co={class:"mt-2"},Io={class:"mb-4"},Eo={class:"mb-4"},No={class:"flex justify-end"},Do={class:"mr-2"},Bo={__name:"index",props:["proceso_seleccionado","admin"],setup(I){const w=window.location.origin,_=f(!1),r=I,k=f(""),E=f(),d=z({descripcion:"",observacion:"",estado:1,file:[]}),T=f(),p=z({dni:"",codigo_secreto:""}),F=t=>{p.dni=t.target.value.replace(/\D/g,"")},M=async()=>{j.value=0;try{const t=await axios.post("/get-puntajes-proceso/",{dni:p.dni,id_proceso:r.proceso_seleccionado.id});if(t.data.estado==!1)X("error","No se han encontrado datos en este proceso",""),p.dni="",g.value=[];else if(t.data&&t.data.datos){g.value=t.data.datos;const o=g.value.some(l=>l.condicion==="SI");j.value=o?1:0,j.value==0&&(p.dni=""),R()}else g.value=[]}catch(t){console.error("Error al obtener puntajes:",t),g.value=[]}};function B(t,o){return new Promise((l,m)=>{o?x.value!==k.value?m(new Error("El código ingresado no coincide.")):l():m(new Error("Por favor, ingresa el código secreto."))})}const q=f([]),V=async()=>{let t=await axios.get("/get-puntajes-maximos-proceso/"+r.proceso_seleccionado.id);t.data.estado==!0&&(q.value=t.data.datos)},G=()=>{_.value=!0},L=f([]),N=async()=>{let t=await axios.post("/get-documentos-resultados",{id_proceso:r.proceso_seleccionado.id});t.data.estado==!0&&(L.value=t.data.datos)},H=t=>window.open(t,"_blank"),J=async t=>{try{const o=await axios({url:t,method:"GET",responseType:"blob"}),l=window.URL.createObjectURL(new Blob([o.data])),m=document.createElement("a");m.href=l,m.setAttribute("download",t.split("/").pop()),document.body.appendChild(m),m.click(),m.remove()}catch(o){console.error("Error descargando archivo:",o)}};V(),N();const x=f(null),R=async()=>{let t=await axios.get("/generar-captcha");x.value=t.data.captcha},X=(t,o,l)=>{ve[t]({message:o,description:l})},g=f([]),j=f(null),K=[{title:"Nombre",dataIndex:"nombres"},{title:"Programa",dataIndex:"programa",responsive:["sm"]},{title:"Puntaje",dataIndex:"puntaje",align:"center"},{title:"Vocacional",dataIndex:"puntaje_vocacional",align:"center"},{title:"Fecha",dataIndex:"fecha",align:"center"},{title:"Condición",dataIndex:"condicion",align:"center"}];function Y(t){return t.split("-").reverse().join("-")}const Z=t=>(d.file=[t],!1),Q=async()=>{if(await E.value.validateFields(),d.file.length===0){alert("Por favor, selecciona un archivo primero.");return}const t=new FormData;t.append("file",d.file[0]),t.append("descripcion",d.descripcion),t.append("estado",d.estado),t.append("observacion",d.observacion),t.append("id_proceso",r.proceso_seleccionado.id);try{const o=await fetch("/save-documento-resultado",{method:"POST",body:t,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}});if(!o.ok)throw new Error("Error en la subida del archivo");const l=await o.json();alert("Archivo subido con éxito: "+l.fileName),N(),O()}catch(o){alert("Error: "+o.message)}},W=async t=>{await axios.get("/delete-documento-resultados/"+t),await N()},O=()=>{d.file=[],d.descripcion="",E.estado=1,d.observacion="",_.value=!1};return R(),(t,o)=>{const l=fe,m=ge,C=ye,S=be,D=xe,ee=he,oe=we,te=ke,$=je,se=Ce,ne=Ie,ae=Ee,ie=Ne;return i(),c(A,null,[s(y(me),{title:"Resultados"}),s(Me,{nombre:r.proceso_seleccionado.nombre},{default:n(()=>[s(te,null,{default:n(()=>[e("div",null,[e("h1",Be,[o[9]||(o[9]=v("Resultados ")),r.proceso_seleccionado.nivel==1?(i(),c("span",qe,"del examen")):u("",!0)]),e("p",Ve,[o[10]||(o[10]=v(" Para consultar la relación de ingresantes del ")),r.proceso_seleccionado.nivel==1?(i(),c("span",Ge," EXAMEN ")):u("",!0),v(" "+b(r.proceso_seleccionado.nombre)+', haga clic en el botón "Descargar" correspondiente a la fecha de su interés. El archivo se descargará automáticamente, y podrá abrirlo para visualizar el listado de ingresantes ordenado por mérito. ',1)])]),(i(!0),c(A,null,_e(L.value,a=>(i(),c("div",{key:a,class:"flex justify-between p-2",style:{"border-bottom":"solid 1px #d9d9d9"}},[e("div",He,[o[11]||(o[11]=e("div",{class:"mr-1",style:{width:"30px","min-width":"30px"}},[e("img",{src:Oe,alt:""})],-1)),e("div",null,[e("span",null,b(a.nombre),1)])]),e("div",null,[e("div",Je,[r.admin===1?(i(),c("div",Xe,[s(l,{onClick:U=>W(a.id),size:"small",style:{height:"30px",background:"crimson",color:"white",border:"none"}},{default:n(()=>[e("div",Ke,[e("div",Ye,[s(y(Ae))])])]),_:2},1032,["onClick"])])):u("",!0),e("div",Ze,[s(l,{onClick:U=>H(y(w)+"/"+a.url),size:"small",style:{height:"30px",background:"#256d7d",color:"white",border:"none"}},{default:n(()=>[e("div",Qe,[e("div",We,[s(y(Pe))])])]),_:2},1032,["onClick"])]),e("div",null,[s(l,{onClick:U=>J(y(w)+"/"+a.url),size:"small",style:{height:"30px",background:"#088dcf",color:"white",border:"none"}},{default:n(()=>[e("div",eo,[e("div",oo,[s(y(Le))])])]),_:2},1032,["onClick"])])])])]))),128)),r.admin===1?(i(),c("div",to,[s(l,{onClick:o[0]||(o[0]=a=>G()),style:{height:"36px",background:"#088dcf",color:"white",border:"none"}},{default:n(()=>[e("div",so,[o[12]||(o[12]=e("div",{class:"mr-1"},"Subir archivo",-1)),e("div",no,[s(y(Re))])])]),_:1})])):u("",!0),r.proceso_seleccionado.nivel==1?(i(),c("div",ao,[o[23]||(o[23]=e("div",{class:"mt-6"},null,-1)),o[24]||(o[24]=e("h1",{style:{"font-size":"1.7rem"}},"Consultar puntaje",-1)),e("div",io,[e("div",lo,[e("div",ro," Para consultar el puntaje del EXAMEN "+b(r.proceso_seleccionado.nombre)+", siga estos pasos: ",1),o[13]||(o[13]=e("div",{class:"ml-4"},[e("div",{class:"mb-2"},"1. Ingrese su DNI en el campo de texto proporcionado."),e("div",{class:"mb-2"},"2. Ingrese el código mostrado en pantalla."),e("div",null,'3. Haga clic en el botón "Consultar Puntaje".')],-1))]),e("div",co,[e("div",uo,[e("div",po,[s(S,{ref_key:"formRef",ref:T,model:p,name:"inicio_dni"},{default:n(()=>[o[17]||(o[17]=e("div",{style:{"margin-bottom":"7px"}},[e("label",null,"N° Documento")],-1)),s(C,{name:"dni",rules:[{required:!0,message:"Por favor ingresa tu DNI",trigger:"change"},{min:8,message:"El dni debe tener 8 digitos",trigger:"blur"}]},{default:n(()=>[s(m,{value:p.dni,"onUpdate:value":o[1]||(o[1]=a=>p.dni=a),onInput:F,maxlength:8,placeholder:"N° Documento"},null,8,["value"])]),_:1}),e("div",mo,b(x.value),1),o[18]||(o[18]=e("div",{class:"overlay"},null,-1)),e("div",_o,[o[14]||(o[14]=e("div",{class:"mt-3"},[e("label",null,"Código")],-1)),s(C,{name:"codigo_secreto",rules:[{required:!0,message:"Ingresa el código del cuadro",trigger:"change"},{min:6,message:"El ubigeo debe tener 6 caracteres",trigger:"blur"},{validator:B,trigger:"change"}]},{default:n(()=>[s(m,{value:p.codigo_secreto,"onUpdate:value":o[2]||(o[2]=a=>p.codigo_secreto=a),maxlength:6,placeholder:"Ingresa el codigo"},null,8,["value"])]),_:1},8,["rules"])]),e("div",vo,[x.value!==p.codigo_secreto?(i(),P(l,{key:0,type:"primary",disabled:""},{default:n(()=>o[15]||(o[15]=[v("CONSULTAR PUNTAJE")])),_:1})):u("",!0),p.codigo_secreto===x.value?(i(),P(l,{key:1,onClick:o[3]||(o[3]=a=>M()),style:{background:"goldenrod",border:"none",color:"white"}},{default:n(()=>o[16]||(o[16]=[v("CONSULTAR PUNTAJE")])),_:1})):u("",!0)])]),_:1},8,["model"])])])])]),g.value.length>0?(i(),c("div",fo,[s(ee,{columns:K,"data-source":g.value,pagination:!1,size:"small"},{bodyCell:n(({column:a,index:U,record:h})=>[a.dataIndex==="puntaje"?(i(),c("div",go,b(h.puntaje),1)):u("",!0),a.dataIndex==="fecha"?(i(),c("div",yo,b(Y(h.fecha)),1)):u("",!0),a.dataIndex==="condicion"?(i(),c(A,{key:2},[h.condicion=="SI"?(i(),c("div",bo,[s(D,{color:"blue"},{default:n(()=>o[19]||(o[19]=[v(" Ingresó ")])),_:1})])):u("",!0),h.condicion=="NO"?(i(),c("div",xo,[e("div",ho,[s(D,{color:"orange"},{default:n(()=>o[20]||(o[20]=[v(" No ingresó ")])),_:1})])])):u("",!0),h.condicion=="CL"?(i(),c("div",wo,[e("div",ko,[s(D,{color:"yellow"},{default:n(()=>o[21]||(o[21]=[v(" Clasificado ")])),_:1})])])):u("",!0)],64)):u("",!0)]),_:1},8,["data-source"]),o[22]||(o[22]=e("div",null,null,-1))])):u("",!0)])):u("",!0),j.value===1?(i(),c("div",jo,[s(oe,{message:"! MUY IMPORTANTE !",description:"Los postulantes que hayan alcanzado una vacante deberán subir su Certificado de Estudios y DNI en formato PDF con un peso max. de 2mb",type:"info"}),o[25]||(o[25]=e("div",{class:"mt-6"},null,-1)),o[26]||(o[26]=e("h1",{style:{"font-size":"1.7rem"}},"Subir archivos ",-1)),e("div",null,[s(De,{id_proceso:r.proceso_seleccionado.id,dni:p.dni},null,8,["id_proceso","dni"])]),e("div",Co,[s(Ue,{id_proceso:r.proceso_seleccionado.id,dni:p.dni},null,8,["id_proceso","dni"])])])):u("",!0)]),_:1}),s(ie,{visible:_.value,"onUpdate:visible":o[8]||(o[8]=a=>_.value=a),title:"Archivo Resultado",footer:!1},{default:n(()=>[s(S,{ref_key:"formRefArchivo",ref:E,model:d,name:"formArchivo"},{default:n(()=>[s(se,{value:d.estado,"onUpdate:value":o[4]||(o[4]=a=>d.estado=a),class:"flex justify-end",style:{display:"flex",width:"yellow"},name:"radioGroup"},{default:n(()=>[s($,{value:1},{default:n(()=>o[27]||(o[27]=[v("Activo")])),_:1}),s($,{value:0},{default:n(()=>o[28]||(o[28]=[v("Inactivo")])),_:1})]),_:1},8,["value"]),o[31]||(o[31]=e("div",{style:{"margin-bottom":"7px"}},[e("label",null,"Descripción")],-1)),s(C,{name:"descripcion",rules:[{required:!0,message:"Ingrese la descripción",trigger:"change"}]},{default:n(()=>[s(m,{value:d.descripcion,"onUpdate:value":o[5]||(o[5]=a=>d.descripcion=a),placeholder:"Descripción"},null,8,["value"])]),_:1}),e("div",Io,[o[29]||(o[29]=e("div",{class:"mt-3"},[e("label",null,"Observaciónes")],-1)),s(C,{name:"observacion"},{default:n(()=>[s(ne,{value:d.observacion,"onUpdate:value":o[6]||(o[6]=a=>d.observacion=a),maxlength:100,placeholder:"Observación"},null,8,["value"])]),_:1})]),e("div",Eo,[s(ae,{fileList:t.fileList,"onUpdate:fileList":o[7]||(o[7]=a=>t.fileList=a),"before-upload":Z,multiple:!1},{default:n(()=>o[30]||(o[30]=[e("div",{class:"flex justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-upload"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"17 8 12 3 7 8"}),e("line",{x1:"12",y1:"3",x2:"12",y2:"15"})])],-1),e("p",{class:"ant-upload-text"},"Haz clic o arrastra el archivo aquí para cargarlo",-1),e("p",{class:"ant-upload-hint"},"No subir archivos no autorizados",-1)])),_:1},8,["fileList"])])]),_:1},8,["model"]),e("div",No,[e("div",Do,[s(l,{onClick:O,style:{height:"36px",background:"none",color:"#088dcf",border:"#088dcf solid 1px"}},{default:n(()=>o[32]||(o[32]=[e("div",{class:"mr-1"},"Cancelar",-1)])),_:1})]),s(l,{onClick:Q,style:{height:"36px",background:"#088dcf",color:"white",border:"none"}},{default:n(()=>o[33]||(o[33]=[e("div",{class:"mr-1"},"Guardar",-1)])),_:1})])]),_:1},8,["visible"])]),_:1},8,["nombre"])],64)}}};export{Bo as default};
