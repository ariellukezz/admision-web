import{r as u,C as S,e as g,D as j,o as k,c as $,a as o,u as v,w as s,F as C,y as b,Z as A,d as n,b as y,t as E,f as M,a6 as I,B as N,a7 as V,a8 as P,a9 as z,h as H}from"./app-6bc649a8.js";import{_ as Y}from"./AuthenticatedLayout-b26263c5.js";import{F as G,a as X}from"./FilePdfOutlined-be1d0033.js";import"./logotiny-c4b525af.js";import"./Header-5d2c2253.js";import"./AntdIcon-9c365995.js";import"./DownOutlined-54b1c44f.js";/* empty css                                                            */const Z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},q={class:"checkbox-group-container"},J={class:"mt-4 bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 230px)"}},K={class:"flex gap-2"},Q={style:{display:"flex","align-items":"center",gap:"6px"}},W={style:{display:"flex","align-items":"center",gap:"6px"}},ee={style:{}},te={style:{"font-weight":"bold",color:"#476175"}},ue={__name:"inscripciones",setup(ae){const f=u(""),m=u(1),R=u(0),_=u([]),r=u(["area"]),F=S(()=>_.value.reduce((t,e)=>t+e.total,0)),h=[{label:"Área",value:"area"},{label:"Programa",value:"programa"},{label:"Modalidad",value:"modalidad"},{label:"Sexo",value:"sexo"},{label:"Usuario",value:"usuario"}],w=S(()=>[...r.value.map(t=>{const e=h.find(c=>c.value===t);return{title:e?e.label:t,dataIndex:t,key:t,align:"left"}}),{title:"Total",dataIndex:"total",key:"total",align:"center",width:"90px"}]),p=async()=>{try{let t=await b.post("resumen-inscripciones?page="+m.value,{group_by:r.value,term:f.value});_.value=t.data.data,R.value=t.data.datos.total}catch{}};g(r,()=>{p()}),g(m,()=>{p()});let x;g(f,()=>{clearTimeout(x),x=setTimeout(()=>{m.value=1,p()},500)});const T=async()=>{try{const t=await b.post("resumen-inscripciones",{descargar:1,group_by:r.value},{responseType:"blob"});if(t.status!==200)throw new Error("Error al obtener el archivo");const e=new Date,i=`${`${e.getDate().toString().padStart(2,"0")}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getFullYear()}_${e.getHours().toString().padStart(2,"0")}-${e.getMinutes().toString().padStart(2,"0")}-${e.getSeconds().toString().padStart(2,"0")}`}_resumen_inscripciones.pdf`,l=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=l,a.setAttribute("download",i),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(l)}catch(t){console.error("Error al descargar el archivo:",t)}},U=async()=>{try{const t=await b.post("resumen-inscripciones",{descargar:1,excel:1,group_by:r.value},{responseType:"blob"});if(t.status!==200)throw new Error("Error al obtener el archivo");const e=new Date,i=`${`${e.getDate().toString().padStart(2,"0")}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getFullYear()}_${e.getHours().toString().padStart(2,"0")}-${e.getMinutes().toString().padStart(2,"0")}-${e.getSeconds().toString().padStart(2,"0")}`}_resumen_inscripciones.xlsx`,l=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=l,a.setAttribute("download",i),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(l)}catch(t){console.error("Error al descargar el archivo:",t)}};return p(),(t,e)=>{const c=I,i=N,l=j("row"),a=V,D=P,L=z,B=H;return k(),$(C,null,[o(v(A),{title:"Resumen inscripciones"}),o(Y,null,{default:s(()=>[n("div",Z,[e[3]||(e[3]=n("div",{class:"mb-4"},[n("span",{style:{"font-size":"1.3rem"}},"Resumen inscripción")],-1)),n("div",q,[o(c,{value:r.value,"onUpdate:value":e[0]||(e[0]=d=>r.value=d),options:h},null,8,["value"])])]),n("div",J,[o(l,{class:"flex justify-end mb-4"},{default:s(()=>[n("div",K,[o(i,{type:"primary",style:{background:"#40DE7A"},onClick:e[1]||(e[1]=d=>U())},{default:s(()=>[n("div",Q,[o(v(G)),e[4]||(e[4]=y(" EXCEL "))])]),_:1}),o(i,{type:"primary",sise:"large",style:{background:"crimson"},onClick:e[2]||(e[2]=d=>T())},{default:s(()=>[n("div",W,[o(v(X)),e[5]||(e[5]=y(" PDF "))])]),_:1})])]),_:1}),n("div",ee,[o(B,{columns:w.value,"data-source":_.value,pagination:!1,size:"small",scroll:{x:200,y:"calc(100vh - 400px)"}},{bodyCell:s(({column:d,record:O})=>[d.dataIndex==="total"?(k(),$(C,{key:0},[y(E(O.total),1)],64)):M("",!0)]),summary:s(()=>[o(L,{fixed:"bottom"},{default:s(()=>[o(D,null,{default:s(()=>[o(a,{"col-span":w.value.length-1,style:{"text-align":"right"}},{default:s(()=>e[6]||(e[6]=[n("span",{style:{"font-weight":"bold",color:"#476175"}}," Total Registros: ",-1)])),_:1},8,["col-span"]),o(a,{style:{"text-align":"center"}},{default:s(()=>[n("span",te,E(F.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","data-source"])])])]),_:1})],64)}}};export{ue as default};
