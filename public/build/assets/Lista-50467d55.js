import{r,e as w,H as W,D as X,o as s,c as p,a as o,u as g,w as l,d as c,F as R,y as x,M as Y,Z as ee,b as i,t as y,f as u,E as O,J as ae,n as te,B as oe,I as le,_ as ne,h as se,i as ie,k as ue,j as de,S as re,O as ce,q as pe}from"./app-cb2b04a1.js";import{_ as me}from"./AuthenticatedLayout-10056df6.js";import{S as ve}from"./SearchOutlined-4de8140b.js";import{E as _e}from"./EyeOutlined-fae3f109.js";import{F as fe}from"./FormOutlined-e4d30c9c.js";import{D as ge}from"./DeleteOutlined-5ad8ecc3.js";import"./logotiny-c4b525af.js";import"./Header-2baa8187.js";import"./AntdIcon-03e9de4c.js";import"./perfil-8f870394.js";/* empty css                                                               */import"./_plugin-vue_export-helper-c27b6911.js";import"./UserOutlined-d22982c2.js";import"./SafetyCertificateOutlined-b9de7e86.js";import"./EditOutlined-349992f9.js";import"./DownOutlined-93bf85fe.js";/* empty css                                                            */const ye={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 98px)"}},be={class:"mr-3"},ke={class:"flex justify-between",style:{position:"relative"}},Ce={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},he={style:{}},Ie={key:0},we={style:{"font-size":".9rem"}},xe={key:1},Fe={style:{"font-size":".9rem"}},Se={key:2},Oe={style:{"font-size":".9rem"}},Ee={key:3,class:"flex",style:{"justify-content":"center"}},Ae={key:4,class:"flex",style:{"justify-content":"center"}},Ne={key:0},ze={key:1},Ve={class:"flex",style:{"justify-content":"flex-end"}},Xe={__name:"Lista",setup(De){const h=r(""),I=r(1),E=r(null);r("PUNO");const A=r([]),_=r(!1),B=r(""),d=r([]),t=r({id:null,codigo:"",nombre:"",nivel_academico:"CARRERA PROFESIONAL",tipo_autorizacion:"RECONOCIDO POR LIC.",id_facultad:1,estado:!0,area:"BIOMEDICAS"}),P=()=>{_.value=!0};w(h,(a,e)=>{b()}),w(B,(a,e)=>{getDepartamentos()}),w(_,(a,e)=>{_.value==!1&&t.value.id!=null&&(t.value.id=null,t.value.codigo=null,t.value.nombre=null,t.value.estado=!0)}),w(I,(a,e)=>{b()});const M=a=>{_.value=!0,t.value.id=a.id,t.value.codigo=a.codigo,t.value.nombre=a.nombre,t.value.nivel_academico=a.nivel_academico,t.value.tipo_autorizacion=a.tipo_autorizacion,t.value.id_facultad=a.id_fac,a.estado==1?t.value.estado=!0:t.value.estado=!1,t.value.area=a.area},U=async()=>{let a=await x.get("get-facultades");A.value=a.data.datos},b=async(a="")=>{let e=await x.post("programas/get-programas?page="+I.value,{term:h.value});d.value=e.data.datos.data,E.value=e.data.datos.total},j=()=>{let a={id:t.value.id,codigo:t.value.codigo,nombre:t.value.nombre,nivel_academico:t.value.nivel_academico,tipo_autorizacion:t.value.tipo_autorizacion,estado:t.value.estado,id_facultad:t.value.id_facultad,area:t.value.area};x.post("save-programa",a).then(e=>{b(),z("success",e.data.titulo,e.data.mensaje),_.value=!1,t.value.codigo=null,t.value.id=null,t.value.nombre=""})},L=a=>{x.get("eliminar-programa/"+a.id).then(e=>{b(),z("warning","PROGRAMA ELIMINADO",e.data.mensaje)})},G=[{title:"Cod",dataIndex:"codigo",width:"60px",align:"center",responsive:["md"]},{title:"Nombre",dataIndex:"nombre"},{title:"Area",dataIndex:"area",align:"center",width:"100px",responsive:["md"]},{title:"Fun.",dataIndex:"estado",align:"center",width:"60px",responsive:["md"]},{title:"Acciones",dataIndex:"acciones",width:"90px",align:"center"}],N=r([]),$=a=>{console.log("selectedRowKeys changed: ",a),N.value=a};W(()=>({selectedRowKeys:g(N),onChange:$,hideDefaultSelections:!0}));const z=(a,e,m)=>{te[a]({message:e,description:m})},K=a=>{console.log("Detalle:",a)};return U(),b(),(a,e)=>{const m=oe,F=le,T=X("row"),k=ne,q=se,H=ie,C=ue,V=de,S=re,J=ce,Z=pe,Q=Y;return s(),p(R,null,[o(g(ee),{title:"Procesos"}),o(me,null,{default:l(()=>[c("div",ye,[o(T,{class:"flex justify-between mb-4"},{default:l(()=>[c("div",be,[o(m,{type:"primary",style:{"border-radius":"5px",background:"#476175"},onClick:P},{default:l(()=>e[9]||(e[9]=[i("Agregar")])),_:1})]),c("div",ke,[o(F,{type:"text",placeholder:"Buscar",value:h.value,"onUpdate:value":e[0]||(e[0]=n=>h.value=n),style:{"max-width":"300px","padding-left":"30px"}},null,8,["value"]),c("div",Ce,[o(g(ve))])])]),_:1}),c("div",he,[o(q,{columns:G,"data-source":d.value,pagination:!1,size:"small",scroll:{x:380,y:"calc(100vh - 240px)"}},{bodyCell:l(({column:n,index:v,record:f})=>[n.dataIndex==="codigo"?(s(),p("div",Ie,[c("span",we,y(f.codigo),1)])):u("",!0),n.dataIndex==="nombre"?(s(),p("div",xe,[c("span",Fe,y(f.nombre),1)])):u("",!0),n.dataIndex==="facultad"?(s(),p("div",Se,[c("span",Oe,y(f.facultad),1)])):u("",!0),n.dataIndex==="area"?(s(),p("div",Ee,[d.value[v].area=="BIOMÉDICAS"?(s(),O(k,{key:0,style:{"font-size":".8rem"},color:"cyan"},{default:l(()=>[i(y(d.value[v].area),1)]),_:2},1024)):u("",!0),d.value[v].area=="SOCIALES"?(s(),O(k,{key:1,style:{"font-size":".8rem"},color:"purple"},{default:l(()=>[i(y(d.value[v].area),1)]),_:2},1024)):u("",!0),d.value[v].area=="INGENIERÍAS"?(s(),O(k,{key:2,style:{"font-size":".8rem"},color:"blue"},{default:l(()=>[i(y(d.value[v].area),1)]),_:2},1024)):u("",!0)])):u("",!0),n.dataIndex==="estado"?(s(),p("div",Ae,[d.value[v].estado==1?(s(),p("div",Ne,[o(k,{color:"green"},{default:l(()=>e[10]||(e[10]=[i("Si")])),_:1})])):u("",!0),d.value[v].estado==0?(s(),p("div",ze,[o(k,{color:"red"},{default:l(()=>e[11]||(e[11]=[i("No")])),_:1})])):u("",!0)])):u("",!0),n.dataIndex==="acciones"?(s(),p(R,{key:5},[o(m,{type:"",onClick:D=>K(f),style:{"border-radius":"4px",background:"none",color:"green"},size:"small"},{icon:l(()=>[o(g(_e))]),_:2},1032,["onClick"]),o(m,{type:"",onClick:D=>M(f),style:{"border-radius":"4px",background:"none",color:"gray"},size:"small"},{icon:l(()=>[o(g(fe))]),_:2},1032,["onClick"]),o(m,{class:"",onClick:D=>L(f),style:{"border-radius":"4px",background:"none",color:"red"},shape:"",size:"small"},{icon:l(()=>[o(g(ge))]),_:2},1032,["onClick"])],64)):u("",!0)]),_:1},8,["data-source"])]),c("div",Ve,[o(H,{current:I.value,"onUpdate:current":e[1]||(e[1]=n=>I.value=n),simple:"","page-size":"50",total:E.value},null,8,["current","total"])])])]),_:1}),c("div",null,[o(Q,{visible:_.value,"onUpdate:visible":e[8]||(e[8]=n=>_.value=n),title:t.value.id==null?"Nuevo Programa":"Editar Programa",style:{"margin-top":"-40px"}},{footer:l(()=>[o(m,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:l(()=>e[15]||(e[15]=[i("Cancelar")])),_:1},8,["onClick"]),o(m,{type:"primary",onClick:e[7]||(e[7]=n=>j())},{default:l(()=>e[16]||(e[16]=[i("Guardar")])),_:1})]),default:l(()=>[o(Z,ae({ref:"formRef",name:"custom-validation",model:a.formState,rules:a.rules},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:l(()=>[o(C,{"has-feedback":"",label:"Codigo",name:"codigo"},{default:l(()=>[o(F,{type:"text",value:t.value.codigo,"onUpdate:value":e[2]||(e[2]=n=>t.value.codigo=n),autocomplete:"off"},null,8,["value"])]),_:1}),o(C,{"has-feedback":"",label:"Nombre",name:"nombre"},{default:l(()=>[o(F,{type:"text",value:t.value.nombre,"onUpdate:value":e[3]||(e[3]=n=>t.value.nombre=n),autocomplete:"off"},null,8,["value"])]),_:1}),o(C,{"has-feedback":"",label:"Facultad",name:"facultad"},{default:l(()=>[o(V,{options:A.value,ref:"Tipo",style:{width:"100%"},onFocus:a.focus,onChange:a.handleChange,value:t.value.id_facultad,"onUpdate:value":e[4]||(e[4]=n=>t.value.id_facultad=n)},null,8,["options","onFocus","onChange","value"])]),_:1}),o(C,{"has-feedback":"",label:"Area",name:"area"},{default:l(()=>[o(V,{style:{width:"100%"},onFocus:a.focus,onChange:a.handleChange,value:t.value.area,"onUpdate:value":e[5]||(e[5]=n=>t.value.area=n)},{default:l(()=>[o(S,{value:"BIOMÉDICAS"},{default:l(()=>e[12]||(e[12]=[i(" BIOMEDICAS ")])),_:1}),o(S,{value:"INGENIERÍAS"},{default:l(()=>e[13]||(e[13]=[i(" INGENIERÍAS ")])),_:1}),o(S,{value:"SOCIALES"},{default:l(()=>e[14]||(e[14]=[i(" SOCIALES ")])),_:1})]),_:1},8,["onFocus","onChange","value"])]),_:1}),o(C,{"has-feedback":"",label:"Vigente",name:"estado"},{default:l(()=>[o(J,{checked:t.value.estado,"onUpdate:checked":e[6]||(e[6]=n=>t.value.estado=n)},null,8,["checked"])]),_:1})]),_:1},16,["model","rules","onFinish","onValidate","onFinishFailed"])]),_:1},8,["visible","title"])])],64)}}};export{Xe as default};
