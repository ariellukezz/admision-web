import{r as c,C,e as g,D as I,o as m,c as _,a as o,u as N,w as s,F as y,y as T,Z as V,d as a,s as j,t as p,b as $,f as M,a6 as O,B as z,a7 as A,a8 as G,a9 as H,h as P}from"./app-02daa48e.js";import{_ as Y}from"./AuthenticatedLayout-0d088217.js";import"./logotiny-c4b525af.js";import"./Header-71d983ce.js";import"./AntdIcon-666c3050.js";import"./DownOutlined-b680cb82.js";/* empty css                                                            */const Z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4 pr-0"},q={class:"checkbox-group-container"},J={style:{"margin-top":"-10px"}},K={class:"totales-mini"},Q={class:"area"},W={class:"valor"},X={class:"mt-4 bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 245px)"}},tt={class:"mr-3"},et={style:{}},at={style:{"font-weight":"bold",color:"#476175"}},dt={__name:"biometrico",setup(ot){const h=c(""),f=c(1),R=c(0),v=c([]),r=c(["area"]),w=c([]),B=C(()=>v.value.reduce((e,t)=>e+t.total,0)),x=[{label:"Área",value:"area"},{label:"Programa",value:"programa"},{label:"Modalidad",value:"modalidad"},{label:"Sexo",value:"sexo"},{label:"Usuario",value:"usuario"}],S=C(()=>[...r.value.map(e=>{const t=x.find(u=>u.value===e);return{title:t?t.label:e,dataIndex:e,key:e,align:"left"}}),{title:"Total",dataIndex:"total",key:"total",align:"center",width:"90px"}]),i=async()=>{try{let e=await T.post("resumen-biometrico",{group_by:r.value,term:h.value});v.value=e.data.data,w.value=e.data.total_esperado,R.value=e.data.datos.total}catch{}};g(r,()=>{i()}),g(f,()=>{i()});let k;g(h,()=>{clearTimeout(k),k=setTimeout(()=>{f.value=1,i()},500)});const D=async()=>{try{const e=await T.post("resumen-biometrico",{descargar:1,group_by:r.value},{responseType:"blob"});if(e.status!==200)throw new Error("Error al obtener el archivo");const t=new Date,b=`${`${t.getDate().toString().padStart(2,"0")}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getFullYear()}_${t.getHours().toString().padStart(2,"0")}-${t.getMinutes().toString().padStart(2,"0")}-${t.getSeconds().toString().padStart(2,"0")}`}_resumen_control_biometrico.pdf`,d=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=d,n.setAttribute("download",b),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(d)}catch(e){console.error("Error al descargar el archivo:",e)}};return i(),(e,t)=>{const u=O,b=z,d=I("row"),n=A,U=G,E=H,F=P;return m(),_(y,null,[o(N(V),{title:"Resumen Biometrico"}),o(Y,null,{default:s(()=>[a("div",Z,[t[2]||(t[2]=a("div",{class:"mb-4"},[a("span",{style:{"font-size":"1.3rem"}},"Control biometrico")],-1)),a("div",q,[o(u,{value:r.value,"onUpdate:value":t[0]||(t[0]=l=>r.value=l),options:x},null,8,["value"])]),a("div",J,[a("div",K,[(m(!0),_(y,null,j(w.value,l=>(m(),_("div",{class:"item",key:l},[a("span",Q,p(l.area)+":",1),a("span",W,p(l.total),1)]))),128))])])]),a("div",X,[o(d,{class:"flex justify-end mb-4"},{default:s(()=>[a("div",tt,[o(b,{type:"primary",style:{"border-radius":"5px",background:"#476175",border:"none"},onClick:t[1]||(t[1]=l=>D())},{default:s(()=>t[3]||(t[3]=[$("Descargar")])),_:1})])]),_:1}),a("div",et,[o(F,{columns:S.value,"data-source":v.value,pagination:!1,size:"small",scroll:{x:200,y:"calc(100vh - 400px)"}},{bodyCell:s(({column:l,record:L})=>[l.dataIndex==="total"?(m(),_(y,{key:0},[$(p(L.total),1)],64)):M("",!0)]),summary:s(()=>[o(E,{fixed:"bottom"},{default:s(()=>[o(U,null,{default:s(()=>[o(n,{"col-span":S.value.length-1,style:{"text-align":"right"}},{default:s(()=>t[4]||(t[4]=[a("span",{style:{"font-weight":"bold",color:"#476175"}}," Total Registros: ",-1)])),_:1},8,["col-span"]),o(n,{style:{"text-align":"center"}},{default:s(()=>[a("span",at,p(B.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","data-source"])])])]),_:1})],64)}}};export{dt as default};
