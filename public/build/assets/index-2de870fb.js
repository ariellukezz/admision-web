import{r as i,x as ge,e as g,f as r,o as V,c as h,a as e,u as f,w as l,F as W,l as b,Z as Ae,d as s,b as d,S as be,y as P,E as xe,D as ye,g as Ie,n as Ee}from"./app-2caee812.js";import{A as Ce}from"./AuthenticatedLayout-400a025a.js";import{F as De}from"./FormOutlined-b7e982f4.js";import"./DropdownLink-f620decf.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logotiny-c4b525af.js";/* empty css                                                                            */import"./TeamOutlined-7b3cc0c9.js";const Se={class:"mb-4",style:{width:"100%"}},Re={class:"p-6 mb-4",style:{background:"#ffffff","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},Ne={class:"flex justify-between"},we={class:"flex justify-between",style:{position:"relative"}},Te={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Ve={style:{"margin-bottom":"-20px"}},he=s("label",null,"Departamento",-1),Pe=s("label",null,"Provincia",-1),Ue=s("label",null,"Distrito",-1),Le=s("label",null,"Gestión",-1),ke={style:{background:"white","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},Oe={class:"flex justify-between mb-6 mt-2 pr-4"},Be={clas:"",style:{scale:"0.9"}},Ge={style:{display:"flex"}},qe={key:0,style:{"font-weight":"bold","font-size":"1.1rem"}},je={key:1,style:{"font-weight":"bold","font-size":"1.1rem"}},ze={class:"flex justify-center"},Fe=s("label",null,"Cod. Modular",-1),Ze=s("label",null,[d("Nombre del colegio"),s("span",{style:{color:"red"}},"*")],-1),$e=s("label",null,[d("Cod de local"),s("span",{style:{color:"red"}},"*")],-1),Je=s("label",null,[d("Nivel"),s("span",{style:{color:"red"}},"*")],-1),Xe=s("label",null,[d("Forma"),s("span",{style:{color:"red"}},"*")],-1),Ke=s("label",null,[d("Gestión"),s("span",{style:{color:"red"}},"*")],-1),Me=s("label",null,[d("Ubicación: Dep/Prov/Dist "),s("span",{style:{color:"red"}},"*")],-1),He=s("label",null,"Dirección",-1),Qe=s("label",null,"Observación",-1),We={class:"flex justify-end"},ul={__name:"index",setup(Ye){const G=i([]),I=i(""),E=i(1),q=i(null),C=i(10),A=i(!1),U=i(null),D=i(null),L=i([]),S=i(null),x=i(!1),j=i(),R=i(),N=i(),z=i(),k=i(),O=i(),F=i(),B=i(),Z=i(),Y=a=>{n.cod_modular=a.target.value.replace(/\D/g,"")},n=ge({cod_modular:"",nombre:"",cod_local:"",nivel:"",forma:"",gestion:null,ubigeo:"",direccion:"",observacion:""}),$=i(null),ee=async()=>{x.value=!0,setTimeout(()=>{console.log("Este código se ejecutará después de 2 segundos")},1500);try{const a=await $.value.validateFields(),o=await b.post("save",n);o.status===202?(console.log(o.data.errors),x.value=!1):(ne(),A.value=!1,de("success",o.data.titulo,o.data.mensaje),x.value=!1,p())}catch(a){console.error(a),x.value=!1}},p=async()=>{b.post("get-colegios?page="+E.value,{term:I.value,paginashoja:C.value,dep:N.value,ges:S.value,prov:O.value,dist:Z.value}).then(a=>{G.value=a.data.datos.data,q.value=a.data.datos.total}).catch(a=>{a.response?console.error("Error de servidor:",a.response.data):a.request?console.error("Error de red:",a.request):console.error("Error de configuración:",a.message)})},J=async()=>{b.post("/get-ubigeo",{term:D.value}).then(a=>{L.value=a.data.datos.data,console.log("Datos recibidos:",L)}).catch(a=>{a.response?console.error("Error de servidor:",a.response.data):a.request?console.error("Error de red:",a.request):console.error("Error de configuración:",a.message)})},X=async()=>{let a=await b.post("/get-departamentos-codigo",{term:R.value});j.value=a.data.datos.data},K=async()=>{let a=await b.post("/get-provincias-codigo?page=",{departamento:N.value});z.value=a.data.datos},M=async a=>{let o=await b.post("/get-distritos-codigo?page=",{departamento:N.value,provincia:O.value});F.value=o.data.datos};g(E,(a,o)=>{p()}),g(C,(a,o)=>{p()}),g(I,(a,o)=>{p()}),g(D,(a,o)=>{a.length>=3&&J()}),g(R,(a,o)=>{a.length>=3&&X()}),g(k,(a,o)=>{a.length>=3&&K()}),g(B,(a,o)=>{a.length>=3&&M()}),g(S,(a,o)=>{a.length>=3&&p()});const le=(a,o)=>{n.ubigeo=o.key},oe=(a,o)=>{N.value=o.key,p(),K()},ae=(a,o)=>{O.value=o.key,p(),M()},te=(a,o)=>{Z.value=o.key,p()};X(),p(),J();const se=a=>{A.value=!0,n.id=a.id,n.cod_modular=a.cod_modular,n.nombre=a.nombre,n.cod_local=a.cod_local,n.gestion=a.gestion,n.forma=a.forma,n.nivel=a.nivel,n.ubigeo=a.ubigeo,U.value=a.lugar,n.direccion=a.direccion,n.observacion=a.observacion},ne=()=>{for(const a in n)n[a]=null},de=(a,o,_)=>{Ee[a]({message:o,description:_})},ue=i([{title:"Codigo",dataIndex:"id",align:"center"},{title:"Cod_Mod",dataIndex:"cod_modular"},{title:"Nombre del Colegio",dataIndex:"nombre",responsive:["xs","sm","md","lg"]},{title:"Gestión",dataIndex:"gestion",responsive:["md"]},{title:"Ubicación",dataIndex:"lugar",responsive:["lg"]},{title:"Dirección",dataIndex:"direccion",responsive:["lg"]},{title:"Acciones",dataIndex:"acciones",width:"120px",align:"center"}]);return(a,o)=>{const _=r("a-button"),m=r("a-input"),w=r("a-tooltip"),T=r("a-auto-complete"),v=r("a-form-item"),c=r("a-col"),u=r("a-select-option"),y=r("a-select"),H=r("a-row"),ie=r("a-popconfirm"),re=r("a-table"),ce=r("a-pagination"),ve=r("a-textarea"),pe=r("a-form"),me=r("row"),fe=r("a-modal");return V(),h(W,null,[e(f(Ae),{title:"Colegios"}),e(Ce,null,{default:l(()=>[s("div",Se,[s("div",Re,[s("div",Ne,[s("div",null,[e(_,{type:"primary",onClick:o[0]||(o[0]=t=>A.value=!0),style:{"border-radius":"6px",background:"#476175",border:"none"}},{default:l(()=>[d("Nuevo")]),_:1})]),s("div",we,[e(m,{type:"text",placeholder:"Buscar",value:I.value,"onUpdate:value":o[1]||(o[1]=t=>I.value=t),style:{"max-width":"300px","padding-left":"30px","border-radius":"6px"}},null,8,["value"]),s("div",Te,[e(f(be))])])]),s("div",Ve,[e(H,{gutter:[16,8],class:"mt-4"},{default:l(()=>[e(c,{xs:24,sm:12,md:12,lg:6},{default:l(()=>[he,e(v,null,{default:l(()=>[e(T,{options:j.value,onSelect:oe},{default:l(()=>[e(m,{placeholder:"Seleccione un departamento",value:R.value,"onUpdate:value":o[2]||(o[2]=t=>R.value=t)},{suffix:l(()=>[e(w,{title:"Extra information"},{default:l(()=>[e(f(P))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:12,lg:6},{default:l(()=>[Pe,e(v,null,{default:l(()=>[e(T,{options:z.value,onSelect:ae},{default:l(()=>[e(m,{placeholder:"Seleccione un departamento",value:k.value,"onUpdate:value":o[3]||(o[3]=t=>k.value=t)},{suffix:l(()=>[e(w,{title:"Extra information"},{default:l(()=>[e(f(P))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:12,lg:6},{default:l(()=>[Ue,e(v,null,{default:l(()=>[e(T,{options:F.value,onSelect:te},{default:l(()=>[e(m,{placeholder:"Seleccione un departamento",value:B.value,"onUpdate:value":o[4]||(o[4]=t=>B.value=t)},{suffix:l(()=>[e(w,{title:"Extra information"},{default:l(()=>[e(f(P))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:12,lg:6},{default:l(()=>[Le,e(v,{style:{"border-radius":"none",overflow:"hidden"}},{default:l(()=>[e(y,{value:S.value,"onUpdate:value":o[5]||(o[5]=t=>S.value=t),placeholder:"Seleccione la gestión",style:{"border-radius":"10px !important"}},{default:l(()=>[e(u,{value:null},{default:l(()=>[d("TODAS")]),_:1}),e(u,{value:"PÚBLICA DE GESTIÓN DIRECTA"},{default:l(()=>[d("PÚBLICA DE GESTIÓN DIRECTA")]),_:1}),e(u,{value:"PRIVADA"},{default:l(()=>[d("PRIVADA")]),_:1}),e(u,{value:"PÚBLICA DE GESTIÓN PRIVADA"},{default:l(()=>[d("PÚBLICA DE GESTIÓN PRIVADA")]),_:1}),e(u,{value:"EXTRANJERO"},{default:l(()=>[d("EXTRANJERA")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})])]),s("div",ke,[s("div",null,[e(re,{dataSource:G.value,size:"",columns:ue.value,pagination:!1},{bodyCell:l(({column:t,record:Q})=>[t.dataIndex==="acciones"?(V(),h(W,{key:0},[e(_,{type:"success",class:"mr-1",style:{color:"#476175"},size:"small",disabled:""},{icon:l(()=>[e(f(xe))]),_:1}),e(_,{class:"mr-1",onClick:_e=>se(Q),style:{color:"blue"},size:"small"},{icon:l(()=>[e(f(De))]),_:2},1032,["onClick"]),e(ie,{title:"¿Estas seguro de eliminar?",onConfirm:_e=>a.eliminar(Q),disabled:""},{default:l(()=>[e(_,{size:"small",style:{color:"crimson"},disabled:""},{icon:l(()=>[e(f(ye),{disabled:""})]),_:1})]),_:2},1032,["onConfirm"])],64)):Ie("",!0)]),_:1},8,["dataSource","columns"])]),s("div",Oe,[s("div",null,[e(ce,{current:E.value,"onUpdate:current":o[6]||(o[6]=t=>E.value=t),simple:"",total:q.value,"show-less-items":""},null,8,["current","total"])]),s("div",Be,[e(y,{value:C.value,"onUpdate:value":o[7]||(o[7]=t=>C.value=t),style:{width:"90px"}},{default:l(()=>[e(u,{value:10},{default:l(()=>[d("10 Reg.")]),_:1}),e(u,{value:20},{default:l(()=>[d("20 Reg.")]),_:1}),e(u,{value:50},{default:l(()=>[d("50 Reg.")]),_:1}),e(u,{value:100},{default:l(()=>[d("100 Reg.")]),_:1})]),_:1},8,["value"])])])])]),e(fe,{visible:A.value,"onUpdate:visible":o[20]||(o[20]=t=>A.value=t),footer:!1,centered:"",style:{width:"100%","max-width":"900px"}},{default:l(()=>[s("div",Ge,[n.id===null?(V(),h("span",qe,"Nuevo Colegio")):(V(),h("span",je,"Editar Colegio"))]),s("div",ze,[e(me,{style:{display:"flex","justify-content":"center"}},{default:l(()=>[e(c,{span:24},{default:l(()=>[e(pe,{ref_key:"formDatos",ref:$,name:"form",model:n,rules:a.formRules},{default:l(()=>[e(H,{gutter:16,class:"mt-3"},{default:l(()=>[e(c,{xs:24,sm:12,md:8,lg:8},{default:l(()=>[Fe,e(v,{name:"cod_modular",rules:[{required:!0,message:"Ingrese el cod modular"},{min:7,message:"Debe tener 7 digitos",trigger:"blur"}]},{default:l(()=>[e(m,{value:n.cod_modular,"onUpdate:value":o[8]||(o[8]=t=>n.cod_modular=t),onInput:Y,maxlength:7},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:16},{default:l(()=>[Ze,e(v,{name:"nombre",rules:[{required:!0,message:"Ingrese el nombre del colegio"}]},{default:l(()=>[e(m,{value:n.nombre,"onUpdate:value":o[9]||(o[9]=t=>n.nombre=t)},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:8},{default:l(()=>[$e,e(v,{name:"cod_local",rules:[{required:!0,message:"Ingrese el codigo del local"}]},{default:l(()=>[e(m,{value:n.cod_local,"onUpdate:value":o[10]||(o[10]=t=>n.cod_local=t)},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:8},{default:l(()=>[Je,e(v,{name:"nivel",rules:[{required:!0,message:"Seleccione el nivel"}]},{default:l(()=>[e(y,{value:n.nivel,"onUpdate:value":o[11]||(o[11]=t=>n.nivel=t),style:{width:"100%"}},{default:l(()=>[e(u,{value:"SECUNDARIA"},{default:l(()=>[d("SECUNDARIA")]),_:1}),e(u,{value:"BASICA ALTERNATIVA"},{default:l(()=>[d("BASICA ALTERNATIVA")]),_:1}),e(u,{value:"BASICA ALTERNATIVA AVANZADO"},{default:l(()=>[d("BASICA ALTERNATIVA AVANZADO")]),_:1}),e(u,{value:"BÁSICA ALTERNATIVA SECUNDARIA"},{default:l(()=>[d("BÁSICA ALTERNATIVA SECUNDARIA")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:8},{default:l(()=>[Xe,e(v,{name:"nivel",rules:[{required:!0,message:"Seleccione el nivel"}]},{default:l(()=>[e(y,{value:n.forma,"onUpdate:value":o[12]||(o[12]=t=>n.forma=t),style:{width:"100%"}},{default:l(()=>[e(u,{value:"ESCOLARIZADA"},{default:l(()=>[d("ESCOLARIZADA")]),_:1}),e(u,{value:"NO ESCOLARIZADA"},{default:l(()=>[d("NO ESCOLARIZADA")]),_:1}),e(u,{value:"NO APLICA"},{default:l(()=>[d("NO APLICA")]),_:1}),e(u,{value:"PRESENCIAL"},{default:l(()=>[d("PRESENCIAL")]),_:1}),e(u,{value:"A DISTANCIA"},{default:l(()=>[d("A DISTANCIA")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:8},{default:l(()=>[Ke,e(v,{name:"gestion",rules:[{required:!0,message:"Selecciona la gestión"}]},{default:l(()=>[e(y,{value:n.gestion,"onUpdate:value":o[13]||(o[13]=t=>n.gestion=t),style:{width:"100%"}},{default:l(()=>[e(u,{value:"PÚBLICA DE GESTIÓN DIRECTA"},{default:l(()=>[d("PÚBLICA DE GESTIÓN DIRECTA")]),_:1}),e(u,{value:"PRIVADA"},{default:l(()=>[d("PRIVADA")]),_:1}),e(u,{value:"PÚBLICA DE GESTIÓN PRIVADA"},{default:l(()=>[d("PÚBLICA DE GESTIÓN PRIVADA")]),_:1}),e(u,{value:"EXTRANJERO"},{default:l(()=>[d("EXTRANJERA")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:24,md:24,lg:12},{default:l(()=>[Me,e(v,{name:"ubigeo"},{default:l(()=>[e(T,{value:U.value,"onUpdate:value":o[15]||(o[15]=t=>U.value=t),options:L.value,onSelect:le},{default:l(()=>[e(m,{placeholder:"Lugar",value:D.value,"onUpdate:value":o[14]||(o[14]=t=>D.value=t),onKeypress:a.handleKeyPress},{suffix:l(()=>[e(w,{title:"Extra information"},{default:l(()=>[e(f(P))]),_:1})]),_:1},8,["value","onKeypress"])]),_:1},8,["value","options"])]),_:1})]),_:1}),e(c,{xs:24,sm:24,md:24,lg:12},{default:l(()=>[He,e(v,{name:"direccion"},{default:l(()=>[e(m,{value:n.direccion,"onUpdate:value":o[16]||(o[16]=t=>n.direccion=t)},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:24,md:24,lg:24},{default:l(()=>[Qe,e(v,{name:"observacion"},{default:l(()=>[e(ve,{value:n.observacion,"onUpdate:value":o[17]||(o[17]=t=>n.observacion=t)},null,8,["value"])]),_:1})]),_:1})]),_:1}),s("div",We,[s("div",null,[e(_,{type:"primary",class:"mr-2",onClick:o[18]||(o[18]=t=>A.value=!1),style:{"border-radius":"6px",background:"none",color:"#476175",border:"1px solid #476175"}},{default:l(()=>[d("Cancelar")]),_:1}),e(_,{type:"primary",onClick:o[19]||(o[19]=t=>ee()),style:{"border-radius":"6px",background:"#476175",border:"none"},loading:x.value},{default:l(()=>[d("Guardar")]),_:1},8,["loading"])])])]),_:1},8,["model","rules"])]),_:1})]),_:1})])]),_:1},8,["visible"])]),_:1})],64)}}};export{ul as default};
