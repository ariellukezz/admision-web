import{r as m,e as de,f as c,o as l,c as d,d as u,a as t,w as a,b as r,t as C,s as x,g as i,k as ue,j as pe,l as B,u as _,S as me,F as O,D as H,a8 as X,n as ve}from"./app-9aa07da6.js";import{S as Y}from"./SaveOutlined-f97ec131.js";import{F as G}from"./FormOutlined-867f3a96.js";const _e={class:"pl-4",style:{background:"white",width:"100%","min-height":"calc(100vh - 190px)","border-radius":"12px"}},fe={class:"flex justify-between mt-2"},xe={style:{color:"#0000009d","margin-top":"-6px"}},ge={key:0,class:"mt-3 mb-3",style:{"margin-left":"-5px"}},ye={key:0},he=["onDblclick"],be={key:2,class:"flex",style:{"justify-content":"center"}},ke={key:0},Ce={key:1},Ie={key:2},we={key:1,class:"mt-3 mb-3",style:{"margin-left":"-5px"}},$e={key:0},Se={class:"flex justify-between mt-4 mb-4 ml-1"},De={class:"justify-end mb-4"},Ee={class:"ant-upload-drag-icon"},ze=u("p",{class:"ant-upload-text",style:{width:"100%"}},"Haz clic o arrastra archivos a esta área para cargar",-1),Ne=u("p",{class:"ant-upload-hint"}," Soporte para carga única o múltiple. Prohibido subir datos de la empresa u otros archivos prohibidos. ",-1),Be=u("div",{style:{"margin-top":"0px"}}," Cargar archivos ",-1),Oe=u("div",{style:{"margin-top":"0px"}}," Nuevos Ides ",-1),je=u("div",{style:{"margin-top":"0px"}}," selees ",-1),Te={__name:"leer-ide",props:["proceso"],setup(I){const j=window.location.origin,b=m([]),y=m("contenido"),A=I,w=m(!1),$=m(1),J=e=>{const o=e.file.status;o!=="uploading"&&console.log(e.file,b.value),o==="done"?(X.success(`${e.file.name} archivo(s) subido(s) exitosamente.`),D()):o==="error"&&X.error(`${e.file.name} falló al subir.`)},K=()=>{b.value=null},k=m(!1),L=m(0),M=m(0),Q=e=>{k.value=!0,L.value=e.clientY,M.value=e.clientX,e.preventDefault()},S=e=>{e==="1"&&(w.value=!0,k.value=!1)},W=e=>{k.value=!1},T=m([]),U=m([]),h=m(""),D=async()=>{B.post("/get-archivos",{term:h.value,proceso:A.proceso}).then(e=>{T.value=e.data.datos.data}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})},V=async()=>{B.post("/get-ides",{term:h.value,proceso:A.proceso}).then(e=>{U.value=e.data.datos.data}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})};let q;de(h,(e,o)=>{clearTimeout(q),q=setTimeout(()=>{V()},300)}),D(),V();const Z=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"Tipo",dataIndex:"tipo",align:"center",width:"100px"},{title:"Nombre",dataIndex:"nombre"},{title:"Area",dataIndex:"area"},{title:"Fecha",dataIndex:"fecha",align:"center"},{title:"Registros",dataIndex:"registros",align:"center"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}],ee=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"N° lectura",dataIndex:"camp2",align:"center"},{title:"DNI",dataIndex:"dni",align:"center"},{title:"Aula",dataIndex:"aula",width:"60px",align:"center"},{title:"Tip",dataIndex:"tipo",width:"60px",align:"center"},{title:"Litho",dataIndex:"litho",align:"center"},{title:"Observaciones",dataIndex:"observaciones",align:"center"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}],F=e=>{B.get("eliminar-archivo/"+e.id).then(o=>{D(),te("error",o.data.titulo,o.data.mensaje)})},te=(e,o,p)=>{ve[e]({message:o,description:p})},ae=e=>{const o=j+"/pdf-errores/"+e,p=document.createElement("a");p.href=o,p.download="observaciones.pdf",document.body.appendChild(p),p.click(),document.body.removeChild(p)};return(e,o)=>{const p=c("a-radio-button"),oe=c("a-radio-group"),se=c("a-input"),v=c("a-tag"),f=c("a-button"),P=c("a-popconfirm"),R=c("a-table"),E=c("a-select-option"),ne=c("a-select"),le=c("inbox-outlined"),ie=c("a-upload-dragger"),re=c("a-modal"),z=c("a-menu-item"),ce=c("a-menu");return l(),d("div",{style:{},onClick:W,onContextmenu:pe(Q,["prevent"])},[u("div",_e,[u("div",fe,[t(oe,{value:y.value,"onUpdate:value":o[0]||(o[0]=s=>y.value=s),style:{"margin-left":"-3px"}},{default:a(()=>[t(p,{value:"contenido",style:{"border-radius":"9px 0px 0px 9px"}},{default:a(()=>[r("ide")]),_:1}),t(p,{value:"archivos",style:{"border-radius":"0px 9px 9px 0px"}},{default:a(()=>[r("file")]),_:1})]),_:1},8,["value"]),r(" "+C(y.value)+" ",1),t(se,{value:h.value,"onUpdate:value":o[1]||(o[1]=s=>h.value=s),style:{"max-width":"260px","border-radius":"6px",height:"32px"},placeholder:"Buscar"},{prefix:a(()=>[u("span",xe,[t(_(me))])]),_:1},8,["value"])]),y.value==="archivos"?(l(),d("div",ge,[(l(),x(R,{columns:Z,"data-source":T.value,key:e.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:a(({column:s,index:N,record:n})=>[s.dataIndex==="nro"?(l(),d("span",ye,C(N+1),1)):i("",!0),s.dataIndex==="nombre"?(l(),d("div",{key:1,style:{width:"100%",cursor:"pointer"},onDblclick:g=>e.customRow(n)},[u("span",null,C(n.nombre),1)],40,he)):i("",!0),s.dataIndex==="area"?(l(),d("div",be,[n.area===1?(l(),d("div",ke,[t(v,{color:"cyan"},{default:a(()=>[r("Biomedicas")]),_:1})])):i("",!0),n.area===2?(l(),d("div",Ce,[t(v,{color:"orange"},{default:a(()=>[r("Ingenierías")]),_:1})])):i("",!0),n.area===3?(l(),d("div",Ie,[t(v,{color:"purple"},{default:a(()=>[r("Sociales")]),_:1})])):i("",!0)])):i("",!0),s.dataIndex==="acciones"?(l(),d(O,{key:3},[t(f,{type:"success",class:"mr-1",style:{color:"#476175"},onClick:g=>e.cambiarSexo(n.id_postulante,n.sexo),size:"small"},{icon:a(()=>[t(_(Y))]),_:2},1032,["onClick"]),t(f,{onClick:g=>e.abrirEditar(n),class:"mr-1",style:{color:"blue"},size:"small"},{icon:a(()=>[t(_(G))]),_:2},1032,["onClick"]),t(P,{title:"¿Estas seguro de eliminar?",onConfirm:g=>F(n)},{default:a(()=>[t(f,{shape:"",size:"small",style:{color:"crimson"}},{icon:a(()=>[t(_(H))]),_:1})]),_:2},1032,["onConfirm"])],64)):i("",!0)]),_:1},8,["data-source"]))])):i("",!0),y.value==="contenido"?(l(),d("div",we,[(l(),x(R,{columns:ee,"data-source":U.value,key:e.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:a(({column:s,index:N,record:n})=>[s.dataIndex==="nro"?(l(),d("span",$e,C(N+1),1)):i("",!0),s.dataIndex==="observaciones"?(l(),d(O,{key:1},[n.dni===null?(l(),x(v,{key:0,color:"pink"},{default:a(()=>[r(" Sin DNI")]),_:1})):i("",!0),n.aula===""?(l(),x(v,{key:1,color:"purple"},{default:a(()=>[r(" Sin aula")]),_:1})):i("",!0),n.len_doc!==8&&n.dni!==null?(l(),x(v,{key:2,color:"green"},{default:a(()=>[r(" Dni erroneo")]),_:1})):i("",!0),n.vaula===0&&n.aula!==""?(l(),x(v,{key:3,color:"blue"},{default:a(()=>[r(" Error de aula")]),_:1})):i("",!0),n.tipo===""?(l(),x(v,{key:4,color:"yellow"},{default:a(()=>[r(" Sin tipo")]),_:1})):i("",!0)],64)):i("",!0),s.dataIndex==="acciones"?(l(),d(O,{key:2},[t(f,{type:"success",class:"mr-1",style:{color:"#476175"},onClick:g=>e.cambiarSexo(n.id_postulante,n.sexo),size:"small"},{icon:a(()=>[t(_(Y))]),_:2},1032,["onClick"]),t(f,{onClick:g=>e.abrirEditar(n),class:"mr-1",style:{color:"blue"},size:"small"},{icon:a(()=>[t(_(G))]),_:2},1032,["onClick"]),t(P,{title:"¿Estas seguro de eliminar?",onConfirm:g=>F(n)},{default:a(()=>[t(f,{shape:"",size:"small",style:{color:"crimson"}},{icon:a(()=>[t(_(H))]),_:1})]),_:2},1032,["onConfirm"])],64)):i("",!0)]),_:1},8,["data-source"])),u("div",Se,[t(f,{type:"primary",style:{background:"#476175",border:"none","border-radius":"4px"},onClick:o[2]||(o[2]=s=>ae(I.proceso))},{default:a(()=>[r("Descargar observaciones")]),_:1})])])):i("",!0),t(re,{visible:w.value,"onUpdate:visible":o[5]||(o[5]=s=>w.value=s),title:"Cargar fichas de identificación",onOk:K,centered:!0,style:{"max-height":"calc(100vh - 100px)","overflow-x":"scroll",cursor:"pointer"}},{default:a(()=>[u("div",De,[t(ne,{class:"mb-2",style:{width:"100%"},value:$.value,"onUpdate:value":o[3]||(o[3]=s=>$.value=s)},{default:a(()=>[t(E,{value:1},{default:a(()=>[r("Biomédicas")]),_:1}),t(E,{value:2},{default:a(()=>[r("Ingenierías")]),_:1}),t(E,{value:3},{default:a(()=>[r("Sociales")]),_:1})]),_:1},8,["value"])]),t(ie,{fileList:b.value,"onUpdate:fileList":o[4]||(o[4]=s=>b.value=s),name:"file",multiple:!0,action:_(j)+"/calificacion/carga-ide/"+I.proceso+"/"+$.value,onChange:J,onDrop:e.handleDrop,"list-type":"picture"},{default:a(()=>[u("p",Ee,[t(le)]),ze,Ne]),_:1},8,["fileList","action","onDrop"])]),_:1},8,["visible"])]),k.value?(l(),d("div",{key:0,style:ue([{position:"absolute",border:"solid 1px #d9d9d943","padding-top":"0px","border-radius":"8px",overflow:"hidden"},{top:`${L.value}px`,left:`${M.value}px`}])},[t(ce,{size:"small",style:{"margin-top":"-4px","margin-bottom":"-4px"}},{default:a(()=>[t(z,{key:"1",class:"selec-menu",onClick:o[6]||(o[6]=s=>S("1"))},{default:a(()=>[Be]),_:1}),t(z,{key:"2",class:"selec-menu",onClick:o[7]||(o[7]=s=>S("2"))},{default:a(()=>[Oe]),_:1}),t(z,{key:"2",class:"selec-menu",onClick:o[8]||(o[8]=s=>S("2"))},{default:a(()=>[je]),_:1})]),_:1})],4)):i("",!0)],32)}}};export{Te as default};
