import{r as u,x as ge,e as g,f as r,o as V,c as h,a as e,u as _,w as l,F as W,l as x,Z as be,d as s,b as d,S as xe,y as U,E as Ae,D as ye,g as Ie,n as Ee}from"./app-deedab26.js";import{L as De}from"./LayoutSimulacro-50a5210d.js";import{F as Ce}from"./FormOutlined-4b523b75.js";import"./DropdownLink-4f220eed.js";import"./logotiny-c4b525af.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./TopMenu-42114d6e.js";const Re={class:"mb-4",style:{width:"100%"}},Se={class:"p-6 mb-4",style:{background:"#ffffff","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},we={class:"flex justify-between"},Ne={class:"flex justify-between",style:{position:"relative"}},Te={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Ve={style:{"margin-bottom":"-20px"}},he=s("label",null,"Departamento",-1),Ue=s("label",null,"Provincia",-1),Pe=s("label",null,"Distrito",-1),ke=s("label",null,"Gestión",-1),Be={style:{background:"white","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},Le={class:"flex justify-between mb-6 mt-2 pr-4"},Ge={clas:"",style:{scale:"0.9"}},Oe={style:{display:"flex"}},je={key:0,style:{"font-weight":"bold","font-size":"1.1rem"}},qe={key:1,style:{"font-weight":"bold","font-size":"1.1rem"}},ze={class:"flex justify-center"},Fe=s("label",null,"Cod. Modular",-1),$e=s("label",null,[d("Nombre del colegio"),s("span",{style:{color:"red"}},"*")],-1),Je=s("label",null,[d("Cod de local"),s("span",{style:{color:"red"}},"*")],-1),Xe=s("label",null,[d("Nivel"),s("span",{style:{color:"red"}},"*")],-1),Ke=s("label",null,[d("Gestión"),s("span",{style:{color:"red"}},"*")],-1),Ze=s("label",null,[d("Ubicación: Dep/Prov/Dist "),s("span",{style:{color:"red"}},"*")],-1),Me=s("label",null,"Dirección",-1),He=s("label",null,"Observación",-1),Qe={class:"flex justify-end"},dl={__name:"index",setup(We){const O=u([]),y=u(""),I=u(1),j=u(null),E=u(10),b=u(!1),P=u(null),D=u(null),k=u([]),C=u(null),A=u(!1),q=u(),R=u(),S=u(),z=u(),B=u(),L=u(),F=u(),G=u(),$=u(),Y=a=>{n.cod_modular=a.target.value.replace(/\D/g,"")},n=ge({cod_modular:"",nombre:"",cod_local:"",nivel:"",gestion:null,ubigeo:"",direccion:"",observacion:""}),J=u(null),ee=async()=>{A.value=!0,setTimeout(()=>{console.log("Este código se ejecutará después de 2 segundos")},1500);try{const a=await J.value.validateFields(),o=await x.post("save",n);o.status===202?(console.log(o.data.errors),A.value=!1):(ne(),b.value=!1,de("success",o.data.titulo,o.data.mensaje),A.value=!1,p())}catch(a){console.error(a),A.value=!1}},p=async()=>{x.post("get-colegios?page="+I.value,{term:y.value,paginashoja:E.value,dep:S.value,ges:C.value,prov:L.value,dist:$.value}).then(a=>{O.value=a.data.datos.data,j.value=a.data.datos.total}).catch(a=>{a.response?console.error("Error de servidor:",a.response.data):a.request?console.error("Error de red:",a.request):console.error("Error de configuración:",a.message)})},X=async()=>{x.post("/get-ubigeo",{term:D.value}).then(a=>{k.value=a.data.datos.data,console.log("Datos recibidos:",k)}).catch(a=>{a.response?console.error("Error de servidor:",a.response.data):a.request?console.error("Error de red:",a.request):console.error("Error de configuración:",a.message)})},K=async()=>{let a=await x.post("/get-departamentos-codigo",{term:R.value});q.value=a.data.datos.data},Z=async()=>{let a=await x.post("/get-provincias-codigo?page=",{departamento:S.value});z.value=a.data.datos},M=async a=>{let o=await x.post("/get-distritos-codigo?page=",{departamento:S.value,provincia:L.value});F.value=o.data.datos};g(I,(a,o)=>{p()}),g(E,(a,o)=>{p()}),g(y,(a,o)=>{p()}),g(D,(a,o)=>{a.length>=3&&X()}),g(R,(a,o)=>{a.length>=3&&K()}),g(B,(a,o)=>{a.length>=3&&Z()}),g(G,(a,o)=>{a.length>=3&&M()}),g(C,(a,o)=>{a.length>=3&&p()});const le=(a,o)=>{n.ubigeo=o.key},oe=(a,o)=>{S.value=o.key,p(),Z()},ae=(a,o)=>{L.value=o.key,p(),M()},te=(a,o)=>{$.value=o.key,p()};K(),p(),X();const se=a=>{b.value=!0,n.id=a.id,n.cod_modular=a.cod_modular,n.nombre=a.nombre,n.cod_local=a.cod_local,n.gestion=a.gestion,n.nivel=a.nivel,n.ubigeo=a.ubigeo,P.value=a.lugar,n.direccion=a.direccion,n.observacion=a.observacion},ne=()=>{for(const a in n)n[a]=null},de=(a,o,f)=>{Ee[a]({message:o,description:f})},ue=u([{title:"Cod_Mod",dataIndex:"cod_modular"},{title:"Nombre del Colegio",dataIndex:"nombre",responsive:["xs","sm","md","lg"]},{title:"Gestión",dataIndex:"gestion",responsive:["md"]},{title:"Ubicación",dataIndex:"lugar",responsive:["lg"]},{title:"Dirección",dataIndex:"direccion",responsive:["lg"]},{title:"Acciones",dataIndex:"acciones",width:"120px",align:"center"}]);return(a,o)=>{const f=r("a-button"),m=r("a-input"),w=r("a-tooltip"),N=r("a-auto-complete"),v=r("a-form-item"),c=r("a-col"),i=r("a-select-option"),T=r("a-select"),H=r("a-row"),ie=r("a-popconfirm"),re=r("a-table"),ce=r("a-pagination"),ve=r("a-textarea"),pe=r("a-form"),me=r("row"),_e=r("a-modal");return V(),h(W,null,[e(_(be),{title:"Colegios"}),e(De,null,{default:l(()=>[s("div",Re,[s("div",Se,[s("div",we,[s("div",null,[e(f,{type:"primary",onClick:o[0]||(o[0]=t=>b.value=!0),style:{"border-radius":"6px",background:"#476175",border:"none"}},{default:l(()=>[d("Nuevo")]),_:1})]),s("div",Ne,[e(m,{type:"text",placeholder:"Buscar",value:y.value,"onUpdate:value":o[1]||(o[1]=t=>y.value=t),style:{"max-width":"300px","padding-left":"30px","border-radius":"6px"}},null,8,["value"]),s("div",Te,[e(_(xe))])])]),s("div",Ve,[e(H,{gutter:[16,8],class:"mt-4"},{default:l(()=>[e(c,{xs:24,sm:12,md:12,lg:6},{default:l(()=>[he,e(v,null,{default:l(()=>[e(N,{options:q.value,onSelect:oe},{default:l(()=>[e(m,{placeholder:"Seleccione un departamento",value:R.value,"onUpdate:value":o[2]||(o[2]=t=>R.value=t)},{suffix:l(()=>[e(w,{title:"Extra information"},{default:l(()=>[e(_(U))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:12,lg:6},{default:l(()=>[Ue,e(v,null,{default:l(()=>[e(N,{options:z.value,onSelect:ae},{default:l(()=>[e(m,{placeholder:"Seleccione un departamento",value:B.value,"onUpdate:value":o[3]||(o[3]=t=>B.value=t)},{suffix:l(()=>[e(w,{title:"Extra information"},{default:l(()=>[e(_(U))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:12,lg:6},{default:l(()=>[Pe,e(v,null,{default:l(()=>[e(N,{options:F.value,onSelect:te},{default:l(()=>[e(m,{placeholder:"Seleccione un departamento",value:G.value,"onUpdate:value":o[4]||(o[4]=t=>G.value=t)},{suffix:l(()=>[e(w,{title:"Extra information"},{default:l(()=>[e(_(U))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:12,lg:6},{default:l(()=>[ke,e(v,{style:{"border-radius":"none",overflow:"hidden"}},{default:l(()=>[e(T,{value:C.value,"onUpdate:value":o[5]||(o[5]=t=>C.value=t),placeholder:"Seleccione la gestión",style:{"border-radius":"10px !important"}},{default:l(()=>[e(i,{value:null},{default:l(()=>[d("TODAS")]),_:1}),e(i,{value:"PÚBLICA DE GESTIÓN DIRECTA"},{default:l(()=>[d("PÚBLICA DE GESTIÓN DIRECTA")]),_:1}),e(i,{value:"PRIVADA"},{default:l(()=>[d("PRIVADA")]),_:1}),e(i,{value:"PÚBLICA DE GESTIÓN PRIVADA"},{default:l(()=>[d("PÚBLICA DE GESTIÓN PRIVADA")]),_:1}),e(i,{value:"EXTRANJERO"},{default:l(()=>[d("EXTRANJERA")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})])]),s("div",Be,[s("div",null,[e(re,{dataSource:O.value,size:"",columns:ue.value,pagination:!1},{bodyCell:l(({column:t,index:Ye,record:Q})=>[t.dataIndex==="acciones"?(V(),h(W,{key:0},[e(f,{type:"success",class:"mr-1",style:{color:"#476175"},size:"small",disabled:""},{icon:l(()=>[e(_(Ae))]),_:1}),e(f,{class:"mr-1",onClick:fe=>se(Q),style:{color:"blue"},size:"small"},{icon:l(()=>[e(_(Ce))]),_:2},1032,["onClick"]),e(ie,{title:"¿Estas seguro de eliminar?",onConfirm:fe=>a.eliminar(Q),disabled:""},{default:l(()=>[e(f,{size:"small",style:{color:"crimson"},disabled:""},{icon:l(()=>[e(_(ye),{disabled:""})]),_:1})]),_:2},1032,["onConfirm"])],64)):Ie("",!0)]),_:1},8,["dataSource","columns"])]),s("div",Le,[s("div",null,[e(ce,{current:I.value,"onUpdate:current":o[6]||(o[6]=t=>I.value=t),simple:"",total:j.value,"show-less-items":""},null,8,["current","total"])]),s("div",Ge,[e(T,{value:E.value,"onUpdate:value":o[7]||(o[7]=t=>E.value=t),style:{width:"90px"}},{default:l(()=>[e(i,{value:10},{default:l(()=>[d("10 Reg.")]),_:1}),e(i,{value:20},{default:l(()=>[d("20 Reg.")]),_:1}),e(i,{value:50},{default:l(()=>[d("50 Reg.")]),_:1}),e(i,{value:100},{default:l(()=>[d("100 Reg.")]),_:1})]),_:1},8,["value"])])])])]),e(_e,{visible:b.value,"onUpdate:visible":o[19]||(o[19]=t=>b.value=t),footer:!1,centered:"",style:{width:"100%","max-width":"900px"}},{default:l(()=>[s("div",Oe,[n.id===null?(V(),h("span",je,"Nuevo Colegio")):(V(),h("span",qe,"Editar Colegio"))]),s("div",ze,[e(me,{style:{display:"flex","justify-content":"center"}},{default:l(()=>[e(c,{span:24},{default:l(()=>[e(pe,{ref_key:"formDatos",ref:J,name:"form",model:n,rules:a.formRules},{default:l(()=>[e(H,{gutter:16,class:"mt-3"},{default:l(()=>[e(c,{xs:24,sm:12,md:8,lg:8},{default:l(()=>[Fe,e(v,{name:"cod_modular",rules:[{required:!0,message:"Ingrese el cod modular"},{min:7,message:"Debe tener 7 digitos",trigger:"blur"}]},{default:l(()=>[e(m,{value:n.cod_modular,"onUpdate:value":o[8]||(o[8]=t=>n.cod_modular=t),onInput:Y,maxlength:7},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:16},{default:l(()=>[$e,e(v,{name:"nombre",rules:[{required:!0,message:"Ingrese el nombre del colegio"}]},{default:l(()=>[e(m,{value:n.nombre,"onUpdate:value":o[9]||(o[9]=t=>n.nombre=t)},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:8},{default:l(()=>[Je,e(v,{name:"cod_local",rules:[{required:!0,message:"Ingrese el codigo del local"}]},{default:l(()=>[e(m,{value:n.cod_local,"onUpdate:value":o[10]||(o[10]=t=>n.cod_local=t)},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:8},{default:l(()=>[Xe,e(v,{name:"nivel",rules:[{required:!0,message:"Seleccione el nivel"}]},{default:l(()=>[e(T,{value:n.nivel,"onUpdate:value":o[11]||(o[11]=t=>n.nivel=t),style:{width:"100%"}},{default:l(()=>[e(i,{value:"SECUNDARIA"},{default:l(()=>[d("SECUNDARIA")]),_:1}),e(i,{value:"BASICA ALTERNATIVA"},{default:l(()=>[d("BASICA ALTERNATIVA")]),_:1}),e(i,{value:"BASICA ALTERNATIVA AVANZADO"},{default:l(()=>[d("BASICA ALTERNATIVA AVANZADO")]),_:1}),e(i,{value:"BÁSICA ALTERNATIVA SECUNDARIA"},{default:l(()=>[d("BÁSICA ALTERNATIVA SECUNDARIA")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:8},{default:l(()=>[Ke,e(v,{name:"gestion",rules:[{required:!0,message:"Selecciona la gestión"}]},{default:l(()=>[e(T,{value:n.gestion,"onUpdate:value":o[12]||(o[12]=t=>n.gestion=t),style:{width:"100%"}},{default:l(()=>[e(i,{value:"PÚBLICA DE GESTIÓN DIRECTA"},{default:l(()=>[d("PÚBLICA DE GESTIÓN DIRECTA")]),_:1}),e(i,{value:"PRIVADA"},{default:l(()=>[d("PRIVADA")]),_:1}),e(i,{value:"PÚBLICA DE GESTIÓN PRIVADA"},{default:l(()=>[d("PÚBLICA DE GESTIÓN PRIVADA")]),_:1}),e(i,{value:"EXTRANJERO"},{default:l(()=>[d("EXTRANJERA")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:24,md:24,lg:12},{default:l(()=>[Ze,e(v,{name:"ubigeo"},{default:l(()=>[e(N,{value:P.value,"onUpdate:value":o[14]||(o[14]=t=>P.value=t),options:k.value,onSelect:le},{default:l(()=>[e(m,{placeholder:"Lugar",value:D.value,"onUpdate:value":o[13]||(o[13]=t=>D.value=t),onKeypress:a.handleKeyPress},{suffix:l(()=>[e(w,{title:"Extra information"},{default:l(()=>[e(_(U))]),_:1})]),_:1},8,["value","onKeypress"])]),_:1},8,["value","options"])]),_:1})]),_:1}),e(c,{xs:24,sm:24,md:24,lg:12},{default:l(()=>[Me,e(v,{name:"direccion"},{default:l(()=>[e(m,{value:n.direccion,"onUpdate:value":o[15]||(o[15]=t=>n.direccion=t)},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:24,md:24,lg:24},{default:l(()=>[He,e(v,{name:"observacion"},{default:l(()=>[e(ve,{value:n.observacion,"onUpdate:value":o[16]||(o[16]=t=>n.observacion=t)},null,8,["value"])]),_:1})]),_:1})]),_:1}),s("div",Qe,[s("div",null,[e(f,{type:"primary",class:"mr-2",onClick:o[17]||(o[17]=t=>b.value=!1),style:{"border-radius":"6px",background:"none",color:"#476175",border:"1px solid #476175"}},{default:l(()=>[d("Cancelar")]),_:1}),e(f,{type:"primary",onClick:o[18]||(o[18]=t=>ee()),style:{"border-radius":"6px",background:"#476175",border:"none"},loading:A.value},{default:l(()=>[d("Guardar")]),_:1},8,["loading"])])])]),_:1},8,["model","rules"])]),_:1})]),_:1})])]),_:1},8,["visible"])]),_:1})],64)}}};export{dl as default};
