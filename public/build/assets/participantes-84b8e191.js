import{r,e as T,f as i,o as n,c as m,a as s,u as q,d as o,j as z,w as l,F as Z,l as A,Z as G,b as g,t as B,g as v,s as V,p as H,h as J}from"./app-188414bd.js";/* empty css                                                                          */import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import{r as L,u as Q}from"./xlsx-4f9172c7.js";const W=d=>(H("data-v-37efe387"),d=d(),J(),d),X={class:"p-4",style:{width:"100%",background:"white","border-radius":"8px"}},Y={class:"flex justify-between"},$=W(()=>o("label",{for:"fileInput",class:"",style:{"padding-top":"14px",border:"solid 2px var(--primary-color)","border-radius":"6px",cursor:"pointer",padding:"8px 14px"}}," Seleccionar ",-1)),ee={style:{display:"flex","justify-content":"flex-end"}},te={style:{display:"flex"}},ae={key:0},oe={class:"flex justify-end mt-2 mb-4",style:{"margin-right":"-20px"}},se={style:{color:"#0000009d","margin-top":"-6px"}},re={style:{"margin-right":"-20px"}},ne={key:0},le={key:1,style:{scale:"0.8rem"}},ie={key:2},de={__name:"participantes",props:["proceso"],setup(d){const w=d,b=r([]),c=r(0),N=r(""),x=r(""),D=async()=>{c.value=0;try{const e=await A.post("subir-participantes-simulacro",{data:b.value,proceso:w.proceso},{onUploadProgress:t=>{t.lengthComputable&&(c.value=Math.round(t.loaded/t.total*100))}});console.log("Respuesta del servidor:",e.data),c.value=100,I()}catch(e){c.value=70,N.value="exception",console.error("Error:",e)}},E=e=>{const t=e.target.files[0],p=new FileReader;p.onload=k=>{const h=new Uint8Array(k.target.result),f=L(h,{type:"array"}),S=f.SheetNames[0],y=f.Sheets[S],a=Q.sheet_to_json(y,{header:1}),u=a[0],_=a.slice(1).map(O=>{const j={};return u.forEach((U,R)=>{j[U]=O[R]}),j});b.value=_},p.readAsArrayBuffer(t)},C=r([]),I=async()=>{A.post("/get-participantes-externo",{term:x.value,proceso:w.proceso}).then(e=>{C.value=e.data.datos.data}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})};let P;T(x,(e,t)=>{clearTimeout(P),P=setTimeout(()=>{I()},300)}),I();const F=r([{title:"N°",dataIndex:"nro",align:"center"},{title:"DNI",dataIndex:"dni"},{title:"Ap. Paterno",dataIndex:"paterno"},{title:"Ap. Materno",dataIndex:"materno"},{title:"Nombres",dataIndex:"nombres"},{title:"Programa",dataIndex:"programa"}]),M=r([{title:"N°",dataIndex:"nro",align:"center"},{title:"DNI",dataIndex:"dni"},{title:"Ap. Paterno",dataIndex:"paterno"},{title:"Ap. Materno",dataIndex:"materno"},{title:"Nombres",dataIndex:"nombres"},{title:"Programa",dataIndex:"programa",align:"center"}]);return(e,t)=>{const p=i("a-button"),k=i("a-progress"),h=i("a-table"),f=i("SearchOutlined"),S=i("a-input"),y=i("a-tag");return n(),m(Z,null,[s(q(G),{title:"Inicio"}),o("div",X,[o("form",{onSubmit:t[0]||(t[0]=z((...a)=>e.submit&&e.submit(...a),["prevent"]))},[o("div",Y,[$,o("input",{id:"fileInput",type:"file",onChange:E,style:{display:"none"}},null,32),o("div",ee,[s(p,{class:"mr-2",style:{"border-radius":"5px",height:"38px",border:"solid 1px var(--primary-color)",color:"var(--primary-color)"},onClick:e.descargar},{default:l(()=>[g("Plantilla")]),_:1},8,["onClick"]),s(p,{style:{height:"38px","border-radius":"5px",border:"none",color:"white",background:"var(--primary-color)"},onClick:D},{default:l(()=>[g(" Subir")]),_:1})])])],32),o("div",te,[s(k,{percent:c.value,status:N.value},null,8,["percent","status"])]),o("div",null,[s(h,{dataSource:b.value,columns:F.value,size:"small",pagination:!1},{bodyCell:l(({column:a,index:u,record:_})=>[a.dataIndex==="nro"?(n(),m("span",ae,B(u+1),1)):v("",!0)]),_:1},8,["dataSource","columns"])]),o("div",oe,[s(S,{value:x.value,"onUpdate:value":t[1]||(t[1]=a=>x.value=a),style:{"max-width":"260px","border-radius":"6px",height:"32px"},placeholder:"Buscar"},{prefix:l(()=>[o("span",se,[s(f)])]),_:1},8,["value"])]),o("div",re,[s(h,{dataSource:C.value,columns:M.value,size:"small",pagination:!1},{bodyCell:l(({column:a,index:u,record:_})=>[a.dataIndex==="nro"?(n(),m("span",ne,B(u+1),1)):v("",!0),a.dataIndex==="id_ide"?(n(),m("div",le,[_.id_ide==0?(n(),V(y,{key:0,color:"red",class:"small-text",style:{"border-radius":"14px"}},{default:l(()=>[g(" sin ide ")]),_:1})):v("",!0),_.area==null?(n(),V(y,{key:1,color:"purple"},{default:l(()=>[g(" sin area ")]),_:1})):(n(),m("span",ie))])):v("",!0)]),_:1},8,["dataSource","columns"])])])],64)}}},me=K(de,[["__scopeId","data-v-37efe387"]]);export{me as default};
