import{r,e as pe,f as l,o as n,c,d as u,a as t,w as o,b as p,t as b,s as Y,g as d,k as me,j as ve,l as U,u as m,S as _e,F as G,D as J,E as fe,a6 as K,n as xe}from"./app-504014de.js";import ge from"./ficha-ab364bb3.js";import{S as he}from"./SaveOutlined-4665de83.js";import{F as Q}from"./FormOutlined-6b130718.js";import"./logotiny-c4b525af.js";import"./logoDAD-c76d0a0b.js";const ye={class:"pl-4",style:{background:"white",width:"100%","min-height":"calc(100vh - 190px)","border-radius":"12px"}},be={class:"flex justify-between mt-2"},ke={style:{color:"#0000009d","margin-top":"-6px"}},Ce={key:0,class:"mt-3 mb-3",style:{"margin-left":"-5px"}},we={key:0},Ie=["onDblclick"],$e={key:2,class:"flex",style:{"justify-content":"center"}},Ee={key:0},ze={key:1},Se={key:2},De={key:1,class:"mt-3 mb-3",style:{"margin-left":"-5px"}},Ne={key:0},Ae={class:"flex justify-between mb-4"},Ue={class:"ant-upload-drag-icon"},Be=u("p",{class:"ant-upload-text",style:{width:"100%"}},"Haz clic o arrastra archivos a esta área para cargar",-1),Fe=u("p",{class:"ant-upload-hint"}," Soporte para carga única o múltiple. Prohibido subir datos de la empresa u otros archivos prohibidos. ",-1),Le=u("div",{style:{"margin-top":"0px"}}," Cargar respuestas ",-1),Me=u("div",{style:{"margin-top":"0px"}}," Nueva respuesta ",-1),Oe=u("div",{style:{"margin-top":"0px"}}," asdfas ",-1),He={__name:"leer-patron",props:["proceso"],setup(B){const W=window.location.origin,f=r("contenido"),g=r([]),F=r(null),L=B,k=r(!1),C=r(1),Z=e=>{const a=e.file.status;a!=="uploading"&&console.log(e.file,g.value),a==="done"?(K.success(`${e.file.name} archivo(s) subido(s) exitosamente.`),I()):a==="error"&&K.error(`${e.file.name} falló al subir.`)},ee=()=>{g.value=null},h=r(!1),M=r(0),O=r(0),te=e=>{h.value=!0,M.value=e.clientY,O.value=e.clientX,e.preventDefault()},w=e=>{e==="1"&&(k.value=!0,h.value=!1)},ae=e=>{h.value=!1},T=r([]),V=r([]),x=r(""),I=async()=>{U.post("/get-archivos-pat",{term:x.value,proceso:L.proceso}).then(e=>{T.value=e.data.datos.data}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})},$=async()=>{U.post("/get-pat",{term:x.value,proceso:L.proceso}).then(e=>{V.value=e.data.datos.data}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})};let j;pe(x,(e,a)=>{clearTimeout(j),j=setTimeout(()=>{$()},300)});const E=r(""),z=r(!1),oe=e=>{F.value=e,z.value=!0};I(),$();const se=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"Tipo",dataIndex:"tipo",align:"center",width:"100px"},{title:"Nombre",dataIndex:"nombre"},{title:"Area",dataIndex:"area"},{title:"Fecha",dataIndex:"fecha",align:"center"},{title:"Registros",dataIndex:"registros",align:"center"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}],ne=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"N° lectura",dataIndex:"n_lectura",align:"center"},{title:"Tip",dataIndex:"tipo",width:"60px",align:"center"},{title:"Litho",dataIndex:"res_litho",align:"center"},{title:"Area",dataIndex:"area",align:"center"},{title:"Respuestas",dataIndex:"respuestas",align:"center"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}],q=e=>{U.get("eliminar-archivo/"+e.id).then(a=>{I(),$(),le("error",a.data.titulo,a.data.mensaje)})},le=(e,a,y)=>{xe[e]({message:a,description:y})};return(e,a)=>{const y=l("a-radio-button"),ie=l("a-radio-group"),R=l("a-input"),S=l("a-tag"),v=l("a-button"),P=l("a-popconfirm"),H=l("a-table"),D=l("a-select-option"),re=l("a-select"),ce=l("inbox-outlined"),de=l("a-upload-dragger"),X=l("a-modal"),N=l("a-menu-item"),ue=l("a-menu");return n(),c("div",{style:{},onClick:ae,onContextmenu:ve(te,["prevent"])},[u("div",ye,[u("div",be,[t(ie,{value:f.value,"onUpdate:value":a[0]||(a[0]=s=>f.value=s),style:{"margin-left":"-3px"}},{default:o(()=>[t(y,{value:"contenido",style:{"border-radius":"9px 0px 0px 9px"}},{default:o(()=>[p("Respuestas")]),_:1}),t(y,{value:"archivos",style:{"border-radius":"0px 9px 9px 0px"}},{default:o(()=>[p("Archivos")]),_:1})]),_:1},8,["value"]),p(" "+b(f.value)+" ",1),t(R,{value:x.value,"onUpdate:value":a[1]||(a[1]=s=>x.value=s),style:{"max-width":"260px","border-radius":"6px",height:"32px"},placeholder:"Buscar"},{prefix:o(()=>[u("span",ke,[t(m(_e))])]),_:1},8,["value"])]),f.value==="archivos"?(n(),c("div",Ce,[(n(),Y(H,{columns:se,"data-source":T.value,key:e.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:o(({column:s,index:A,record:i})=>[s.dataIndex==="nro"?(n(),c("span",we,b(A+1),1)):d("",!0),s.dataIndex==="nombre"?(n(),c("div",{key:1,style:{width:"100%",cursor:"pointer"},onDblclick:_=>e.customRow(i)},[u("span",null,b(i.nombre),1)],40,Ie)):d("",!0),s.dataIndex==="area"?(n(),c("div",$e,[i.area===1?(n(),c("div",Ee,[t(S,{color:"cyan"},{default:o(()=>[p("Biomedicas")]),_:1})])):d("",!0),i.area===2?(n(),c("div",ze,[t(S,{color:"orange"},{default:o(()=>[p("Ingenierías")]),_:1})])):d("",!0),i.area===3?(n(),c("div",Se,[t(S,{color:"purple"},{default:o(()=>[p("Sociales")]),_:1})])):d("",!0)])):d("",!0),s.dataIndex==="acciones"?(n(),c(G,{key:3},[t(v,{type:"success",class:"mr-1",style:{color:"#476175"},onClick:_=>e.cambiarSexo(i.id_postulante,i.sexo),size:"small"},{icon:o(()=>[t(m(he))]),_:2},1032,["onClick"]),t(v,{onClick:_=>e.abrirEditar(i),class:"mr-1",style:{color:"blue"},size:"small"},{icon:o(()=>[t(m(Q))]),_:2},1032,["onClick"]),t(P,{title:"¿Estas seguro de eliminar?",onConfirm:_=>q(i)},{default:o(()=>[t(v,{shape:"",size:"small",style:{color:"crimson"}},{icon:o(()=>[t(m(J))]),_:1})]),_:2},1032,["onConfirm"])],64)):d("",!0)]),_:1},8,["data-source"]))])):d("",!0),f.value==="contenido"?(n(),c("div",De,[(n(),Y(H,{columns:ne,"data-source":V.value,key:e.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:o(({column:s,index:A,record:i})=>[s.dataIndex==="nro"?(n(),c("span",Ne,b(A+1),1)):d("",!0),s.dataIndex==="acciones"?(n(),c(G,{key:1},[t(v,{type:"success",class:"mr-1",style:{color:"#476175"},size:"small",onClick:_=>oe(i.id)},{icon:o(()=>[t(m(fe))]),_:2},1032,["onClick"]),t(v,{onClick:_=>e.abrirEditar(i),class:"mr-1",style:{color:"blue"},size:"small"},{icon:o(()=>[t(m(Q))]),_:2},1032,["onClick"]),t(P,{title:"¿Estas seguro de eliminar?",onConfirm:_=>q(i)},{default:o(()=>[t(v,{shape:"",size:"small",style:{color:"crimson"}},{icon:o(()=>[t(m(J))]),_:1})]),_:2},1032,["onConfirm"])],64)):d("",!0)]),_:1},8,["data-source"]))])):d("",!0),t(X,{visible:k.value,"onUpdate:visible":a[5]||(a[5]=s=>k.value=s),title:"Cargar fichas de respuestas",onOk:ee,centered:!0,style:{"max-height":"calc(100vh - 100px)","overflow-x":"scroll",cursor:"pointer"}},{default:o(()=>[u("div",Ae,[t(re,{class:"mb-2",style:{width:"75%"},value:C.value,"onUpdate:value":a[2]||(a[2]=s=>C.value=s)},{default:o(()=>[t(D,{value:1},{default:o(()=>[p("Biomédicas")]),_:1}),t(D,{value:2},{default:o(()=>[p("Ingenierías")]),_:1}),t(D,{value:3},{default:o(()=>[p("Sociales")]),_:1})]),_:1},8,["value"]),t(R,{style:{width:"23%"},value:E.value,"onUpdate:value":a[3]||(a[3]=s=>E.value=s),placeholder:"Aula"},null,8,["value"])]),t(de,{fileList:g.value,"onUpdate:fileList":a[4]||(a[4]=s=>g.value=s),name:"file",multiple:!0,action:m(W)+"/calificacion/carga-pat/"+B.proceso+"/"+C.value+E.value,onChange:Z,onDrop:e.handleDrop,"list-type":"picture"},{default:o(()=>[u("p",Ue,[t(ce)]),Be,Fe]),_:1},8,["fileList","action","onDrop"])]),_:1},8,["visible"])]),h.value?(n(),c("div",{key:0,style:me([{position:"absolute",border:"solid 1px #d9d9d943","padding-top":"0px","border-radius":"8px",overflow:"hidden"},{top:`${M.value}px`,left:`${O.value}px`}])},[t(ue,{size:"small",style:{"margin-top":"-4px","margin-bottom":"-4px"}},{default:o(()=>[t(N,{key:"1",class:"selec-menu",onClick:a[6]||(a[6]=s=>w("1"))},{default:o(()=>[Le]),_:1}),t(N,{key:"2",class:"selec-menu",onClick:a[7]||(a[7]=s=>w("2"))},{default:o(()=>[Me]),_:1}),t(N,{key:"2",class:"selec-menu",onClick:a[8]||(a[8]=s=>w("2"))},{default:o(()=>[Oe]),_:1})]),_:1})],4)):d("",!0),t(X,{visible:z.value,"onUpdate:visible":a[9]||(a[9]=s=>z.value=s),footer:!1,style:{width:"880px"}},{default:o(()=>[t(ge,{id_resp:F.value},null,8,["id_resp"])]),_:1},8,["visible"])],32)}}};export{He as default};
