import{a as t,b0 as ee,r,e as E,C as ae,D,o as m,c as _,u as y,w as o,F as te,y as h,Z as ne,d as n,b as f,t as se,f as C,n as U,j as oe,I as le,_ as ie,B as de,h as re,i as ue,T as ve,U as ce,M as pe}from"./app-6aa9a536.js";import{_ as me}from"./LayoutDirector-2dcb072b.js";import{A as _e}from"./AntdIcon-b7305db6.js";import{S as fe}from"./SearchOutlined-eb5a4274.js";import{C as ge}from"./CheckOutlined-811929fc.js";import"./logotiny-c4b525af.js";import"./Header-1105ed06.js";import"./DownOutlined-85bddf79.js";function N(v){for(var l=1;l<arguments.length;l++){var i=arguments[l]!=null?Object(arguments[l]):{},c=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(i).filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable}))),c.forEach(function(p){xe(v,p,i[p])})}return v}function xe(v,l,i){return l in v?Object.defineProperty(v,l,{value:i,enumerable:!0,configurable:!0,writable:!0}):v[l]=i,v}var V=function(l,i){var c=N({},l,i.attrs);return t(_e,N({},c,{icon:ee}),null)};V.displayName="EditOutlined";V.inheritAttrs=!1;const be=V;const we={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 98px)"}},ye={class:"mr-3"},he={class:"flex justify-between",style:{position:"relative"}},Ce={key:0,class:"editable-cell"},ke={key:0,class:"editable-cell-input-wrapper"},Oe={key:1,class:"editable-cell-text-wrapper"},Ie={key:1,class:"flex",style:{"justify-content":"center"}},je={key:0},Pe={key:1},Ae={key:2,class:"flex"},Ee={class:"mr-1"},Ue={class:"flex",style:{"justify-content":"flex-end"}},Ve={class:"flex flex-col"},Me={class:"flex justify-end"},$e={class:"mt-4 mb-4"},ze={class:"mb-4"},Re={class:"mb-4"},Se={class:"flex justify-end mt-4"},Be={class:"mr-2"},Je={__name:"index",setup(v){const l=r(""),i=r(1),c=r(null),p=r([]),g=r(1),w=r(!1),j=r(!1);r("");const P=r([]),d=r({id:null,codigo:"",nombre:"",vacantes:"",estado:!0});E(l,()=>{x()}),E(j,()=>{j.value==!1&&d.value.id!=null&&(d.value.id=null,d.value.codigo=null,d.value.nombre=null,d.value.estado=!0)}),E(i,()=>{x()});const F=a=>{w.value=!0,d.value=a},G=async()=>{let a=await h.get("/segundas/get-modalidades-segundas-activas");p.value=a.data.datos},L=async()=>{let a=await h.post("/segundas/actualizar-vacantes-segundas",d.value);x(),$("success","PROGRAMA ACTUALIZADO",a.data.mensaje),d.value={id:null,codigo:"",nombre:"",vacantes:"",estado:!0},w.value=!1},x=async()=>{let a=await h.post("/segundas/get-vacantes-segundas-admin?page="+i.value,{term:l.value});P.value=a.data.datos.data,c.value=a.data.datos.total},T=a=>{h.post("delete-vacante-segundas",{id_vacante:a.id_vacante}).then(e=>{x(),$("warning","PROGRAMA ELIMINADO",e.data.mensaje)})},H=[{title:"Cod",dataIndex:"codigo_sunedu",width:"60px",align:"center",responsive:["md"]},{title:"Nombre",dataIndex:"programa"},{title:"Vacantes",dataIndex:"vacantes",width:"160px",align:"center",responsive:["md"]},{title:"Estado",dataIndex:"estado",align:"center",width:"60px",responsive:["md"]},{title:"",dataIndex:"acciones",width:"70px",align:"center"}],M=r([]),Z=a=>{M.value=a};ae(()=>({selectedRowKeys:y(M),onChange:Z,hideDefaultSelections:!0}));const $=(a,e,k)=>{U[a]({message:e,description:k})};G(),x();const A=r({}),q=a=>{A.value[a]={...P.value.find(e=>e.id_programa===a)}},J=r({id_modalidad:g.value,id_programa:null,estado:null,vacantes:null}),z=a=>{J.value=a,delete A.value[a.id_programa],h.post("save-numero-vacantes-segundas",{id_vacante:a.id_vacante,id_programa:a.id_programa,vacantes:a.vacantes,id_modalidad:g.value}).then(()=>{U.success({message:"Registro actualizado"}),x()}).catch(()=>{U.error({message:"Error al actualizar"})})};return(a,e)=>{const k=oe,O=le,K=D("row"),R=ie,I=de,Q=re,W=ue,S=ve,X=ce,B=D("user-icon"),Y=pe;return m(),_(te,null,[t(y(ne),{title:"Procesos"}),t(me,null,{default:o(()=>[n("div",we,[t(K,{class:"flex justify-between mb-4"},{default:o(()=>[n("div",ye,[t(k,{ref:"select",value:g.value,"onUpdate:value":e[0]||(e[0]=s=>g.value=s),options:p.value,onFocus:a.focus,onChange:a.handleChange},null,8,["value","options","onFocus","onChange"])]),n("div",he,[t(O,{type:"text",placeholder:"Buscar",value:l.value,"onUpdate:value":e[1]||(e[1]=s=>l.value=s),style:{"max-width":"300px"}},{prefix:o(()=>[t(y(fe))]),_:1},8,["value"])])]),_:1}),n("div",null,[t(Q,{columns:H,"data-source":P.value,pagination:!1,size:"small",scroll:{x:380,y:"calc(100vh - 240px)"}},{bodyCell:o(({column:s,index:De,record:u})=>[s.dataIndex==="vacantes"?(m(),_("div",Ce,[A.value[u.id_programa]?(m(),_("div",ke,[t(O,{value:u.vacantes,"onUpdate:value":b=>u.vacantes=b,onPressEnter:b=>z(u)},{prefix:o(()=>e[11]||(e[11]=[n("div",null,null,-1)])),_:2},1032,["value","onUpdate:value","onPressEnter"]),t(y(ge),{class:"editable-cell-icon-check",onClick:b=>z(u)},null,8,["onClick"])])):(m(),_("div",Oe,[f(se(u.vacantes||" ")+" ",1),t(y(be),{class:"editable-cell-icon",onClick:b=>q(u.id_programa)},null,8,["onClick"])]))])):C("",!0),s.dataIndex==="estado"?(m(),_("div",Ie,[u.estado==1?(m(),_("div",je,[t(R,{color:"blue"},{default:o(()=>e[12]||(e[12]=[f("Activo")])),_:1})])):C("",!0),u.estado==0?(m(),_("div",Pe,[t(R,{color:"red"},{default:o(()=>e[13]||(e[13]=[f("Inactivo")])),_:1})])):C("",!0)])):C("",!0),s.dataIndex==="acciones"?(m(),_("div",Ae,[n("div",Ee,[t(I,{type:"",onClick:b=>F(u),style:{"border-radius":"4px","margin-right":"4px",width:"26px",border:"solid 1px #9d9d9d",background:"#f2f3f5",color:"#1890ff"},size:"small"},{default:o(()=>e[14]||(e[14]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit"},[n("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),n("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])),_:2},1032,["onClick"])]),n("div",null,[t(I,{type:"",class:"",onClick:b=>T(u),style:{"border-radius":"4px",background:"#f3f3f3",width:"28px",border:"solid 1px #9d9d9d",color:"red"},shape:"",size:"small"},{default:o(()=>e[15]||(e[15]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[n("polyline",{points:"3 6 5 6 21 6"}),n("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])),_:2},1032,["onClick"])])])):C("",!0)]),_:1},8,["data-source"])]),n("div",Ue,[t(W,{current:i.value,"onUpdate:current":e[2]||(e[2]=s=>i.value=s),simple:"","page-size":"50",total:c.value},null,8,["current","total"])]),t(Y,{open:w.value,"onUpdate:open":e[9]||(e[9]=s=>w.value=s),title:"Registrar Programa",footer:null,width:"400px",onCancel:e[10]||(e[10]=s=>j.value=!1)},{default:o(()=>[n("div",Ve,[n("div",Me,[t(X,{value:d.value.estado,"onUpdate:value":e[3]||(e[3]=s=>d.value.estado=s),style:{"margin-bottom":"16px"}},{default:o(()=>[t(S,{value:1},{default:o(()=>e[16]||(e[16]=[f("Activo")])),_:1}),t(S,{value:0},{default:o(()=>e[17]||(e[17]=[f("Inactivo")])),_:1})]),_:1},8,["value"])]),n("div",$e,[e[18]||(e[18]=n("label",{for:""},"Modalidad",-1)),t(k,{value:g.value,"onUpdate:value":e[4]||(e[4]=s=>g.value=s),options:p.value,onChange:a.handleChange,style:{width:"100%"}},null,8,["value","options","onChange"])]),n("div",ze,[e[19]||(e[19]=n("label",{for:""},"Programa acadÃ©mico",-1)),t(O,{value:d.value.programa,"onUpdate:value":e[5]||(e[5]=s=>d.value.programa=s),placeholder:"Programa"},{prefix:o(()=>[t(B)]),_:1},8,["value"])]),n("div",Re,[e[20]||(e[20]=n("label",{for:""},"Vacantes",-1)),t(O,{value:d.value.vacantes,"onUpdate:value":e[6]||(e[6]=s=>d.value.vacantes=s),placeholder:"Vacantes"},{prefix:o(()=>[t(B)]),_:1},8,["value"])]),n("div",Se,[n("div",Be,[t(I,{onClick:e[7]||(e[7]=s=>w.value=!1)},{default:o(()=>e[21]||(e[21]=[f("Cancelar")])),_:1})]),t(I,{type:"primary",onClick:e[8]||(e[8]=s=>L())},{default:o(()=>e[22]||(e[22]=[f("Guardar")])),_:1})])])]),_:1},8,["open"])])]),_:1})],64)}}};export{Je as default};
