import{r as d,x as _e,e as v,f as r,o as f,c as I,a as e,u as g,w as a,F as q,j as b,Z as fe,d as n,S as ge,k as be,b as i,t as D,g as T,E as ye,D as xe,s as Ae,n as Ie}from"./app-61808837.js";import{L as Ee}from"./LayoutSimulacro-bb5b6c42.js";import{F as we}from"./FormOutlined-e8e0dad1.js";import"./DropdownLink-13ec5229.js";import"./logotiny-c4b525af.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./TopMenu-10552bcf.js";const Ce={class:"mb-4",style:{width:"100%"}},De={style:{background:"white","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},Re={class:"flex justify-end mt-5 mb-4 mr-4"},Ne={class:"flex justify-between",style:{position:"relative"}},Ve={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Se={key:1},he={class:"flex justify-between mb-6 mt-2 pr-4"},Te={clas:"",style:{scale:"0.9"}},ke={style:{display:"flex"}},Ue={key:0,style:{"font-weight":"bold","font-size":"1.1rem"}},Be={key:1,style:{"font-weight":"bold","font-size":"1.1rem"}},Le={class:"flex justify-center"},Pe=n("label",null,"Cod. Modular",-1),je=n("label",null,[i("Nombre del colegio"),n("span",{style:{color:"red"}},"*")],-1),Oe=n("label",null,[i("Cod de local"),n("span",{style:{color:"red"}},"*")],-1),qe=n("label",null,[i("Nivel"),n("span",{style:{color:"red"}},"*")],-1),ze=n("label",null,[i("Gestión"),n("span",{style:{color:"red"}},"*")],-1),Fe=n("label",null,[i("Ubicación: Dep/Prov/Dist "),n("span",{style:{color:"red"}},"*")],-1),Ge=n("label",null,"Dirección",-1),$e=n("label",null,"Observación",-1),Ke={class:"flex justify-end"},oo={__name:"index",setup(Ze){d([]);const E=d(""),R=d(1),k=d(null),N=d(10),y=d(!1),V=d(null),w=d(null),S=d([]),z=d(null),x=d(!1),F=d(),U=d(),B=d(),G=d(),$=d(),K=d(),Z=d(),J=d();d();const X=o=>{s.cod_modular=o.target.value.replace(/\D/g,"")},s=_e({cod_modular:"",nombre:"",cod_local:"",nivel:"",gestion:null,ubigeo:"",direccion:"",observacion:""}),L=d(null),M=async()=>{x.value=!0,setTimeout(()=>{console.log("Este código se ejecutará después de 2 segundos")},1500);try{const o=await L.value.validateFields(),t=await b.post("save",s);t.status===202?(console.log(t.data.errors),x.value=!1):(ee(),y.value=!1,oe("success",t.data.titulo,t.data.mensaje),x.value=!1)}catch(o){console.error(o),x.value=!1}},P=async()=>{b.post("/get-ubigeo",{term:w.value}).then(o=>{S.value=o.data.datos.data,console.log("Datos recibidos:",S)}).catch(o=>{o.response?console.error("Error de servidor:",o.response.data):o.request?console.error("Error de red:",o.request):console.error("Error de configuración:",o.message)})},j=d([]),C=async()=>{let o=await b.post("get-inscritos-simulacro",{term:E.value});j.value=o.data.datos.data,k.value=o.data.datos.total};C();const O=async()=>{let o=await b.post("/get-departamentos-codigo",{term:U.value});F.value=o.data.datos.data},H=async()=>{let o=await b.post("/get-provincias-codigo?page=",{departamento:B.value});G.value=o.data.datos},Q=async o=>{let t=await b.post("/get-distritos-codigo?page=",{departamento:B.value,provincia:K.value});Z.value=t.data.datos};v(R,(o,t)=>{C()}),v(N,(o,t)=>{C()}),v(E,(o,t)=>{C()}),v(w,(o,t)=>{o.length>=3&&P()}),v(U,(o,t)=>{o.length>=3&&O()}),v($,(o,t)=>{o.length>=3&&H()}),v(J,(o,t)=>{o.length>=3&&Q()}),v(z,(o,t)=>{o.length>=3&&getColegios()});const W=(o,t)=>{s.ubigeo=t.key};O(),P();const Y=o=>{y.value=!0,s.id=o.id,s.cod_modular=o.cod_modular,s.nombre=o.nombre,s.cod_local=o.cod_local,s.gestion=o.gestion,s.nivel=o.nivel,s.ubigeo=o.ubigeo,V.value=o.lugar,s.direccion=o.direccion,s.observacion=o.observacion},ee=()=>{for(const o in s)s[o]=null},oe=(o,t,m)=>{Ie[o]({message:t,description:m})},te=d([{title:"Nro_Doc",dataIndex:"nro_doc"},{title:"Nombres",dataIndex:"nombres",responsive:["xs","sm","md","lg"]},{title:"Programa",dataIndex:"programa",responsive:["md"]},{title:"Colegios",dataIndex:"colegio",responsive:["lg"]},{title:"Lugar",dataIndex:"lugar",responsive:["lg"]},{title:"Acciones",dataIndex:"acciones",width:"120px",align:"center"}]);return(o,t)=>{const m=r("a-input"),ae=r("a-tag"),A=r("a-button"),le=r("a-popconfirm"),se=r("a-table"),ne=r("a-pagination"),u=r("a-select-option"),h=r("a-select"),p=r("a-form-item"),c=r("a-col"),de=r("a-tooltip"),ie=r("a-auto-complete"),re=r("a-textarea"),ue=r("a-row"),ce=r("a-form"),me=r("row"),pe=r("a-modal");return f(),I(q,null,[e(g(fe),{title:"Inscritos"}),e(Ee,null,{default:a(()=>[n("div",Ce,[n("div",De,[n("div",Re,[n("div",Ne,[e(m,{type:"text",placeholder:"Buscar",value:E.value,"onUpdate:value":t[0]||(t[0]=l=>E.value=l),style:{"max-width":"340px","padding-left":"30px","border-radius":"6px"}},null,8,["value"]),n("div",Ve,[e(g(ge))])])]),n("div",null,[e(se,{dataSource:j.value,size:"",columns:te.value,pagination:!1},{bodyCell:a(({column:l,index:Je,record:_})=>[l.dataIndex==="nro_doc"?(f(),be(ae,{key:0,color:"#4f4f4f",style:{width:"80px"}},{default:a(()=>[i(D(_.nro_doc),1)]),_:2},1024)):T("",!0),l.dataIndex==="nombres"?(f(),I("div",Se,[n("span",null,D(_.nombres)+" "+D(_.paterno)+" "+D(_.materno),1)])):T("",!0),l.dataIndex==="acciones"?(f(),I(q,{key:2},[e(A,{type:"success",class:"mr-1",style:{color:"#476175"},size:"small",disabled:""},{icon:a(()=>[e(g(ye))]),_:1}),e(A,{class:"mr-1",onClick:ve=>Y(_),style:{color:"blue"},size:"small",disabled:""},{icon:a(()=>[e(g(we))]),_:2},1032,["onClick"]),e(le,{title:"¿Estas seguro de eliminar?",onConfirm:ve=>o.eliminar(_),disabled:""},{default:a(()=>[e(A,{size:"small",style:{color:"crimson"},disabled:""},{icon:a(()=>[e(g(xe),{disabled:""})]),_:1})]),_:2},1032,["onConfirm"])],64)):T("",!0)]),_:1},8,["dataSource","columns"])]),n("div",he,[n("div",null,[e(ne,{current:R.value,"onUpdate:current":t[1]||(t[1]=l=>R.value=l),simple:"",total:k.value,"show-less-items":""},null,8,["current","total"])]),n("div",Te,[e(h,{value:N.value,"onUpdate:value":t[2]||(t[2]=l=>N.value=l),style:{width:"90px"}},{default:a(()=>[e(u,{value:10},{default:a(()=>[i("10 Reg.")]),_:1}),e(u,{value:20},{default:a(()=>[i("20 Reg.")]),_:1}),e(u,{value:50},{default:a(()=>[i("50 Reg.")]),_:1}),e(u,{value:100},{default:a(()=>[i("100 Reg.")]),_:1})]),_:1},8,["value"])])])])]),e(pe,{visible:y.value,"onUpdate:visible":t[14]||(t[14]=l=>y.value=l),footer:!1,centered:"",style:{width:"100%","max-width":"900px"}},{default:a(()=>[n("div",ke,[s.id===null?(f(),I("span",Ue,"Nuevo Colegio")):(f(),I("span",Be,"Editar Colegio"))]),n("div",Le,[e(me,{style:{display:"flex","justify-content":"center"}},{default:a(()=>[e(c,{span:24},{default:a(()=>[e(ce,{ref_key:"formDatos",ref:L,name:"form",model:s,rules:o.formRules},{default:a(()=>[e(ue,{gutter:16,class:"mt-3"},{default:a(()=>[e(c,{xs:24,sm:12,md:8,lg:8},{default:a(()=>[Pe,e(p,{name:"cod_modular",rules:[{required:!0,message:"Ingrese el cod modular"},{min:7,message:"Debe tener 7 digitos",trigger:"blur"}]},{default:a(()=>[e(m,{value:s.cod_modular,"onUpdate:value":t[3]||(t[3]=l=>s.cod_modular=l),onInput:X,maxlength:7},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:16},{default:a(()=>[je,e(p,{name:"nombre",rules:[{required:!0,message:"Ingrese el nombre del colegio"}]},{default:a(()=>[e(m,{value:s.nombre,"onUpdate:value":t[4]||(t[4]=l=>s.nombre=l)},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:8},{default:a(()=>[Oe,e(p,{name:"cod_local",rules:[{required:!0,message:"Ingrese el codigo del local"}]},{default:a(()=>[e(m,{value:s.cod_local,"onUpdate:value":t[5]||(t[5]=l=>s.cod_local=l)},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:8},{default:a(()=>[qe,e(p,{name:"nivel",rules:[{required:!0,message:"Seleccione el nivel"}]},{default:a(()=>[e(h,{value:s.nivel,"onUpdate:value":t[6]||(t[6]=l=>s.nivel=l),style:{width:"100%"}},{default:a(()=>[e(u,{value:"SECUNDARIA"},{default:a(()=>[i("SECUNDARIA")]),_:1}),e(u,{value:"BASICA ALTERNATIVA"},{default:a(()=>[i("BASICA ALTERNATIVA")]),_:1}),e(u,{value:"BASICA ALTERNATIVA AVANZADO"},{default:a(()=>[i("BASICA ALTERNATIVA AVANZADO")]),_:1}),e(u,{value:"BÁSICA ALTERNATIVA SECUNDARIA"},{default:a(()=>[i("BÁSICA ALTERNATIVA SECUNDARIA")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:12,md:8,lg:8},{default:a(()=>[ze,e(p,{name:"gestion",rules:[{required:!0,message:"Selecciona la gestión"}]},{default:a(()=>[e(h,{value:s.gestion,"onUpdate:value":t[7]||(t[7]=l=>s.gestion=l),style:{width:"100%"}},{default:a(()=>[e(u,{value:"PÚBLICA DE GESTIÓN DIRECTA"},{default:a(()=>[i("PÚBLICA DE GESTIÓN DIRECTA")]),_:1}),e(u,{value:"PRIVADA"},{default:a(()=>[i("PRIVADA")]),_:1}),e(u,{value:"PÚBLICA DE GESTIÓN PRIVADA"},{default:a(()=>[i("PÚBLICA DE GESTIÓN PRIVADA")]),_:1}),e(u,{value:"EXTRANJERO"},{default:a(()=>[i("EXTRANJERA")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:24,md:24,lg:12},{default:a(()=>[Fe,e(p,{name:"ubigeo"},{default:a(()=>[e(ie,{value:V.value,"onUpdate:value":t[9]||(t[9]=l=>V.value=l),options:S.value,onSelect:W},{default:a(()=>[e(m,{placeholder:"Lugar",value:w.value,"onUpdate:value":t[8]||(t[8]=l=>w.value=l),onKeypress:o.handleKeyPress},{suffix:a(()=>[e(de,{title:"Extra information"},{default:a(()=>[e(g(Ae))]),_:1})]),_:1},8,["value","onKeypress"])]),_:1},8,["value","options"])]),_:1})]),_:1}),e(c,{xs:24,sm:24,md:24,lg:12},{default:a(()=>[Ge,e(p,{name:"direccion"},{default:a(()=>[e(m,{value:s.direccion,"onUpdate:value":t[10]||(t[10]=l=>s.direccion=l)},null,8,["value"])]),_:1})]),_:1}),e(c,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[$e,e(p,{name:"observacion"},{default:a(()=>[e(re,{value:s.observacion,"onUpdate:value":t[11]||(t[11]=l=>s.observacion=l)},null,8,["value"])]),_:1})]),_:1})]),_:1}),n("div",Ke,[n("div",null,[e(A,{type:"primary",class:"mr-2",onClick:t[12]||(t[12]=l=>y.value=!1),style:{"border-radius":"6px",background:"none",color:"#476175",border:"1px solid #476175"}},{default:a(()=>[i("Cancelar")]),_:1}),e(A,{type:"primary",onClick:t[13]||(t[13]=l=>M()),style:{"border-radius":"6px",background:"#476175",border:"none"},loading:x.value},{default:a(()=>[i("Guardar")]),_:1},8,["loading"])])])]),_:1},8,["model","rules"])]),_:1})]),_:1})])]),_:1},8,["visible"])]),_:1})],64)}}};export{oo as default};
