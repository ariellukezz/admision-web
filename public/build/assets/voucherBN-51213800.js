import{r as m,e as T,o,c as i,a as d,w as s,m as P,d as p,b as r,F as f,E as N,t as v,f as l,y as _,n as z,B as E,_ as G,h as R,M as L}from"./app-c2bfe6f4.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";const q={class:"flex pr-6",style:{width:"100%","justify-content":"end","margin-top":"-30px","margin-bottom":"16px"}},H={key:0},J={key:0},K={key:0},Q={key:1},W={key:1},X={class:"pt-5",style:{width:"100%"}},Y={key:0},Z={key:0},tt={key:0},et={key:1},at={key:1},ot={__name:"voucherBN",props:["dni","proceso"],setup($){const k=m(!1);m([]);const u=$,b=m([]),B=m([]),j=async()=>{let e=await _.get("/get-pago-caja/"+u.dni);B.value=e.data},A=m([]),x=async()=>{let e=await _.get("/get-pago-BN/"+u.dni);A.value=e.data},w=async e=>{let t={dni:u.dni,operacion:e.paymentTitle,fecha:e.paymentDatetime,monto:e.paymentAmount};if(e.status)e.status==1?(await _.get("/eliminar-pago/"+t.dni+"/"+t.operacion),y(),x(),e.status=0):e.status=1;else{let n=await _.post("/insertar-pago",{pag:t});y(),x(),S("success",n.data.titulo,n.data.mensaje)}},I=async e=>{let t={dni:u.dni,operacion:e.paymentId,fecha:e.date,monto:e.amount};if(e.status)e.status==1?(await _.get("/eliminar-pago/"+t.dni+"/"+t.operacion),e.status=0,y()):e.status=1;else{e.status=1;let n=await _.post("/insertar-pago",{pag:t});y(),S(n.data.type,n.data.titulo,n.data.mensaje)}},y=async e=>{let t=await _.get("/get-pagos-dni/"+u.dni);b.value=t.data.data};T(()=>u.dni,async e=>{u.dni.length===8&&/^[0-9]+$/.test(u.dni)&&(await j(),await x(),await y())});const O=[{title:"N° Operación",dataIndex:"operacion"},{title:"Nombres",dataIndex:"nombres"},{title:"Fecha",dataIndex:"fecha"},{title:"Concepto",dataIndex:"concepto"},{title:"Monto",dataIndex:"monto"}],V=[{title:"N° Operación",dataIndex:"paymentId"},{title:"Nombres",dataIndex:"client"},{title:"Fecha",dataIndex:"date"},{title:"Concepto",dataIndex:"description"},{title:"Monto",dataIndex:"amount"},{title:"",dataIndex:"opcion",align:"center"}],D=[{title:"N° Operación",dataIndex:"paymentTitle"},{title:"Fecha",dataIndex:"paymentDatetime"},{title:"Concepto",dataIndex:"concepto"},{title:"Monto",dataIndex:"paymentAmount",align:"center"},{title:"",dataIndex:"opcion",align:"center"}];m([{paymentId:"2177229",document:"000000070080972",code:"000000000000000",client:"TICONA PONGO TANIA ROSARIO DEL",universityId:"000000000000000",description:"00000028",amount:"21.00",date:"2024-02-27 14:20",status:"0"}]);const S=(e,t,n)=>{z[e]({message:t,description:n})};return(e,t)=>{const n=E,C=G,h=R,F=L,M=P;return o(),i("div",null,[d(M,{gutter:16,class:"mb-3"},{default:s(()=>[p("div",q,[d(n,{onClick:t[0]||(t[0]=c=>k.value=!0),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>t[3]||(t[3]=[r("Agregar Pagos")])),_:1})]),d(h,{dataSource:b.value,columns:O,pagination:!1,size:"small",style:{width:"100%"}},{bodyCell:s(({column:c,record:a})=>[c.dataIndex==="proceso"?(o(),i(f,{key:0},[a.id_modalidad_proceso===3?(o(),N(C,{key:0,color:"pink"},{default:s(()=>[r(v(a.proceso),1)]),_:2},1024)):l("",!0),a.id_modalidad_proceso===2?(o(),N(C,{key:1,color:"orange"},{default:s(()=>[r(v(a.proceso),1)]),_:2},1024)):l("",!0),a.id_modalidad_proceso===1?(o(),N(C,{key:2,color:"blue"},{default:s(()=>[r(v(a.proceso),1)]),_:2},1024)):l("",!0)],64)):l("",!0)]),_:1},8,["dataSource"]),b.value?(o(),i("div",H,[p("div",null,v(),1)])):l("",!0),d(F,{visible:k.value,"onUpdate:visible":t[2]||(t[2]=c=>k.value=c),width:"900px"},{footer:s(()=>[p("div",null,[d(n,{style:{background:"#133466",color:"white",border:"none"},onClick:t[1]||(t[1]=c=>k.value=!1)},{default:s(()=>t[10]||(t[10]=[r("Aceptar")])),_:1})])]),default:s(()=>[p("div",null,[d(h,{dataSource:A.value,columns:V,pagination:!1,size:"small",style:{width:"100%"}},{bodyCell:s(({column:c,record:a})=>[c.dataIndex==="opcion"?(o(),i(f,{key:0},[c.dataIndex==="opcion"?(o(),i(f,{key:0},[a.status?(o(),i("div",J,[a.status===0?(o(),i("div",K,[d(n,{onClick:g=>I(a),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>t[4]||(t[4]=[r(" seleccionar ")])),_:2},1032,["onClick"])])):l("",!0),a.status===1?(o(),i("div",Q,[d(n,{onClick:g=>I(a),style:{background:"crimson","border-radius":"5px",border:"none",color:"white"}},{default:s(()=>t[5]||(t[5]=[r(" seleccionado ")])),_:2},1032,["onClick"])])):l("",!0)])):(o(),i("div",W,[p("div",null,[d(n,{onClick:g=>I(a),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>t[6]||(t[6]=[r(" seleccionar ")])),_:2},1032,["onClick"])])]))],64)):l("",!0)],64)):l("",!0)]),_:1},8,["dataSource"])]),p("div",X,[d(h,{dataSource:B.value,columns:D,pagination:!1,size:"small",style:{width:"100%"}},{bodyCell:s(({column:c,record:a})=>[c.dataIndex==="paymentAmount"?(o(),i("div",Y,[p("strong",null,"S/ "+v(a.paymentAmount),1)])):l("",!0),c.dataIndex==="opcion"?(o(),i(f,{key:1},[a.estado?(o(),i("div",Z,[a.estado===0?(o(),i("div",tt,[d(n,{onClick:g=>w(a),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>t[7]||(t[7]=[r(" seleccionar ")])),_:2},1032,["onClick"])])):l("",!0),a.estado===1?(o(),i("div",et,[d(n,{onClick:g=>w(a),style:{background:"crimson","border-radius":"5px",border:"none",color:"white"}},{default:s(()=>t[8]||(t[8]=[r(" seleccionado ")])),_:2},1032,["onClick"])])):l("",!0)])):(o(),i("div",at,[p("div",null,[d(n,{onClick:g=>w(a),style:{background:"#133466",border:"none",color:"white"}},{default:s(()=>t[9]||(t[9]=[r(" seleccionar ")])),_:2},1032,["onClick"])])]))],64)):l("",!0)]),_:1},8,["dataSource"])])]),_:1},8,["visible"])]),_:1})])}}},it=U(ot,[["__scopeId","data-v-d88091fc"]]);export{it as default};
