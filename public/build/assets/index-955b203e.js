import{r as n,e as k,C as L,D as G,o as r,c as u,a as t,u as p,w as d,F as T,y as h,Z,d as o,b as C,t as q,f as _,n as I,j as J,I as Q,_ as W,B as X,h as Y,i as ee}from"./app-75c04735.js";import{_ as ae}from"./LayoutDirector-ed2e4c3d.js";import{S as te}from"./SearchOutlined-d15a90ab.js";import{C as oe}from"./CheckOutlined-536d1df4.js";import{E as se}from"./EditOutlined-51c8d851.js";import"./logotiny-c4b525af.js";import"./Header-80ff929f.js";import"./AntdIcon-15b90b2a.js";import"./DropdownLink-e5ac2743.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./DownOutlined-e7c96a23.js";const ne={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 98px)"}},le={class:"mr-3"},ie={class:"flex justify-between",style:{position:"relative"}},de={key:0,class:"editable-cell"},re={key:0,class:"editable-cell-input-wrapper"},ue={key:1,class:"editable-cell-text-wrapper"},ce={key:1,class:"flex",style:{"justify-content":"center"}},ve={key:0},pe={key:1},_e={key:2,class:"flex"},me={class:"mr-1"},ge={class:"flex",style:{"justify-content":"flex-end"}},Ve={__name:"index",setup(fe){const m=n(""),g=n(1),z=n(null),E=n([]),f=n(1),x=n(!1);n("");const w=n([]),s=n({id:null,codigo:"",nombre:"",vacantes:"",estado:!0});k(m,()=>{v()}),k(x,()=>{x.value==!1&&s.value.id!=null&&(s.value.id=null,s.value.codigo=null,s.value.nombre=null,s.value.estado=!0)}),k(g,()=>{v()});const P=e=>{x.value=!0,s.value.id=e.id,s.value.codigo=e.codigo,s.value.nombre=e.nombre,s.value.nivel_academico=e.nivel_academico,s.value.tipo_autorizacion=e.tipo_autorizacion,s.value.id_facultad=e.id_fac,s.value.estado=e.estado==1,s.value.area=e.area},$=async()=>{let e=await h.get("/segundas/get-modalidades-segundas-activas");E.value=e.data.datos},v=async()=>{let e=await h.post("/segundas/get-vacantes-segundas-admin?page="+g.value,{term:m.value});w.value=e.data.datos.data,z.value=e.data.datos.total},D=e=>{h.post("delete-vacante-segundas",{id_vacante:e.id_vacante}).then(a=>{v(),S("warning","PROGRAMA ELIMINADO",a.data.mensaje)})},O=[{title:"Cod",dataIndex:"codigo_sunedu",width:"60px",align:"center",responsive:["md"]},{title:"Nombre",dataIndex:"programa"},{title:"Vacantes",dataIndex:"vacantes",width:"160px",align:"center",responsive:["md"]},{title:"Estado",dataIndex:"estado",align:"center",width:"60px",responsive:["md"]},{title:"",dataIndex:"acciones",width:"70px",align:"center"}],j=n([]),R=e=>{j.value=e};L(()=>({selectedRowKeys:p(j),onChange:R,hideDefaultSelections:!0}));const S=(e,a,b)=>{I[e]({message:a,description:b})};$(),v();const y=n({}),U=e=>{y.value[e]={...w.value.find(a=>a.id_programa===e)}},A=n({id_modalidad:f.value,id_programa:null,estado:null,vacantes:null}),B=e=>{A.value=e,delete y.value[e.id_programa],h.post("save-numero-vacantes-segundas",{id_vacante:e.id_vacante,id_programa:e.id_programa,vacantes:e.vacantes,id_modalidad:f.value}).then(()=>{I.success({message:"Registro actualizado"}),v()}).catch(()=>{I.error({message:"Error al actualizar"})})};return(e,a)=>{const b=J,V=Q,F=G("row"),M=W,N=X,H=Y,K=ee;return r(),u(T,null,[t(p(Z),{title:"Procesos"}),t(ae,null,{default:d(()=>[o("div",ne,[t(F,{class:"flex justify-between mb-4"},{default:d(()=>[o("div",le,[t(b,{ref:"select",value:f.value,"onUpdate:value":a[0]||(a[0]=i=>f.value=i),options:E.value,onFocus:e.focus,onChange:e.handleChange},null,8,["value","options","onFocus","onChange"])]),o("div",ie,[t(V,{type:"text",placeholder:"Buscar",value:m.value,"onUpdate:value":a[1]||(a[1]=i=>m.value=i),style:{"max-width":"300px"}},{prefix:d(()=>[t(p(te))]),_:1},8,["value"])])]),_:1}),o("div",null,[t(H,{columns:O,"data-source":w.value,pagination:!1,size:"small",scroll:{x:380,y:"calc(100vh - 240px)"}},{bodyCell:d(({column:i,index:he,record:l})=>[i.dataIndex==="vacantes"?(r(),u("div",de,[y.value[l.id_programa]?(r(),u("div",re,[t(V,{value:l.vacantes,"onUpdate:value":c=>l.vacantes=c,onPressEnter:c=>B(l)},{prefix:d(()=>a[3]||(a[3]=[o("div",null,null,-1)])),_:2},1032,["value","onUpdate:value","onPressEnter"]),t(p(oe),{class:"editable-cell-icon-check",onClick:c=>B(l)},null,8,["onClick"])])):(r(),u("div",ue,[C(q(l.vacantes||" ")+" ",1),t(p(se),{class:"editable-cell-icon",onClick:c=>U(l.id_programa)},null,8,["onClick"])]))])):_("",!0),i.dataIndex==="estado"?(r(),u("div",ce,[l.estado==1?(r(),u("div",ve,[t(M,{color:"blue"},{default:d(()=>a[4]||(a[4]=[C("Activo")])),_:1})])):_("",!0),l.estado==0?(r(),u("div",pe,[t(M,{color:"red"},{default:d(()=>a[5]||(a[5]=[C("Inactivo")])),_:1})])):_("",!0)])):_("",!0),i.dataIndex==="acciones"?(r(),u("div",_e,[o("div",me,[t(N,{type:"",onClick:c=>P(l),style:{"border-radius":"4px","margin-right":"4px",width:"26px",border:"solid 1px #9d9d9d",background:"#f2f3f5",color:"#1890ff"},size:"small"},{default:d(()=>a[6]||(a[6]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit"},[o("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),o("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])),_:2},1032,["onClick"])]),o("div",null,[t(N,{type:"",class:"",onClick:c=>D(l),style:{"border-radius":"4px",background:"#f3f3f3",width:"28px",border:"solid 1px #9d9d9d",color:"red"},shape:"",size:"small"},{default:d(()=>a[7]||(a[7]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[o("polyline",{points:"3 6 5 6 21 6"}),o("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])),_:2},1032,["onClick"])])])):_("",!0)]),_:1},8,["data-source"])]),o("div",ge,[t(K,{current:g.value,"onUpdate:current":a[2]||(a[2]=i=>g.value=i),simple:"","page-size":"50",total:z.value},null,8,["current","total"])])])]),_:1})],64)}}};export{Ve as default};
