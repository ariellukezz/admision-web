import{r as s,e as y,J as de,o as g,c as x,a as l,u as w,w as t,d as a,F as j,y as k,M as me,Z as pe,b as i,E as ve,t as H,f as J,G as ce,s as fe,n as ge,B as _e,I as be,H as ye,h as xe,i as we,S as ke,j as Ce,k as Ie,q as Se,l as Ee,m as Ue}from"./app-2058c8a9.js";import{L as Fe}from"./LayoutCalificador-49203308.js";import{S as Ve}from"./SearchOutlined-a09fa8b0.js";import{E as je}from"./EyeOutlined-bce73142.js";import{F as Ne}from"./FormOutlined-5947d27a.js";import{D as Pe}from"./DeleteOutlined-c7ec51cf.js";import"./DropdownLink-2f8391da.js";import"./logotiny-c4b525af.js";/* empty css                                                                          */import"./_plugin-vue_export-helper-c27b6911.js";import"./TopMenu-25aa31af.js";import"./DownOutlined-d7c6d8bb.js";import"./AntdIcon-5ed3d5e4.js";const ze={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{"border-radius":"10px",width:"100%","min-height":"calc(100vh - 95px)"}},Oe={class:"flex justify-between mb-2"},De={class:"mr-3"},Re={class:"flex justify-between",style:{position:"relative"}},Ae={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Be={key:0,class:"flex",style:{"justify-content":"center"}},$e={style:{"font-weight":"bold"}},Te={class:"flex justify-between mt-2 pr-4",style:{"margin-bottom":"-5px"}},qe={clas:"",style:{scale:"0.9","margin-right":"-20px"}},Le={style:{background:"#476175",height:"36px","margin-left":"-24px","margin-right":"-24px","margin-top":"-24px","margin-bottom":"28px"}},Me={class:"flex justify-between ml-3 mr-1",style:{height:"36px","align-items":"center"}},Ge={style:{background:"#476175",height:"36px","margin-left":"-24px","margin-right":"-24px","margin-top":"-24px","margin-bottom":"28px"}},he={class:"flex justify-between ml-3 mr-1",style:{height:"36px","align-items":"center"}},Xe={style:{width:"100%"}},He={class:"mr-2"},Je={class:"flex justify-center"},Ze={class:"mr-2"},Ke={class:"mr-2"},Qe={class:"flex justify-end"},pl={__name:"ponderacion",setup(We){const N=s(!1),C=s("");s([]);const p=s(!1);s();const Z=s(""),I=s(1),c=s(10),P=s(1),K=()=>{p.value=!0};let z;y(C,(o,e)=>{clearTimeout(z),z=setTimeout(()=>{getFiliales()},500)}),y(I,(o,e)=>{getFiliales()}),y(c,(o,e)=>{getFiliales()});let O;y(Z,(o,e)=>{clearTimeout(O),O=setTimeout(()=>{getUbigeosResidencia()},500)});const Q=o=>{p.value=!0,filial.id=o.id,filial.codigo=o.codigo,filial.nombre=o.nombre,filial.lugar=o.ubigeo,filial.direccion=o.direccion,residencia.value=o.lugar,o.estado==1?filial.estado=!0:filial.estado=!1},W=o=>{k.get("eliminar-filial/"+o.id).then(e=>{getFiliales(),E("error","PROCESO ELIMINADO",e.data.mensaje)})},D=()=>{filial.id=null,filial.codigo="",filial.nombre="",filial.lugar=null,filial.direccion="",filial.estado="",residencia.value="",redseleccionado.value="",U()},E=(o,e,r)=>{ge[o]({message:e,description:r})},U=()=>{p.value=!1};s([]);const R=s([]),F=async()=>{let o=await k.post("get-ponderaciones?page="+I.value,{term:C.value,paginasize:c.value});R.value=o.data.datos.data,P.value=o.data.datos.total},A=s(),f=de({id:null,nombre:"",area:null,simulacro:""}),B=s("");s(null);const Y=s([]);s(1);const V=s(!1),$=async()=>{k.post("/get-simulacros",{term:B.value}).then(o=>{Y.value=o.data.datos.data}).catch(o=>{o.response?console.error("Error de servidor:",o.response.data):o.request?console.error("Error de red:",o.request):console.error("Error de configuración:",o.message)})};let T;y(B,(o,e)=>{clearTimeout(T),T=setTimeout(()=>{$()},500)});const ee=async()=>{N.value=!0;try{const o=await A.value.validateFields();k.post("save-ponderacion",f).then(e=>{E("success",e.data.titulo,e.data.mensaje),F(),p.value=!1})}catch(o){console.error(o)}},le=async()=>{N.value=!0;try{k.post("save-ponderacion-detalle",{pesos:u.value,id_ponderacion:q.value}).then(o=>{E("success",o.data.titulo,o.data.mensaje),F(),p.value=!1})}catch(o){console.error(o)}};$(),F();const q=s(null),L=s(1),u=s([{nombre:null,ponderacion:null,n_preguntas:null}]),te=o=>{V.value=!0,q.value=o},oe=()=>{u.value.push({nombre:null,ponderacion:null,n_preguntas:null}),L.value+=1},ae={labelCol:{span:4},wrapperCol:{span:20}},ne=[{title:"N°",dataIndex:"nro"},{title:"Nombre",dataIndex:"nombre"},{title:"Area",dataIndex:"area"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}];return(o,e)=>{const r=_e,_=be,se=ye,ie=xe,re=we,v=ke,M=Ce,b=Ie,G=Se,h=me,S=Ee,ue=Ue;return g(),x(j,null,[l(w(pe),{title:"Ponderacion"}),l(Fe,null,{default:t(()=>[a("div",ze,[a("div",Oe,[a("div",De,[l(r,{type:"primary",onClick:K,style:{background:"#476175",border:"none","border-radius":"5px"}},{default:t(()=>e[13]||(e[13]=[i("Nuevo")])),_:1})]),a("div",Re,[l(_,{type:"text",placeholder:"Buscar",value:C.value,"onUpdate:value":e[0]||(e[0]=n=>C.value=n),style:{"max-width":"300px","border-radius":"6px","padding-left":"30px"}},null,8,["value"]),a("div",Ae,[l(w(Ve))])])]),(g(),ve(ie,{columns:ne,"data-source":R.value,key:o.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:t(({column:n,index:d,record:m})=>[n.dataIndex==="nro"?(g(),x("div",Be,[a("span",$e,H(d+1),1)])):J("",!0),n.dataIndex==="acciones"?(g(),x(j,{key:1},[l(r,{type:"success",class:"mr-1",style:{color:"#476175"},onClick:X=>te(m.id),size:"small"},{icon:t(()=>[l(w(je))]),_:2},1032,["onClick"]),l(r,{onClick:X=>Q(m),class:"mr-1",style:{color:"blue"},size:"small"},{icon:t(()=>[l(w(Ne))]),_:2},1032,["onClick"]),l(se,{title:"¿Estas seguro de eliminar?",onConfirm:X=>W(m)},{default:t(()=>[l(r,{shape:"",size:"small",style:{color:"crimson"}},{icon:t(()=>[l(w(Pe))]),_:1})]),_:2},1032,["onConfirm"])],64)):J("",!0)]),_:1},8,["data-source"])),a("div",Te,[a("div",null,[l(re,{current:I.value,"onUpdate:current":e[1]||(e[1]=n=>I.value=n),simple:"",total:P.value,pageSize:c.value,"onUpdate:pageSize":e[2]||(e[2]=n=>c.value=n),"show-less-items":""},null,8,["current","total","pageSize"])]),a("div",qe,[l(M,{value:c.value,"onUpdate:value":e[3]||(e[3]=n=>c.value=n),style:{width:"90px"}},{default:t(()=>[l(v,{value:10},{default:t(()=>e[14]||(e[14]=[i("10 Reg.")])),_:1}),l(v,{value:20},{default:t(()=>e[15]||(e[15]=[i("20 Reg.")])),_:1}),l(v,{value:50},{default:t(()=>e[16]||(e[16]=[i("50 Reg.")])),_:1}),l(v,{value:100},{default:t(()=>e[17]||(e[17]=[i("100 Reg.")])),_:1})]),_:1},8,["value"])])])])]),_:1}),a("div",null,[l(h,{visible:p.value,"onUpdate:visible":e[8]||(e[8]=n=>p.value=n),style:{"margin-top":"-40px","margin-bottom":"-40px"},closable:!1},{footer:t(()=>[l(r,{style:{"margin-left":"6px","border-radius":"4px"},onClick:D},{default:t(()=>e[23]||(e[23]=[i("Cancelar")])),_:1}),l(r,{type:"primary",style:{background:"#476175",border:"none","border-radius":"4px"},onClick:e[7]||(e[7]=n=>ee())},{default:t(()=>e[24]||(e[24]=[i("Guardar")])),_:1})]),default:t(()=>[a("div",Le,[a("div",Me,[e[19]||(e[19]=a("div",null,[a("span",{style:{"font-weight":"bold",color:"white","font-size":"1rem"}}," Ponderacion ")],-1)),a("div",null,[a("span",null,[l(r,{onClick:e[4]||(e[4]=n=>U()),style:{background:"none",border:"none",color:"white"}},{default:t(()=>e[18]||(e[18]=[i("X")])),_:1})])])])]),l(G,ce({ref_key:"formPonderacion",ref:A,name:"form",model:f},ae,{style:{"margin-bottom":"-30px"}}),{default:t(()=>[l(b,{label:"Nombre",rules:[{required:!0,message:"Ingrese el nombre",trigger:"change"}],name:"nombre"},{default:t(()=>[l(_,{style:{"border-radius":"6px"},type:"text",placeholder:"Ingrese el nombre",value:f.nombre,"onUpdate:value":e[5]||(e[5]=n=>f.nombre=n),autocomplete:"off"},null,8,["value"])]),_:1}),l(b,{name:"area",label:"Area",rules:[{required:!0,message:"Seleccione un area",trigger:"change"}]},{default:t(()=>[l(M,{ref:"select",value:f.area,"onUpdate:value":e[6]||(e[6]=n=>f.area=n),style:{width:"100%"}},{default:t(()=>[l(v,{value:1},{default:t(()=>e[20]||(e[20]=[i("BIOMEDICAS")])),_:1}),l(v,{value:2},{default:t(()=>e[21]||(e[21]=[i("INGENIERIAS")])),_:1}),l(v,{value:3},{default:t(()=>e[22]||(e[22]=[i("SOCIALES")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1},16,["model"])]),_:1},8,["visible"])]),a("div",null,[l(h,{visible:V.value,"onUpdate:visible":e[12]||(e[12]=n=>V.value=n),style:{"margin-top":"-40px","margin-bottom":"-40px",width:"900px"},closable:!1},{footer:t(()=>[l(r,{style:{"margin-left":"6px","border-radius":"4px"},onClick:D},{default:t(()=>e[32]||(e[32]=[i("Cancelar")])),_:1}),l(r,{type:"primary",style:{background:"#476175",border:"none","border-radius":"4px"},onClick:e[11]||(e[11]=n=>le())},{default:t(()=>e[33]||(e[33]=[i("Guardar")])),_:1})]),default:t(()=>[a("div",Ge,[a("div",he,[e[26]||(e[26]=a("div",null,[a("span",{style:{"font-weight":"bold",color:"white","font-size":"1rem"}}," Detalle Ponderacion ")],-1)),a("div",null,[a("span",null,[l(r,{onClick:e[9]||(e[9]=n=>U()),style:{background:"none",border:"none",color:"white"}},{default:t(()=>e[25]||(e[25]=[i("X")])),_:1})])])])]),a("div",Xe,[l(G,{ref:"formPesos",name:"formpesos",model:u.value,style:{"margin-bottom":"-30px"}},{default:t(()=>[(g(!0),x(j,null,fe(L.value,(n,d)=>(g(),x("div",null,[l(ue,{gutter:[16,10]},{default:t(()=>[l(S,{xs:24,sm:12,md:8,lg:1},{default:t(()=>[a("div",He,[e[27]||(e[27]=a("label",null,[a("br")],-1)),a("div",Je,[l(r,null,{default:t(()=>[i(H(d+1),1)]),_:2},1024)])])]),_:2},1024),l(S,{xs:24,sm:12,md:8,lg:15},{default:t(()=>[a("div",Ze,[e[28]||(e[28]=a("label",null,"Asignatura",-1)),l(b,{name:"nombre"},{default:t(()=>[l(_,{value:u.value[d].nombre,"onUpdate:value":m=>u.value[d].nombre=m},null,8,["value","onUpdate:value"])]),_:2},1024)])]),_:2},1024),l(S,{xs:24,sm:12,md:8,lg:4},{default:t(()=>[a("div",null,[e[29]||(e[29]=a("label",null,"N° preguntas",-1)),l(b,{name:"npreguntas"},{default:t(()=>[l(_,{value:u.value[d].n_preguntas,"onUpdate:value":m=>u.value[d].n_preguntas=m},null,8,["value","onUpdate:value"])]),_:2},1024)])]),_:2},1024),l(S,{xs:24,sm:12,md:8,lg:4},{default:t(()=>[a("div",Ke,[e[30]||(e[30]=a("label",null,"Ponderacion",-1)),l(b,{name:"ponderacion"},{default:t(()=>[l(_,{value:u.value[d].ponderacion,"onUpdate:value":m=>u.value[d].ponderacion=m},null,8,["value","onUpdate:value"])]),_:2},1024)])]),_:2},1024)]),_:2},1024)]))),256)),a("div",Qe,[l(r,{onClick:e[10]||(e[10]=n=>oe())},{default:t(()=>e[31]||(e[31]=[i("1 más")])),_:1})])]),_:1},8,["model"])])]),_:1},8,["visible"])])],64)}}};export{pl as default};
