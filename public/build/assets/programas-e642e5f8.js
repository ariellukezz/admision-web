import{r,e as w,C as W,D as X,o as s,c as p,a as t,u as g,w as l,d as c,F as R,y as x,M as Y,Z as ee,b as i,t as y,f as u,E,G as ae,n as oe,B as te,I as le,_ as ne,h as se,i as ie,k as ue,j as de,S as re,N as ce,q as pe}from"./app-02daa48e.js";import{_ as ve}from"./AuthenticatedLayout-0d088217.js";import{S as me}from"./SearchOutlined-2412f6e3.js";import{E as _e}from"./EyeOutlined-45799f90.js";import{F as fe}from"./FormOutlined-68f5ffc1.js";import{D as ge}from"./DeleteOutlined-58102e21.js";import"./logotiny-c4b525af.js";import"./Header-71d983ce.js";import"./AntdIcon-666c3050.js";import"./DownOutlined-b680cb82.js";/* empty css                                                            */const ye={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 98px)"}},be={class:"mr-3"},ke={class:"flex justify-between",style:{position:"relative"}},Ce={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},he={style:{}},Ie={key:0},we={style:{"font-size":".9rem"}},xe={key:1},Fe={style:{"font-size":".9rem"}},Se={key:2},Ee={style:{"font-size":".9rem"}},Oe={key:3,class:"flex",style:{"justify-content":"center"}},Ae={key:4,class:"flex",style:{"justify-content":"center"}},Ne={key:0},ze={key:1},Ve={class:"flex",style:{"justify-content":"flex-end"}},qe={__name:"programas",setup(De){const h=r(""),I=r(1),O=r(null);r("PUNO");const A=r([]),_=r(!1),B=r(""),d=r([]),o=r({id:null,codigo:"",nombre:"",nivel_academico:"CARRERA PROFESIONAL",tipo_autorizacion:"RECONOCIDO POR LIC.",id_facultad:1,estado:!0,area:"BIOMEDICAS"}),P=()=>{_.value=!0};w(h,(a,e)=>{b()}),w(B,(a,e)=>{getDepartamentos()}),w(_,(a,e)=>{_.value==!1&&o.value.id!=null&&(o.value.id=null,o.value.codigo=null,o.value.nombre=null,o.value.estado=!0)}),w(I,(a,e)=>{b()});const M=a=>{_.value=!0,o.value.id=a.id,o.value.codigo=a.codigo,o.value.nombre=a.nombre,o.value.nivel_academico=a.nivel_academico,o.value.tipo_autorizacion=a.tipo_autorizacion,o.value.id_facultad=a.id_fac,a.estado==1?o.value.estado=!0:o.value.estado=!1,o.value.area=a.area},U=async()=>{let a=await x.get("get-facultades");A.value=a.data.datos},b=async(a="")=>{let e=await x.post("programas/get-programas?page="+I.value,{term:h.value});d.value=e.data.datos.data,O.value=e.data.datos.total},j=()=>{let a={id:o.value.id,codigo:o.value.codigo,nombre:o.value.nombre,nivel_academico:o.value.nivel_academico,tipo_autorizacion:o.value.tipo_autorizacion,estado:o.value.estado,id_facultad:o.value.id_facultad,area:o.value.area};x.post("save-programa",a).then(e=>{b(),z("success",e.data.titulo,e.data.mensaje),_.value=!1,o.value.codigo=null,o.value.id=null,o.value.nombre=""})},G=a=>{x.get("eliminar-programa/"+a.id).then(e=>{b(),z("warning","PROGRAMA ELIMINADO",e.data.mensaje)})},L=[{title:"Cod",dataIndex:"codigo",width:"60px",align:"center",responsive:["md"]},{title:"Nombre",dataIndex:"nombre"},{title:"Area",dataIndex:"area",align:"center",width:"100px",responsive:["md"]},{title:"Fun.",dataIndex:"estado",align:"center",width:"60px",responsive:["md"]},{title:"Acciones",dataIndex:"acciones",width:"90px",align:"center"}],N=r([]),$=a=>{console.log("selectedRowKeys changed: ",a),N.value=a};W(()=>({selectedRowKeys:g(N),onChange:$,hideDefaultSelections:!0}));const z=(a,e,v)=>{oe[a]({message:e,description:v})},K=a=>{console.log("Detalle:",a)};return U(),b(),(a,e)=>{const v=te,F=le,T=X("row"),k=ne,q=se,Z=ie,C=ue,V=de,S=re,H=ce,J=pe,Q=Y;return s(),p(R,null,[t(g(ee),{title:"Procesos"}),t(ve,null,{default:l(()=>[c("div",ye,[t(T,{class:"flex justify-between mb-4"},{default:l(()=>[c("div",be,[t(v,{type:"primary",style:{"border-radius":"5px",background:"#476175"},onClick:P},{default:l(()=>e[9]||(e[9]=[i("Agregar")])),_:1})]),c("div",ke,[t(F,{type:"text",placeholder:"Buscar",value:h.value,"onUpdate:value":e[0]||(e[0]=n=>h.value=n),style:{"max-width":"300px","padding-left":"30px"}},null,8,["value"]),c("div",Ce,[t(g(me))])])]),_:1}),c("div",he,[t(q,{columns:L,"data-source":d.value,pagination:!1,size:"small",scroll:{x:380,y:"calc(100vh - 240px)"}},{bodyCell:l(({column:n,index:m,record:f})=>[n.dataIndex==="codigo"?(s(),p("div",Ie,[c("span",we,y(f.codigo),1)])):u("",!0),n.dataIndex==="nombre"?(s(),p("div",xe,[c("span",Fe,y(f.nombre),1)])):u("",!0),n.dataIndex==="facultad"?(s(),p("div",Se,[c("span",Ee,y(f.facultad),1)])):u("",!0),n.dataIndex==="area"?(s(),p("div",Oe,[d.value[m].area=="BIOMÉDICAS"?(s(),E(k,{key:0,style:{"font-size":".8rem"},color:"cyan"},{default:l(()=>[i(y(d.value[m].area),1)]),_:2},1024)):u("",!0),d.value[m].area=="SOCIALES"?(s(),E(k,{key:1,style:{"font-size":".8rem"},color:"purple"},{default:l(()=>[i(y(d.value[m].area),1)]),_:2},1024)):u("",!0),d.value[m].area=="INGENIERÍAS"?(s(),E(k,{key:2,style:{"font-size":".8rem"},color:"blue"},{default:l(()=>[i(y(d.value[m].area),1)]),_:2},1024)):u("",!0)])):u("",!0),n.dataIndex==="estado"?(s(),p("div",Ae,[d.value[m].estado==1?(s(),p("div",Ne,[t(k,{color:"green"},{default:l(()=>e[10]||(e[10]=[i("Si")])),_:1})])):u("",!0),d.value[m].estado==0?(s(),p("div",ze,[t(k,{color:"red"},{default:l(()=>e[11]||(e[11]=[i("No")])),_:1})])):u("",!0)])):u("",!0),n.dataIndex==="acciones"?(s(),p(R,{key:5},[t(v,{type:"",onClick:D=>K(f),style:{"border-radius":"4px",background:"none",color:"green"},size:"small"},{icon:l(()=>[t(g(_e))]),_:2},1032,["onClick"]),t(v,{type:"",onClick:D=>M(f),style:{"border-radius":"4px",background:"none",color:"gray"},size:"small"},{icon:l(()=>[t(g(fe))]),_:2},1032,["onClick"]),t(v,{class:"",onClick:D=>G(f),style:{"border-radius":"4px",background:"none",color:"red"},shape:"",size:"small"},{icon:l(()=>[t(g(ge))]),_:2},1032,["onClick"])],64)):u("",!0)]),_:1},8,["data-source"])]),c("div",Ve,[t(Z,{current:I.value,"onUpdate:current":e[1]||(e[1]=n=>I.value=n),simple:"","page-size":"50",total:O.value},null,8,["current","total"])])])]),_:1}),c("div",null,[t(Q,{visible:_.value,"onUpdate:visible":e[8]||(e[8]=n=>_.value=n),title:o.value.id==null?"Nuevo Programa":"Editar Programa",style:{"margin-top":"-40px"}},{footer:l(()=>[t(v,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:l(()=>e[15]||(e[15]=[i("Cancelar")])),_:1},8,["onClick"]),t(v,{type:"primary",onClick:e[7]||(e[7]=n=>j())},{default:l(()=>e[16]||(e[16]=[i("Guardar")])),_:1})]),default:l(()=>[t(J,ae({ref:"formRef",name:"custom-validation",model:a.formState,rules:a.rules},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:l(()=>[t(C,{"has-feedback":"",label:"Codigo",name:"codigo"},{default:l(()=>[t(F,{type:"text",value:o.value.codigo,"onUpdate:value":e[2]||(e[2]=n=>o.value.codigo=n),autocomplete:"off"},null,8,["value"])]),_:1}),t(C,{"has-feedback":"",label:"Nombre",name:"nombre"},{default:l(()=>[t(F,{type:"text",value:o.value.nombre,"onUpdate:value":e[3]||(e[3]=n=>o.value.nombre=n),autocomplete:"off"},null,8,["value"])]),_:1}),t(C,{"has-feedback":"",label:"Facultad",name:"facultad"},{default:l(()=>[t(V,{options:A.value,ref:"Tipo",style:{width:"100%"},onFocus:a.focus,onChange:a.handleChange,value:o.value.id_facultad,"onUpdate:value":e[4]||(e[4]=n=>o.value.id_facultad=n)},null,8,["options","onFocus","onChange","value"])]),_:1}),t(C,{"has-feedback":"",label:"Area",name:"area"},{default:l(()=>[t(V,{style:{width:"100%"},onFocus:a.focus,onChange:a.handleChange,value:o.value.area,"onUpdate:value":e[5]||(e[5]=n=>o.value.area=n)},{default:l(()=>[t(S,{value:"BIOMÉDICAS"},{default:l(()=>e[12]||(e[12]=[i(" BIOMEDICAS ")])),_:1}),t(S,{value:"INGENIERÍAS"},{default:l(()=>e[13]||(e[13]=[i(" INGENIERÍAS ")])),_:1}),t(S,{value:"SOCIALES"},{default:l(()=>e[14]||(e[14]=[i(" SOCIALES ")])),_:1})]),_:1},8,["onFocus","onChange","value"])]),_:1}),t(C,{"has-feedback":"",label:"Vigente",name:"estado"},{default:l(()=>[t(H,{checked:o.value.estado,"onUpdate:checked":e[6]||(e[6]=n=>o.value.estado=n)},null,8,["checked"])]),_:1})]),_:1},16,["model","rules","onFinish","onValidate","onFinishFailed"])]),_:1},8,["visible","title"])])],64)}}};export{qe as default};
