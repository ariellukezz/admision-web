import{r as n,e as f,H as T,D as Z,o as i,c as u,a as t,u as p,w as d,F as q,y as x,Z as J,d as v,E as Q,t as W,f as y,b as C,n as I,j as X,I as Y,aP as ee,_ as ae,B as te,h as oe,i as ne}from"./app-d59ad026.js";import{_ as se}from"./AuthenticatedLayout-9600519d.js";import{S as le}from"./SearchOutlined-34791e28.js";import{F as ie}from"./FormOutlined-d0343b20.js";import{D as de}from"./DeleteOutlined-d4ea6ae4.js";import"./logotiny-c4b525af.js";import"./Header-bea2c992.js";import"./AntdIcon-fb17ae9a.js";import"./perfil-81e8a979.js";/* empty css                                                               */import"./_plugin-vue_export-helper-c27b6911.js";import"./UserOutlined-fc2e5cab.js";import"./EditOutlined-8ce5359b.js";import"./DownOutlined-562c666f.js";/* empty css                                                            */const ue={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 98px)"}},ce={class:"mr-3"},re={class:"flex justify-between",style:{position:"relative"}},_e={style:{}},pe=["onDblclick"],ve={key:1},me={key:1,class:"flex",style:{"justify-content":"center"}},ge={key:0},fe={key:1},xe={key:2},ye={key:2,style:{display:"flex",gap:"2px"}},he={class:"flex",style:{"justify-content":"flex-end"}},Re={__name:"index",setup(we){n(!1);const m=n(""),g=n(1),V=n(null),B=n([]),c=n(1),h=n(!1);n("");const D=n([]),o=n({id:null,codigo:"",nombre:"",vacantes:"",estado:!0});f(m,(e,a)=>{r()}),f(c,(e,a)=>{r()}),f(h,(e,a)=>{h.value==!1&&o.value.id!=null&&(o.value.id=null,o.value.codigo=null,o.value.nombre=null,o.value.estado=!0)}),f(g,(e,a)=>{r()});const j=e=>{h.value=!0,o.value.id=e.id,o.value.codigo=e.codigo,o.value.nombre=e.nombre,o.value.nivel_academico=e.nivel_academico,o.value.tipo_autorizacion=e.tipo_autorizacion,o.value.id_facultad=e.id_fac,e.estado==1?o.value.estado=!0:o.value.estado=!1,o.value.area=e.area},F=async()=>{let e=await x.get("get-modalidades-activas");B.value=e.data.datos},r=async(e="")=>{let a=await x.post("get-vacantes-admin?page="+g.value,{modalidad:c.value,term:m.value});D.value=a.data.datos.data,V.value=a.data.datos.total},N=e=>{x.post("delete-vacante",{id_vacante:e.id_vacante}).then(a=>{r(),$("warning","PROGRAMA ELIMINADO",a.data.mensaje)})},O=[{title:"Cod",dataIndex:"codigo_sunedu",width:"60px",align:"center",responsive:["md"]},{title:"Nombre",dataIndex:"programa"},{title:"Vacantes",dataIndex:"vacantes",width:"160px",align:"center",responsive:["md"]},{title:"Estado",dataIndex:"estado",align:"center",width:"80px",responsive:["md"]},{title:"Opciones",dataIndex:"acciones",width:"80px",align:"center"}],E=n([]),S=e=>{console.log("selectedRowKeys changed: ",e),E.value=e};T(()=>({selectedRowKeys:p(E),onChange:S,hideDefaultSelections:!0}));const $=(e,a,b)=>{I[e]({message:a,description:b})};F(),r();const w=n(null),R=n({}),U=e=>{w.value=e},A=n({id_modalidad:c.value,id_programa:null,estado:null,vacantes:null,id_vacante:null}),z=e=>{w.value=null,A.value=e,delete R.value[e.id_programa],x.post("save-numero-vacantes",{id_vacante:e.id_vacante,id_programa:e.id_programa,vacantes:e.vacantes,id_modalidad:c.value}).then(()=>{I.success({message:"Registro actualizado"}),r()}).catch(()=>{I.error({message:"Error al actualizar"})})};return(e,a)=>{const b=X,M=Y,K=Z("row"),G=ee,k=ae,P=te,H=oe,L=ne;return i(),u(q,null,[t(p(J),{title:"Procesos"}),t(se,null,{default:d(()=>[v("div",ue,[t(K,{class:"flex justify-between mb-4"},{default:d(()=>[v("div",ce,[t(b,{ref:"select",value:c.value,"onUpdate:value":a[0]||(a[0]=l=>c.value=l),options:B.value,onFocus:e.focus,onChange:e.handleChange},null,8,["value","options","onFocus","onChange"])]),v("div",re,[t(M,{type:"text",placeholder:"Buscar",value:m.value,"onUpdate:value":a[1]||(a[1]=l=>m.value=l),style:{"max-width":"300px"}},{prefix:d(()=>[t(p(le))]),_:1},8,["value"])])]),_:1}),v("div",_e,[t(H,{columns:O,"data-source":D.value,pagination:!1,size:"small",scroll:{x:380,y:"calc(100vh - 240px)"}},{bodyCell:d(({column:l,index:be,record:s})=>[l.dataIndex==="vacantes"?(i(),u("div",{key:0,onDblclick:_=>U(s.id_programa)},[w.value===s.id_programa?(i(),Q(G,{key:0,value:s.vacantes,"onUpdate:value":_=>s.vacantes=_,min:0,onPressEnter:_=>z(s),onBlur:_=>z(s),autofocus:""},null,8,["value","onUpdate:value","onPressEnter","onBlur"])):(i(),u("span",ve,W(s.vacantes||"0"),1))],40,pe)):y("",!0),l.dataIndex==="estado"?(i(),u("div",me,[s.estado==1?(i(),u("div",ge,[t(k,{color:"blue"},{default:d(()=>a[3]||(a[3]=[C("Activo")])),_:1})])):y("",!0),s.estado==0?(i(),u("div",fe,[t(k,{color:"red"},{default:d(()=>a[4]||(a[4]=[C("Inactivo")])),_:1})])):(i(),u("div",xe,[t(k,{color:"#cdcdcd"},{default:d(()=>a[5]||(a[5]=[C("Sin asignar")])),_:1})]))])):y("",!0),l.dataIndex==="acciones"?(i(),u("div",ye,[t(P,{onClick:_=>j(s),size:"small",style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#1890ff",display:"flex","align-items":"center"}},{default:d(()=>[t(p(ie))]),_:2},1032,["onClick"]),t(P,{onClick:_=>N(s),size:"small",style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#ff4d4f",display:"flex","align-items":"center"}},{default:d(()=>[t(p(de))]),_:2},1032,["onClick"])])):y("",!0)]),_:1},8,["data-source"])]),v("div",he,[t(L,{current:g.value,"onUpdate:current":a[2]||(a[2]=l=>g.value=l),simple:"","page-size":"50",total:V.value},null,8,["current","total"])])])]),_:1})],64)}}};export{Re as default};
