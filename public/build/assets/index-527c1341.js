import{a as t,A as Q,r as i,x as X,f as g,o as k,c as w,u as b,w as r,d as h,F,Z as Y,b as _,s as K,t as ee,g as I,D as ae,v as oe,n as te}from"./app-d072e937.js";import{A as re}from"./AuthenticatedLayout-fb13f685.js";import{F as le}from"./FormOutlined-447cd820.js";import"./DropdownLink-87d72ada.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logotiny-c4b525af.js";import"./TeamOutlined-57772511.js";var se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const ne=se;function N(u){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?Object(arguments[s]):{},d=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(n).filter(function(m){return Object.getOwnPropertyDescriptor(n,m).enumerable}))),d.forEach(function(m){ie(u,m,n[m])})}return u}function ie(u,s,n){return s in u?Object.defineProperty(u,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):u[s]=n,u}var P=function(s,n){var d=N({},s,n.attrs);return t(Q,N({},d,{icon:ne}),null)};P.displayName="LockOutlined";P.inheritAttrs=!1;const ue=P,de={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-5"},xe={__name:"index",props:["usuarios"],setup(u){const s=i([]);i("");const n=i(""),d=i([]),m=i([]),f=i(!1),U=()=>{f.value=!0},z=a=>{console.log(a),f.value=!1},x=a=>{e.id=a.id,e.name=a.name,e.paterno=a.paterno,e.materno=a.materno,e.email=a.email,e.rol=a.id_rol,e.id_proceso=a.id_proceso,e.proceso=a.proceso,n.value=a.id_rol,f.value=!0},y=i(),e=X({id:null,name:"",paterno:"",materno:"",email:"",pass:"",checkPass:"",rol:i(null),id_proceso:null,proceso:9}),S={pass:[{required:!0,validator:async(a,o)=>o===""?Promise.reject("Ingrese la contraseña"):(e.checkPass!==""&&y.value.validateFields("checkPass"),Promise.resolve()),trigger:"change"}],checkPass:[{required:!0,validator:async(a,o)=>o===""?Promise.reject("Ingrese la contraseña nuevamente"):o!==e.pass?Promise.reject("Las contraseñas no coenciden"):Promise.resolve(),trigger:"change"}],name:[{required:!0,validator:async(a,o)=>o===""?Promise.reject("Ingrese su nombre"):Promise.resolve(),trigger:"change"}],email:[{validator:async(a,o)=>o===""?Promise.reject("Ingrese su correo electrónico"):Promise.resolve(),trigger:"change"}]},V=[{title:"Nombre",dataIndex:"name",width:"30%"},{title:"Correo",dataIndex:"email"},{title:"Rol",dataIndex:"role_name"},{title:"Proceso",dataIndex:"proceso"},{title:"operation",dataIndex:"operation"}],j={pageSize:20},R={labelCol:{span:8},wrapperCol:{span:18}},A=a=>{console.log(a,e)},L=a=>{console.log(a)},B=()=>{y.value.resetFields()},$=(...a)=>{console.log(a)},M={required:"Ingrese ${label}",types:{email:"${label} no valido"}};i(""),i([{value:"Burns Bay Road"},{value:"Downing Street"},{value:"Wall Street"}]);const C=async()=>{let a=await axios.get("get-usuarios");d.value=a.data.usuarios},q=async()=>{let a=await axios.get("get-roles-u");s.value=a.data.datos},D=async()=>{let a=await axios.get("get-permisos");m.value=a.data.permisos};q(),C(),D();const H=()=>{let a={id:e.id,name:e.name,paterno:e.paterno,materno:e.materno,email:e.email,password:e.pass,rol:2,id_proceso:9};axios.post("save-user",a).then(o=>{console.log(o.data.user),f.value=!1,e.id=null,e.name="",e.paterno="",e.materno="",e.email="",e.pass="",e.checkPass="",e.rol=i(null),e.id_proceso=null,e.proceso=9,C(),E("success","Nuevo Usuario Agregado",o.data.user.name)})},E=(a,o,c)=>{te[a]({message:o,description:c})};return console.log((()=>!!m.value.find(a=>a.id===8))()),(a,o)=>{const c=g("a-button"),T=g("a-table"),p=g("a-input"),v=g("a-form-item"),W=g("a-form"),Z=g("a-modal");return k(),w(F,null,[t(b(Y),{title:"Usuarios"}),t(re,null,{default:r(()=>[h("div",de,[t(c,{class:"mb-3",type:"primary",onClick:U},{default:r(()=>[_("Nuevo")]),_:1}),t(T,{bordered:"","data-source":d.value,columns:V,size:"small",pagination:j},{bodyCell:r(({column:l,index:G,record:O})=>[l.dataIndex==="role_name"?(k(),K(c,{key:0,primary:"",size:"small"},{default:r(()=>[_(ee(d.value[G].role_name),1)]),_:2},1024)):I("",!0),l.dataIndex==="operation"?(k(),w(F,{key:1},[t(c,{class:"mr-1",type:"primary",onClick:J=>x(O),style:{"border-radius":"4px",background:"none",border:"1px solid gray",color:"gray"},size:"small"},{icon:r(()=>[t(b(ue))]),_:2},1032,["onClick"]),t(c,{class:"mr-1",type:"primary",onClick:J=>x(O),style:{"border-radius":"4px",background:"none",color:"blue"},size:"small"},{icon:r(()=>[t(b(le))]),_:2},1032,["onClick"]),t(c,{type:"danger",style:{"border-radius":"4px",background:"none",color:"red"},size:"small"},{icon:r(()=>[t(b(ae))]),_:1})],64)):I("",!0)]),_:1},8,["data-source"])])]),_:1}),h("div",null,[t(Z,{visible:f.value,"onUpdate:visible":o[7]||(o[7]=l=>f.value=l),title:"Nuevo Usuario",style:{"margin-top":"-50px"},onOk:z},{footer:r(()=>[t(c,{type:"primary",onClick:o[6]||(o[6]=l=>H())},{default:r(()=>[_("Submit")]),_:1}),t(c,{style:{"margin-left":"10px"},onClick:B},{default:r(()=>[_("Reset")]),_:1})]),default:r(()=>[h("div",null,[t(W,oe({ref_key:"formRef",ref:y,name:"custom-validation",model:e,rules:S},R,{onFinish:A,onValidate:$,"validate-messages":M,onFinishFailed:L}),{default:r(()=>[t(v,{"has-feedback":"",label:"Nombre",name:"name"},{default:r(()=>[t(p,{value:e.name,"onUpdate:value":o[0]||(o[0]=l=>e.name=l),type:"text",autocomplete:"off"},null,8,["value"])]),_:1}),t(v,{"has-feedback":"",label:"Apellido Paterno",name:"paterno"},{default:r(()=>[t(p,{value:e.paterno,"onUpdate:value":o[1]||(o[1]=l=>e.paterno=l),type:"text",autocomplete:"off"},null,8,["value"])]),_:1}),t(v,{"has-feedback":"",label:"Apellido Materno",name:"materno"},{default:r(()=>[t(p,{value:e.materno,"onUpdate:value":o[2]||(o[2]=l=>e.materno=l),type:"text",autocomplete:"off"},null,8,["value"])]),_:1}),t(v,{"has-feedback":"",label:"Correo",name:"email",rules:[{type:"email",required:!0}]},{default:r(()=>[t(p,{value:e.email,"onUpdate:value":o[3]||(o[3]=l=>e.email=l),type:"text",autocomplete:"off"},null,8,["value"])]),_:1}),t(v,{"has-feedback":"",label:"Contraseña",name:"pass"},{default:r(()=>[t(p,{value:e.pass,"onUpdate:value":o[4]||(o[4]=l=>e.pass=l),type:"password",autocomplete:"off"},null,8,["value"])]),_:1}),t(v,{"has-feedback":"",label:"Confirmar Contraseña",name:"checkPass"},{default:r(()=>[t(p,{value:e.checkPass,"onUpdate:value":o[5]||(o[5]=l=>e.checkPass=l),type:"password",autocomplete:"off"},null,8,["value"])]),_:1}),t(v,{"has-feedback":"",label:"Rol"},{default:r(()=>[t(p,{value:"Revisor",disabled:""})]),_:1})]),_:1},16,["model"])])]),_:1},8,["visible"])])],64)}}};export{xe as default};
