import{r as i,J as ge,e as _,D as _e,o as T,c as V,a as l,u as f,w as o,F as Ae,y as b,Z as be,d as n,b as u,f as xe,n as ce,B as ye,I as Ie,K as Ee,L as Ce,k as De,l as Se,S as Re,j as Ne,m as we,H as Te,h as Ve,i as ke,p as Pe,q as Ue,M as Le}from"./app-41248ce0.js";import{_ as Be}from"./AuthenticatedLayout-5e0086bd.js";import{E as Oe}from"./EyeOutlined-405766e7.js";import{S as Ge}from"./SearchOutlined-f1cee73d.js";import{D as k}from"./DownOutlined-bf89d1ad.js";import{F as qe}from"./FormOutlined-a8838767.js";import{D as je}from"./DeleteOutlined-2c813ff6.js";import"./logotiny-c4b525af.js";import"./Header-42a0cf82.js";import"./AntdIcon-eed1c809.js";/* empty css                                                            */const Fe={class:"mb-4",style:{width:"100%"}},$e={class:"p-6 mb-4",style:{background:"#ffffff","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},ze={class:"flex justify-between"},Ze={class:"flex justify-between",style:{position:"relative"}},Je={style:{"margin-bottom":"-20px"}},Ke={style:{background:"white","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},Me={key:0,style:{display:"flex",gap:"2px"}},Xe={class:"flex justify-between mb-6 mt-2 pr-4"},He={clas:"",style:{scale:"0.9"}},Qe={style:{display:"flex"}},We={key:0,style:{"font-weight":"bold","font-size":"1.1rem"}},Ye={key:1,style:{"font-weight":"bold","font-size":"1.1rem"}},he={class:"flex justify-center"},el={class:"flex justify-end"},ml={__name:"index",setup(ll){const q=i([]),y=i(""),I=i(1),j=i(null),E=i(10),A=i(!1),P=i(null),C=i(null),U=i([]),D=i(null),x=i(!1),F=i(),S=i(),R=i(),$=i(),L=i(),B=i(),z=i(),O=i(),Z=i(),h=t=>{s.cod_modular=t.target.value.replace(/\D/g,"")},s=ge({cod_modular:"",nombre:"",cod_local:"",nivel:"",forma:"",gestion:null,ubigeo:"",direccion:"",observacion:""}),J=i(null),ee=async()=>{x.value=!0,setTimeout(()=>{console.log("Este código se ejecutará después de 2 segundos")},1500);try{const t=await J.value.validateFields(),e=await b.post("save",s);e.status===202?(console.log(e.data.errors),x.value=!1):(ne(),A.value=!1,se("success",e.data.titulo,e.data.mensaje),x.value=!1,v())}catch(t){console.error(t),x.value=!1}},v=async()=>{b.post("get-colegios?page="+I.value,{term:y.value,paginashoja:E.value,dep:R.value,ges:D.value,prov:B.value,dist:Z.value}).then(t=>{q.value=t.data.datos.data,j.value=t.data.datos.total}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})},K=async()=>{b.post("/get-ubigeo",{term:C.value}).then(t=>{U.value=t.data.datos.data,console.log("Datos recibidos:",U)}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})},M=async()=>{let t=await b.post("/get-departamentos-codigo",{term:S.value});F.value=t.data.datos.data},X=async()=>{let t=await b.post("/get-provincias-codigo?page=",{departamento:R.value});$.value=t.data.datos},H=async t=>{let e=await b.post("/get-distritos-codigo?page=",{departamento:R.value,provincia:B.value});z.value=e.data.datos};_(I,(t,e)=>{v()}),_(E,(t,e)=>{v()}),_(y,(t,e)=>{v()}),_(C,(t,e)=>{t.length>=3&&K()}),_(S,(t,e)=>{t.length>=3&&M()}),_(L,(t,e)=>{t.length>=3&&X()}),_(O,(t,e)=>{t.length>=3&&H()}),_(D,(t,e)=>{t.length>=3&&v()});const le=(t,e)=>{s.ubigeo=e.key},oe=(t,e)=>{R.value=e.key,v(),X()},te=(t,e)=>{B.value=e.key,v(),H()},ae=(t,e)=>{Z.value=e.key,v()};M(),v(),K();const Q=t=>{A.value=!0,s.id=t.id,s.cod_modular=t.cod_modular,s.nombre=t.nombre,s.cod_local=t.cod_local,s.gestion=t.gestion,s.forma=t.forma,s.nivel=t.nivel,s.ubigeo=t.ubigeo,P.value=t.lugar,s.direccion=t.direccion,s.observacion=t.observacion},ne=()=>{for(const t in s)s[t]=null},se=(t,e,g)=>{ce[t]({message:e,description:g})},ue=i([{title:"Codigo",dataIndex:"id",align:"center"},{title:"Cod_Mod",dataIndex:"cod_modular"},{title:"Nombre del Colegio",dataIndex:"nombre",responsive:["xs","sm","md","lg"]},{title:"Gestión",dataIndex:"gestion",responsive:["md"]},{title:"Ubicación",dataIndex:"lugar",responsive:["lg"]},{title:"Dirección",dataIndex:"direccion",responsive:["lg"]},{title:"Acciones",dataIndex:"acciones",width:"120px",align:"center"}]);return(t,e)=>{const g=ye,m=Ie,N=Ee,w=Ce,p=De,r=Se,d=Re,c=Ne,W=we,de=Te,ie=Ve,re=ke,pe=Pe,ve=Ue,me=_e("row"),fe=Le;return T(),V(Ae,null,[l(f(be),{title:"Colegios"}),l(Be,null,{default:o(()=>[n("div",Fe,[n("div",$e,[n("div",ze,[n("div",null,[l(g,{type:"primary",onClick:e[0]||(e[0]=a=>A.value=!0),style:{"border-radius":"6px",background:"#476175",border:"none"}},{default:o(()=>e[21]||(e[21]=[u("Nuevo")])),_:1})]),n("div",Ze,[l(m,{type:"text",placeholder:"Buscar",value:y.value,"onUpdate:value":e[1]||(e[1]=a=>y.value=a),style:{"max-width":"300px","border-radius":"6px"}},{prefix:o(()=>[l(f(Ge))]),_:1},8,["value"])])]),n("div",Je,[l(W,{gutter:[16,8],class:"mt-4"},{default:o(()=>[l(r,{xs:24,sm:12,md:12,lg:6},{default:o(()=>[e[22]||(e[22]=n("label",null,"Departamento",-1)),l(p,null,{default:o(()=>[l(w,{options:F.value,onSelect:oe},{default:o(()=>[l(m,{placeholder:"Seleccione un departamento",value:S.value,"onUpdate:value":e[2]||(e[2]=a=>S.value=a)},{suffix:o(()=>[l(N,{title:"Extra information"},{default:o(()=>[l(f(k))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:6},{default:o(()=>[e[23]||(e[23]=n("label",null,"Provincia",-1)),l(p,null,{default:o(()=>[l(w,{options:$.value,onSelect:te},{default:o(()=>[l(m,{placeholder:"Seleccione un departamento",value:L.value,"onUpdate:value":e[3]||(e[3]=a=>L.value=a)},{suffix:o(()=>[l(N,{title:"Extra information"},{default:o(()=>[l(f(k))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:6},{default:o(()=>[e[24]||(e[24]=n("label",null,"Distrito",-1)),l(p,null,{default:o(()=>[l(w,{options:z.value,onSelect:ae},{default:o(()=>[l(m,{placeholder:"Seleccione un departamento",value:O.value,"onUpdate:value":e[4]||(e[4]=a=>O.value=a)},{suffix:o(()=>[l(N,{title:"Extra information"},{default:o(()=>[l(f(k))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:6},{default:o(()=>[e[30]||(e[30]=n("label",null,"Gestión",-1)),l(p,{style:{"border-radius":"none",overflow:"hidden"}},{default:o(()=>[l(c,{value:D.value,"onUpdate:value":e[5]||(e[5]=a=>D.value=a),placeholder:"Seleccione la gestión",style:{"border-radius":"10px !important"}},{default:o(()=>[l(d,{value:null},{default:o(()=>e[25]||(e[25]=[u("TODAS")])),_:1}),l(d,{value:"PÚBLICA DE GESTIÓN DIRECTA"},{default:o(()=>e[26]||(e[26]=[u("PÚBLICA DE GESTIÓN DIRECTA")])),_:1}),l(d,{value:"PRIVADA"},{default:o(()=>e[27]||(e[27]=[u("PRIVADA")])),_:1}),l(d,{value:"PÚBLICA DE GESTIÓN PRIVADA"},{default:o(()=>e[28]||(e[28]=[u("PÚBLICA DE GESTIÓN PRIVADA")])),_:1}),l(d,{value:"EXTRANJERO"},{default:o(()=>e[29]||(e[29]=[u("EXTRANJERA")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})])]),n("div",Ke,[n("div",null,[l(ie,{dataSource:q.value,size:"",columns:ue.value,pagination:!1},{bodyCell:o(({column:a,record:G})=>[a.dataIndex==="acciones"?(T(),V("div",Me,[l(g,{size:"small",style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"green",display:"flex","align-items":"center"}},{default:o(()=>[l(f(Oe))]),_:1}),l(g,{size:"small",onClick:Y=>Q(G),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#1890ff",display:"flex","align-items":"center"}},{default:o(()=>[l(f(qe))]),_:2},1032,["onClick"]),l(de,{title:"¿Estas seguro de eliminar?",onConfirm:Y=>t.eliminar(G),disabled:""},{default:o(()=>[l(g,{size:"small",onClick:Y=>Q(G),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"crimson",display:"flex","align-items":"center"}},{default:o(()=>[l(f(je),{disabled:""})]),_:2},1032,["onClick"])]),_:2},1032,["onConfirm"])])):xe("",!0)]),_:1},8,["dataSource","columns"])]),n("div",Xe,[n("div",null,[l(re,{current:I.value,"onUpdate:current":e[6]||(e[6]=a=>I.value=a),simple:"",total:j.value,"show-less-items":""},null,8,["current","total"])]),n("div",He,[l(c,{value:E.value,"onUpdate:value":e[7]||(e[7]=a=>E.value=a),style:{width:"90px"}},{default:o(()=>[l(d,{value:10},{default:o(()=>e[31]||(e[31]=[u("10 Reg.")])),_:1}),l(d,{value:20},{default:o(()=>e[32]||(e[32]=[u("20 Reg.")])),_:1}),l(d,{value:50},{default:o(()=>e[33]||(e[33]=[u("50 Reg.")])),_:1}),l(d,{value:100},{default:o(()=>e[34]||(e[34]=[u("100 Reg.")])),_:1})]),_:1},8,["value"])])])])]),l(fe,{visible:A.value,"onUpdate:visible":e[20]||(e[20]=a=>A.value=a),footer:!1,centered:"",style:{width:"100%","max-width":"900px"}},{default:o(()=>[n("div",Qe,[s.id===null?(T(),V("span",We,"Nuevo Colegio")):(T(),V("span",Ye,"Editar Colegio"))]),n("div",he,[l(me,{style:{display:"flex","justify-content":"center"}},{default:o(()=>[l(r,{span:24},{default:o(()=>[l(ve,{ref_key:"formDatos",ref:J,name:"form",model:s,rules:t.formRules},{default:o(()=>[l(W,{gutter:16,class:"mt-3"},{default:o(()=>[l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[35]||(e[35]=n("label",null,"Cod. Modular",-1)),l(p,{name:"cod_modular",rules:[{required:!0,message:"Ingrese el cod modular"},{min:7,message:"Debe tener 7 digitos",trigger:"blur"}]},{default:o(()=>[l(m,{value:s.cod_modular,"onUpdate:value":e[8]||(e[8]=a=>s.cod_modular=a),onInput:h,maxlength:7},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:16},{default:o(()=>[e[36]||(e[36]=n("label",null,[u("Nombre del colegio"),n("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"nombre",rules:[{required:!0,message:"Ingrese el nombre del colegio"}]},{default:o(()=>[l(m,{value:s.nombre,"onUpdate:value":e[9]||(e[9]=a=>s.nombre=a)},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[37]||(e[37]=n("label",null,[u("Cod de local"),n("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"cod_local",rules:[{required:!0,message:"Ingrese el codigo del local"}]},{default:o(()=>[l(m,{value:s.cod_local,"onUpdate:value":e[10]||(e[10]=a=>s.cod_local=a)},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[42]||(e[42]=n("label",null,[u("Nivel"),n("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"nivel",rules:[{required:!0,message:"Seleccione el nivel"}]},{default:o(()=>[l(c,{value:s.nivel,"onUpdate:value":e[11]||(e[11]=a=>s.nivel=a),style:{width:"100%"}},{default:o(()=>[l(d,{value:"SECUNDARIA"},{default:o(()=>e[38]||(e[38]=[u("SECUNDARIA")])),_:1}),l(d,{value:"BASICA ALTERNATIVA"},{default:o(()=>e[39]||(e[39]=[u("BASICA ALTERNATIVA")])),_:1}),l(d,{value:"BASICA ALTERNATIVA AVANZADO"},{default:o(()=>e[40]||(e[40]=[u("BASICA ALTERNATIVA AVANZADO")])),_:1}),l(d,{value:"BÁSICA ALTERNATIVA SECUNDARIA"},{default:o(()=>e[41]||(e[41]=[u("BÁSICA ALTERNATIVA SECUNDARIA")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[48]||(e[48]=n("label",null,[u("Forma"),n("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"nivel",rules:[{required:!0,message:"Seleccione el nivel"}]},{default:o(()=>[l(c,{value:s.forma,"onUpdate:value":e[12]||(e[12]=a=>s.forma=a),style:{width:"100%"}},{default:o(()=>[l(d,{value:"ESCOLARIZADA"},{default:o(()=>e[43]||(e[43]=[u("ESCOLARIZADA")])),_:1}),l(d,{value:"NO ESCOLARIZADA"},{default:o(()=>e[44]||(e[44]=[u("NO ESCOLARIZADA")])),_:1}),l(d,{value:"NO APLICA"},{default:o(()=>e[45]||(e[45]=[u("NO APLICA")])),_:1}),l(d,{value:"PRESENCIAL"},{default:o(()=>e[46]||(e[46]=[u("PRESENCIAL")])),_:1}),l(d,{value:"A DISTANCIA"},{default:o(()=>e[47]||(e[47]=[u("A DISTANCIA")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[53]||(e[53]=n("label",null,[u("Gestión"),n("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"gestion",rules:[{required:!0,message:"Selecciona la gestión"}]},{default:o(()=>[l(c,{value:s.gestion,"onUpdate:value":e[13]||(e[13]=a=>s.gestion=a),style:{width:"100%"}},{default:o(()=>[l(d,{value:"PÚBLICA DE GESTIÓN DIRECTA"},{default:o(()=>e[49]||(e[49]=[u("PÚBLICA DE GESTIÓN DIRECTA")])),_:1}),l(d,{value:"PRIVADA"},{default:o(()=>e[50]||(e[50]=[u("PRIVADA")])),_:1}),l(d,{value:"PÚBLICA DE GESTIÓN PRIVADA"},{default:o(()=>e[51]||(e[51]=[u("PÚBLICA DE GESTIÓN PRIVADA")])),_:1}),l(d,{value:"EXTRANJERO"},{default:o(()=>e[52]||(e[52]=[u("EXTRANJERA")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:12},{default:o(()=>[e[54]||(e[54]=n("label",null,[u("Ubicación: Dep/Prov/Dist "),n("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"ubigeo"},{default:o(()=>[l(w,{value:P.value,"onUpdate:value":e[15]||(e[15]=a=>P.value=a),options:U.value,onSelect:le},{default:o(()=>[l(m,{placeholder:"Lugar",value:C.value,"onUpdate:value":e[14]||(e[14]=a=>C.value=a),onKeypress:t.handleKeyPress},{suffix:o(()=>[l(N,{title:"Extra information"},{default:o(()=>[l(f(k))]),_:1})]),_:1},8,["value","onKeypress"])]),_:1},8,["value","options"])]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:12},{default:o(()=>[e[55]||(e[55]=n("label",null,"Dirección",-1)),l(p,{name:"direccion"},{default:o(()=>[l(m,{value:s.direccion,"onUpdate:value":e[16]||(e[16]=a=>s.direccion=a)},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:24},{default:o(()=>[e[56]||(e[56]=n("label",null,"Observación",-1)),l(p,{name:"observacion"},{default:o(()=>[l(pe,{value:s.observacion,"onUpdate:value":e[17]||(e[17]=a=>s.observacion=a)},null,8,["value"])]),_:1})]),_:1})]),_:1}),n("div",el,[n("div",null,[l(g,{type:"primary",class:"mr-2",onClick:e[18]||(e[18]=a=>A.value=!1),style:{"border-radius":"6px",background:"none",color:"#476175",border:"1px solid #476175"}},{default:o(()=>e[57]||(e[57]=[u("Cancelar")])),_:1}),l(g,{type:"primary",onClick:e[19]||(e[19]=a=>ee()),style:{"border-radius":"6px",background:"#476175",border:"none"},loading:x.value},{default:o(()=>e[58]||(e[58]=[u("Guardar")])),_:1},8,["loading"])])])]),_:1},8,["model","rules"])]),_:1})]),_:1})])]),_:1},8,["visible"])]),_:1})],64)}}};export{ml as default};
