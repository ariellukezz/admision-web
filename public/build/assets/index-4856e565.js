import{r as d,e as k,C as J,D as Q,o as r,c as C,a as o,u as f,w as l,d as i,F as U,y as F,M as W,Z as Y,E,t as V,f as b,b as v,G as ee,n as ae,j as oe,I as le,_ as te,S as ne,B as se,h as ie,i as de,k as ue,p as re,q as pe}from"./app-d615f4ff.js";import{_ as me}from"./AuthenticatedLayout-7d11cb42.js";import{S as ve}from"./SearchOutlined-2a3d5edb.js";import{S as ce}from"./SaveOutlined-1a29db96.js";import{F as _e}from"./FormOutlined-47c056d1.js";import{D as ge}from"./DeleteOutlined-29e05531.js";import"./logotiny-c4b525af.js";import"./Header-d78d2df3.js";import"./AntdIcon-92f5221f.js";import"./DownOutlined-f402f4da.js";/* empty css                                                            */const fe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},be={class:"mr-3"},xe={class:"flex justify-between",style:{position:"relative"}},ye={style:{"font-size":"1rem","font-weight":"bold"}},we={key:1,style:{"font-size":"0.95rem"}},Ie={class:""},Me={__name:"index",setup(Se){const P=d([]),_=d(null),x=d(""),D=d([]),c=d(!1),g=d(1),R=d(null),y=d(20),n=d({id:null,codigo:"",id_posulante:"",id_programa:"",id_modalidad:"",estado:!0,observacion:""}),u=d({id:"",nombre:"",dni:""});k(x,(a,e)=>{p()}),k(y,(a,e)=>{p()}),k(_,(a,e)=>{a==0&&(_.value=null),g.value=1,p()}),k(c,(a,e)=>{c.value==!1&&n.value.id!=null&&(n.value.id=null,n.value.id_posulante="",n.value.id_programa="",n.value.id_modalidad="",n.value.estado=!0,n.value.observacion="",u.value.nombre=null,u.value.dni=null,u.value.id=null)}),k(g,(a,e)=>{p()});const B=a=>{c.value=!0,n.value.id=a.id,n.value.codigo=a.codigo,n.value.id_programa=a.id_programa,n.value.id_modalidad=a.id_modalidad,n.value.observacion=a.observaciones,u.value.id=a.id_postulante,u.value.dni=a.dni,u.value.nombre=a.dni+" - "+a.nombres+" "+a.paterno+" "+a.materno};(async()=>{let a=await F.post("/segundas/select-programas-segundas?page="+g.value,{term:x.value,paginashoja:y.value,programa:_.value});P.value=a.data.datos})();const p=async()=>{let a=await F.post("/segundas/get-preinscripciones-segundas?page="+g.value,{term:x.value,paginashoja:y.value,programa:_.value});D.value=a.data.datos.data,R.value=a.data.datos.total},A=()=>{let a={id:n.value.id,id_postulante:u.value.id,id_programa:n.value.id_programa,id_modalidad:n.value.id_modalidad,observacion:n.value.observacion,dni:u.value.dni};F.post("/segundas/actualizar-preinscripciones-segundas",a).then(e=>{p(),O("success",e.data.titulo,e.data.mensaje),c.value=!1})},$=(a,e)=>{let m={id_postulante:a,sexo:e};F.post("actualizar-sexo-postulante",m).then(w=>{p(),O("success",w.data.titulo,w.data.mensaje),c.value=!1})},G=a=>{console.log("eliminar"),F.post("eliminar-preinscripcion/",{id:a.id}).then(e=>{p(),O("warning",e.data.titulo,e.data.mensaje)})},K=[{title:"DNI",dataIndex:"dni",align:"center"},{title:"Postulante",dataIndex:"postulante"},{title:"Sexo",dataIndex:"sexo",align:"center"},{title:"Programa",dataIndex:"programa"},{title:"Modalidad",dataIndex:"modalidad",align:"center"},{title:"Estado",dataIndex:"estado",align:"center"},{title:"Observación",dataIndex:"observacion"},{title:"Acciones",dataIndex:"acciones",width:"140px",align:"center"}],M=d([]),T=a=>{console.log("selectedRowKeys changed: ",a),M.value=a};J(()=>({selectedRowKeys:f(M),onChange:T,hideDefaultSelections:!0}));const O=(a,e,m)=>{ae[a]({message:e,description:m})};return p(),(a,e)=>{const m=oe,w=le,h=Q("row"),j=te,I=ne,S=se,q=ie,L=de,N=ue,X=re,Z=pe,H=W;return r(),C(U,null,[o(f(Y),{title:"Documentos"}),o(me,null,{default:l(()=>[i("div",fe,[o(h,{class:"flex justify-between mb-4"},{default:l(()=>[i("div",be,[o(m,{ref:"select",value:_.value,"onUpdate:value":e[0]||(e[0]=t=>_.value=t),placeholder:"Seleccionar programa de estudios",options:P.value,allowClear:""},null,8,["value","options"])]),i("div",xe,[o(w,{type:"text",placeholder:"Escribe para buscar..!!",value:x.value,"onUpdate:value":e[1]||(e[1]=t=>x.value=t),style:{"max-width":"300px","padding-left":"10px"}},{prefix:l(()=>[o(f(ve))]),_:1},8,["value"])])]),_:1}),o(q,{columns:K,"data-source":D.value,pagination:!1,size:"small"},{bodyCell:l(({column:t,index:Ce,record:s})=>[t.dataIndex==="dni"?(r(),E(j,{key:0,color:"#476175",style:{"padding-top":"3px"}},{default:l(()=>[i("span",ye,V(s.dni),1)]),_:2},1024)):b("",!0),t.dataIndex==="postulante"?(r(),C("span",we,V(s.paterno)+" "+V(s.materno)+", "+V(s.nombres),1)):b("",!0),t.dataIndex==="programa"?(r(),C(U,{key:2},[v(V(s.programa),1)],64)):b("",!0),t.dataIndex==="sexo"?(r(),E(m,{key:3,ref:"select",value:s.sexo,"onUpdate:value":z=>s.sexo=z,placeholder:"Seleccionar",style:{width:"60px"}},{default:l(()=>[o(I,{value:"1"},{default:l(()=>e[10]||(e[10]=[i("span",{style:{color:"blue"}},"M",-1)])),_:1}),o(I,{value:"2"},{default:l(()=>e[11]||(e[11]=[i("span",{style:{color:"red"}},"F",-1)])),_:1})]),_:2},1032,["value","onUpdate:value"])):b("",!0),t.dataIndex==="estado"?(r(),C(U,{key:4},[s.estado===0?(r(),E(j,{key:0,color:"#476175"},{default:l(()=>e[12]||(e[12]=[v("INSCRITO")])),_:1})):(r(),E(j,{key:1,color:"#b01030"},{default:l(()=>e[13]||(e[13]=[v("SIN INSCRIPCIÓN")])),_:1}))],64)):b("",!0),t.dataIndex==="acciones"?(r(),C(U,{key:5},[o(S,{class:"mr-1",type:"success",style:{color:"#476175"},onClick:z=>$(s.id_postulante,s.sexo),size:"small"},{icon:l(()=>[o(f(ce))]),_:2},1032,["onClick"]),o(S,{class:"mr-1",onClick:z=>B(s),style:{color:"blue"},size:"small"},{icon:l(()=>[o(f(_e))]),_:2},1032,["onClick"]),o(S,{onClick:z=>G(s),size:"small",style:{color:"crimson"}},{icon:l(()=>[o(f(ge))]),_:2},1032,["onClick"])],64)):b("",!0)]),_:1},8,["data-source"]),o(L,{current:g.value,"onUpdate:current":e[2]||(e[2]=t=>g.value=t),total:R.value,pageSize:y.value,"onUpdate:pageSize":e[3]||(e[3]=t=>y.value=t),"show-less-items":""},null,8,["current","total","pageSize"])])]),_:1}),i("div",null,[o(H,{open:c.value,"onUpdate:open":e[9]||(e[9]=t=>c.value=t),title:"Modificar Pre inscripción",style:{"margin-top":"-40px"}},{footer:l(()=>[o(S,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:l(()=>e[21]||(e[21]=[v("Cancelar")])),_:1},8,["onClick"]),o(S,{type:"primary",onClick:e[8]||(e[8]=t=>A())},{default:l(()=>e[22]||(e[22]=[v("Guardar")])),_:1})]),default:l(()=>[o(Z,ee({ref:"formRef",name:"custom-validation",model:a.formState},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:l(()=>[o(N,{"has-feedback":"",name:"nombre"},{default:l(()=>[e[14]||(e[14]=i("label",null,"Postulante",-1)),o(w,{type:"text",value:u.value.nombre,"onUpdate:value":e[4]||(e[4]=t=>u.value.nombre=t)},null,8,["value"])]),_:1}),o(N,{"has-feedback":"",name:"postulante"},{default:l(()=>[e[15]||(e[15]=i("label",null,"Programa",-1)),i("div",Ie,[o(m,{ref:"select",value:n.value.id_programa,"onUpdate:value":e[5]||(e[5]=t=>n.value.id_programa=t),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"},options:P.value},null,8,["value","options"])])]),_:1}),o(N,{"has-feedback":"",name:"tipo"},{default:l(()=>[e[19]||(e[19]=i("label",null,"Modalidad",-1)),o(m,{ref:"select",value:n.value.id_modalidad,"onUpdate:value":e[6]||(e[6]=t=>n.value.id_modalidad=t),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"}},{default:l(()=>[o(I,{value:9},{default:l(()=>e[16]||(e[16]=[v("CEPREUNA")])),_:1}),o(I,{value:8},{default:l(()=>e[17]||(e[17]=[v("EXAMEN GENERAL")])),_:1}),o(I,{value:7},{default:l(()=>e[18]||(e[18]=[v("CONADIS")])),_:1})]),_:1},8,["value"])]),_:1}),o(N,{"has-feedback":"",name:"nombre"},{default:l(()=>[e[20]||(e[20]=i("label",null,"Observaciones",-1)),o(X,{type:"text",value:n.value.observacion,"onUpdate:value":e[7]||(e[7]=t=>n.value.observacion=t),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["open"])])],64)}}};export{Me as default};
