import{r,e as T,f as l,o as n,c as m,a as s,u as q,d as o,j as z,w as i,F as Z,l as P,Z as G,b,t as B,g,s as M,p as H,h as J}from"./app-a9666797.js";/* empty css                                                                          */import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import{r as L,u as Q}from"./xlsx-4f9172c7.js";const W=d=>(H("data-v-99756cb3"),d=d(),J(),d),X={class:"p-4",style:{width:"100%",background:"white","border-radius":"8px"}},Y={class:"flex justify-between"},$=W(()=>o("label",{for:"fileInput",class:"",style:{"padding-top":"14px",border:"solid 2px var(--primary-color)","border-radius":"6px",cursor:"pointer",padding:"8px 14px"}}," Seleccionar ",-1)),ee={style:{display:"flex","justify-content":"flex-end"}},te={style:{display:"flex"}},ae={key:0},oe={class:"flex justify-end mt-2 mb-4",style:{"margin-right":"-20px"}},se={style:{color:"#0000009d","margin-top":"-6px"}},re={style:{"margin-right":"-20px"}},ne={key:0},ie={key:1,style:{scale:"0.8rem"}},le={key:2},de={__name:"participantes",props:["proceso"],setup(d){const w=d,v=r([]),c=r(0),C=r(""),x=r(""),V=async()=>{c.value=0;try{const e=await P.post("subir-participantes-simulacro",{data:v.value,proceso:w.proceso},{onUploadProgress:t=>{t.lengthComputable&&(c.value=Math.round(t.loaded/t.total*100))}});console.log("Respuesta del servidor:",e.data),c.value=100,I()}catch(e){c.value=70,C.value="exception",console.error("Error:",e)}},D=e=>{const t=e.target.files[0],p=new FileReader;p.onload=k=>{const h=new Uint8Array(k.target.result),y=L(h,{type:"array"}),S=y.SheetNames[0],f=y.Sheets[S],a=Q.sheet_to_json(f,{header:1}),u=a[0],_=a.slice(1).map(F=>{const j={};return u.forEach((U,R)=>{j[U]=F[R]}),j});v.value=_},p.readAsArrayBuffer(t)},N=r([]),I=async()=>{P.post("/get-participantes-externo",{term:x.value,proceso:w.proceso}).then(e=>{N.value=e.data.datos.data}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})};let A;T(x,(e,t)=>{clearTimeout(A),A=setTimeout(()=>{I()},300)}),I();const O=r([{title:"N°",dataIndex:"nro",align:"center"},{title:"DNI",dataIndex:"dni"},{title:"Ap. Paterno",dataIndex:"paterno"},{title:"Ap. Materno",dataIndex:"materno"},{title:"Mombres",dataIndex:"nombres"},{title:"Colegio",dataIndex:"colegio"},{title:"distito",dataIndex:"distrito"},{title:"Area",dataIndex:"area"}]),E=r([{title:"N°",dataIndex:"nro",align:"center"},{title:"DNI",dataIndex:"dni"},{title:"Ap. Paterno",dataIndex:"paterno"},{title:"Ap. Materno",dataIndex:"materno"},{title:"Mombres",dataIndex:"nombres"},{title:"Colegio",dataIndex:"colegio"},{title:"distito",dataIndex:"distrito"},{title:"Area",dataIndex:"area"},{title:"Observaciones",dataIndex:"id_ide",align:"center"}]);return(e,t)=>{const p=l("a-button"),k=l("a-progress"),h=l("a-table"),y=l("SearchOutlined"),S=l("a-input"),f=l("a-tag");return n(),m(Z,null,[s(q(G),{title:"Inicio"}),o("div",X,[o("form",{onSubmit:t[0]||(t[0]=z((...a)=>e.submit&&e.submit(...a),["prevent"]))},[o("div",Y,[$,o("input",{id:"fileInput",type:"file",onChange:D,style:{display:"none"}},null,32),o("div",ee,[s(p,{class:"mr-2",style:{"border-radius":"5px",height:"38px",border:"solid 1px var(--primary-color)",color:"var(--primary-color)"},onClick:e.descargar},{default:i(()=>[b("Plantilla")]),_:1},8,["onClick"]),s(p,{style:{height:"38px","border-radius":"5px",border:"none",color:"white",background:"var(--primary-color)"},onClick:V},{default:i(()=>[b(" Subir")]),_:1})])])],32),o("div",te,[s(k,{percent:c.value,status:C.value},null,8,["percent","status"])]),o("div",null,[s(h,{dataSource:v.value,columns:O.value,size:"small",pagination:!1},{bodyCell:i(({column:a,index:u,record:_})=>[a.dataIndex==="nro"?(n(),m("span",ae,B(u+1),1)):g("",!0)]),_:1},8,["dataSource","columns"])]),o("div",oe,[s(S,{value:x.value,"onUpdate:value":t[1]||(t[1]=a=>x.value=a),style:{"max-width":"260px","border-radius":"6px",height:"32px"},placeholder:"Buscar"},{prefix:i(()=>[o("span",se,[s(y)])]),_:1},8,["value"])]),o("div",re,[s(h,{dataSource:N.value,columns:E.value,size:"small",pagination:!1},{bodyCell:i(({column:a,index:u,record:_})=>[a.dataIndex==="nro"?(n(),m("span",ne,B(u+1),1)):g("",!0),a.dataIndex==="id_ide"?(n(),m("div",ie,[_.id_ide==0?(n(),M(f,{key:0,color:"red",class:"small-text",style:{"border-radius":"14px"}},{default:i(()=>[b(" sin ide ")]),_:1})):g("",!0),_.area==null?(n(),M(f,{key:1,color:"purple"},{default:i(()=>[b(" sin area ")]),_:1})):(n(),m("span",le))])):g("",!0)]),_:1},8,["dataSource","columns"])])])],64)}}},me=K(de,[["__scopeId","data-v-99756cb3"]]);export{me as default};
