import{_ as ue}from"./Veterinaria-38d4ac30.js";import{r as p,J as pe,e as F,C as V,D,o as s,c,a as o,u as O,w as r,d as n,F as h,y as f,M as _e,Z as me,b as m,t as i,f as u,E as k,s as $,R as ve,n as Ie,B as ge,I as fe,_ as Ce,h as Ae,i as be,k as ye,S as Ee,j as Ne,q as xe,l as Re,m as Oe}from"./app-71fb5431.js";import{_ as he}from"./AuthenticatedLayout-44ea7368.js";import{_ as ke}from"./_plugin-vue_export-helper-c27b6911.js";import{E as Se}from"./EyeOutlined-071b7d86.js";import{F as we}from"./FormOutlined-0dc0af22.js";import{D as Ge}from"./DeleteOutlined-f123c7a9.js";import"./logotiny-c4b525af.js";import"./Header-893e1edc.js";import"./AntdIcon-7c41e32f.js";import"./DownOutlined-c58e0def.js";/* empty css                                                            */const De={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 102px)"}},Me={class:"mr-3"},Te={class:"flex justify-between",style:{position:"relative"}},Ue={style:{}},Le={key:0},ze={style:{"font-size":".9rem"}},Pe={key:1},je={style:{"font-size":".9rem"}},qe={key:2},Be={style:{"font-size":".9rem"}},Fe={key:3},Ve={style:{"font-size":".8rem"}},$e={key:4},He={style:{"font-size":".9rem"}},Ye={key:5,class:"flex",style:{"justify-content":"center"}},Je={key:6,class:"flex",style:{"justify-content":"center"}},Ke={class:"flex",style:{"justify-content":"flex-end"}},Qe={class:"flex justify-center"},Ze={style:{width:"100%","max-width":"1000px","margin-top":"20px"}},Xe=["onClick"],We={style:{display:"flex","justify-content":"space-between",width:"100%","align-items":"center"}},ea={style:{width:"calc(100% - 50px)"}},aa={style:{"font-size":".8rem","text-transform":"capitalize"}},oa={__name:"carreras_previas",setup(ta){const y=p(""),E=p(1),M=p(null),S=p(!1),A=p(!1),v=p([]),T=p(null),l=pe({id:"",codigo:"",carrera:"",condicion:"",dni_postulante:""}),H=()=>{A.value=!0};F(y,(e,a)=>{b()}),F(E,(e,a)=>{b()});const Y=e=>{A.value=!0,programa.value.id=e.id,programa.value.codigo=e.codigo,programa.value.nombre=e.nombre,programa.value.nivel_academico=e.nivel_academico,programa.value.tipo_autorizacion=e.tipo_autorizacion,programa.value.id_facultad=e.id_fac,e.estado==1?programa.value.estado=!0:programa.value.estado=!1,programa.value.area=e.area},b=async(e="")=>{let a=await f.post("get-carreras-previas-registrado?page="+E.value,{term:y.value});v.value=a.data.datos.data,M.value=a.data.datos.total},J=async()=>{await T.value.validate(),f.post("save-carrera-previa",l).then(e=>{b(),U("success",e.data.titulo,e.data.mensaje),A.value=!1})},K=e=>{f.get("eliminar-carrera-previa/"+e).then(a=>{b(),U("warning","PROGRAMA ELIMINADO",a.data.mensaje)})},Q=[{title:"Cod",dataIndex:"codigo",width:"60px",align:"center",responsive:["md"]},{title:"N° doc",dataIndex:"dni_postulante",width:"80px"},{title:"Nombre",dataIndex:"nombres"},{title:"Programa",dataIndex:"programa",align:"left",responsive:["md"]},{title:"Condicion.",dataIndex:"condicion",width:"120px",align:"center",responsive:["md"]},{title:"Acciones",dataIndex:"acciones",width:"90px",align:"center"}],U=(e,a,_)=>{Ie[e]({message:a,description:_})},Z=e=>{W(e.dni_postulante),S.value=!0},L=[{cod_car:"23",nombre:"INGENIERÍA DE SISTEMAS"},{cod_car:"01",nombre:"INGENIERÍA AGRONÓMICA"},{cod_car:"12",nombre:"TURISMO"},{cod_car:"07",nombre:"ADMINISTRACIÓN"},{cod_car:"14",nombre:"CIENCIAS DE LA COMUNICACIÓN SOCIAL"},{cod_car:"11",nombre:"SOCIOLOGÍA"},{cod_car:"03",nombre:"INGENIERÍA TOPOGRÁFICA Y AGRIMENSURA"},{cod_car:"20",nombre:"EDUCACIÓN PRIMARIA"},{cod_car:"17",nombre:"EDUCACIÓN SECUNDARIA"},{cod_car:"31",nombre:"INGENIERÍA GEOLÓGICA"},{cod_car:"08",nombre:"ENFERMERÍA"},{cod_car:"15",nombre:"BIOLOGÍA"},{cod_car:"35",nombre:"INGENIERÍA AGRÍCOLA"},{cod_car:"29",nombre:"ODONTOLOGÍA"},{cod_car:"28",nombre:"NUTRICIÓN HUMANA"},{cod_car:"13",nombre:"ANTROPOLOGÍA"},{cod_car:"56",nombre:"ARTE"},{cod_car:"05",nombre:"INGENIERÍA ECONÓMICA"},{cod_car:"32",nombre:"INGENIERÍA CIVIL"},{cod_car:"06",nombre:"CIENCIAS CONTABLES"},{cod_car:"04",nombre:"MEDICINA VETERINARIA Y ZOOTECNIA"},{cod_car:"30",nombre:"INGENIERÍA METALÚRGICA"},{cod_car:"24",nombre:"INGENIERÍA ELECTRÓNICA"},{cod_car:"22",nombre:"INGENIERÍA ESTADÍSTICA E INFORMÁTICA"},{cod_car:"34",nombre:"CIENCIAS FÍSICO MATEMÁTICAS"},{cod_car:"16",nombre:"EDUCACIÓN SECUNDARIA"},{cod_car:"33",nombre:"ARQUITECTURA Y URBANISMO"},{cod_car:"09",nombre:"TRABAJO SOCIAL"},{cod_car:"10",nombre:"INGENIERÍA DE MINAS"},{cod_car:"36",nombre:"INGENIERÍA MECÁNICA ELÉCTRICA"},{cod_car:"02",nombre:"INGENIERÍA AGROINDUSTRIAL"},{cod_car:"26",nombre:"INGENIERÍA QUÍMICA"},{cod_car:"25",nombre:"DERECHO"},{cod_car:"21",nombre:"EDUCACIÓN INICIAL"},{cod_car:"18",nombre:"EDUCACIÓN FÍSICA"},{cod_car:"27",nombre:"MEDICINA HUMANA"},{cod_car:"99",nombre:"INGENIERÍA AGRíCOLA"}],z=V({get(){return l.carrera?l.carrera.cod_car:null},set(e){l.carrera=L.find(a=>a.cod_car===e)||null}}),X=e=>{console.log("Seleccionado cod_car:",e),console.log("Objeto carrera:",l.carrera)};b();const I=p(null),w=p(null),C=p([]),W=async e=>{C.value=[],I.value=null;const a=await f.get("/get-data-prisma/"+e);a.data.estado===!0&&(I.value=a.data.datos),ee()},ee=async()=>{if(console.log(w.value),I.value!=null){const e=await f.post("https://service2.unap.edu.pe/TieneCarrerasPrevias/",{doc_:I.value.dni,nom_:I.value.nombre,app_:I.value.paterno,apm_:I.value.materno},{headers:{"Content-Type":"application/json"}});C.value=e.data}else{const e=await f.post("https://service2.unap.edu.pe/TieneCarrerasPrevias/",{doc_:w.value,nom_:"DIRECCIÓN",app_:"ADMISIÓN",apm_:"UNAP"},{headers:{"Content-Type":"application/json"}});C.value=e.data}},ae=async()=>{f.post("/registrar-carreras-previas",{carreras:te.value,dni:w.value}).then(e=>{confirmarcion.value=e.data.estado}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})},oe=e=>{e.selected=!e.selected},te=V(()=>{if(C.value)return C.value.filter(e=>e.selected)});return(e,a)=>{const _=ge,re=D("user-outlined"),N=fe,ne=D("row"),x=Ce,se=Ae,le=be,G=D("KeyboardOutlined"),R=ye,ie=Ee,de=Ne,ce=xe,P=_e,j=Re,q=Oe;return s(),c(h,null,[o(O(me),{title:"Carreras previas"}),o(he,null,{default:r(()=>[n("div",De,[o(ne,{class:"flex justify-between mb-4"},{default:r(()=>[n("div",Me,[o(_,{type:"primary",style:{"border-radius":"5px",background:"#476175"},onClick:H},{default:r(()=>a[10]||(a[10]=[m("Agregar")])),_:1})]),n("div",Te,[o(N,{type:"text",placeholder:"buscar....",value:y.value,"onUpdate:value":a[0]||(a[0]=t=>y.value=t),style:{"max-width":"300px","padding-left":"30px"}},{prefix:r(()=>[o(re)]),_:1},8,["value"])])]),_:1}),n("div",Ue,[o(se,{columns:Q,"data-source":v.value,pagination:!1,size:"small",scroll:{x:380,y:"calc(100vh - 240px)"}},{bodyCell:r(({column:t,index:g,record:d})=>[t.dataIndex==="codigo"?(s(),c("div",Le,[n("span",ze,i(d.codigo),1)])):u("",!0),t.dataIndex==="dni-postulante"?(s(),c("div",Pe,[n("span",je,i(d.dni_postulante),1)])):u("",!0),t.dataIndex==="nombres"?(s(),c("div",qe,[n("span",Be,i(d.nombre),1)])):u("",!0),t.dataIndex==="nombres"?(s(),c("div",Fe,[n("span",Ve,i(d.paterno)+" "+i(d.materno)+" "+i(d.nombres),1)])):u("",!0),t.dataIndex==="facultad"?(s(),c("div",$e,[n("span",He,i(d.facultad),1)])):u("",!0),t.dataIndex==="area"?(s(),c("div",Ye,[v.value[g].area=="BIOMÉDICAS"?(s(),k(x,{key:0,style:{"font-size":".8rem"},color:"cyan"},{default:r(()=>[m(i(v.value[g].area),1)]),_:2},1024)):u("",!0),v.value[g].area=="SOCIALES"?(s(),k(x,{key:1,style:{"font-size":".8rem"},color:"purple"},{default:r(()=>[m(i(v.value[g].area),1)]),_:2},1024)):u("",!0),v.value[g].area=="INGENIERÍAS"?(s(),k(x,{key:2,style:{"font-size":".8rem"},color:"blue"},{default:r(()=>[m(i(v.value[g].area),1)]),_:2},1024)):u("",!0)])):u("",!0),t.dataIndex==="condicion"?(s(),c("div",Je,[n("div",null,[o(x,{color:"purple"},{default:r(()=>[m(i(d.condicion),1)]),_:2},1024)])])):u("",!0),t.dataIndex==="acciones"?(s(),c(h,{key:7},[o(_,{type:"",onClick:B=>Z(d),style:{"border-radius":"4px",background:"none",color:"green"},size:"small"},{icon:r(()=>[o(O(Se))]),_:2},1032,["onClick"]),o(_,{type:"",onClick:B=>Y(d),style:{"border-radius":"4px",background:"none",color:"gray"},size:"small"},{icon:r(()=>[o(O(we))]),_:2},1032,["onClick"]),o(_,{class:"",onClick:B=>K(d.id),style:{"border-radius":"4px",background:"none",color:"red"},shape:"",size:"small"},{icon:r(()=>[o(O(Ge))]),_:2},1032,["onClick"])],64)):u("",!0)]),_:1},8,["data-source"])]),n("div",Ke,[o(le,{current:E.value,"onUpdate:current":a[1]||(a[1]=t=>E.value=t),simple:"","page-size":"50",total:M.value},null,8,["current","total"])])])]),_:1}),n("div",null,[o(P,{open:A.value,"onUpdate:open":a[7]||(a[7]=t=>A.value=t),title:l.id==null?"Nuevo Programa":"Editar Programa",style:{"margin-top":"-40px"}},{footer:r(()=>[o(_,{style:{"margin-left":"10px"},onClick:e.resetForm},{default:r(()=>a[11]||(a[11]=[m("Cancelar")])),_:1},8,["onClick"]),o(_,{type:"primary",onClick:a[6]||(a[6]=t=>J())},{default:r(()=>a[12]||(a[12]=[m("Guardar")])),_:1})]),default:r(()=>[o(ce,{model:l,ref_key:"formAnterior",ref:T},{default:r(()=>[o(R,{label:"Código",name:"codigo",rules:[{required:!0,message:"Campo requerido",trigger:"change"}]},{default:r(()=>[o(N,{value:l.codigo,"onUpdate:value":a[2]||(a[2]=t=>l.codigo=t),placeholder:"Ingrese Código"},{prefix:r(()=>[o(G)]),_:1},8,["value"])]),_:1}),o(R,{label:"Carrera",name:"carrera",rules:[{required:!0,message:"Campo requerido",trigger:"change"}]},{default:r(()=>[o(de,{value:z.value,"onUpdate:value":a[3]||(a[3]=t=>z.value=t),placeholder:"Seleccione una carrera",onChange:X},{default:r(()=>[(s(),c(h,null,$(L,t=>o(ie,{key:t.cod_car,value:t.cod_car},{default:r(()=>[m(i(t.nombre),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),o(R,{label:"Condición",name:"condicion",rules:[{required:!0,message:"Campo requerido",trigger:"change"}]},{default:r(()=>[o(N,{value:l.condicion,"onUpdate:value":a[4]||(a[4]=t=>l.condicion=t),placeholder:"Ingrese Condición"},{prefix:r(()=>[o(G)]),_:1},8,["value"])]),_:1}),o(R,{label:"DNI Postulante",name:"dni_postulante",rules:[{required:!0,message:"Campo requerido",trigger:"change"}]},{default:r(()=>[o(N,{value:l.dni_postulante,"onUpdate:value":a[5]||(a[5]=t=>l.dni_postulante=t),placeholder:"Ingrese DNI"},{prefix:r(()=>[o(G)]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])]),o(P,{open:S.value,"onUpdate:open":a[9]||(a[9]=t=>S.value=t),title:"Carreras anteriores",footer:!1,style:{"margin-top":"-40px"}},{default:r(()=>[n("div",Qe,[n("div",Ze,[o(q,{style:{display:"flex","justify-content":"center"},class:"pb-0"},{default:r(()=>[o(j,{span:24},{default:r(()=>[o(q,{gutter:16,style:{display:"fleX","justify-content":"center"}},{default:r(()=>[(s(!0),c(h,null,$(C.value,t=>(s(),k(j,{key:t,xs:24,sm:24,md:24,lg:24,style:{"margin-bottom":"10px"}},{default:r(()=>[n("div",{onClick:g=>oe(t),class:ve([{selected:t.selected},"flex p-4"]),style:{height:"80px","border-radius":"5px",cursor:"pointer",border:"solid 1px #d9d9d9","align-items":"center"}},[n("div",We,[n("div",ea,[n("span",aa,i(t.career),1)]),a[13]||(a[13]=n("div",{class:"flex justify-center",style:{width:"50px",height:"60px","align-items":"center"}},[n("img",{src:ue,width:"50px"})],-1))])],10,Xe)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),n("div",null,[o(_,{onClick:a[8]||(a[8]=t=>ae())},{default:r(()=>a[14]||(a[14]=[m("Registrar")])),_:1})])])])]),_:1},8,["open"])],64)}}},Ia=ke(oa,[["__scopeId","data-v-bdd1e22b"]]);export{Ia as default};
