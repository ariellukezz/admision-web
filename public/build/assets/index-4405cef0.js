import{r as m,e as R,C as ie,D as de,o as f,c as I,a as o,u as b,w as s,d as t,F as G,y as _,M as re,Z as ue,b as p,t as h,E,f as F,G as Y,n as pe,B as me,j as ve,I as ce,_ as ge,h as fe,i as be,k as _e,S as ye,p as we,q as xe,O as Se}from"./app-c00487d3.js";import{_ as he}from"./LayoutDirector-d9d7381d.js";import ke from"./Perfil-ea0d78e6.js";import{D as V}from"./DownloadOutlined-65010fc6.js";import{P as Ce}from"./PlusOutlined-46d0c402.js";import{S as Ie}from"./SearchOutlined-3ee38a2a.js";import{F as Fe}from"./FormOutlined-a5ae4308.js";import{D as Ue}from"./DeleteOutlined-a67340d5.js";import"./logotiny-c4b525af.js";import"./Header-97c86031.js";import"./AntdIcon-6068509a.js";import"./DownOutlined-0f19ab7a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./UserOutlined-7e2dc3c3.js";const Re={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4 pb-0 mb-4"},$e={class:"flex justify-between"},De={class:"ml-0 mt-1"},Oe={style:{"font-size":"1.4rem"}},ze={class:"flex"},Ee={class:"mr-1"},Ve={class:"flex"},Pe={class:"mr-2",style:{"margin-top":"-3px"}},je={class:"mr-1"},Ae={class:"flex"},Le={class:"mr-2",style:{"margin-top":"-3px"}},Ne={class:"flex"},Me={class:"mr-2",style:{"margin-top":"-3px"}},Te={class:"flex mt-4 mb-6 justify-between"},Be={class:"mr-1"},Ge={class:"flex"},Ye={class:"mr-2",style:{"margin-top":"-3px"},disabled:""},He={class:"flex"},Ke={class:"mr-1"},qe={class:"flex justify-between",style:{position:"relative"}},Xe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg py-4"},Ze={style:{"font-size":".81rem","font-weight":"bold"}},Je={key:1,style:{"font-size":"0.9rem"}},Qe={key:2,style:{"font-size":"0.8rem"}},We={key:3,style:{"font-size":"0.8rem","text-transform":"uppercase"}},ea={key:5,class:"flex justify-center",style:{}},aa={class:"mr-1"},oa={class:"mr-1"},ta={class:""},la={class:""},na={class:"p-4"},sa={class:""},ia={class:"mr-4"},ka={__name:"index",setup(da){const P=m([]),$=m([]),v=m(null),g=m(""),j=m([]),U=m(!1),k=m(!1),x=m(1),D=m(null),C=m(20),l=m({id:null,codigo:"",id_posulante:"",id_programa:"",id_modalidad:"",estado:!0,observacion:""}),d=m({id:"",nombre:"",dni:""}),H=a=>{l.value.id=a.id,l.value.codigo=a.codigo,l.value.id_programa=a.id_programa,l.value.id_modalidad=a.id_modalidad,l.value.observacion=a.observacion,d.value.id=a.id_postulante,d.value.dni=a.dni,d.value.nombre=a.dni+" - "+a.nombres+" "+a.paterno+" "+a.materno,U.value=!0};R(g,(a,e)=>{y()}),R(C,(a,e)=>{y()}),R(v,(a,e)=>{a==0&&(v.value=null),x.value=1,y()}),R(k,(a,e)=>{k.value==!1&&l.value.id!=null&&(l.value.id=null,l.value.id_posulante="",l.value.id_programa="",l.value.id_modalidad="",l.value.estado=!0,l.value.observacion="",d.value.nombre=null,d.value.dni=null,d.value.id=null)}),R(x,(a,e)=>{y()});const K=a=>{k.value=!0,l.value.id=a.id,l.value.codigo=a.codigo,l.value.id_programa=a.id_programa,l.value.id_modalidad=a.id_modalidad,l.value.observacion=a.observacion,d.value.id=a.id_postulante,d.value.dni=a.dni,d.value.nombre=a.dni+" - "+a.nombres+" "+a.paterno+" "+a.materno},q=async()=>{let a=await _.post("/segundas/select-programas-segundas?page="+x.value,{term:g.value,paginashoja:C.value,programa:v.value});$.value=a.data.datos},X=async()=>{let a=await _.post("/segundas/select-programas-segundas-autorizados?page="+x.value,{term:g.value,paginashoja:C.value,programa:v.value});P.value=a.data.datos};q(),X();const y=async()=>{let a=await _.post("/segundas/get-preinscripciones-segundas?page="+x.value,{term:g.value,paginashoja:C.value,programa:v.value});j.value=a.data.datos.data,D.value=a.data.datos.total},Z=()=>{let a={id:l.value.id,id_postulante:d.value.id,id_programa:l.value.id_programa,id_modalidad:l.value.id_modalidad,observacion:l.value.observacion,dni:d.value.dni};_.post("/segundas/actualizar-preinscripciones-segundas",a).then(e=>{y(),O("success",e.data.titulo,e.data.mensaje),k.value=!1})},J=()=>{let a={id:l.value.id,id_postulante:d.value.id,id_programa:l.value.id_programa,id_modalidad:l.value.id_modalidad,observacion:l.value.observacion,dni:d.value.dni};_.post("/segundas/guardar-inscripcion-segundas",a).then(e=>{y(),O("success",e.data.titulo,e.data.mensaje),U.value=!1,l.value.id=null,l.value.codigo=null,l.value.id_programa=null,l.value.id_modalidad=null,l.value.observacion=null,d.value.id=null,d.value.dni=null,d.value.nombre=null,U.value=!0})},Q=a=>{console.log("eliminar"),_.post("eliminar-preinscripcion/",{id:a.id}).then(e=>{y(),O("warning",e.data.titulo,e.data.mensaje)})},W=[{title:"DNI",dataIndex:"dni",align:"center"},{title:"Postulante",dataIndex:"postulante"},{title:"Programa",dataIndex:"programa"},{title:"Modalidad",dataIndex:"modalidad",align:"center"},{title:"Estado",dataIndex:"estado",align:"center"},{title:"Observación",dataIndex:"observacion"},{title:"Acciones",dataIndex:"acciones",width:"140px",align:"center"}],A=m([]),ee=a=>{console.log("selectedRowKeys changed: ",a),A.value=a};ie(()=>({selectedRowKeys:b(A),onChange:ee,hideDefaultSelections:!0}));const O=(a,e,i)=>{pe[a]({message:e,description:i})};y();const ae=async a=>{try{const e=await _.post("/segundas/get-detalle-preinscripcion-segundas",{term:g.value,programa:v.value},{responseType:"blob"});if(e.status!==200)throw new Error("Error al obtener el archivo");const i=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=i;const u=new Date,S=`${`${u.getDate().toString().padStart(2,"0")}-${(u.getMonth()+1).toString().padStart(2,"0")}-${u.getFullYear()}_${u.getHours().toString().padStart(2,"0")}-${u.getMinutes().toString().padStart(2,"0")}-${u.getSeconds().toString().padStart(2,"0")}`}_preinscritos.pdf`;r.setAttribute("download",S),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(i)}catch(e){console.error("Error al descargar el archivo:",e)}},oe=async a=>{try{const e=await _.post("/segundas/get-resumen-preinscripcion-segundas",{term:g.value,programa:v.value},{responseType:"blob"});if(e.status!==200)throw new Error("Error al obtener el archivo");const i=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=i;const u=new Date,S=`${`${u.getDate().toString().padStart(2,"0")}-${(u.getMonth()+1).toString().padStart(2,"0")}-${u.getFullYear()}_${u.getHours().toString().padStart(2,"0")}-${u.getMinutes().toString().padStart(2,"0")}-${u.getSeconds().toString().padStart(2,"0")}`}_resumen.pdf`;r.setAttribute("download",S),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(i)}catch(e){console.error("Error al descargar el archivo:",e)}},te=async()=>{try{const a=await _.post("/export-excel",{term:g.value,programa:v.value},{responseType:"blob"}),e=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=e,i.setAttribute("download","preinscritos.xlsx"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(a){console.error("Error al exportar:",a)}};return(a,e)=>{const i=me,r=ve,u=ce,z=de("row"),S=ge,le=fe,ne=be,w=_e,L=ye,N=we,M=xe,T=re,se=Se;return f(),I(G,null,[o(b(ue),{title:"Preinscripciones"}),o(he,null,{default:s(()=>[t("div",Re,[o(z,{class:"mb-4"},{default:s(()=>[t("div",$e,[t("div",De,[e[19]||(e[19]=t("span",{style:{"font-size":"1.5rem"}},"Preinscripción",-1)),e[20]||(e[20]=p()),t("span",Oe," - "+h(D.value)+" registros",1)]),t("div",ze,[t("div",Ee,[o(i,{onClick:e[0]||(e[0]=n=>oe()),class:"bg-blue-900",style:{color:"white",border:"none"}},{default:s(()=>[t("div",Ve,[t("div",Pe,[o(b(V))]),e[21]||(e[21]=p(" RESUMEN "))])]),_:1})]),t("div",je,[o(i,{onClick:e[1]||(e[1]=n=>te()),class:"bg-green-600",style:{color:"white",border:"none"}},{default:s(()=>[t("div",Ae,[t("div",Le,[o(b(V))]),e[22]||(e[22]=p(" EXCEL "))])]),_:1})]),t("div",null,[o(i,{onClick:e[2]||(e[2]=n=>ae()),class:"bg-red-600",style:{color:"white",border:"none"}},{default:s(()=>[t("div",Ne,[t("div",Me,[o(b(V))]),e[23]||(e[23]=p(" PDF "))])]),_:1})])])]),t("div",Te,[t("div",null,[t("div",Be,[t("div",null,[o(i,{class:"bg-gray-400",style:{color:"white",border:"none"}},{default:s(()=>[t("div",Ge,[t("div",Ye,[o(b(Ce))]),e[24]||(e[24]=p(" Nuevo Registro "))])]),_:1})])])]),t("div",He,[t("div",Ke,[o(r,{ref:"select",value:v.value,"onUpdate:value":e[3]||(e[3]=n=>v.value=n),placeholder:"Seleccionar programa de estudios",options:P.value,allowClear:""},null,8,["value","options"])]),t("div",qe,[o(u,{type:"text",placeholder:"Escribe para buscar..!!",value:g.value,"onUpdate:value":e[4]||(e[4]=n=>g.value=n),style:{"max-width":"200px","padding-left":"10px"}},{prefix:s(()=>[o(b(Ie))]),_:1},8,["value"])])])])]),_:1})]),t("div",Xe,[o(le,{columns:W,"data-source":j.value,pagination:!1,size:"small"},{bodyCell:s(({column:n,index:ra,record:c})=>[n.dataIndex==="dni"?(f(),E(S,{key:0,color:"#476175",style:{"padding-top":"3px"}},{default:s(()=>[t("span",Ze,h(c.dni),1)]),_:2},1024)):F("",!0),n.dataIndex==="postulante"?(f(),I("span",Je,h(c.paterno)+" "+h(c.materno)+", "+h(c.nombres),1)):F("",!0),n.dataIndex==="modalidad"?(f(),I("span",Qe,h(c.modalidad),1)):F("",!0),n.dataIndex==="programa"?(f(),I("span",We,h(c.programa),1)):F("",!0),n.dataIndex==="estado"?(f(),I(G,{key:4},[c.estado===0?(f(),E(S,{key:0,style:{"font-size":".5rem"},color:"#476175"},{default:s(()=>e[25]||(e[25]=[p("INSCRITO")])),_:1})):(f(),E(S,{key:1,color:"#b01030",style:{"font-size":".7rem"}},{default:s(()=>e[26]||(e[26]=[p("SIN INSCRIPCIÓN")])),_:1}))],64)):F("",!0),n.dataIndex==="acciones"?(f(),I("div",ea,[t("div",aa,[o(i,{type:"true",label:"Inscribir",onClick:B=>H(c),size:"small",style:{background:"#f3f3f3",height:"30px",border:"solid 1px #d9d9d9",color:"gray",display:"flex","align-items":"center"}},{default:s(()=>e[27]||(e[27]=[p("Inscribir")])),_:2},1032,["onClick"])]),t("div",oa,[o(i,{type:"true",onClick:B=>K(c),size:"small",style:{background:"#f3f3f3",height:"30px",border:"solid 1px #d9d9d9",color:"blue",display:"flex","align-items":"center"}},{default:s(()=>[o(b(Fe))]),_:2},1032,["onClick"])]),t("div",ta,[o(i,{type:"true",onClick:B=>Q(c),size:"small",style:{background:"#f3f3f3",height:"30px",color:"crimson",border:"solid 1px #d9d9d9",display:"flex","align-items":"center"}},{default:s(()=>[o(b(Ue))]),_:2},1032,["onClick"])])])):F("",!0)]),_:1},8,["data-source"]),o(ne,{current:x.value,"onUpdate:current":e[5]||(e[5]=n=>x.value=n),total:D.value,pageSize:C.value,"onUpdate:pageSize":e[6]||(e[6]=n=>C.value=n),"show-less-items":""},null,8,["current","total","pageSize"])])]),_:1}),t("div",null,[o(T,{open:k.value,"onUpdate:open":e[12]||(e[12]=n=>k.value=n),title:"Modificar Pre inscripción",style:{"margin-top":"-40px"}},{footer:s(()=>[o(i,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:s(()=>e[33]||(e[33]=[p("Cancelar")])),_:1},8,["onClick"]),o(i,{type:"primary",onClick:e[11]||(e[11]=n=>Z())},{default:s(()=>e[34]||(e[34]=[p("Guardar")])),_:1})]),default:s(()=>[o(M,Y({ref:"formRef",name:"custom-validation",model:a.formState},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:s(()=>[o(w,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[28]||(e[28]=t("label",null,"Postulante",-1)),o(u,{type:"text",value:d.value.nombre,"onUpdate:value":e[7]||(e[7]=n=>d.value.nombre=n)},null,8,["value"])]),_:1}),o(w,{"has-feedback":"",name:"postulante"},{default:s(()=>[e[29]||(e[29]=t("label",null,"Programa",-1)),t("div",la,[o(r,{ref:"select",value:l.value.id_programa,"onUpdate:value":e[8]||(e[8]=n=>l.value.id_programa=n),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"},options:$.value},null,8,["value","options"])])]),_:1}),o(w,{"has-feedback":"",name:"tipo"},{default:s(()=>[e[31]||(e[31]=t("label",null,"Modalidad",-1)),o(r,{ref:"select",value:l.value.id_modalidad,"onUpdate:value":e[9]||(e[9]=n=>l.value.id_modalidad=n),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"}},{default:s(()=>[o(L,{value:1},{default:s(()=>e[30]||(e[30]=[p("GRADUADOS Y TITULADOS")])),_:1})]),_:1},8,["value"])]),_:1}),o(w,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[32]||(e[32]=t("label",null,"Observaciones",-1)),o(N,{type:"text",value:l.value.observacion,"onUpdate:value":e[10]||(e[10]=n=>l.value.observacion=n),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["open"])]),o(T,{open:U.value,"onUpdate:open":e[18]||(e[18]=n=>U.value=n),title:"Inscripción",style:{"margin-top":"-40px","min-width":"900px"}},{footer:s(()=>[t("div",ia,[o(i,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:s(()=>e[41]||(e[41]=[p("Cancelar")])),_:1},8,["onClick"]),o(i,{type:"primary",onClick:e[17]||(e[17]=n=>J())},{default:s(()=>e[42]||(e[42]=[p("Guardar")])),_:1})])]),default:s(()=>[o(ke,{dni:d.value.dni},null,8,["dni"]),t("div",null,[t("div",na,[o(se,null,{default:s(()=>[e[40]||(e[40]=t("div",{class:"mb-4"},[t("div",null,[t("span",{style:{"font-weight":"bold","font-size":"1.3rem"}}," DATOS DE INSCRIPCION")])],-1)),o(M,Y({ref:"formRef",name:"custom-validation",model:a.formState},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:s(()=>[o(w,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[35]||(e[35]=t("label",null,"Postulante",-1)),o(u,{type:"text",value:d.value.nombre,"onUpdate:value":e[13]||(e[13]=n=>d.value.nombre=n)},null,8,["value"])]),_:1}),o(w,{"has-feedback":"",name:"postulante"},{default:s(()=>[e[36]||(e[36]=t("label",null,"Programa",-1)),t("div",sa,[o(r,{ref:"select",value:l.value.id_programa,"onUpdate:value":e[14]||(e[14]=n=>l.value.id_programa=n),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"},options:$.value},null,8,["value","options"])])]),_:1}),o(w,{"has-feedback":"",name:"tipo"},{default:s(()=>[e[38]||(e[38]=t("label",null,"Modalidad",-1)),o(r,{ref:"select",value:l.value.id_modalidad,"onUpdate:value":e[15]||(e[15]=n=>l.value.id_modalidad=n),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"}},{default:s(()=>[o(L,{value:1},{default:s(()=>e[37]||(e[37]=[p("GRADUADOS Y TITULADOS")])),_:1})]),_:1},8,["value"])]),_:1}),o(w,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[39]||(e[39]=t("label",null,"Observaciones",-1)),o(N,{type:"text",value:l.value.observacion,"onUpdate:value":e[16]||(e[16]=n=>l.value.observacion=n),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1})])])]),_:1},8,["open"])],64)}}};export{ka as default};
