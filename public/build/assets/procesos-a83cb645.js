import{a as e,A as se,r as g,x as ie,e as de,f as p,o as m,c as C,u as k,w as l,F as re,l as O,Z as ue,d as n,b as i,S as ce,s as E,g as b,D as pe,v as fe,I as M,n as me}from"./app-405c1408.js";import{A as ve}from"./AuthenticatedLayout-a0671e54.js";import{F as _e}from"./FormOutlined-f26b82ca.js";import"./DropdownLink-63b957ec.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logotiny-c4b525af.js";/* empty css                                                                            */import"./TeamOutlined-d791bc5f.js";var ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};const be=ge;function V(v){for(var r=1;r<arguments.length;r++){var u=arguments[r]!=null?Object(arguments[r]):{},_=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(_=_.concat(Object.getOwnPropertySymbols(u).filter(function(y){return Object.getOwnPropertyDescriptor(u,y).enumerable}))),_.forEach(function(y){ye(v,y,u[y])})}return v}function ye(v,r,u){return r in v?Object.defineProperty(v,r,{value:u,enumerable:!0,configurable:!0,writable:!0}):v[r]=u,v}var A=function(r,u){var _=V({},r,u.attrs);return e(se,V({},_,{icon:be}),null)};A.displayName="LinkOutlined";A.inheritAttrs=!1;const xe=A,he={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},we={class:"flex justify-between mb-4"},ke={class:"mr-3"},Ce={class:"flex justify-between",style:{position:"relative"}},Oe={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Fe={key:0,class:"flex",style:{"justify-content":"center"}},Ie={key:1,class:"flex",style:{"justify-content":"center"}},Ee={key:0},Ne={key:1},Ue={key:2,class:"flex",style:{"justify-content":"space-between"}},Le={style:{background:"#476175",height:"36px","margin-left":"-24px","margin-right":"-24px","margin-top":"-24px","margin-bottom":"28px"}},Ae={class:"flex justify-between ml-3 mr-1",style:{height:"36px","align-items":"center"}},Pe=n("div",null,[n("span",{style:{"font-weight":"bold",color:"white","font-size":"1rem"}},"Nuevo Proceso")],-1),je={class:"flex justify-end",style:{"margin-top":"-15px","margin-bottom":"0px"}},Re={class:"mr-4"},Te=n("label",{for:""},[i("Nombre ("),n("span",{style:{color:"red"}},"*"),i(")")],-1),Se=n("label",{for:""},"N° convocatoria",-1),De=n("label",{for:""},[i("Slug("),n("span",{style:{color:"red"}},"*"),i(")")],-1),Me=n("label",{for:""},[i("Sede ("),n("span",{style:{color:"red"}},"*"),i(")")],-1),Ve=n("label",{for:""},[i("Tipo estudio ("),n("span",{style:{color:"red"}},"*"),i(")")],-1),ze=n("label",{for:""},[i("Mod. Examen ("),n("span",{style:{color:"red"}},"*"),i(")")],-1),Ye=n("label",{for:""},[i("Año ("),n("span",{style:{color:"red"}},"*"),i(")")],-1),qe=n("label",{for:""}," Fec. inicio",-1),$e=n("label",{for:""}," Fec. fin",-1),Be=n("label",{for:""},"Fec. examen",-1),Ge=n("label",{for:""},"URL",-1),Xe=n("label",{for:""},"Observacion",-1),to={__name:"procesos",setup(v){const r=window.location.origin,u=g(""),_=g([]),y=g([]),x=g([]),h=g(!1),P=g([]),j=g(null),t=ie({id:null,nombre:"",convocatoria:"",slug:"",sede:null,tipo:null,ciclo:null,modalidad:null,fec_examen:"",anio:new Date().getFullYear(),estado:!0,f_inicio:"",f_fin:"",url:"",observacion:""}),z=()=>{h.value=!0};let R;de(u,(a,o)=>{clearTimeout(R),R=setTimeout(()=>{N()},500)});const Y=a=>{console.log(a),t.value=null,h.value=!0,t.id=a.id,t.nombre=a.nombre,t.slug=a.slug,t.sede=a.id_sede,t.convocatoria=a.convocatoria,t.url=a.url,t.ciclo=a.ciclo,t.fec_examen=a.fecha_examen,a.fec_inicio&&(t.f_inicio=M(a.fec_inicio)),a.fec_fin&&(t.f_fin=M(a.fec_fin)),t.tipo=a.id_tipo,t.observacion=a.observacion,t.modalidad=a.id_modalidad,t.anio=a.anio,a.estado==1?t.estado=!0:t.estado=!1},N=async(a="",o=1)=>{let d=await O.post("/admin/procesos/get-procesos?page="+o,{term:u.value});x.value=d.data.datos.data},q=async(a="",o=1)=>{let d=await O.post("get-sedes?page="+o);_.value=d.data.datos.data},$=async(a="",o=1)=>{let d=await O.get("procesos/get-tipos?page="+o);y.value=d.data.datos},B=async(a="",o=1)=>{let d=await O.get("procesos/get-modalidades?page="+o);P.value=d.data.datos},G=async()=>{await j.value.validateFields(),O.post("save-proceso",t).then(a=>{T("success",a.data.titulo,a.data.mensaje),N(),h.value=!1})},X=a=>{O.get("eliminar-proceso/"+a.id).then(o=>{N(),T("warning","PROCESO ELIMINADO",o.data.mensaje)})},Z=[{title:"Nombre",dataIndex:"nombre"},{title:"Sede",dataIndex:"sede",align:"center"},{title:"Tipo",dataIndex:"tipo",align:"center",width:"120px"},{title:"Modalidad",dataIndex:"modalidad",align:"center",width:"120px"},{title:"Año",dataIndex:"anio",width:"40px"},{title:"Estado",dataIndex:"estado",align:"center",width:"60px"},{title:"Acciones",dataIndex:"acciones",width:"50px"}],T=(a,o,d)=>{me[a]({message:o,description:d})},H=()=>{h.value=!1},J=()=>{h.value=!1},Q=g([{value:"1",label:"I"},{value:"2",label:"II"}]),W=a=>{window.open(r+"/"+a.slug+"/preinscripcion","_blank")};return N(),q(),$(),B(),(a,o)=>{const d=p("a-button"),w=p("a-input"),F=p("a-tag"),K=p("a-table"),ee=p("a-switch"),c=p("a-form-item"),U=p("a-select"),f=p("a-col"),oe=p("a-input-number"),S=p("a-date-picker"),te=p("a-textarea"),ae=p("a-row"),le=p("a-form"),ne=p("a-modal");return m(),C(re,null,[e(k(ue),{title:"Procesos"}),e(ve,null,{default:l(()=>[n("div",he,[n("div",we,[n("div",ke,[e(d,{type:"primary",style:{background:"#476175",border:"none","border-radius":"5px"},onClick:z},{default:l(()=>[i("Nuevo")]),_:1})]),n("div",Ce,[e(w,{type:"text",placeholder:"Buscar",value:u.value,"onUpdate:value":o[0]||(o[0]=s=>u.value=s),style:{"max-width":"300px","padding-left":"30px"}},null,8,["value"]),n("div",Oe,[e(k(ce))])])]),e(K,{columns:Z,"data-source":x.value,pagination:{pageSize:10},size:"small"},{bodyCell:l(({column:s,index:I,record:L})=>[s.dataIndex==="modalidad"?(m(),C("div",Fe,[x.value[I].modalidad==="CEPREUNA"?(m(),E(F,{key:0,color:"cyan"},{default:l(()=>[i("CEPREUNA")]),_:1})):b("",!0),x.value[I].modalidad==="GENERAL"?(m(),E(F,{key:1,color:"orange"},{default:l(()=>[i("GENERAL")]),_:1})):b("",!0),x.value[I].modalidad==="EXTRAORDINARIO"?(m(),E(F,{key:2,color:"pink"},{default:l(()=>[i(" EXTRAORDINARIO")]),_:1})):b("",!0)])):b("",!0),s.dataIndex==="estado"?(m(),C("div",Ie,[x.value[I].estado==1?(m(),C("div",Ee,[e(F,{color:"green"},{default:l(()=>[i("VIGENTE")]),_:1})])):b("",!0),x.value[I].estado==0?(m(),C("div",Ne,[e(F,{color:"red"},{default:l(()=>[i("NO VIGENTE")]),_:1})])):b("",!0)])):b("",!0),s.dataIndex==="acciones"?(m(),C("div",Ue,[e(d,{type:"",onClick:D=>W(L),style:{color:"blue"},size:"small"},{icon:l(()=>[e(k(xe))]),_:2},1032,["onClick"]),e(d,{onClick:D=>Y(L),style:{color:"#476175"},size:"small"},{icon:l(()=>[e(k(_e))]),_:2},1032,["onClick"]),e(d,{type:"",onClick:D=>X(L),style:{color:"crimson"},shape:"",size:"small"},{icon:l(()=>[e(k(pe))]),_:2},1032,["onClick"])])):b("",!0)]),_:1},8,["data-source"])]),e(ne,{visible:h.value,"onUpdate:visible":o[17]||(o[17]=s=>h.value=s),closable:!1,style:{"margin-top":"-50px"},width:"800px"},{footer:l(()=>[e(d,{style:{"margin-left":"10px"},onClick:o[15]||(o[15]=s=>J())},{default:l(()=>[i("Cancelar")]),_:1}),e(d,{type:"primary",style:{background:"#476175",border:"none"},onClick:o[16]||(o[16]=s=>G())},{default:l(()=>[i("Guardar")]),_:1})]),default:l(()=>[n("div",Le,[n("div",Ae,[Pe,n("div",null,[n("span",null,[e(d,{onClick:o[1]||(o[1]=s=>H()),style:{background:"none",border:"none",color:"white"}},{default:l(()=>[i("X")]),_:1})])])])]),e(le,fe({ref_key:"formProceso",ref:j,name:"proceso",model:t,rules:a.formRules},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:l(()=>[n("div",je,[n("div",Re,[e(c,{label:"Estado",name:"estado"},{default:l(()=>[e(ee,{checked:t.estado,"onUpdate:checked":o[2]||(o[2]=s=>t.estado=s)},null,8,["checked"])]),_:1})]),e(c,{name:"ciclo",label:"ciclo",rules:[{required:!0,message:"campo obligatorio"}]},{default:l(()=>[n("div",null,[e(U,{ref:"ciclo",style:{"min-width":"120px",width:"100%"},onFocus:a.focus,onChange:a.handleChange,options:Q.value,value:t.ciclo,"onUpdate:value":o[3]||(o[3]=s=>t.ciclo=s)},null,8,["onFocus","onChange","options","value"])])]),_:1})]),e(ae,{gutter:[16,0],class:"form-row"},{default:l(()=>[e(f,{span:24,md:24,lg:24,xl:24,xxl:24},{default:l(()=>[e(c,{name:"nombre",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[n("div",null,[Te,e(w,{type:"text",style:{width:"100%"},value:t.nombre,"onUpdate:value":o[4]||(o[4]=s=>t.nombre=s),autocomplete:"off"},null,8,["value"])])]),_:1})]),_:1}),e(f,{span:24,md:12,lg:8,xl:8,xxl:8},{default:l(()=>[e(c,{name:"convocatoria"},{default:l(()=>[n("div",null,[Se,e(w,{type:"text",style:{width:"100%"},value:t.convocatoria,"onUpdate:value":o[5]||(o[5]=s=>t.convocatoria=s),autocomplete:"off"},null,8,["value"])])]),_:1})]),_:1}),e(f,{span:24,md:12,lg:16,xl:16,xxl:16},{default:l(()=>[e(c,{name:"slug",rules:[{required:!0,message:"campo obligatorio"}]},{default:l(()=>[n("div",null,[De,e(w,{type:"text",style:{width:"100%"},value:t.slug,"onUpdate:value":o[6]||(o[6]=s=>t.slug=s),autocomplete:"off"},null,8,["value"])])]),_:1})]),_:1}),e(f,{span:24,md:12,lg:12,xl:8,xxl:24},{default:l(()=>[e(c,{name:"sede",rules:[{required:!0,message:"campo obligatorio"}]},{default:l(()=>[n("div",null,[Me,e(U,{ref:"Tipo",style:{width:"100%"},onFocus:a.focus,onChange:a.handleChange,options:_.value,value:t.sede,"onUpdate:value":o[7]||(o[7]=s=>t.sede=s)},null,8,["onFocus","onChange","options","value"])])]),_:1})]),_:1}),e(f,{span:24,md:12,lg:12,xl:8,xxl:24},{default:l(()=>[n("div",null,[Ve,e(c,{name:"tipo",rules:[{required:!0,message:"campo obligatorio"}]},{default:l(()=>[e(U,{ref:"Tipo",style:{width:"100%"},options:y.value,onFocus:a.focus,onChange:a.handleChange,value:t.tipo,"onUpdate:value":o[8]||(o[8]=s=>t.tipo=s)},null,8,["options","onFocus","onChange","value"])]),_:1})])]),_:1}),e(f,{span:24,md:12,lg:12,xl:8,xxl:24},{default:l(()=>[n("div",null,[ze,e(c,{name:"modalidad",rules:[{required:!0,message:"campo obligatorio"}]},{default:l(()=>[e(U,{ref:"Tipo",style:{width:"100%"},options:P.value,onFocus:a.focus,onChange:a.handleChange,value:t.modalidad,"onUpdate:value":o[9]||(o[9]=s=>t.modalidad=s)},null,8,["options","onFocus","onChange","value"])]),_:1})])]),_:1}),e(f,{span:24,md:12,lg:12,xl:8,xxl:24},{default:l(()=>[n("div",null,[Ye,e(c,{name:"anio",rules:[{required:!0,message:"campo obligatorio"}]},{default:l(()=>[e(oe,{style:{width:"100%"},value:t.anio,"onUpdate:value":o[10]||(o[10]=s=>t.anio=s)},null,8,["value"])]),_:1})])]),_:1}),e(f,{span:24,md:12,lg:12,xl:8,xxl:24},{default:l(()=>[n("div",null,[qe,e(c,{name:"estado"},{default:l(()=>[e(S,{value:t.f_inicio,"onUpdate:value":o[11]||(o[11]=s=>t.f_inicio=s),format:"DD/MM/YYYY",placeholder:"fecha inicio",style:{width:"100%"}},null,8,["value"])]),_:1})])]),_:1}),e(f,{span:24,md:12,lg:12,xl:8,xxl:24},{default:l(()=>[n("div",null,[$e,e(c,{name:"estado"},{default:l(()=>[e(S,{value:t.f_fin,"onUpdate:value":o[12]||(o[12]=s=>t.f_fin=s),format:"DD/MM/YYYY",placeholder:"fecha fin",style:{width:"100%"}},null,8,["value"])]),_:1})])]),_:1}),e(f,{span:24,md:24,lg:8,xl:8,xxl:8},{default:l(()=>[e(c,{name:"fec_examen",rules:[{required:!0,message:"campo obligatorio"}]},{default:l(()=>[n("div",null,[Be,e(w,{type:"text",style:{width:"100%"},value:t.fec_examen,"onUpdate:value":o[13]||(o[13]=s=>t.fec_examen=s),autocomplete:"off"},null,8,["value"])])]),_:1})]),_:1}),e(f,{span:24,md:24,lg:16,xl:16,xxl:16},{default:l(()=>[e(c,{name:"url"},{default:l(()=>[n("div",null,[Ge,t.slug!=null?(m(),E(w,{key:0,type:"text",style:{width:"100%"},value:k(r)+"/"+t.slug+"/preinscripcion",autocomplete:"off",disabled:""},null,8,["value"])):(m(),E(w,{key:1,type:"text",style:{width:"100%"},value:k(r)+"/"+t.slug+"/preinscripcion",autocomplete:"off",disabled:""},null,8,["value"]))])]),_:1})]),_:1}),e(f,{span:24,md:24,lg:24,xl:24,xxl:24},{default:l(()=>[e(c,{name:"observacion"},{default:l(()=>[n("div",null,[Xe,e(te,{type:"text",style:{width:"100%"},value:t.observacion,"onUpdate:value":o[14]||(o[14]=s=>t.observacion=s),autocomplete:"off"},null,8,["value"])])]),_:1})]),_:1})]),_:1})]),_:1},16,["model","rules","onFinish","onValidate","onFinishFailed"])]),_:1},8,["visible"])]),_:1})],64)}}};export{to as default};
