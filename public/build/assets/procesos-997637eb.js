import{r as f,J as te,e as ne,D as se,o as p,c as b,a as o,u as _,w as a,F as de,y as x,Z as ie,d as n,b as d,E as F,f as g,G as ue,a2 as D,n as re,B as pe,I as fe,_ as me,h as ve,N as ge,k as ce,j as _e,l as xe,aa as ye,V as be,p as we,m as ke,q as Ce,M as Fe}from"./app-e08cab8d.js";import{_ as Ee}from"./AuthenticatedLayout-1c6f068f.js";import{S as Ie}from"./SearchOutlined-1baf635a.js";import{L as Ue}from"./LinkOutlined-7c4ff148.js";import{F as De}from"./FormOutlined-6d429376.js";import{D as Ne}from"./DeleteOutlined-3875e8ef.js";import"./logotiny-c4b525af.js";import"./Header-350d22a8.js";import"./AntdIcon-57e0f234.js";import"./DownOutlined-6ca53b8d.js";/* empty css                                                            */const Ye={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},Me={class:"flex justify-between mb-4"},Re={class:"mr-3"},Te={class:"flex justify-between",style:{position:"relative"}},Oe={key:0,class:"flex",style:{"justify-content":"center"}},Ae={key:1,class:"flex",style:{"justify-content":"center"}},Pe={key:0},Ve={key:1},qe={key:2,style:{display:"flex",gap:"2px"}},je={class:"flex justify-end",style:{"margin-top":"15px","margin-bottom":"0px"}},$e={class:"mr-4"},We={__name:"procesos",setup(he){const N=window.location.origin,E=f(""),M=f([]),R=f([]),c=f([]),y=f(!1),T=f([]),O=f(null),A=f([]),l=te({id:null,nombre:"",convocatoria:"",slug:"",sede:null,tipo:null,ciclo:null,modalidad:null,fec_examen:"",anio:new Date().getFullYear(),estado:!0,f_inicio:"",f_fin:"",dia_1:"",dia_2:"",url:"",cod_proceso:"",id_reglamento:null,observacion:""}),j=()=>{y.value=!0};let P;ne(E,(t,e)=>{clearTimeout(P),P=setTimeout(()=>{I()},500)});const $=t=>{console.log(t),l.value=null,y.value=!0,l.id=t.id,l.nombre=t.nombre,l.slug=t.slug,l.sede=t.id_sede,l.convocatoria=t.convocatoria,l.url=t.url,l.ciclo=t.ciclo,l.fec_examen=t.fecha_examen,t.fec_inicio&&(l.f_inicio=D(t.fec_inicio)),t.fec_fin&&(l.f_fin=D(t.fec_fin)),t.fec_1&&(l.dia_1=D(t.fec_1)),t.fec_2&&(l.dia_2=D(t.fec_2)),l.tipo=t.id_tipo,l.id_reglamento=t.id_reglamento,l.cod_proceso=t.codigo_proceso,l.observacion=t.observacion,l.modalidad=t.id_modalidad,l.anio=t.anio,t.estado==1?l.estado=!0:l.estado=!1},I=async(t="",e=1)=>{let i=await x.post("/admin/procesos/get-procesos?page="+e,{term:E.value});c.value=i.data.datos.data},h=async(t="",e=1)=>{let i=await x.post("get-sedes?page="+e);M.value=i.data.datos.data},S=async(t="",e=1)=>{let i=await x.get("procesos/get-tipos?page="+e);R.value=i.data.datos},B=async(t="",e=1)=>{let i=await x.get("procesos/get-modalidades?page="+e);T.value=i.data.datos},L=async(t="",e=1)=>{let i=await x.get("get-select-reglamentos");A.value=i.data.datos},G=async()=>{await O.value.validateFields(),x.post("save-proceso",l).then(t=>{V("success",t.data.titulo,t.data.mensaje),I(),y.value=!1})},z=t=>{x.get("eliminar-proceso/"+t.id).then(e=>{I(),V("warning","PROCESO ELIMINADO",e.data.mensaje)})},X=[{title:"Nombre",dataIndex:"nombre"},{title:"Sede",dataIndex:"sede",align:"center"},{title:"Tipo",dataIndex:"tipo",align:"center",width:"120px"},{title:"Modalidad",dataIndex:"modalidad",align:"center",width:"120px"},{title:"Año",dataIndex:"anio",width:"40px"},{title:"Estado",dataIndex:"estado",align:"center",width:"60px"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"50px"}],V=(t,e,i)=>{re[t]({message:e,description:i})},J=()=>{y.value=!1},Z=f([{value:"1",label:"I"},{value:"2",label:"II"}]),H=t=>{window.open(N+"/"+t.slug+"/preinscripcion","_blank")};return I(),h(),S(),B(),L(),(t,e)=>{const i=pe,m=fe,w=me,K=ve,Q=ge,u=ce,k=_e,v=se("se-outlined"),r=xe,W=ye,U=be,ee=we,oe=ke,le=Ce,ae=Fe;return p(),b(de,null,[o(_(ie),{title:"Procesos"}),o(Ee,null,{default:a(()=>[n("div",Ye,[n("div",Me,[n("div",Re,[o(i,{type:"primary",style:{background:"#476175",border:"none","border-radius":"5px"},onClick:j},{default:a(()=>e[21]||(e[21]=[d("Nuevo")])),_:1})]),n("div",Te,[o(m,{type:"text",placeholder:"Buscar",value:E.value,"onUpdate:value":e[0]||(e[0]=s=>E.value=s),style:{"max-width":"300px","padding-left":"10px"}},{prefix:a(()=>[o(_(Ie))]),_:1},8,["value"])])]),o(K,{columns:X,"data-source":c.value,pagination:{pageSize:10},size:"small"},{bodyCell:a(({column:s,index:C,record:Y})=>[s.dataIndex==="modalidad"?(p(),b("div",Oe,[c.value[C].modalidad==="CEPREUNA"?(p(),F(w,{key:0,color:"cyan"},{default:a(()=>e[22]||(e[22]=[d("CEPREUNA")])),_:1})):g("",!0),c.value[C].modalidad==="GENERAL"?(p(),F(w,{key:1,color:"orange"},{default:a(()=>e[23]||(e[23]=[d("GENERAL")])),_:1})):g("",!0),c.value[C].modalidad==="EXTRAORDINARIO"?(p(),F(w,{key:2,color:"pink"},{default:a(()=>e[24]||(e[24]=[d(" EXTRAORDINARIO")])),_:1})):g("",!0)])):g("",!0),s.dataIndex==="estado"?(p(),b("div",Ae,[c.value[C].estado==1?(p(),b("div",Pe,[o(w,{color:"green"},{default:a(()=>e[25]||(e[25]=[d("VIGENTE")])),_:1})])):g("",!0),c.value[C].estado==0?(p(),b("div",Ve,[o(w,{color:"red"},{default:a(()=>e[26]||(e[26]=[d("NO VIGENTE")])),_:1})])):g("",!0)])):g("",!0),s.dataIndex==="acciones"?(p(),b("div",qe,[o(i,{onClick:q=>H(Y),size:"small",style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"green",display:"flex","align-items":"center"}},{default:a(()=>[o(_(Ue))]),_:2},1032,["onClick"]),o(i,{onClick:q=>$(Y),size:"small",style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#1890ff",display:"flex","align-items":"center"}},{default:a(()=>[o(_(De))]),_:2},1032,["onClick"]),o(i,{onClick:q=>z(Y),size:"small",style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#ff4d4f",display:"flex","align-items":"center"}},{default:a(()=>[o(_(Ne))]),_:2},1032,["onClick"])])):g("",!0)]),_:1},8,["data-source"])]),o(ae,{open:y.value,"onUpdate:open":e[20]||(e[20]=s=>y.value=s),centered:"",title:l.id?"Editar proceso":"Nuevo proceso",width:"900px"},{footer:a(()=>[o(i,{style:{"margin-left":"10px"},onClick:e[18]||(e[18]=s=>J())},{default:a(()=>e[43]||(e[43]=[d("Cancelar")])),_:1}),o(i,{type:"primary",style:{background:"#476175",border:"none"},onClick:e[19]||(e[19]=s=>G())},{default:a(()=>e[44]||(e[44]=[d("Guardar")])),_:1})]),default:a(()=>[o(le,ue({ref_key:"formProceso",ref:O,name:"proceso",model:l,rules:t.formRules},t.layout,{onFinish:t.handleFinish,onValidate:t.handleValidate,onFinishFailed:t.handleFinishFailed}),{default:a(()=>[n("div",je,[n("div",$e,[o(u,{label:"Estado",name:"estado"},{default:a(()=>[o(Q,{checked:l.estado,"onUpdate:checked":e[1]||(e[1]=s=>l.estado=s)},null,8,["checked"])]),_:1})]),o(u,{name:"ciclo",label:"ciclo",rules:[{required:!0,message:"campo obligatorio"}]},{default:a(()=>[n("div",null,[o(k,{ref:"ciclo",style:{"min-width":"120px",width:"100%"},onFocus:t.focus,onChange:t.handleChange,options:Z.value,value:l.ciclo,"onUpdate:value":e[2]||(e[2]=s=>l.ciclo=s)},null,8,["onFocus","onChange","options","value"])])]),_:1})]),o(oe,{gutter:[16,0],class:"form-row"},{default:a(()=>[o(r,{span:24,md:24,lg:24,xl:24,xxl:24},{default:a(()=>[o(u,{name:"nombre",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:a(()=>[n("div",null,[e[27]||(e[27]=n("label",{for:""},[d("Nombre ("),n("span",{style:{color:"red"}},"*"),d(")")],-1)),o(m,{type:"text",style:{width:"100%"},value:l.nombre,"onUpdate:value":e[3]||(e[3]=s=>l.nombre=s),autocomplete:"off"},{prefix:a(()=>[o(v)]),_:1},8,["value"])])]),_:1})]),_:1}),o(r,{span:24,md:12,lg:6,xl:4,xxl:4},{default:a(()=>[o(u,{name:"convocatoria"},{default:a(()=>[n("div",null,[e[28]||(e[28]=n("label",{for:""},"N° convocatoria",-1)),o(m,{type:"text",style:{width:"100%"},value:l.convocatoria,"onUpdate:value":e[4]||(e[4]=s=>l.convocatoria=s),autocomplete:"off"},{prefix:a(()=>[o(v)]),_:1},8,["value"])])]),_:1})]),_:1}),o(r,{span:24,md:12,lg:6,xl:4,xxl:4},{default:a(()=>[n("div",null,[e[29]||(e[29]=n("label",{for:""},[d("Año ("),n("span",{style:{color:"red"}},"*"),d(")")],-1)),o(u,{name:"anio",rules:[{required:!0,message:"campo obligatorio"}]},{default:a(()=>[o(W,{style:{width:"100%"},value:l.anio,"onUpdate:value":e[5]||(e[5]=s=>l.anio=s)},{prefix:a(()=>[o(v)]),_:1},8,["value"])]),_:1})])]),_:1}),o(r,{span:24,md:12,lg:12,xl:16,xxl:16},{default:a(()=>[o(u,{name:"slug",rules:[{required:!0,message:"campo obligatorio"}]},{default:a(()=>[n("div",null,[e[30]||(e[30]=n("label",{for:""},[d("Slug("),n("span",{style:{color:"red"}},"*"),d(")")],-1)),o(m,{type:"text",style:{width:"100%"},value:l.slug,"onUpdate:value":e[6]||(e[6]=s=>l.slug=s),autocomplete:"off"},{prefix:a(()=>[o(v)]),_:1},8,["value"])])]),_:1})]),_:1}),o(r,{span:24,md:12,lg:12,xl:8,xxl:24},{default:a(()=>[o(u,{name:"sede",rules:[{required:!0,message:"campo obligatorio"}]},{default:a(()=>[n("div",null,[e[31]||(e[31]=n("label",{for:""},[d("Sede ("),n("span",{style:{color:"red"}},"*"),d(")")],-1)),o(k,{ref:"Tipo",style:{width:"100%"},onFocus:t.focus,onChange:t.handleChange,options:M.value,value:l.sede,"onUpdate:value":e[7]||(e[7]=s=>l.sede=s)},null,8,["onFocus","onChange","options","value"])])]),_:1})]),_:1}),o(r,{span:24,md:12,lg:12,xl:8,xxl:24},{default:a(()=>[n("div",null,[e[32]||(e[32]=n("label",{for:""},[d("Tipo estudio ("),n("span",{style:{color:"red"}},"*"),d(")")],-1)),o(u,{name:"tipo",rules:[{required:!0,message:"campo obligatorio"}]},{default:a(()=>[o(k,{ref:"Tipo",style:{width:"100%"},options:R.value,onFocus:t.focus,onChange:t.handleChange,value:l.tipo,"onUpdate:value":e[8]||(e[8]=s=>l.tipo=s)},null,8,["options","onFocus","onChange","value"])]),_:1})])]),_:1}),o(r,{span:24,md:12,lg:12,xl:8,xxl:24},{default:a(()=>[n("div",null,[e[33]||(e[33]=n("label",{for:""},[d("Mod. Examen ("),n("span",{style:{color:"red"}},"*"),d(")")],-1)),o(u,{name:"modalidad",rules:[{required:!0,message:"campo obligatorio"}]},{default:a(()=>[o(k,{ref:"Tipo",style:{width:"100%"},options:T.value,onFocus:t.focus,onChange:t.handleChange,value:l.modalidad,"onUpdate:value":e[9]||(e[9]=s=>l.modalidad=s)},null,8,["options","onFocus","onChange","value"])]),_:1})])]),_:1}),o(r,{span:24,md:12,lg:8,xl:8,xxl:24},{default:a(()=>[n("div",null,[e[34]||(e[34]=n("label",{for:""}," Fec. inicio",-1)),o(u,{name:"estado"},{default:a(()=>[o(U,{value:l.f_inicio,"onUpdate:value":e[10]||(e[10]=s=>l.f_inicio=s),format:"DD/MM/YYYY",placeholder:"fecha inicio",style:{width:"100%"}},null,8,["value"])]),_:1})])]),_:1}),o(r,{span:24,md:12,lg:8,xl:8,xxl:24},{default:a(()=>[n("div",null,[e[35]||(e[35]=n("label",{for:""},"Fec. fin",-1)),o(u,{name:"estado"},{default:a(()=>[o(U,{value:l.f_fin,"onUpdate:value":e[11]||(e[11]=s=>l.f_fin=s),format:"DD/MM/YYYY",placeholder:"fecha fin",style:{width:"100%"}},null,8,["value"])]),_:1})])]),_:1}),o(r,{span:24,md:24,lg:8,xl:8,xxl:8},{default:a(()=>[o(u,{name:"fec_examen",rules:[{required:!0,message:"campo obligatorio"}]},{default:a(()=>[n("div",null,[e[36]||(e[36]=n("label",{for:""},"Fec. examen",-1)),o(m,{type:"text",style:{width:"100%"},value:l.fec_examen,"onUpdate:value":e[12]||(e[12]=s=>l.fec_examen=s),autocomplete:"off"},{prefix:a(()=>[o(v)]),_:1},8,["value"])])]),_:1})]),_:1}),o(r,{span:24,md:12,lg:16,xl:16,xxl:16},{default:a(()=>[o(u,{name:"url"},{default:a(()=>[n("div",null,[e[37]||(e[37]=n("label",{for:""},"URL",-1)),l.slug!=null?(p(),F(m,{key:0,type:"text",style:{width:"100%"},value:_(N)+"/"+l.slug+"/preinscripcion",autocomplete:"off",disabled:""},{prefix:a(()=>[o(v)]),_:1},8,["value"])):(p(),F(m,{key:1,type:"text",style:{width:"100%"},value:_(N)+"/"+l.slug+"/preinscripcion",autocomplete:"off",disabled:""},{prefix:a(()=>[o(v)]),_:1},8,["value"]))])]),_:1})]),_:1}),o(r,{span:24,md:12,lg:8,xl:8,xxl:8},{default:a(()=>[o(u,{name:"cod_proceso",rules:[{required:!0,message:"campo obligatorio"}]},{default:a(()=>[n("div",null,[e[38]||(e[38]=n("label",{for:""},"Cod proceso",-1)),o(m,{value:l.cod_proceso,"onUpdate:value":e[13]||(e[13]=s=>l.cod_proceso=s),type:"text",style:{width:"100%"},autocomplete:"off"},{prefix:a(()=>[o(v)]),_:1},8,["value"])])]),_:1})]),_:1}),o(r,{span:24,md:24,lg:24,xl:12,xxl:12},{default:a(()=>[o(u,{name:"id_reglamento"},{default:a(()=>[n("div",null,[e[39]||(e[39]=n("label",{for:""},"Reglamento",-1)),o(k,{ref:"Tipo",style:{width:"100%"},options:A.value,onFocus:t.focus,onChange:t.handleChange,value:l.id_reglamento,"onUpdate:value":e[14]||(e[14]=s=>l.id_reglamento=s)},null,8,["options","onFocus","onChange","value"])])]),_:1})]),_:1}),o(r,{span:24,md:12,lg:12,xl:6,xxl:6},{default:a(()=>[n("div",null,[e[40]||(e[40]=n("label",{for:""},"Día 1",-1)),o(u,{name:"dia_1",rules:[{required:!0,message:"campo obligatorio"}]},{default:a(()=>[o(U,{value:l.dia_1,"onUpdate:value":e[15]||(e[15]=s=>l.dia_1=s),format:"DD/MM/YYYY",placeholder:"Día 1",style:{width:"100%"}},null,8,["value"])]),_:1})])]),_:1}),o(r,{span:24,md:12,lg:12,xl:6,xxl:6},{default:a(()=>[n("div",null,[e[41]||(e[41]=n("label",{for:""},"Día 2",-1)),o(u,{name:"dia_2"},{default:a(()=>[o(U,{value:l.dia_2,"onUpdate:value":e[16]||(e[16]=s=>l.dia_2=s),format:"DD/MM/YYYY",placeholder:"Día 2",style:{width:"100%"}},null,8,["value"])]),_:1})])]),_:1}),o(r,{span:24,md:24,lg:24,xl:24,xxl:24},{default:a(()=>[o(u,{name:"observacion"},{default:a(()=>[n("div",null,[e[42]||(e[42]=n("label",{for:""},"Observacion",-1)),o(ee,{type:"text",style:{width:"100%"},value:l.observacion,"onUpdate:value":e[17]||(e[17]=s=>l.observacion=s),autocomplete:"off"},null,8,["value"])])]),_:1})]),_:1})]),_:1})]),_:1},16,["model","rules","onFinish","onValidate","onFinishFailed"])]),_:1},8,["open","title"])]),_:1})],64)}}};export{We as default};
