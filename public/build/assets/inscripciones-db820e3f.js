import{a as r,r as v,C as F,e as b,D as H,o as P,c as z,u as h,w as u,F as C,y,Z as N,d as i,b as w,t as L,f as I,a6 as Y,B as G,a7 as X,a8 as Z,a9 as q,h as J}from"./app-02daa48e.js";import{_ as Q}from"./AuthenticatedLayout-0d088217.js";import{A as R}from"./AntdIcon-666c3050.js";import"./logotiny-c4b525af.js";import"./Header-71d983ce.js";import"./DownOutlined-b680cb82.js";/* empty css                                                            */var W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0010.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 00-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"}}]},name:"file-excel",theme:"outlined"};const K=W;var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-.7-29.9 8.3-33.4 21.4-6.6 24-.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-pdf",theme:"outlined"};const te=ee;function j(o){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(a).filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable}))),s.forEach(function(c){ae(o,c,a[c])})}return o}function ae(o,t,a){return t in o?Object.defineProperty(o,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[t]=a,o}var x=function(t,a){var s=j({},t,a.attrs);return r(R,j({},s,{icon:K}),null)};x.displayName="FileExcelOutlined";x.inheritAttrs=!1;const ne=x;function k(o){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(a).filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable}))),s.forEach(function(c){oe(o,c,a[c])})}return o}function oe(o,t,a){return t in o?Object.defineProperty(o,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[t]=a,o}var O=function(t,a){var s=k({},t,a.attrs);return r(R,k({},s,{icon:te}),null)};O.displayName="FilePdfOutlined";O.inheritAttrs=!1;const re=O;const le={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},se={class:"checkbox-group-container"},ce={class:"mt-4 bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 230px)"}},ie={class:"flex gap-2"},ue={style:{display:"flex","align-items":"center",gap:"6px"}},de={style:{display:"flex","align-items":"center",gap:"6px"}},me={style:{}},pe={style:{"font-weight":"bold",color:"#476175"}},we={__name:"inscripciones",setup(o){const t=v(""),a=v(1),s=v(0),c=v([]),d=v(["area"]),D=F(()=>c.value.reduce((n,e)=>n+e.total,0)),S=[{label:"Área",value:"area"},{label:"Programa",value:"programa"},{label:"Modalidad",value:"modalidad"},{label:"Sexo",value:"sexo"},{label:"Usuario",value:"usuario"}],$=F(()=>[...d.value.map(n=>{const e=S.find(g=>g.value===n);return{title:e?e.label:n,dataIndex:n,key:n,align:"left"}}),{title:"Total",dataIndex:"total",key:"total",align:"center",width:"90px"}]),_=async()=>{try{let n=await y.post("resumen-inscripciones?page="+a.value,{group_by:d.value,term:t.value});c.value=n.data.data,s.value=n.data.datos.total}catch{}};b(d,()=>{_()}),b(a,()=>{_()});let E;b(t,()=>{clearTimeout(E),E=setTimeout(()=>{a.value=1,_()},500)});const M=async()=>{try{const n=await y.post("resumen-inscripciones",{descargar:1,group_by:d.value},{responseType:"blob"});if(n.status!==200)throw new Error("Error al obtener el archivo");const e=new Date,p=`${`${e.getDate().toString().padStart(2,"0")}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getFullYear()}_${e.getHours().toString().padStart(2,"0")}-${e.getMinutes().toString().padStart(2,"0")}-${e.getSeconds().toString().padStart(2,"0")}`}_resumen_inscripciones.pdf`,m=window.URL.createObjectURL(new Blob([n.data])),l=document.createElement("a");l.href=m,l.setAttribute("download",p),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(m)}catch(n){console.error("Error al descargar el archivo:",n)}},T=async()=>{try{const n=await y.post("resumen-inscripciones",{descargar:1,excel:1,group_by:d.value},{responseType:"blob"});if(n.status!==200)throw new Error("Error al obtener el archivo");const e=new Date,p=`${`${e.getDate().toString().padStart(2,"0")}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getFullYear()}_${e.getHours().toString().padStart(2,"0")}-${e.getMinutes().toString().padStart(2,"0")}-${e.getSeconds().toString().padStart(2,"0")}`}_resumen_inscripciones.xlsx`,m=window.URL.createObjectURL(new Blob([n.data])),l=document.createElement("a");l.href=m,l.setAttribute("download",p),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(m)}catch(n){console.error("Error al descargar el archivo:",n)}};return _(),(n,e)=>{const g=Y,p=G,m=H("row"),l=X,U=Z,V=q,A=J;return P(),z(C,null,[r(h(N),{title:"Resumen inscripciones"}),r(Q,null,{default:u(()=>[i("div",le,[e[3]||(e[3]=i("div",{class:"mb-4"},[i("span",{style:{"font-size":"1.3rem"}},"Resumen inscripción")],-1)),i("div",se,[r(g,{value:d.value,"onUpdate:value":e[0]||(e[0]=f=>d.value=f),options:S},null,8,["value"])])]),i("div",ce,[r(m,{class:"flex justify-end mb-4"},{default:u(()=>[i("div",ie,[r(p,{type:"primary",style:{background:"#40DE7A"},onClick:e[1]||(e[1]=f=>T())},{default:u(()=>[i("div",ue,[r(h(ne)),e[4]||(e[4]=w(" EXCEL "))])]),_:1}),r(p,{type:"primary",sise:"large",style:{background:"crimson"},onClick:e[2]||(e[2]=f=>M())},{default:u(()=>[i("div",de,[r(h(re)),e[5]||(e[5]=w(" PDF "))])]),_:1})])]),_:1}),i("div",me,[r(A,{columns:$.value,"data-source":c.value,pagination:!1,size:"small",scroll:{x:200,y:"calc(100vh - 400px)"}},{bodyCell:u(({column:f,record:B})=>[f.dataIndex==="total"?(P(),z(C,{key:0},[w(L(B.total),1)],64)):I("",!0)]),summary:u(()=>[r(V,{fixed:"bottom"},{default:u(()=>[r(U,null,{default:u(()=>[r(l,{"col-span":$.value.length-1,style:{"text-align":"right"}},{default:u(()=>e[6]||(e[6]=[i("span",{style:{"font-weight":"bold",color:"#476175"}}," Total Registros: ",-1)])),_:1},8,["col-span"]),r(l,{style:{"text-align":"center"}},{default:u(()=>[i("span",pe,L(D.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","data-source"])])])]),_:1})],64)}}};export{we as default};
