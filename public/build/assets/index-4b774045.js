import{a as t,a4 as Q,r as i,e as b,C as W,D as X,o as p,c as _,u as h,w as c,F as A,y as k,Z as Y,d as s,b as I,t as N,f as w,n as E,j as ee,I as ae,_ as te,B as ne,h as oe,i as le}from"./app-c2bfe6f4.js";import{_ as se}from"./AuthenticatedLayout-42afc081.js";import{C as ie}from"./CheckOutlined-7c283c4f.js";import{A as de}from"./AntdIcon-2442795f.js";import{S as re}from"./SearchOutlined-33f5533a.js";import"./logotiny-c4b525af.js";import"./DropdownLink-639ba2f9.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./DownOutlined-9168fab9.js";/* empty css                                                            */function $(r){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?Object(arguments[n]):{},v=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(o).filter(function(m){return Object.getOwnPropertyDescriptor(o,m).enumerable}))),v.forEach(function(m){ue(r,m,o[m])})}return r}function ue(r,n,o){return n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r}var j=function(n,o){var v=$({},n,o.attrs);return t(de,$({},v,{icon:Q}),null)};j.displayName="EditOutlined";j.inheritAttrs=!1;const ce=j;const ve={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 98px)"}},pe={class:"mr-3"},_e={class:"flex justify-between",style:{position:"relative"}},me={style:{}},ge={key:0,class:"editable-cell"},fe={key:0,class:"editable-cell-input-wrapper"},he={key:1,class:"editable-cell-text-wrapper"},we={key:1,class:"flex",style:{"justify-content":"center"}},xe={key:0},ye={key:1},be={class:"flex",style:{"justify-content":"flex-end"}},De={__name:"index",setup(r){const n=i(""),o=i(1),v=i(null),m=i([]),x=i(1),C=i(!1),M=i(""),O=i([]),l=i({id:null,codigo:"",nombre:"",vacantes:"",estado:!0});b(n,(e,a)=>{f()}),b(M,(e,a)=>{getDepartamentos()}),b(C,(e,a)=>{C.value==!1&&l.value.id!=null&&(l.value.id=null,l.value.codigo=null,l.value.nombre=null,l.value.estado=!0)}),b(o,(e,a)=>{f()});const R=e=>{C.value=!0,l.value.id=e.id,l.value.codigo=e.codigo,l.value.nombre=e.nombre,l.value.nivel_academico=e.nivel_academico,l.value.tipo_autorizacion=e.tipo_autorizacion,l.value.id_facultad=e.id_fac,e.estado==1?l.value.estado=!0:l.value.estado=!1,l.value.area=e.area},U=async()=>{let e=await k.get("get-modalidades-activas");m.value=e.data.datos},f=async(e="")=>{let a=await k.post("get-vacantes-admin?page="+o.value,{term:n.value});O.value=a.data.datos.data,v.value=a.data.datos.total},F=e=>{k.post("delete-vacante",{id_vacante:e.id_vacante}).then(a=>{f(),G("warning","PROGRAMA ELIMINADO",a.data.mensaje)})},H=[{title:"Cod",dataIndex:"codigo_sunedu",width:"60px",align:"center",responsive:["md"]},{title:"Nombre",dataIndex:"programa"},{title:"Vacantes",dataIndex:"vacantes",width:"160px",align:"center",responsive:["md"]},{title:"Estado",dataIndex:"estado",align:"center",width:"60px",responsive:["md"]},{title:"",dataIndex:"acciones",width:"70px",align:"center"}],P=i([]),L=e=>{console.log("selectedRowKeys changed: ",e),P.value=e};W(()=>({selectedRowKeys:h(P),onChange:L,hideDefaultSelections:!0}));const G=(e,a,V)=>{E[e]({message:a,description:V})};U(),f();const y=i({}),T=e=>{y.value[e]={...O.value.find(a=>a.key===e)}},Z=i({id_modalidad:x.value,id_programa:null,estado:null,vacantes:null}),z=e=>{Z.value=e,delete y.value[e.id_programa],k.post("save-numero-vacantes",{id_vacante:e.id_vacante,id_programa:e.id_programa,vacantes:e.vacantes,id_modalidad:x.value}).then(()=>{E.success({message:"Registro actualizado"}),f()}).catch(()=>{E.error({message:"Error al actualizar"})})};return(e,a)=>{const V=ee,S=ae,q=X("row"),B=te,D=ne,J=oe,K=le;return p(),_(A,null,[t(h(Y),{title:"Procesos"}),t(se,null,{default:c(()=>[s("div",ve,[t(q,{class:"flex justify-between mb-4"},{default:c(()=>[s("div",pe,[t(V,{ref:"select",value:x.value,"onUpdate:value":a[0]||(a[0]=u=>x.value=u),options:m.value,onFocus:e.focus,onChange:e.handleChange},null,8,["value","options","onFocus","onChange"])]),s("div",_e,[t(S,{type:"text",placeholder:"Buscar",value:n.value,"onUpdate:value":a[1]||(a[1]=u=>n.value=u),style:{"max-width":"300px"}},{prefix:c(()=>[t(h(re))]),_:1},8,["value"])])]),_:1}),s("div",me,[t(J,{columns:H,"data-source":O.value,pagination:!1,size:"small",scroll:{x:380,y:"calc(100vh - 240px)"}},{bodyCell:c(({column:u,index:ke,record:d})=>[u.dataIndex==="vacantes"?(p(),_("div",ge,[y.value[d.id_programa]?(p(),_("div",fe,[t(S,{value:d.vacantes,"onUpdate:value":g=>d.vacantes=g,onPressEnter:g=>z(d)},{prefix:c(()=>a[3]||(a[3]=[s("div",null,null,-1)])),_:2},1032,["value","onUpdate:value","onPressEnter"]),t(h(ie),{class:"editable-cell-icon-check",onClick:g=>z(d)},null,8,["onClick"])])):(p(),_("div",he,[I(N(d.vacantes||" ")+" ",1),t(h(ce),{class:"editable-cell-icon",onClick:g=>T(d.id_programa)},null,8,["onClick"])]))])):w("",!0),u.dataIndex==="estado"?(p(),_("div",we,[d.estado==1?(p(),_("div",xe,[t(B,{color:"blue"},{default:c(()=>a[4]||(a[4]=[I("Activo")])),_:1})])):w("",!0),d.estado==0?(p(),_("div",ye,[t(B,{color:"red"},{default:c(()=>a[5]||(a[5]=[I("Inactivo")])),_:1})])):w("",!0)])):w("",!0),u.dataIndex==="acciones"?(p(),_(A,{key:2},[t(D,{type:"",onClick:g=>R(d),style:{"border-radius":"4px","margin-right":"4px",background:"#e5e5e5",color:"#1890ff"},size:"small"},{icon:c(()=>a[6]||(a[6]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit"},[s("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])),_:2},1032,["onClick"]),t(D,{type:"",class:"",onClick:g=>F(d),style:{"border-radius":"4px",background:"#e5e5e5",color:"red"},shape:"",size:"small"},{icon:c(()=>a[7]||(a[7]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[s("polyline",{points:"3 6 5 6 21 6"}),s("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])),_:2},1032,["onClick"])],64)):w("",!0)]),_:1},8,["data-source"])]),s("div",null,N(y.value),1),s("div",be,[t(K,{current:o.value,"onUpdate:current":a[2]||(a[2]=u=>o.value=u),simple:"","page-size":"50",total:v.value},null,8,["current","total"])])])]),_:1})],64)}}};export{De as default};
