import{r,e as U,D as T,o as n,c as u,a as s,u as q,d as o,v as z,w as l,F as Z,y as P,B as $,aR as G,h as H,I as J,Z as K,b as f,t as B,f as g,E as j,_ as L}from"./app-8dc9d78c.js";/* empty css                                                                          */import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";import{r as W,u as X}from"./xlsx-4f9172c7.js";const Y={class:"p-4",style:{width:"100%",background:"white","border-radius":"8px"}},ee={class:"flex justify-between"},te={style:{display:"flex","justify-content":"flex-end"}},ae={style:{display:"flex"}},oe={key:0},se={class:"flex justify-end mt-2 mb-4",style:{"margin-right":"-20px"}},re={style:{color:"#0000009d","margin-top":"-6px"}},ne={style:{"margin-right":"-20px"}},le={key:0},ie={key:1,style:{scale:"0.8rem"}},de={key:2},ce={__name:"participantes",props:["proceso"],setup(A){const k=A,v=r([]),i=r(0),w=r(""),m=r(""),D=async()=>{i.value=0;try{const t=await P.post("subir-participantes-simulacro",{data:v.value,proceso:k.proceso},{onUploadProgress:e=>{e.lengthComputable&&(i.value=Math.round(e.loaded/e.total*100))}});console.log("Respuesta del servidor:",t.data),i.value=100,b()}catch(t){i.value=70,w.value="exception",console.error("Error:",t)}},V=t=>{const e=t.target.files[0],d=new FileReader;d.onload=h=>{const _=new Uint8Array(h.target.result),x=W(_,{type:"array"}),I=x.SheetNames[0],y=x.Sheets[I],a=X.sheet_to_json(y,{header:1}),c=a[0],p=a.slice(1).map(M=>{const C={};return c.forEach((O,R)=>{C[O]=M[R]}),C});v.value=p},d.readAsArrayBuffer(e)},S=r([]),b=async()=>{P.post("/get-participantes-externo",{term:m.value,proceso:k.proceso}).then(t=>{S.value=t.data.datos.data}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})};let N;U(m,(t,e)=>{clearTimeout(N),N=setTimeout(()=>{b()},300)}),b();const E=r([{title:"N°",dataIndex:"nro",align:"center"},{title:"DNI",dataIndex:"dni"},{title:"Ap. Paterno",dataIndex:"paterno"},{title:"Ap. Materno",dataIndex:"materno"},{title:"Nombres",dataIndex:"nombres"},{title:"Programa",dataIndex:"programa"}]),F=r([{title:"N°",dataIndex:"nro",align:"center"},{title:"DNI",dataIndex:"dni"},{title:"Ap. Paterno",dataIndex:"paterno"},{title:"Ap. Materno",dataIndex:"materno"},{title:"Nombres",dataIndex:"nombres"},{title:"Programa",dataIndex:"programa",align:"center"}]);return(t,e)=>{const d=$,h=G,_=H,x=T("SearchOutlined"),I=J,y=L;return n(),u(Z,null,[s(q(K),{title:"Inicio"}),o("div",Y,[o("form",{onSubmit:e[0]||(e[0]=z((...a)=>t.submit&&t.submit(...a),["prevent"]))},[o("div",ee,[e[4]||(e[4]=o("label",{for:"fileInput",class:"",style:{"padding-top":"14px",border:"solid 2px var(--primary-color)","border-radius":"6px",cursor:"pointer",padding:"8px 14px"}}," Seleccionar ",-1)),o("input",{id:"fileInput",type:"file",onChange:V,style:{display:"none"}},null,32),o("div",te,[s(d,{class:"mr-2",style:{"border-radius":"5px",height:"38px",border:"solid 1px var(--primary-color)",color:"var(--primary-color)"},onClick:t.descargar},{default:l(()=>e[2]||(e[2]=[f("Plantilla")])),_:1},8,["onClick"]),s(d,{style:{height:"38px","border-radius":"5px",border:"none",color:"white",background:"var(--primary-color)"},onClick:D},{default:l(()=>e[3]||(e[3]=[f(" Subir")])),_:1})])])],32),o("div",ae,[s(h,{percent:i.value,status:w.value},null,8,["percent","status"])]),o("div",null,[s(_,{dataSource:v.value,columns:E.value,size:"small",pagination:!1},{bodyCell:l(({column:a,index:c,record:p})=>[a.dataIndex==="nro"?(n(),u("span",oe,B(c+1),1)):g("",!0)]),_:1},8,["dataSource","columns"])]),o("div",se,[s(I,{value:m.value,"onUpdate:value":e[1]||(e[1]=a=>m.value=a),style:{"max-width":"260px","border-radius":"6px",height:"32px"},placeholder:"Buscar"},{prefix:l(()=>[o("span",re,[s(x)])]),_:1},8,["value"])]),o("div",ne,[s(_,{dataSource:S.value,columns:F.value,size:"small",pagination:!1},{bodyCell:l(({column:a,index:c,record:p})=>[a.dataIndex==="nro"?(n(),u("span",le,B(c+1),1)):g("",!0),a.dataIndex==="id_ide"?(n(),u("div",ie,[p.id_ide==0?(n(),j(y,{key:0,color:"red",class:"small-text",style:{"border-radius":"14px"}},{default:l(()=>e[5]||(e[5]=[f(" sin ide ")])),_:1})):g("",!0),p.area==null?(n(),j(y,{key:1,color:"purple"},{default:l(()=>e[6]||(e[6]=[f(" sin area ")])),_:1})):(n(),u("span",de))])):g("",!0)]),_:1},8,["dataSource","columns"])])])],64)}}},xe=Q(ce,[["__scopeId","data-v-37efe387"]]);export{xe as default};
