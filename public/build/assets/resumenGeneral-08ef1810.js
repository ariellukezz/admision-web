import{r as i,e as b,D,o as m,c as h,a,u as R,w as e,F as w,y as x,Z as E,d as s,b as v,t as c,f as S,E as F,B as L,aa as N,ab as U,ac as V,h as j}from"./app-d59ad026.js";import{_ as z}from"./AuthenticatedLayout-9600519d.js";import"./logotiny-c4b525af.js";import"./Header-bea2c992.js";import"./AntdIcon-fb17ae9a.js";import"./perfil-81e8a979.js";/* empty css                                                               */import"./_plugin-vue_export-helper-c27b6911.js";import"./UserOutlined-fc2e5cab.js";import"./EditOutlined-8ce5359b.js";import"./DownOutlined-562c666f.js";/* empty css                                                            */const A={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg pt-4 pl-4 pb-0",style:{height:"calc(100vh - 103px)"}},G={class:"mr-3"},M={style:{}},O={style:{"font-weight":"bold",color:"#476175"}},P={style:{"font-weight":"bold",color:"#476175"}},H={style:{"font-weight":"bold",color:"#476175"}},nt={__name:"resumenGeneral",setup(Y){const k=i(""),u=i(1),_=i([]),l=i([]),C=[{title:"Cod",dataIndex:"codigo",width:"50px"},{title:"Programa de estudios",dataIndex:"programa",align:"left"},{title:"Preinscripciones",dataIndex:"preinscripciones",align:"center",width:"120px"},{title:"Inscripciones",dataIndex:"inscripciones",align:"center",width:"120px"},{title:"Diferencia",dataIndex:"diferencia",align:"center",width:"120px"}],d=async()=>{try{let o=await x.post("reporte-programa");_.value=o.data.datos,l.value=o.data.totales}catch{}};b(u,()=>{d()});let g;b(k,()=>{clearTimeout(g),g=setTimeout(()=>{u.value=1,d()},500)});const $=async()=>{try{const o=await x.post("reporte-programa",{descargar:1},{responseType:"blob"});if(o.status!==200)throw new Error("Error al obtener el archivo");const t=new Date,p=`${`${t.getDate().toString().padStart(2,"0")}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getFullYear()}_${t.getHours().toString().padStart(2,"0")}-${t.getMinutes().toString().padStart(2,"0")}-${t.getSeconds().toString().padStart(2,"0")}`}_resumen_inscripciones.pdf`,r=window.URL.createObjectURL(new Blob([o.data])),n=document.createElement("a");n.href=r,n.setAttribute("download",p),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r)}catch(o){console.error("Error al descargar el archivo:",o)}};return d(),(o,t)=>{const f=L,p=D("row"),r=N,n=U,I=V,T=j;return m(),h(w,null,[a(R(E),{title:"Resumen inscripciones"}),a(z,null,{default:e(()=>[s("div",A,[a(p,{class:"flex justify-end mb-3"},{default:e(()=>[s("div",G,[a(f,{type:"primary",style:{"border-radius":"5px",background:"#476175",border:"none"},onClick:t[0]||(t[0]=y=>$())},{default:e(()=>t[1]||(t[1]=[v("Descargar")])),_:1})])]),_:1}),s("div",M,[a(T,{columns:C,"data-source":_.value,pagination:!1,size:"small",scroll:{x:200,y:"calc(100vh - 236px)"}},{bodyCell:e(({column:y,record:B})=>[y.dataIndex==="total"?(m(),h(w,{key:0},[v(c(B.total),1)],64)):S("",!0)]),summary:e(()=>[a(I,{fixed:"bottom"},{default:e(()=>[l.value.length>0?(m(),F(n,{key:0},{default:e(()=>[a(r,{"col-span":2,style:{"text-align":"left"}},{default:e(()=>t[2]||(t[2]=[s("span",{style:{"font-weight":"bold","font-size":"1rem",color:"#476175"}}," Totales ",-1)])),_:1}),a(r,{style:{"text-align":"center"}},{default:e(()=>[s("span",O,c(l.value[0].total_preinscripciones),1)]),_:1}),a(r,{style:{"text-align":"center"}},{default:e(()=>[s("span",P,c(l.value[0].total_inscripciones),1)]),_:1}),a(r,{style:{"text-align":"center"}},{default:e(()=>[s("span",H,c(l.value[0].total_diferencia),1)]),_:1})]),_:1})):S("",!0)]),_:1})]),_:1},8,["data-source"])])])]),_:1})],64)}}};export{nt as default};
