import{r as s,e as w,C as Z,D as q,o as r,c as u,a as t,u as p,w as d,F as N,y as x,Z as J,d as n,b as C,t as P,f as _,n as V,j as Q,I as W,_ as X,B as Y,h as ee,i as ae}from"./app-6aa1274b.js";import{_ as te}from"./AuthenticatedLayout-5b674f38.js";import{C as oe}from"./CheckOutlined-f9126272.js";import{E as ne}from"./EditOutlined-1dc9a4ed.js";import{S as se}from"./SearchOutlined-f43f037f.js";import"./logotiny-c4b525af.js";import"./Header-ae97f766.js";import"./AntdIcon-2c94e431.js";import"./DropdownLink-d6703d39.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./DownOutlined-3e2f91e8.js";/* empty css                                                            */const le={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 98px)"}},ie={class:"mr-3"},de={class:"flex justify-between",style:{position:"relative"}},re={style:{}},ue={key:0,class:"editable-cell"},ce={key:0,class:"editable-cell-input-wrapper"},ve={key:1,class:"editable-cell-text-wrapper"},pe={key:1,class:"flex",style:{"justify-content":"center"}},_e={key:0},me={key:1},ge={class:"flex",style:{"justify-content":"flex-end"}},De={__name:"index",setup(fe){const m=s(""),g=s(1),I=s(null),z=s([]),f=s(1),y=s(!1),$=s(""),k=s([]),o=s({id:null,codigo:"",nombre:"",vacantes:"",estado:!0});w(m,(e,a)=>{v()}),w($,(e,a)=>{getDepartamentos()}),w(y,(e,a)=>{y.value==!1&&o.value.id!=null&&(o.value.id=null,o.value.codigo=null,o.value.nombre=null,o.value.estado=!0)}),w(g,(e,a)=>{v()});const O=e=>{y.value=!0,o.value.id=e.id,o.value.codigo=e.codigo,o.value.nombre=e.nombre,o.value.nivel_academico=e.nivel_academico,o.value.tipo_autorizacion=e.tipo_autorizacion,o.value.id_facultad=e.id_fac,e.estado==1?o.value.estado=!0:o.value.estado=!1,o.value.area=e.area},R=async()=>{let e=await x.get("get-modalidades-activas");z.value=e.data.datos},v=async(e="")=>{let a=await x.post("get-vacantes-admin?page="+g.value,{term:m.value});k.value=a.data.datos.data,I.value=a.data.datos.total},S=e=>{x.post("delete-vacante",{id_vacante:e.id_vacante}).then(a=>{v(),F("warning","PROGRAMA ELIMINADO",a.data.mensaje)})},U=[{title:"Cod",dataIndex:"codigo_sunedu",width:"60px",align:"center",responsive:["md"]},{title:"Nombre",dataIndex:"programa"},{title:"Vacantes",dataIndex:"vacantes",width:"160px",align:"center",responsive:["md"]},{title:"Estado",dataIndex:"estado",align:"center",width:"60px",responsive:["md"]},{title:"",dataIndex:"acciones",width:"70px",align:"center"}],E=s([]),A=e=>{console.log("selectedRowKeys changed: ",e),E.value=e};Z(()=>({selectedRowKeys:p(E),onChange:A,hideDefaultSelections:!0}));const F=(e,a,b)=>{V[e]({message:a,description:b})};R(),v();const h=s({}),H=e=>{h.value[e]={...k.value.find(a=>a.key===e)}},K=s({id_modalidad:f.value,id_programa:null,estado:null,vacantes:null}),j=e=>{K.value=e,delete h.value[e.id_programa],x.post("save-numero-vacantes",{id_vacante:e.id_vacante,id_programa:e.id_programa,vacantes:e.vacantes,id_modalidad:f.value}).then(()=>{V.success({message:"Registro actualizado"}),v()}).catch(()=>{V.error({message:"Error al actualizar"})})};return(e,a)=>{const b=Q,B=W,L=q("row"),D=X,M=Y,G=ee,T=ae;return r(),u(N,null,[t(p(J),{title:"Procesos"}),t(te,null,{default:d(()=>[n("div",le,[t(L,{class:"flex justify-between mb-4"},{default:d(()=>[n("div",ie,[t(b,{ref:"select",value:f.value,"onUpdate:value":a[0]||(a[0]=i=>f.value=i),options:z.value,onFocus:e.focus,onChange:e.handleChange},null,8,["value","options","onFocus","onChange"])]),n("div",de,[t(B,{type:"text",placeholder:"Buscar",value:m.value,"onUpdate:value":a[1]||(a[1]=i=>m.value=i),style:{"max-width":"300px"}},{prefix:d(()=>[t(p(se))]),_:1},8,["value"])])]),_:1}),n("div",re,[t(G,{columns:U,"data-source":k.value,pagination:!1,size:"small",scroll:{x:380,y:"calc(100vh - 240px)"}},{bodyCell:d(({column:i,index:he,record:l})=>[i.dataIndex==="vacantes"?(r(),u("div",ue,[h.value[l.id_programa]?(r(),u("div",ce,[t(B,{value:l.vacantes,"onUpdate:value":c=>l.vacantes=c,onPressEnter:c=>j(l)},{prefix:d(()=>a[3]||(a[3]=[n("div",null,null,-1)])),_:2},1032,["value","onUpdate:value","onPressEnter"]),t(p(oe),{class:"editable-cell-icon-check",onClick:c=>j(l)},null,8,["onClick"])])):(r(),u("div",ve,[C(P(l.vacantes||" ")+" ",1),t(p(ne),{class:"editable-cell-icon",onClick:c=>H(l.id_programa)},null,8,["onClick"])]))])):_("",!0),i.dataIndex==="estado"?(r(),u("div",pe,[l.estado==1?(r(),u("div",_e,[t(D,{color:"blue"},{default:d(()=>a[4]||(a[4]=[C("Activo")])),_:1})])):_("",!0),l.estado==0?(r(),u("div",me,[t(D,{color:"red"},{default:d(()=>a[5]||(a[5]=[C("Inactivo")])),_:1})])):_("",!0)])):_("",!0),i.dataIndex==="acciones"?(r(),u(N,{key:2},[t(M,{type:"",onClick:c=>O(l),style:{"border-radius":"4px","margin-right":"4px",background:"#e5e5e5",color:"#1890ff"},size:"small"},{icon:d(()=>a[6]||(a[6]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit"},[n("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),n("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])),_:2},1032,["onClick"]),t(M,{type:"",class:"",onClick:c=>S(l),style:{"border-radius":"4px",background:"#e5e5e5",color:"red"},shape:"",size:"small"},{icon:d(()=>a[7]||(a[7]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[n("polyline",{points:"3 6 5 6 21 6"}),n("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])),_:2},1032,["onClick"])],64)):_("",!0)]),_:1},8,["data-source"])]),n("div",null,P(h.value),1),n("div",ge,[t(T,{current:g.value,"onUpdate:current":a[2]||(a[2]=i=>g.value=i),simple:"","page-size":"50",total:I.value},null,8,["current","total"])])])]),_:1})],64)}}};export{De as default};
