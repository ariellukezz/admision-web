import{a as t,aX as re,r as f,e as D,C as ue,D as pe,o as y,c as U,u as w,w as s,d as o,F as H,y as h,M as me,Z as ve,b as m,t as C,E,f as P,G as X,n as ce,B as ge,j as fe,I as be,_ as _e,h as ye,i as we,k as Se,S as xe,p as he,q as ke,O as Ie}from"./app-236869e0.js";import{_ as Ce}from"./LayoutDirector-75e8c823.js";import Oe from"./Perfil-f0f4e2d7.js";import{A as Fe}from"./AntdIcon-1b67d523.js";import{D as V}from"./DownloadOutlined-ea88ed3c.js";import{S as Ue}from"./SearchOutlined-2ca67ae3.js";import{F as Pe}from"./FormOutlined-b764c304.js";import{D as De}from"./DeleteOutlined-f8554933.js";import"./logotiny-c4b525af.js";import"./Header-a1a71744.js";import"./DropdownLink-4c211873.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./DownOutlined-7c57bc70.js";import"./UserOutlined-3e901056.js";function q(_){for(var v=1;v<arguments.length;v++){var c=arguments[v]!=null?Object(arguments[v]):{},p=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(p=p.concat(Object.getOwnPropertySymbols(c).filter(function(g){return Object.getOwnPropertyDescriptor(c,g).enumerable}))),p.forEach(function(g){$e(_,g,c[g])})}return _}function $e(_,v,c){return v in _?Object.defineProperty(_,v,{value:c,enumerable:!0,configurable:!0,writable:!0}):_[v]=c,_}var A=function(v,c){var p=q({},v,c.attrs);return t(Fe,q({},p,{icon:re}),null)};A.displayName="PlusOutlined";A.inheritAttrs=!1;const ze=A,Re={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4 pb-0 mb-4"},je={class:"flex justify-between"},Ee={class:"ml-0 mt-1"},Ve={style:{"font-size":"1.4rem"}},Ae={class:"flex"},Ne={class:"mr-1"},Me={class:"flex"},Le={class:"mr-2",style:{"margin-top":"-3px"}},Te={class:"mr-1"},Be={class:"flex"},Ge={class:"mr-2",style:{"margin-top":"-3px"}},Ye={class:"flex"},He={class:"mr-2",style:{"margin-top":"-3px"}},Xe={class:"flex mt-4 mb-6 justify-between"},qe={class:"mr-1"},Ze={class:"flex"},Je={class:"mr-2",style:{"margin-top":"-3px"},disabled:""},Ke={class:"flex"},Qe={class:"mr-1"},We={class:"flex justify-between",style:{position:"relative"}},ea={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg py-4"},aa={style:{"font-size":".81rem","font-weight":"bold"}},ta={key:1,style:{"font-size":"0.9rem"}},oa={key:2,style:{"font-size":"0.8rem"}},la={key:3,style:{"font-size":"0.8rem","text-transform":"uppercase"}},na={key:5,class:"flex justify-center",style:{}},sa={class:"mr-1"},ia={class:"mr-1"},da={class:""},ra={class:""},ua={class:"p-4"},pa={class:""},ma={class:"mr-4"},Fa={__name:"index",setup(_){const v=f([]),c=f([]),p=f(null),g=f(""),N=f([]),$=f(!1),O=f(!1),k=f(1),z=f(null),F=f(20),n=f({id:null,codigo:"",id_posulante:"",id_programa:"",id_modalidad:"",estado:!0,observacion:""}),d=f({id:"",nombre:"",dni:""}),Z=a=>{n.value.id=a.id,n.value.codigo=a.codigo,n.value.id_programa=a.id_programa,n.value.id_modalidad=a.id_modalidad,n.value.observacion=a.observacion,d.value.id=a.id_postulante,d.value.dni=a.dni,d.value.nombre=a.dni+" - "+a.nombres+" "+a.paterno+" "+a.materno,$.value=!0};D(g,(a,e)=>{S()}),D(F,(a,e)=>{S()}),D(p,(a,e)=>{a==0&&(p.value=null),k.value=1,S()}),D(O,(a,e)=>{O.value==!1&&n.value.id!=null&&(n.value.id=null,n.value.id_posulante="",n.value.id_programa="",n.value.id_modalidad="",n.value.estado=!0,n.value.observacion="",d.value.nombre=null,d.value.dni=null,d.value.id=null)}),D(k,(a,e)=>{S()});const J=a=>{O.value=!0,n.value.id=a.id,n.value.codigo=a.codigo,n.value.id_programa=a.id_programa,n.value.id_modalidad=a.id_modalidad,n.value.observacion=a.observacion,d.value.id=a.id_postulante,d.value.dni=a.dni,d.value.nombre=a.dni+" - "+a.nombres+" "+a.paterno+" "+a.materno},K=async()=>{let a=await h.post("/segundas/select-programas-segundas?page="+k.value,{term:g.value,paginashoja:F.value,programa:p.value});c.value=a.data.datos},Q=async()=>{let a=await h.post("/segundas/select-programas-segundas-autorizados?page="+k.value,{term:g.value,paginashoja:F.value,programa:p.value});v.value=a.data.datos};K(),Q();const S=async()=>{let a=await h.post("/segundas/get-preinscripciones-segundas?page="+k.value,{term:g.value,paginashoja:F.value,programa:p.value});N.value=a.data.datos.data,z.value=a.data.datos.total},W=()=>{let a={id:n.value.id,id_postulante:d.value.id,id_programa:n.value.id_programa,id_modalidad:n.value.id_modalidad,observacion:n.value.observacion,dni:d.value.dni};h.post("/segundas/actualizar-preinscripciones-segundas",a).then(e=>{S(),R("success",e.data.titulo,e.data.mensaje),O.value=!1})},ee=()=>{let a={id:n.value.id,id_postulante:d.value.id,id_programa:n.value.id_programa,id_modalidad:n.value.id_modalidad,observacion:n.value.observacion,dni:d.value.dni};h.post("/segundas/guardar-inscripcion-segundas",a).then(e=>{S(),R("success",e.data.titulo,e.data.mensaje),$.value=!1})},ae=a=>{console.log("eliminar"),h.post("eliminar-preinscripcion/",{id:a.id}).then(e=>{S(),R("warning",e.data.titulo,e.data.mensaje)})},te=[{title:"DNI",dataIndex:"dni",align:"center"},{title:"Postulante",dataIndex:"postulante"},{title:"Programa",dataIndex:"programa"},{title:"Modalidad",dataIndex:"modalidad",align:"center"},{title:"Estado",dataIndex:"estado",align:"center"},{title:"Observación",dataIndex:"observacion"},{title:"Acciones",dataIndex:"acciones",width:"140px",align:"center"}],M=f([]),oe=a=>{console.log("selectedRowKeys changed: ",a),M.value=a};ue(()=>({selectedRowKeys:w(M),onChange:oe,hideDefaultSelections:!0}));const R=(a,e,i)=>{ce[a]({message:e,description:i})};S();const le=async a=>{try{const e=await h.post("/segundas/get-detalle-preinscripcion-segundas",{term:g.value,programa:p.value},{responseType:"blob"});if(e.status!==200)throw new Error("Error al obtener el archivo");const i=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=i;const u=new Date,I=`${`${u.getDate().toString().padStart(2,"0")}-${(u.getMonth()+1).toString().padStart(2,"0")}-${u.getFullYear()}_${u.getHours().toString().padStart(2,"0")}-${u.getMinutes().toString().padStart(2,"0")}-${u.getSeconds().toString().padStart(2,"0")}`}_preinscritos.pdf`;r.setAttribute("download",I),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(i)}catch(e){console.error("Error al descargar el archivo:",e)}},ne=async a=>{try{const e=await h.post("/segundas/get-resumen-preinscripcion-segundas",{term:g.value,programa:p.value},{responseType:"blob"});if(e.status!==200)throw new Error("Error al obtener el archivo");const i=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=i;const u=new Date,I=`${`${u.getDate().toString().padStart(2,"0")}-${(u.getMonth()+1).toString().padStart(2,"0")}-${u.getFullYear()}_${u.getHours().toString().padStart(2,"0")}-${u.getMinutes().toString().padStart(2,"0")}-${u.getSeconds().toString().padStart(2,"0")}`}_resumen.pdf`;r.setAttribute("download",I),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(i)}catch(e){console.error("Error al descargar el archivo:",e)}};return(a,e)=>{const i=ge,r=fe,u=be,j=pe("row"),I=_e,se=ye,ie=we,x=Se,L=xe,T=he,B=ke,G=me,de=Ie;return y(),U(H,null,[t(w(ve),{title:"Preinscripciones"}),t(Ce,null,{default:s(()=>[o("div",Re,[t(j,{class:"mb-4"},{default:s(()=>[o("div",je,[o("div",Ee,[e[18]||(e[18]=o("span",{style:{"font-size":"1.5rem"}},"Preinscripción",-1)),e[19]||(e[19]=m()),o("span",Ve," - "+C(z.value)+" registros",1)]),o("div",Ae,[o("div",Ne,[t(i,{onClick:e[0]||(e[0]=l=>ne()),class:"bg-blue-900",style:{color:"white",border:"none"}},{default:s(()=>[o("div",Me,[o("div",Le,[t(w(V))]),e[20]||(e[20]=m(" RESUMEN "))])]),_:1})]),o("div",Te,[t(i,{class:"bg-green-600",style:{color:"white",border:"none"}},{default:s(()=>[o("div",Be,[o("div",Ge,[t(w(V))]),e[21]||(e[21]=m(" EXCEL "))])]),_:1})]),o("div",null,[t(i,{onClick:e[1]||(e[1]=l=>le()),class:"bg-red-600",style:{color:"white",border:"none"}},{default:s(()=>[o("div",Ye,[o("div",He,[t(w(V))]),e[22]||(e[22]=m(" PDF "))])]),_:1})])])]),o("div",Xe,[o("div",null,[o("div",qe,[o("div",null,[t(i,{class:"bg-gray-400",style:{color:"white",border:"none"}},{default:s(()=>[o("div",Ze,[o("div",Je,[t(w(ze))]),e[23]||(e[23]=m(" Nuevo Registro "))])]),_:1})])])]),o("div",Ke,[o("div",Qe,[t(r,{ref:"select",value:p.value,"onUpdate:value":e[2]||(e[2]=l=>p.value=l),placeholder:"Seleccionar programa de estudios",options:v.value,allowClear:""},null,8,["value","options"])]),o("div",We,[t(u,{type:"text",placeholder:"Escribe para buscar..!!",value:g.value,"onUpdate:value":e[3]||(e[3]=l=>g.value=l),style:{"max-width":"200px","padding-left":"10px"}},{prefix:s(()=>[t(w(Ue))]),_:1},8,["value"])])])])]),_:1})]),o("div",ea,[t(se,{columns:te,"data-source":N.value,pagination:!1,size:"small"},{bodyCell:s(({column:l,index:va,record:b})=>[l.dataIndex==="dni"?(y(),E(I,{key:0,color:"#476175",style:{"padding-top":"3px"}},{default:s(()=>[o("span",aa,C(b.dni),1)]),_:2},1024)):P("",!0),l.dataIndex==="postulante"?(y(),U("span",ta,C(b.paterno)+" "+C(b.materno)+", "+C(b.nombres),1)):P("",!0),l.dataIndex==="modalidad"?(y(),U("span",oa,C(b.modalidad),1)):P("",!0),l.dataIndex==="programa"?(y(),U("span",la,C(b.programa),1)):P("",!0),l.dataIndex==="estado"?(y(),U(H,{key:4},[b.estado===0?(y(),E(I,{key:0,style:{"font-size":".5rem"},color:"#476175"},{default:s(()=>e[24]||(e[24]=[m("INSCRITO")])),_:1})):(y(),E(I,{key:1,color:"#b01030",style:{"font-size":".7rem"}},{default:s(()=>e[25]||(e[25]=[m("SIN INSCRIPCIÓN")])),_:1}))],64)):P("",!0),l.dataIndex==="acciones"?(y(),U("div",na,[o("div",sa,[t(i,{type:"true",label:"Inscribir",onClick:Y=>Z(b),size:"small",style:{background:"#f3f3f3",height:"30px",border:"solid 1px #d9d9d9",color:"gray",display:"flex","align-items":"center"}},{default:s(()=>e[26]||(e[26]=[m("Inscribir")])),_:2},1032,["onClick"])]),o("div",ia,[t(i,{type:"true",onClick:Y=>J(b),size:"small",style:{background:"#f3f3f3",height:"30px",border:"solid 1px #d9d9d9",color:"blue",display:"flex","align-items":"center"}},{default:s(()=>[t(w(Pe))]),_:2},1032,["onClick"])]),o("div",da,[t(i,{type:"true",onClick:Y=>ae(b),size:"small",style:{background:"#f3f3f3",height:"30px",color:"crimson",border:"solid 1px #d9d9d9",display:"flex","align-items":"center"}},{default:s(()=>[t(w(De))]),_:2},1032,["onClick"])])])):P("",!0)]),_:1},8,["data-source"]),t(ie,{current:k.value,"onUpdate:current":e[4]||(e[4]=l=>k.value=l),total:z.value,pageSize:F.value,"onUpdate:pageSize":e[5]||(e[5]=l=>F.value=l),"show-less-items":""},null,8,["current","total","pageSize"])])]),_:1}),o("div",null,[t(G,{open:O.value,"onUpdate:open":e[11]||(e[11]=l=>O.value=l),title:"Modificar Pre inscripción",style:{"margin-top":"-40px"}},{footer:s(()=>[t(i,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:s(()=>e[32]||(e[32]=[m("Cancelar")])),_:1},8,["onClick"]),t(i,{type:"primary",onClick:e[10]||(e[10]=l=>W())},{default:s(()=>e[33]||(e[33]=[m("Guardar")])),_:1})]),default:s(()=>[t(B,X({ref:"formRef",name:"custom-validation",model:a.formState},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:s(()=>[t(x,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[27]||(e[27]=o("label",null,"Postulante",-1)),t(u,{type:"text",value:d.value.nombre,"onUpdate:value":e[6]||(e[6]=l=>d.value.nombre=l)},null,8,["value"])]),_:1}),t(x,{"has-feedback":"",name:"postulante"},{default:s(()=>[e[28]||(e[28]=o("label",null,"Programa",-1)),o("div",ra,[t(r,{ref:"select",value:n.value.id_programa,"onUpdate:value":e[7]||(e[7]=l=>n.value.id_programa=l),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"},options:c.value},null,8,["value","options"])])]),_:1}),t(x,{"has-feedback":"",name:"tipo"},{default:s(()=>[e[30]||(e[30]=o("label",null,"Modalidad",-1)),t(r,{ref:"select",value:n.value.id_modalidad,"onUpdate:value":e[8]||(e[8]=l=>n.value.id_modalidad=l),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"}},{default:s(()=>[t(L,{value:1},{default:s(()=>e[29]||(e[29]=[m("GRADUADOS Y TITULADOS")])),_:1})]),_:1},8,["value"])]),_:1}),t(x,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[31]||(e[31]=o("label",null,"Observaciones",-1)),t(T,{type:"text",value:n.value.observacion,"onUpdate:value":e[9]||(e[9]=l=>n.value.observacion=l),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["open"])]),t(G,{open:$.value,"onUpdate:open":e[17]||(e[17]=l=>$.value=l),title:"Inscripción",style:{"margin-top":"-40px","min-width":"900px"}},{footer:s(()=>[o("div",ma,[t(i,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:s(()=>e[40]||(e[40]=[m("Cancelar")])),_:1},8,["onClick"]),t(i,{type:"primary",onClick:e[16]||(e[16]=l=>ee())},{default:s(()=>e[41]||(e[41]=[m("Guardar")])),_:1})])]),default:s(()=>[t(Oe,{dni:d.value.dni},null,8,["dni"]),o("div",null,[o("div",ua,[t(de,null,{default:s(()=>[e[39]||(e[39]=o("div",{class:"mb-4"},[o("div",null,[o("span",{style:{"font-weight":"bold","font-size":"1.3rem"}}," DATOS DE INSCRIPCION")])],-1)),t(B,X({ref:"formRef",name:"custom-validation",model:a.formState},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:s(()=>[t(x,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[34]||(e[34]=o("label",null,"Postulante",-1)),t(u,{type:"text",value:d.value.nombre,"onUpdate:value":e[12]||(e[12]=l=>d.value.nombre=l)},null,8,["value"])]),_:1}),t(x,{"has-feedback":"",name:"postulante"},{default:s(()=>[e[35]||(e[35]=o("label",null,"Programa",-1)),o("div",pa,[t(r,{ref:"select",value:n.value.id_programa,"onUpdate:value":e[13]||(e[13]=l=>n.value.id_programa=l),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"},options:c.value},null,8,["value","options"])])]),_:1}),t(x,{"has-feedback":"",name:"tipo"},{default:s(()=>[e[37]||(e[37]=o("label",null,"Modalidad",-1)),t(r,{ref:"select",value:n.value.id_modalidad,"onUpdate:value":e[14]||(e[14]=l=>n.value.id_modalidad=l),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"}},{default:s(()=>[t(L,{value:1},{default:s(()=>e[36]||(e[36]=[m("GRADUADOS Y TITULADOS")])),_:1})]),_:1},8,["value"])]),_:1}),t(x,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[38]||(e[38]=o("label",null,"Observaciones",-1)),t(T,{type:"text",value:n.value.observacion,"onUpdate:value":e[15]||(e[15]=l=>n.value.observacion=l),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1})])])]),_:1},8,["open"])],64)}}};export{Fa as default};
