import{a as t,r as p,J as L,C as Q,e as X,D as Y,o as h,c as Z,w as a,B as K,M as ee,u as g,b as m,d as B,E as te,f as ae,t as oe,y,a4 as f,I as ne,H as le,aH as se,h as re,k as ie,S as ce,j as ue,p as pe,q as de}from"./app-313a0c88.js";import{_ as me}from"./_plugin-vue_export-helper-c27b6911.js";import{A as _e}from"./AntdIcon-663d34a9.js";import{P as ve}from"./PlusOutlined-433448ad.js";import{E as fe}from"./EditOutlined-5c95f1ca.js";import{S as ge}from"./SearchOutlined-593d851a.js";import{D as be}from"./DeleteOutlined-7272cb40.js";var ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};const Ce=ye;function D(i){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?Object(arguments[n]):{},c=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(l).filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable}))),c.forEach(function(u){we(i,u,l[u])})}return i}function we(i,n,l){return n in i?Object.defineProperty(i,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[n]=l,i}var x=function(n,l){var c=D({},n,l.attrs);return t(_e,D({},c,{icon:Ce}),null)};x.displayName="SettingOutlined";x.inheritAttrs=!1;const Ie=x;const Oe={class:"crud-container"},Ne={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4"},xe={__name:"tipo_observacion",setup(i){const n=p(!1),l=p(!1),c=p(!1),u=p(!1),_=p(""),b=p([]),d=p(null),C=p(),r=L({nombre:"",categoria:"",descripcion:""}),M={nombre:[{required:!0,message:"El nombre es obligatorio"}],categoria:[{required:!0,message:"La categoría es obligatoria"}]},z=[{title:"ID",dataIndex:"id",key:"id",width:50},{title:"Nombre",dataIndex:"nombre",key:"nombre"},{title:"Categoría",dataIndex:"categoria",key:"categoria"},{title:"Descripción",dataIndex:"descripcion",key:"descripcion",ellipsis:!0},{title:"Acciones",key:"actions",width:120,align:"center"}],A=L({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0}),P=Q(()=>_.value?b.value.filter(o=>o.nombre.toLowerCase().includes(_.value.toLowerCase())||o.categoria.toLowerCase().includes(_.value.toLowerCase())||o.descripcion&&o.descripcion.toLowerCase().includes(_.value.toLowerCase())):b.value),w=async()=>{c.value=!0;try{const o=await y.get("https://servicios-admision.unap.edu.pe/api/v1/observados/tipos");b.value=o.data.data||o.data,A.total=b.value.length}catch(o){f.error("Error al cargar los tipos"),console.error(o)}finally{c.value=!1}},j=()=>{d.value=null,Object.assign(r,{nombre:"",categoria:"",descripcion:""}),l.value=!0},$=o=>{d.value=o,Object.assign(r,{...o}),l.value=!0},S=async()=>{try{await C.value.validate(),u.value=!0,d.value?(await y.put(`https://servicios-admision.unap.edu.pe/api/v1/observados/tipos/${d.value.id}`,r),f.success("Tipo actualizado correctamente")):(await y.post("https://servicios-admision.unap.edu.pe/api/v1/observados/tipos",r),f.success("Tipo creado correctamente")),await w(),I()}catch(o){if(o.errorFields)return;f.error("Error al guardar el tipo"),console.error(o)}finally{u.value=!1}},F=async o=>{try{await y.delete(`https://servicios-admision.unap.edu.pe/api/v1/observados/tipos/${o}`),f.success("Tipo eliminado correctamente"),await w()}catch(e){f.error("Error al eliminar el tipo"),console.error(e)}},I=()=>{var o;l.value=!1,(o=C.value)==null||o.resetFields(),d.value=null};return X(n,o=>{o&&w()}),(o,e)=>{const v=K,T=ne,H=le,U=se,R=re,V=Y("sin-icono"),O=ie,N=ce,q=ue,W=pe,G=de,k=ee;return h(),Z("div",null,[t(v,{type:"primary",onClick:e[0]||(e[0]=s=>n.value=!0),class:"mb-4"},{icon:a(()=>[t(g(Ie))]),default:a(()=>[e[7]||(e[7]=m(" Gestionar Tipos "))]),_:1}),t(k,{open:n.value,"onUpdate:open":e[6]||(e[6]=s=>n.value=s),title:"Gestión de Tipos",width:"90%",footer:null,styles:{maxWidth:"1200px"}},{default:a(()=>[B("div",Oe,[B("div",Ne,[t(T,{value:_.value,"onUpdate:value":e[1]||(e[1]=s=>_.value=s),placeholder:"Buscar tipos...",style:{width:"100%",maxWidth:"240px"}},{prefix:a(()=>[t(g(ge))]),_:1},8,["value"]),t(v,{type:"primary",onClick:j,class:"w-full sm:w-auto"},{icon:a(()=>[t(g(ve))]),default:a(()=>[e[8]||(e[8]=m(" Nuevo Tipo "))]),_:1})]),t(R,{columns:z,"data-source":P.value,loading:c.value,pagination:A,"row-key":"id",scroll:{x:600}},{bodyCell:a(({column:s,record:E})=>[s.key==="actions"?(h(),te(U,{key:0},{default:a(()=>[t(v,{type:"link",size:"small",onClick:J=>$(E)},{default:a(()=>[t(g(fe))]),_:2},1032,["onClick"]),t(H,{title:"¿Estás seguro de eliminar este tipo?",onConfirm:J=>F(E.id)},{default:a(()=>[t(v,{type:"link",danger:"",size:"small"},{default:a(()=>[t(g(be))]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)):ae("",!0)]),_:1},8,["data-source","loading","pagination"]),t(k,{open:l.value,"onUpdate:open":e[5]||(e[5]=s=>l.value=s),title:d.value?"Editar Tipo":"Nuevo Tipo",onOk:S,onCancel:I,width:"90%",styles:{maxWidth:"500px"}},{footer:a(()=>[t(v,{onClick:I},{default:a(()=>e[12]||(e[12]=[m("Cancelar")])),_:1}),t(v,{type:"primary",onClick:S,loading:u.value},{default:a(()=>[m(oe(d.value?"Actualizar":"Crear"),1)]),_:1},8,["loading"])]),default:a(()=>[t(G,{ref_key:"formRef",ref:C,model:r,rules:M,layout:"vertical"},{default:a(()=>[t(O,{label:"Nombre",name:"nombre"},{default:a(()=>[t(T,{value:r.nombre,"onUpdate:value":e[2]||(e[2]=s=>r.nombre=s)},{prefix:a(()=>[t(V)]),_:1},8,["value"])]),_:1}),t(O,{label:"Categoría",name:"categoria"},{default:a(()=>[t(q,{value:r.categoria,"onUpdate:value":e[3]||(e[3]=s=>r.categoria=s),placeholder:"Seleccione categoría"},{default:a(()=>[t(N,{value:"INHABILITACION INDEFINIDA"},{default:a(()=>e[9]||(e[9]=[m(" INHABILITACIÓN INDEFINIDA ")])),_:1}),t(N,{value:"INHABILITACION TEMPORAL"},{default:a(()=>e[10]||(e[10]=[m(" INHABILITACIÓN TEMPORAL ")])),_:1}),t(N,{value:"SANCION ECONOMICA"},{default:a(()=>e[11]||(e[11]=[m(" SANCIÓN ECONÓMICA ")])),_:1})]),_:1},8,["value"])]),_:1}),t(O,{label:"Descripción",name:"descripcion"},{default:a(()=>[t(W,{value:r.descripcion,"onUpdate:value":e[4]||(e[4]=s=>r.descripcion=s),rows:3},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])]),_:1},8,["open"])])}}},Be=me(xe,[["__scopeId","data-v-8d8e90ea"]]);export{Be as default};
