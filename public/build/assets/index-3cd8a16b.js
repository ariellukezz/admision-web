import{a as t,a$ as ue,r as f,e as D,C as pe,D as me,o as y,c as U,u as w,w as s,d as o,F as H,y as x,M as ve,Z as ce,b as v,t as I,E as j,f as P,G as q,n as ge,B as fe,j as be,I as _e,_ as ye,h as we,i as xe,k as Se,S as he,p as ke,q as Ce,O as Ie}from"./app-4942be61.js";import{_ as Oe}from"./LayoutDirector-0f5c1aed.js";import Fe from"./Perfil-8c1102b8.js";import{A as Ue}from"./AntdIcon-7f1e898e.js";import{D as V}from"./DownloadOutlined-863699db.js";import{S as Pe}from"./SearchOutlined-b4560e30.js";import{F as $e}from"./FormOutlined-278afc0f.js";import{D as De}from"./DeleteOutlined-a4fb5685.js";import"./logotiny-c4b525af.js";import"./Header-cf7aa195.js";import"./DownOutlined-8a0e9428.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./UserOutlined-a9135a75.js";function X(_){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?Object(arguments[c]):{},p=Object.keys(g);typeof Object.getOwnPropertySymbols=="function"&&(p=p.concat(Object.getOwnPropertySymbols(g).filter(function(m){return Object.getOwnPropertyDescriptor(g,m).enumerable}))),p.forEach(function(m){Re(_,m,g[m])})}return _}function Re(_,c,g){return c in _?Object.defineProperty(_,c,{value:g,enumerable:!0,configurable:!0,writable:!0}):_[c]=g,_}var A=function(c,g){var p=X({},c,g.attrs);return t(Ue,X({},p,{icon:ue}),null)};A.displayName="PlusOutlined";A.inheritAttrs=!1;const Ee=A,ze={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4 pb-0 mb-4"},je={class:"flex justify-between"},Ve={class:"ml-0 mt-1"},Ae={style:{"font-size":"1.4rem"}},Ne={class:"flex"},Le={class:"mr-1"},Me={class:"flex"},Te={class:"mr-2",style:{"margin-top":"-3px"}},Be={class:"mr-1"},Ge={class:"flex"},Ye={class:"mr-2",style:{"margin-top":"-3px"}},He={class:"flex"},qe={class:"mr-2",style:{"margin-top":"-3px"}},Xe={class:"flex mt-4 mb-6 justify-between"},Ze={class:"mr-1"},Je={class:"flex"},Ke={class:"mr-2",style:{"margin-top":"-3px"},disabled:""},Qe={class:"flex"},We={class:"mr-1"},ea={class:"flex justify-between",style:{position:"relative"}},aa={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg py-4"},ta={style:{"font-size":".81rem","font-weight":"bold"}},oa={key:1,style:{"font-size":"0.9rem"}},la={key:2,style:{"font-size":"0.8rem"}},na={key:3,style:{"font-size":"0.8rem","text-transform":"uppercase"}},sa={key:5,class:"flex justify-center",style:{}},ia={class:"mr-1"},ra={class:"mr-1"},da={class:""},ua={class:""},pa={class:"p-4"},ma={class:""},va={class:"mr-4"},Fa={__name:"index",setup(_){const c=f([]),g=f([]),p=f(null),m=f(""),N=f([]),$=f(!1),O=f(!1),k=f(1),R=f(null),F=f(20),l=f({id:null,codigo:"",id_posulante:"",id_programa:"",id_modalidad:"",estado:!0,observacion:""}),r=f({id:"",nombre:"",dni:""}),Z=a=>{l.value.id=a.id,l.value.codigo=a.codigo,l.value.id_programa=a.id_programa,l.value.id_modalidad=a.id_modalidad,l.value.observacion=a.observacion,r.value.id=a.id_postulante,r.value.dni=a.dni,r.value.nombre=a.dni+" - "+a.nombres+" "+a.paterno+" "+a.materno,$.value=!0};D(m,(a,e)=>{S()}),D(F,(a,e)=>{S()}),D(p,(a,e)=>{a==0&&(p.value=null),k.value=1,S()}),D(O,(a,e)=>{O.value==!1&&l.value.id!=null&&(l.value.id=null,l.value.id_posulante="",l.value.id_programa="",l.value.id_modalidad="",l.value.estado=!0,l.value.observacion="",r.value.nombre=null,r.value.dni=null,r.value.id=null)}),D(k,(a,e)=>{S()});const J=a=>{O.value=!0,l.value.id=a.id,l.value.codigo=a.codigo,l.value.id_programa=a.id_programa,l.value.id_modalidad=a.id_modalidad,l.value.observacion=a.observacion,r.value.id=a.id_postulante,r.value.dni=a.dni,r.value.nombre=a.dni+" - "+a.nombres+" "+a.paterno+" "+a.materno},K=async()=>{let a=await x.post("/segundas/select-programas-segundas?page="+k.value,{term:m.value,paginashoja:F.value,programa:p.value});g.value=a.data.datos},Q=async()=>{let a=await x.post("/segundas/select-programas-segundas-autorizados?page="+k.value,{term:m.value,paginashoja:F.value,programa:p.value});c.value=a.data.datos};K(),Q();const S=async()=>{let a=await x.post("/segundas/get-preinscripciones-segundas?page="+k.value,{term:m.value,paginashoja:F.value,programa:p.value});N.value=a.data.datos.data,R.value=a.data.datos.total},W=()=>{let a={id:l.value.id,id_postulante:r.value.id,id_programa:l.value.id_programa,id_modalidad:l.value.id_modalidad,observacion:l.value.observacion,dni:r.value.dni};x.post("/segundas/actualizar-preinscripciones-segundas",a).then(e=>{S(),E("success",e.data.titulo,e.data.mensaje),O.value=!1})},ee=()=>{let a={id:l.value.id,id_postulante:r.value.id,id_programa:l.value.id_programa,id_modalidad:l.value.id_modalidad,observacion:l.value.observacion,dni:r.value.dni};x.post("/segundas/guardar-inscripcion-segundas",a).then(e=>{S(),E("success",e.data.titulo,e.data.mensaje),$.value=!1,l.value.id=null,l.value.codigo=null,l.value.id_programa=null,l.value.id_modalidad=null,l.value.observacion=null,r.value.id=null,r.value.dni=null,r.value.nombre=null,$.value=!0})},ae=a=>{console.log("eliminar"),x.post("eliminar-preinscripcion/",{id:a.id}).then(e=>{S(),E("warning",e.data.titulo,e.data.mensaje)})},te=[{title:"DNI",dataIndex:"dni",align:"center"},{title:"Postulante",dataIndex:"postulante"},{title:"Programa",dataIndex:"programa"},{title:"Modalidad",dataIndex:"modalidad",align:"center"},{title:"Estado",dataIndex:"estado",align:"center"},{title:"Observación",dataIndex:"observacion"},{title:"Acciones",dataIndex:"acciones",width:"140px",align:"center"}],L=f([]),oe=a=>{console.log("selectedRowKeys changed: ",a),L.value=a};pe(()=>({selectedRowKeys:w(L),onChange:oe,hideDefaultSelections:!0}));const E=(a,e,i)=>{ge[a]({message:e,description:i})};S();const le=async a=>{try{const e=await x.post("/segundas/get-detalle-preinscripcion-segundas",{term:m.value,programa:p.value},{responseType:"blob"});if(e.status!==200)throw new Error("Error al obtener el archivo");const i=window.URL.createObjectURL(new Blob([e.data])),d=document.createElement("a");d.href=i;const u=new Date,C=`${`${u.getDate().toString().padStart(2,"0")}-${(u.getMonth()+1).toString().padStart(2,"0")}-${u.getFullYear()}_${u.getHours().toString().padStart(2,"0")}-${u.getMinutes().toString().padStart(2,"0")}-${u.getSeconds().toString().padStart(2,"0")}`}_preinscritos.pdf`;d.setAttribute("download",C),document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(i)}catch(e){console.error("Error al descargar el archivo:",e)}},ne=async a=>{try{const e=await x.post("/segundas/get-resumen-preinscripcion-segundas",{term:m.value,programa:p.value},{responseType:"blob"});if(e.status!==200)throw new Error("Error al obtener el archivo");const i=window.URL.createObjectURL(new Blob([e.data])),d=document.createElement("a");d.href=i;const u=new Date,C=`${`${u.getDate().toString().padStart(2,"0")}-${(u.getMonth()+1).toString().padStart(2,"0")}-${u.getFullYear()}_${u.getHours().toString().padStart(2,"0")}-${u.getMinutes().toString().padStart(2,"0")}-${u.getSeconds().toString().padStart(2,"0")}`}_resumen.pdf`;d.setAttribute("download",C),document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(i)}catch(e){console.error("Error al descargar el archivo:",e)}},se=async()=>{try{const a=await x.post("/export-excel",{term:m.value,programa:p.value},{responseType:"blob"}),e=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=e,i.setAttribute("download","preinscritos.xlsx"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(a){console.error("Error al exportar:",a)}};return(a,e)=>{const i=fe,d=be,u=_e,z=me("row"),C=ye,ie=we,re=xe,h=Se,M=he,T=ke,B=Ce,G=ve,de=Ie;return y(),U(H,null,[t(w(ce),{title:"Preinscripciones"}),t(Oe,null,{default:s(()=>[o("div",ze,[t(z,{class:"mb-4"},{default:s(()=>[o("div",je,[o("div",Ve,[e[19]||(e[19]=o("span",{style:{"font-size":"1.5rem"}},"Preinscripción",-1)),e[20]||(e[20]=v()),o("span",Ae," - "+I(R.value)+" registros",1)]),o("div",Ne,[o("div",Le,[t(i,{onClick:e[0]||(e[0]=n=>ne()),class:"bg-blue-900",style:{color:"white",border:"none"}},{default:s(()=>[o("div",Me,[o("div",Te,[t(w(V))]),e[21]||(e[21]=v(" RESUMEN "))])]),_:1})]),o("div",Be,[t(i,{onClick:e[1]||(e[1]=n=>se()),class:"bg-green-600",style:{color:"white",border:"none"}},{default:s(()=>[o("div",Ge,[o("div",Ye,[t(w(V))]),e[22]||(e[22]=v(" EXCEL "))])]),_:1})]),o("div",null,[t(i,{onClick:e[2]||(e[2]=n=>le()),class:"bg-red-600",style:{color:"white",border:"none"}},{default:s(()=>[o("div",He,[o("div",qe,[t(w(V))]),e[23]||(e[23]=v(" PDF "))])]),_:1})])])]),o("div",Xe,[o("div",null,[o("div",Ze,[o("div",null,[t(i,{class:"bg-gray-400",style:{color:"white",border:"none"}},{default:s(()=>[o("div",Je,[o("div",Ke,[t(w(Ee))]),e[24]||(e[24]=v(" Nuevo Registro "))])]),_:1})])])]),o("div",Qe,[o("div",We,[t(d,{ref:"select",value:p.value,"onUpdate:value":e[3]||(e[3]=n=>p.value=n),placeholder:"Seleccionar programa de estudios",options:c.value,allowClear:""},null,8,["value","options"])]),o("div",ea,[t(u,{type:"text",placeholder:"Escribe para buscar..!!",value:m.value,"onUpdate:value":e[4]||(e[4]=n=>m.value=n),style:{"max-width":"200px","padding-left":"10px"}},{prefix:s(()=>[t(w(Pe))]),_:1},8,["value"])])])])]),_:1})]),o("div",aa,[t(ie,{columns:te,"data-source":N.value,pagination:!1,size:"small"},{bodyCell:s(({column:n,index:ca,record:b})=>[n.dataIndex==="dni"?(y(),j(C,{key:0,color:"#476175",style:{"padding-top":"3px"}},{default:s(()=>[o("span",ta,I(b.dni),1)]),_:2},1024)):P("",!0),n.dataIndex==="postulante"?(y(),U("span",oa,I(b.paterno)+" "+I(b.materno)+", "+I(b.nombres),1)):P("",!0),n.dataIndex==="modalidad"?(y(),U("span",la,I(b.modalidad),1)):P("",!0),n.dataIndex==="programa"?(y(),U("span",na,I(b.programa),1)):P("",!0),n.dataIndex==="estado"?(y(),U(H,{key:4},[b.estado===0?(y(),j(C,{key:0,style:{"font-size":".5rem"},color:"#476175"},{default:s(()=>e[25]||(e[25]=[v("INSCRITO")])),_:1})):(y(),j(C,{key:1,color:"#b01030",style:{"font-size":".7rem"}},{default:s(()=>e[26]||(e[26]=[v("SIN INSCRIPCIÓN")])),_:1}))],64)):P("",!0),n.dataIndex==="acciones"?(y(),U("div",sa,[o("div",ia,[t(i,{type:"true",label:"Inscribir",onClick:Y=>Z(b),size:"small",style:{background:"#f3f3f3",height:"30px",border:"solid 1px #d9d9d9",color:"gray",display:"flex","align-items":"center"}},{default:s(()=>e[27]||(e[27]=[v("Inscribir")])),_:2},1032,["onClick"])]),o("div",ra,[t(i,{type:"true",onClick:Y=>J(b),size:"small",style:{background:"#f3f3f3",height:"30px",border:"solid 1px #d9d9d9",color:"blue",display:"flex","align-items":"center"}},{default:s(()=>[t(w($e))]),_:2},1032,["onClick"])]),o("div",da,[t(i,{type:"true",onClick:Y=>ae(b),size:"small",style:{background:"#f3f3f3",height:"30px",color:"crimson",border:"solid 1px #d9d9d9",display:"flex","align-items":"center"}},{default:s(()=>[t(w(De))]),_:2},1032,["onClick"])])])):P("",!0)]),_:1},8,["data-source"]),t(re,{current:k.value,"onUpdate:current":e[5]||(e[5]=n=>k.value=n),total:R.value,pageSize:F.value,"onUpdate:pageSize":e[6]||(e[6]=n=>F.value=n),"show-less-items":""},null,8,["current","total","pageSize"])])]),_:1}),o("div",null,[t(G,{open:O.value,"onUpdate:open":e[12]||(e[12]=n=>O.value=n),title:"Modificar Pre inscripción",style:{"margin-top":"-40px"}},{footer:s(()=>[t(i,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:s(()=>e[33]||(e[33]=[v("Cancelar")])),_:1},8,["onClick"]),t(i,{type:"primary",onClick:e[11]||(e[11]=n=>W())},{default:s(()=>e[34]||(e[34]=[v("Guardar")])),_:1})]),default:s(()=>[t(B,q({ref:"formRef",name:"custom-validation",model:a.formState},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:s(()=>[t(h,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[28]||(e[28]=o("label",null,"Postulante",-1)),t(u,{type:"text",value:r.value.nombre,"onUpdate:value":e[7]||(e[7]=n=>r.value.nombre=n)},null,8,["value"])]),_:1}),t(h,{"has-feedback":"",name:"postulante"},{default:s(()=>[e[29]||(e[29]=o("label",null,"Programa",-1)),o("div",ua,[t(d,{ref:"select",value:l.value.id_programa,"onUpdate:value":e[8]||(e[8]=n=>l.value.id_programa=n),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"},options:g.value},null,8,["value","options"])])]),_:1}),t(h,{"has-feedback":"",name:"tipo"},{default:s(()=>[e[31]||(e[31]=o("label",null,"Modalidad",-1)),t(d,{ref:"select",value:l.value.id_modalidad,"onUpdate:value":e[9]||(e[9]=n=>l.value.id_modalidad=n),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"}},{default:s(()=>[t(M,{value:1},{default:s(()=>e[30]||(e[30]=[v("GRADUADOS Y TITULADOS")])),_:1})]),_:1},8,["value"])]),_:1}),t(h,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[32]||(e[32]=o("label",null,"Observaciones",-1)),t(T,{type:"text",value:l.value.observacion,"onUpdate:value":e[10]||(e[10]=n=>l.value.observacion=n),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["open"])]),t(G,{open:$.value,"onUpdate:open":e[18]||(e[18]=n=>$.value=n),title:"Inscripción",style:{"margin-top":"-40px","min-width":"900px"}},{footer:s(()=>[o("div",va,[t(i,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:s(()=>e[41]||(e[41]=[v("Cancelar")])),_:1},8,["onClick"]),t(i,{type:"primary",onClick:e[17]||(e[17]=n=>ee())},{default:s(()=>e[42]||(e[42]=[v("Guardar")])),_:1})])]),default:s(()=>[t(Fe,{dni:r.value.dni},null,8,["dni"]),o("div",null,[o("div",pa,[t(de,null,{default:s(()=>[e[40]||(e[40]=o("div",{class:"mb-4"},[o("div",null,[o("span",{style:{"font-weight":"bold","font-size":"1.3rem"}}," DATOS DE INSCRIPCION")])],-1)),t(B,q({ref:"formRef",name:"custom-validation",model:a.formState},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:s(()=>[t(h,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[35]||(e[35]=o("label",null,"Postulante",-1)),t(u,{type:"text",value:r.value.nombre,"onUpdate:value":e[13]||(e[13]=n=>r.value.nombre=n)},null,8,["value"])]),_:1}),t(h,{"has-feedback":"",name:"postulante"},{default:s(()=>[e[36]||(e[36]=o("label",null,"Programa",-1)),o("div",ma,[t(d,{ref:"select",value:l.value.id_programa,"onUpdate:value":e[14]||(e[14]=n=>l.value.id_programa=n),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"},options:g.value},null,8,["value","options"])])]),_:1}),t(h,{"has-feedback":"",name:"tipo"},{default:s(()=>[e[38]||(e[38]=o("label",null,"Modalidad",-1)),t(d,{ref:"select",value:l.value.id_modalidad,"onUpdate:value":e[15]||(e[15]=n=>l.value.id_modalidad=n),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"}},{default:s(()=>[t(M,{value:1},{default:s(()=>e[37]||(e[37]=[v("GRADUADOS Y TITULADOS")])),_:1})]),_:1},8,["value"])]),_:1}),t(h,{"has-feedback":"",name:"nombre"},{default:s(()=>[e[39]||(e[39]=o("label",null,"Observaciones",-1)),t(T,{type:"text",value:l.value.observacion,"onUpdate:value":e[16]||(e[16]=n=>l.value.observacion=n),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1})])])]),_:1},8,["open"])],64)}}};export{Fa as default};
