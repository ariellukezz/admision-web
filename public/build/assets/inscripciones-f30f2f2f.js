import{r as u,H as S,e as g,D as j,o as k,c as $,a,u as b,w as s,F as E,y as v,Z as A,d as n,b as y,t as C,f as M,a9 as I,B as N,aa as V,ab as H,ac as P,h as z}from"./app-d59ad026.js";import{_ as Y}from"./AuthenticatedLayout-9600519d.js";import{F as G,a as X}from"./FilePdfOutlined-d6769c7c.js";import"./logotiny-c4b525af.js";import"./Header-bea2c992.js";import"./AntdIcon-fb17ae9a.js";import"./perfil-81e8a979.js";/* empty css                                                               */import"./_plugin-vue_export-helper-c27b6911.js";import"./UserOutlined-fc2e5cab.js";import"./EditOutlined-8ce5359b.js";import"./DownOutlined-562c666f.js";/* empty css                                                            */const Z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},q={class:"checkbox-group-container"},J={class:"mt-4 bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 230px)"}},K={class:"flex gap-2"},Q={style:{display:"flex","align-items":"center",gap:"6px"}},W={style:{display:"flex","align-items":"center",gap:"6px"}},ee={style:{}},te={style:{"font-weight":"bold",color:"#476175"}},be={__name:"inscripciones",setup(oe){const f=u(""),m=u(1),R=u(0),_=u([]),r=u(["area"]),F=S(()=>_.value.reduce((t,e)=>t+e.total,0)),h=[{label:"Área",value:"area"},{label:"Programa",value:"programa"},{label:"Modalidad",value:"modalidad"},{label:"Sexo",value:"sexo"},{label:"Usuario",value:"usuario"}],w=S(()=>[...r.value.map(t=>{const e=h.find(c=>c.value===t);return{title:e?e.label:t,dataIndex:t,key:t,align:"left"}}),{title:"Total",dataIndex:"total",key:"total",align:"center",width:"90px"}]),p=async()=>{try{let t=await v.post("resumen-inscripciones?page="+m.value,{group_by:r.value,term:f.value});_.value=t.data.data,R.value=t.data.datos.total}catch{}};g(r,()=>{p()}),g(m,()=>{p()});let x;g(f,()=>{clearTimeout(x),x=setTimeout(()=>{m.value=1,p()},500)});const T=async()=>{try{const t=await v.post("resumen-inscripciones",{descargar:1,group_by:r.value},{responseType:"blob"});if(t.status!==200)throw new Error("Error al obtener el archivo");const e=new Date,i=`${`${e.getDate().toString().padStart(2,"0")}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getFullYear()}_${e.getHours().toString().padStart(2,"0")}-${e.getMinutes().toString().padStart(2,"0")}-${e.getSeconds().toString().padStart(2,"0")}`}_resumen_inscripciones.pdf`,l=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=l,o.setAttribute("download",i),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(l)}catch(t){console.error("Error al descargar el archivo:",t)}},U=async()=>{try{const t=await v.post("resumen-inscripciones",{descargar:1,excel:1,group_by:r.value},{responseType:"blob"});if(t.status!==200)throw new Error("Error al obtener el archivo");const e=new Date,i=`${`${e.getDate().toString().padStart(2,"0")}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getFullYear()}_${e.getHours().toString().padStart(2,"0")}-${e.getMinutes().toString().padStart(2,"0")}-${e.getSeconds().toString().padStart(2,"0")}`}_resumen_inscripciones.xlsx`,l=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=l,o.setAttribute("download",i),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(l)}catch(t){console.error("Error al descargar el archivo:",t)}};return p(),(t,e)=>{const c=I,i=N,l=j("row"),o=V,D=H,L=P,B=z;return k(),$(E,null,[a(b(A),{title:"Resumen inscripciones"}),a(Y,null,{default:s(()=>[n("div",Z,[e[3]||(e[3]=n("div",{class:"mb-4"},[n("span",{style:{"font-size":"1.3rem"}},"Resumen inscripción")],-1)),n("div",q,[a(c,{value:r.value,"onUpdate:value":e[0]||(e[0]=d=>r.value=d),options:h},null,8,["value"])])]),n("div",J,[a(l,{class:"flex justify-end mb-4"},{default:s(()=>[n("div",K,[a(i,{type:"primary",style:{background:"#40DE7A"},onClick:e[1]||(e[1]=d=>U())},{default:s(()=>[n("div",Q,[a(b(G)),e[4]||(e[4]=y(" EXCEL "))])]),_:1}),a(i,{type:"primary",sise:"large",style:{background:"crimson"},onClick:e[2]||(e[2]=d=>T())},{default:s(()=>[n("div",W,[a(b(X)),e[5]||(e[5]=y(" PDF "))])]),_:1})])]),_:1}),n("div",ee,[a(B,{columns:w.value,"data-source":_.value,pagination:!1,size:"small",scroll:{x:200,y:"calc(100vh - 400px)"}},{bodyCell:s(({column:d,record:O})=>[d.dataIndex==="total"?(k(),$(E,{key:0},[y(C(O.total),1)],64)):M("",!0)]),summary:s(()=>[a(L,{fixed:"bottom"},{default:s(()=>[a(D,null,{default:s(()=>[a(o,{"col-span":w.value.length-1,style:{"text-align":"right"}},{default:s(()=>e[6]||(e[6]=[n("span",{style:{"font-weight":"bold",color:"#476175"}}," Total Registros: ",-1)])),_:1},8,["col-span"]),a(o,{style:{"text-align":"center"}},{default:s(()=>[n("span",te,C(F.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","data-source"])])])]),_:1})],64)}}};export{be as default};
