import{r as f,e as V,f as i,o as r,c as g,a as t,u as k,w as l,d,F as Y,l as b,Z,b as c,S as q,s as I,g as p,D as H,v as J,n as K}from"./app-ea3e5b77.js";import{A as Q}from"./AuthenticatedLayout-17aaf006.js";import{F as W}from"./FormOutlined-eb7a714c.js";import"./DropdownLink-c8c91039.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logotiny-c4b525af.js";import"./TeamOutlined-46bf7780.js";const ee={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},ae={class:"flex justify-between mb-4"},oe={class:"mr-3"},te={class:"flex justify-between",style:{position:"relative"}},le={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},ne={key:0,class:"flex",style:{"justify-content":"center"}},se={key:1,class:"flex",style:{"justify-content":"center"}},de={key:0},ie={key:1},ue={key:2,class:"flex",style:{"justify-content":"space-between"}},re={style:{background:"#476175",height:"36px","margin-left":"-24px","margin-right":"-24px","margin-top":"-24px","margin-bottom":"28px"}},ce={class:"flex justify-between ml-3 mr-1",style:{height:"36px","align-items":"center"}},pe=d("div",null,[d("span",{style:{"font-weight":"bold",color:"white","font-size":"1rem"}},"Nuevo Proceso")],-1),we={__name:"procesos",setup(ve){const y=f(""),C=f([]),x=f([]),u=f([]),v=f(!1),F=f([]),e=f({id:null,nombre:"",sede:null,tipo:null,modalidad:null,anio:new Date().getFullYear(),estado:!0,f_inicio:"",f_fin:""}),R=()=>{v.value=!0};V(y,(o,a)=>{w()}),V(v,(o,a)=>{v.value==!1&&e.value.id!=null&&(e.value.id=null,e.value.nombre=null,e.value.sede=C.value[0].value,e.value.tipo=x.value[0].value,e.value.modalidad=F.value[0].value,e.value.anio=new Date().getFullYear(),e.value.estado=!0)});const O={labelCol:{span:5},wrapperCol:{span:19}},T=o=>{v.value=!0,e.value.id=o.id,e.value.nombre=o.nombre,e.value.sede=o.id_sede,e.value.tipo=o.id_tipo,e.value.modalidad=o.id_modalidad,e.value.anio=o.anio,o.estado==1?e.value.estado=!0:e.value.estado=!1},w=async(o="",a=1)=>{let s=await b.post("/admin/procesos/get-procesos?page="+a,{term:y.value});u.value=s.data.datos.data},P=async(o="",a=1)=>{let s=await b.post("get-sedes?page="+a);C.value=s.data.datos.data,e.value.sede=s.data.datos.data[0].value},U=async(o="",a=1)=>{let s=await b.get("procesos/get-tipos?page="+a);x.value=s.data.datos,e.value.tipo=s.data.datos[0].value},j=async(o="",a=1)=>{let s=await b.get("procesos/get-modalidades?page="+a);F.value=s.data.datos,e.value.modalidad=s.data.datos[0].value},S=()=>{let o={id:e.value.id,nombre:e.value.nombre,sede:e.value.sede,tipo:e.value.tipo,anio:e.value.anio,modalidad:e.value.modalidad,estado:e.value.estado,f_inicio:e.value.f_inicio,f_fin:e.value.f_fin};b.post("save-proceso",o).then(a=>{N("success",a.data.titulo,a.data.mensaje),w(),v.value=!1})},D=o=>{b.get("eliminar-proceso/"+o.id).then(a=>{w(),N("warning","PROCESO ELIMINADO",a.data.mensaje)})},z=[{title:"Nombre",dataIndex:"nombre"},{title:"Sede",dataIndex:"sede",align:"center"},{title:"Tipo",dataIndex:"tipo",align:"center",width:"120px"},{title:"Modalidad",dataIndex:"modalidad",align:"center",width:"120px"},{title:"Año",dataIndex:"anio",width:"40px"},{title:"Estado",dataIndex:"estado",align:"center",width:"60px"},{title:"Acciones",dataIndex:"acciones",width:"50px"}],N=(o,a,s)=>{K[o]({message:a,description:s})};return w(),P(),U(),j(),(o,a)=>{const s=i("a-button"),A=i("a-input"),h=i("a-tag"),B=i("a-table"),_=i("a-form-item"),E=i("a-select"),G=i("a-input-number"),M=i("a-switch"),L=i("a-form"),$=i("a-modal");return r(),g(Y,null,[t(k(Z),{title:"Procesos"}),t(Q,null,{default:l(()=>[d("div",ee,[d("div",ae,[d("div",oe,[t(s,{type:"primary",style:{background:"#476175",border:"none","border-radius":"5px"},onClick:R},{default:l(()=>[c("Nuevo")]),_:1})]),d("div",te,[t(A,{type:"text",placeholder:"Buscar",value:y.value,"onUpdate:value":a[0]||(a[0]=n=>y.value=n),style:{"max-width":"300px","padding-left":"30px"}},null,8,["value"]),d("div",le,[t(k(q))])])]),t(B,{columns:z,"data-source":u.value,pagination:{pageSize:10},size:"small"},{bodyCell:l(({column:n,index:m})=>[n.dataIndex==="modalidad"?(r(),g("div",ne,[u.value[m].modalidad==="CEPREUNA"?(r(),I(h,{key:0,color:"cyan"},{default:l(()=>[c("CEPREUNA")]),_:1})):p("",!0),u.value[m].modalidad==="GENERAL"?(r(),I(h,{key:1,color:"orange"},{default:l(()=>[c("GENERAL")]),_:1})):p("",!0),u.value[m].modalidad==="EXTRAORDINARIO"?(r(),I(h,{key:2,color:"pink"},{default:l(()=>[c(" EXTRAORDINARIO")]),_:1})):p("",!0)])):p("",!0),n.dataIndex==="estado"?(r(),g("div",se,[u.value[m].estado==1?(r(),g("div",de,[t(h,{color:"green"},{default:l(()=>[c("VIGENTE")]),_:1})])):p("",!0),u.value[m].estado==0?(r(),g("div",ie,[t(h,{color:"red"},{default:l(()=>[c("NO VIGENTE")]),_:1})])):p("",!0)])):p("",!0),n.dataIndex==="acciones"?(r(),g("div",ue,[t(s,{type:"primary",onClick:X=>T(u.value[m]),size:"small"},{icon:l(()=>[t(k(W))]),_:2},1032,["onClick"]),t(s,{type:"danger",onClick:X=>D(u.value[m]),shape:"",size:"small"},{icon:l(()=>[t(k(H))]),_:2},1032,["onClick"])])):p("",!0)]),_:1},8,["data-source"])])]),_:1}),d("div",null,[t($,{visible:v.value,"onUpdate:visible":a[9]||(a[9]=n=>v.value=n),closable:!1,style:{"margin-top":"-40px"}},{footer:l(()=>[t(s,{style:{"margin-left":"10px"},onClick:o.resetForm},{default:l(()=>[c("Cancelar")]),_:1},8,["onClick"]),t(s,{type:"primary",style:{background:"#476175",border:"none"},onClick:a[8]||(a[8]=n=>S())},{default:l(()=>[c("Guardar")]),_:1})]),default:l(()=>[d("div",re,[d("div",ce,[pe,d("div",null,[d("span",null,[t(s,{onClick:a[1]||(a[1]=n=>o.cerramodal()),style:{background:"none",border:"none",color:"white"}},{default:l(()=>[c("X")]),_:1})])])])]),t(L,J({ref:"formRef",name:"custom-validation",model:o.formState,rules:o.rules},O,{onFinish:o.handleFinish,onValidate:o.handleValidate,onFinishFailed:o.handleFinishFailed}),{default:l(()=>[t(_,{"has-feedback":"",label:"Nombre",name:"nombre"},{default:l(()=>[t(A,{type:"text",style:{width:"100%"},value:e.value.nombre,"onUpdate:value":a[2]||(a[2]=n=>e.value.nombre=n),autocomplete:"off"},null,8,["value"])]),_:1}),t(_,{"has-feedback":"",label:"Sede",name:"sede"},{default:l(()=>[t(E,{ref:"Tipo",style:{width:"100%"},onFocus:o.focus,onChange:o.handleChange,options:C.value,value:e.value.sede,"onUpdate:value":a[3]||(a[3]=n=>e.value.sede=n)},null,8,["onFocus","onChange","options","value"])]),_:1}),t(_,{"has-feedback":"",label:"Tipo",name:"tipo"},{default:l(()=>[t(E,{ref:"Tipo",style:{width:"100%"},options:x.value,onFocus:o.focus,onChange:o.handleChange,value:e.value.tipo,"onUpdate:value":a[4]||(a[4]=n=>e.value.tipo=n)},null,8,["options","onFocus","onChange","value"])]),_:1}),t(_,{"has-feedback":"",label:"Modalidad",name:"modalidad"},{default:l(()=>[t(E,{ref:"Tipo",style:{width:"100%"},options:F.value,onFocus:o.focus,onChange:o.handleChange,value:e.value.modalidad,"onUpdate:value":a[5]||(a[5]=n=>e.value.modalidad=n)},null,8,["options","onFocus","onChange","value"])]),_:1}),t(_,{"has-feedback":"",label:"Año",name:"anio"},{default:l(()=>[t(G,{style:{width:"100%"},value:e.value.anio,"onUpdate:value":a[6]||(a[6]=n=>e.value.anio=n)},null,8,["value"])]),_:1}),t(_,{"has-feedback":"",label:"Estado",name:"estado"},{default:l(()=>[t(M,{checked:e.value.estado,"onUpdate:checked":a[7]||(a[7]=n=>e.value.estado=n)},null,8,["checked"])]),_:1})]),_:1},16,["model","rules","onFinish","onValidate","onFinishFailed"])]),_:1},8,["visible"])])],64)}}};export{we as default};
