import{r as l,e as R,f as u,o as c,c as p,d as s,a as t,w as n,l as f,b as i,t as j,g as w,F as G,u as L,y as T}from"./app-fdc4b8b5.js";const q={class:"mt-0 mb-4"},H={class:"class flex justify-between"},J={class:"mt-0 mb-4"},K={key:0,class:"mt-0 mb-4"},Q={key:1,class:"mt-0 mb-4"},W={key:0},X={key:0},Y={class:"mt-4"},Z=s("label",null,"Area",-1),ee={class:"mt-3"},ae=s("label",null,"Ponderacion",-1),te={class:"flex justify-end"},oe={class:"mr-2"},se={__name:"calificacion",props:["proceso"],setup(N){const b=N,g=l(1),_=l(null),m=l(""),y=l([]),P=(o,e)=>{_.value=e};R(m,(o,e)=>{C()});const h=l([]),S=l(0),E=l(1),D=l(10);l("");const C=async()=>{let o=await f.post("get-ponderaciones-select?page="+E.value,{term:m.value,paginasize:D.value});h.value=o.data.datos.data,S.value=o.data.datos.total},A=async()=>{await f.post("/calificar-examen",{id_area:g.value,id_simulacro:b.proceso,id_ponderacion:_.value.key}),v.value=!1,I()},I=async()=>{let o=await f.post("/get-puntajes-examen",{id_simulacro:b.proceso});y.value=o.data.datos};I();const v=l(!1);C();const V=o=>Number(o).toFixed(2),B=l([{title:"N°",dataIndex:"nro",align:"center"},{title:"DNI",dataIndex:"dni"},{title:"Ap. Paterno",dataIndex:"paterno"},{title:"Ap. Materno",dataIndex:"materno"},{title:"Nombres",dataIndex:"nombres"},{title:"Puntaje",dataIndex:"puntaje",align:"center"}]),F=async()=>{f.get("/get-pdf-resultados/"+b.proceso).then(o=>{o.data.archivos.forEach(d=>{const r=document.createElement("a");r.href=d,r.download=d.split("/").pop(),document.body.appendChild(r),r.click(),document.body.removeChild(r)})}).catch(o=>{console.error("Error al generar los PDFs:",o)})};return(o,e)=>{const d=u("a-button"),r=u("a-table"),x=u("a-select-option"),U=u("a-select"),$=u("a-input"),z=u("a-auto-complete"),O=u("a-modal");return c(),p("div",null,[s("div",q,[s("div",H,[s("div",J,[t(d,{onClick:e[0]||(e[0]=a=>v.value=!0)},{default:n(()=>[i("Calificar")]),_:1})]),y.value!=[]?(c(),p("div",K,[t(d,{style:{width:"140px",background:"green",border:"none",color:"white"},onClick:e[1]||(e[1]=a=>F())},{default:n(()=>[i("Descargar")]),_:1})])):(c(),p("div",Q,[t(d,{style:{width:"140px",background:"green",border:"none",color:"white"},onClick:e[2]||(e[2]=a=>v.value=!0),disabled:""},{default:n(()=>[i("Descargar")]),_:1})]))])]),t(r,{dataSource:y.value,columns:B.value,size:"small",pagination:!1},{bodyCell:n(({column:a,index:M,record:k})=>[a.dataIndex==="nro"?(c(),p("span",W,j(M+1),1)):w("",!0),a.dataIndex==="puntaje"?(c(),p(G,{key:1},[k.puntaje!==null&&k.puntaje!==void 0?(c(),p("div",X,[s("span",null,j(V(k.puntaje)),1)])):w("",!0)],64)):w("",!0)]),_:1},8,["dataSource","columns"]),t(O,{visible:v.value,"onUpdate:visible":e[7]||(e[7]=a=>v.value=a),footer:!1},{default:n(()=>[s("div",Y,[Z,t(U,{ref:"select",value:g.value,"onUpdate:value":e[3]||(e[3]=a=>g.value=a),style:{width:"100%"}},{default:n(()=>[t(x,{value:1},{default:n(()=>[i("BIOMEDICAS")]),_:1}),t(x,{value:2},{default:n(()=>[i("INGENIERIAS")]),_:1}),t(x,{value:3},{default:n(()=>[i("SOCIALES")]),_:1})]),_:1},8,["value"])]),s("div",ee,[ae,s("div",null,[t(z,{value:_.value,"onUpdate:value":e[5]||(e[5]=a=>_.value=a),options:h.value,onSelect:P,style:{width:"100%"}},{default:n(()=>[t($,{placeholder:"Ponderación ...",value:m.value,"onUpdate:value":e[4]||(e[4]=a=>m.value=a)},{suffix:n(()=>[t(L(T))]),_:1},8,["value"])]),_:1},8,["value","options"])])]),s("div",te,[s("div",oe,[t(d,{style:{"margin-left":"6px","border-radius":"4px"}},{default:n(()=>[i("Cancelar s")]),_:1})]),s("div",null,[t(d,{type:"primary",onClick:e[6]||(e[6]=a=>A()),style:{background:"#476175",border:"none","border-radius":"4px"}},{default:n(()=>[i("Calificddar")]),_:1})])])]),_:1},8,["visible"])])}}};export{se as default};
