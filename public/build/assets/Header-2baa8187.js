import{A as _}from"./AntdIcon-03e9de4c.js";import{a as r,r as f,C as D,o as E,c as U,w as i,b as p,d as V,v as B,t as L,u as m,y as A,n as q,A as I,am as R,z as T,R as G,I as Z,k as J,q as Q,M as W}from"./app-cb2b04a1.js";import X from"./perfil-8f870394.js";import{D as Y}from"./DownOutlined-93bf85fe.js";import{U as w}from"./UserOutlined-d22982c2.js";var K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zM464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z"}}]},name:"appstore",theme:"filled"};const ee=K;var te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"};const ae=te;var ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1a110.96 110.96 0 00-79.1-32.8zm412.3 235.5l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9a32.03 32.03 0 009.3-35.2l-.9-2.6a442.5 442.5 0 00-79.6-137.7l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52-9.4-106.8-9.4-158.8 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.3a353.44 353.44 0 00-98.9 57.3l-81.8-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a445.93 445.93 0 00-79.6 137.7l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3a32.05 32.05 0 0025.8 25.7l2.7.5a448.27 448.27 0 00158.8 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l.9-2.6c4.3-12.4.6-26.3-9.5-35zm-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"}}]},name:"setting",theme:"filled"};const re=ne,pe="/build/assets/usuario-8193463b.png";function F(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable}))),o.forEach(function(l){oe(a,l,t[l])})}return a}function oe(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var P=function(e,t){var o=F({},e,t.attrs);return r(_,F({},o,{icon:ee}),null)};P.displayName="AppstoreFilled";P.inheritAttrs=!1;const me=P;function C(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable}))),o.forEach(function(l){le(a,l,t[l])})}return a}function le(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var b=function(e,t){var o=C({},e,t.attrs);return r(_,C({},o,{icon:ae}),null)};b.displayName="MenuFoldOutlined";b.inheritAttrs=!1;const ve=b;function h(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable}))),o.forEach(function(l){se(a,l,t[l])})}return a}function se(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var O=function(e,t){var o=h({},e,t.attrs);return r(_,h({},o,{icon:re}),null)};O.displayName="SettingFilled";O.inheritAttrs=!1;const ge=O,we={__name:"Header",setup(a){const e=f(!1),t=f(!1),o=f(!1),l=f(null),s=D({oldPassword:"",newPassword:"",confirmPassword:""}),M={oldPassword:[{required:!0,message:"Por favor, ingresa tu contraseña antigua."}],newPassword:[{required:!0,message:"Por favor, ingresa una nueva contraseña."},{min:6,message:"La nueva contraseña debe tener al menos 6 caracteres."}],confirmPassword:[{required:!0,message:"Por favor, confirma tu nueva contraseña."},{validator:(c,n)=>n!==s.newPassword?Promise.reject("Las contraseñas no coinciden."):Promise.resolve()}]},j=()=>{l.value.validate().then(()=>{o.value=!0,A.post("cambiar-contra",s).then(c=>{y("info","CONTRASEÑA ACTUALIZADA",""),e.value=!1,s.oldPassword="",s.newPassword="",s.confirmPassword=""}).catch(c=>{y("error","",c.response.data.mensaje),console.error("Error en la solicitud:",c.response.data.mensaje)}).finally(()=>{o.value=!1})}).catch(c=>{console.log("Error de validación:",c)})},x=()=>{e.value=!1,s.oldPassword="",s.newPassword="",s.confirmPassword=""},z=async()=>{try{await A.post("/logout"),location.href="/login"}catch(c){console.error("Error al cerrar sesión:",c)}},y=(c,n,d)=>{q[c]({message:n,description:d})};return(c,n)=>{const d=I,$=R,k=T,H=G,v=Z,g=J,N=Q,S=W;return E(),U("div",null,[r(H,{trigger:["click"]},{overlay:i(()=>[r(k,null,{default:i(()=>[r(d,{key:"0",onClick:n[1]||(n[1]=u=>t.value=!0)},{default:i(()=>n[8]||(n[8]=[p(" Perfil ")])),_:1}),r(d,{key:"1",onClick:n[2]||(n[2]=u=>e.value=!0)},{default:i(()=>n[9]||(n[9]=[p(" Cambiar contraseña ")])),_:1}),r($),r(d,{key:"2",onClick:z},{default:i(()=>n[10]||(n[10]=[p(" Salir del sistema ")])),_:1})]),_:1})]),default:i(()=>[V("a",{onClick:n[0]||(n[0]=B(()=>{},["prevent"])),style:{"text-decoration":"none",color:"black"}},[p(L(c.$page.props.auth.user.name)+"   ",1),r(m(Y))])]),_:1}),r(S,{open:e.value,"onUpdate:open":n[6]||(n[6]=u=>e.value=u),title:"Cambiar Contraseña","ok-text":"Guardar","cancel-text":"Cancelar",onOk:j,"confirm-loading":o.value,onCancel:x},{default:i(()=>[r(N,{model:s,rules:M,ref_key:"formRef",ref:l,layout:"vertical"},{default:i(()=>[r(g,{label:"Contraseña Antigua",name:"oldPassword"},{default:i(()=>[r(v,{type:"password",value:s.oldPassword,"onUpdate:value":n[3]||(n[3]=u=>s.oldPassword=u),autocomplete:"current-password"},{prefix:i(()=>[r(m(w))]),_:1},8,["value"])]),_:1}),r(g,{label:"Nueva Contraseña",name:"newPassword"},{default:i(()=>[r(v,{type:"password",value:s.newPassword,"onUpdate:value":n[4]||(n[4]=u=>s.newPassword=u),autocomplete:"new-password"},{prefix:i(()=>[r(m(w))]),_:1},8,["value"])]),_:1}),r(g,{label:"Confirmar Nueva Contraseña",name:"confirmPassword"},{default:i(()=>[r(v,{type:"password",value:s.confirmPassword,"onUpdate:value":n[5]||(n[5]=u=>s.confirmPassword=u),autocomplete:"new-password"},{prefix:i(()=>[r(m(w))]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","confirm-loading"]),r(S,{open:t.value,"onUpdate:open":n[7]||(n[7]=u=>t.value=u),title:"Perfil de usuario",footer:!1,width:"80%",style:{top:"20px"}},{default:i(()=>[r(X)]),_:1},8,["open"])])}}};export{me as A,ve as M,ge as S,pe as _,we as a};
