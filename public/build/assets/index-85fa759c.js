import{r as i,J as _e,e as _,D as Ae,o as T,c as V,a as l,u as f,w as o,F as W,y as b,Z as be,d as s,b as u,f as ce,n as xe,B as Ie,I as ye,K as Ee,L as De,k as Ce,l as Se,S as Re,j as Ne,m as we,H as Te,h as Ve,i as Pe,p as Ue,q as Le,M as ke}from"./app-a1cd82ed.js";import{_ as Be}from"./AuthenticatedLayout-94fa32db.js";import{E as Oe}from"./EyeOutlined-edeaeac3.js";import{S as Ge}from"./SearchOutlined-28fc7348.js";import{D as P}from"./DownOutlined-f5af91e0.js";import{F as qe}from"./FormOutlined-9ea2444d.js";import{D as je}from"./DeleteOutlined-56344ab3.js";import"./logotiny-c4b525af.js";import"./Header-2fc8f7bf.js";import"./AntdIcon-b642ca2d.js";import"./DropdownLink-14b8c534.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                            */const Fe={class:"mb-4",style:{width:"100%"}},ze={class:"p-6 mb-4",style:{background:"#ffffff","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},Ze={class:"flex justify-between"},$e={class:"flex justify-between",style:{position:"relative"}},Je={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Ke={style:{"margin-bottom":"-20px"}},Me={style:{background:"white","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},Xe={class:"flex justify-between mb-6 mt-2 pr-4"},He={clas:"",style:{scale:"0.9"}},Qe={style:{display:"flex"}},We={key:0,style:{"font-weight":"bold","font-size":"1.1rem"}},Ye={key:1,style:{"font-weight":"bold","font-size":"1.1rem"}},he={class:"flex justify-center"},el={class:"flex justify-end"},gl={__name:"index",setup(ll){const G=i([]),I=i(""),y=i(1),q=i(null),E=i(10),A=i(!1),U=i(null),D=i(null),L=i([]),C=i(null),c=i(!1),j=i(),S=i(),R=i(),F=i(),k=i(),B=i(),z=i(),O=i(),Z=i(),Y=t=>{n.cod_modular=t.target.value.replace(/\D/g,"")},n=_e({cod_modular:"",nombre:"",cod_local:"",nivel:"",forma:"",gestion:null,ubigeo:"",direccion:"",observacion:""}),$=i(null),h=async()=>{c.value=!0,setTimeout(()=>{console.log("Este código se ejecutará después de 2 segundos")},1500);try{const t=await $.value.validateFields(),e=await b.post("save",n);e.status===202?(console.log(e.data.errors),c.value=!1):(se(),A.value=!1,ne("success",e.data.titulo,e.data.mensaje),c.value=!1,v())}catch(t){console.error(t),c.value=!1}},v=async()=>{b.post("get-colegios?page="+y.value,{term:I.value,paginashoja:E.value,dep:R.value,ges:C.value,prov:B.value,dist:Z.value}).then(t=>{G.value=t.data.datos.data,q.value=t.data.datos.total}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})},J=async()=>{b.post("/get-ubigeo",{term:D.value}).then(t=>{L.value=t.data.datos.data,console.log("Datos recibidos:",L)}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})},K=async()=>{let t=await b.post("/get-departamentos-codigo",{term:S.value});j.value=t.data.datos.data},M=async()=>{let t=await b.post("/get-provincias-codigo?page=",{departamento:R.value});F.value=t.data.datos},X=async t=>{let e=await b.post("/get-distritos-codigo?page=",{departamento:R.value,provincia:B.value});z.value=e.data.datos};_(y,(t,e)=>{v()}),_(E,(t,e)=>{v()}),_(I,(t,e)=>{v()}),_(D,(t,e)=>{t.length>=3&&J()}),_(S,(t,e)=>{t.length>=3&&K()}),_(k,(t,e)=>{t.length>=3&&M()}),_(O,(t,e)=>{t.length>=3&&X()}),_(C,(t,e)=>{t.length>=3&&v()});const ee=(t,e)=>{n.ubigeo=e.key},le=(t,e)=>{R.value=e.key,v(),M()},oe=(t,e)=>{B.value=e.key,v(),X()},te=(t,e)=>{Z.value=e.key,v()};K(),v(),J();const ae=t=>{A.value=!0,n.id=t.id,n.cod_modular=t.cod_modular,n.nombre=t.nombre,n.cod_local=t.cod_local,n.gestion=t.gestion,n.forma=t.forma,n.nivel=t.nivel,n.ubigeo=t.ubigeo,U.value=t.lugar,n.direccion=t.direccion,n.observacion=t.observacion},se=()=>{for(const t in n)n[t]=null},ne=(t,e,g)=>{xe[t]({message:e,description:g})},ue=i([{title:"Codigo",dataIndex:"id",align:"center"},{title:"Cod_Mod",dataIndex:"cod_modular"},{title:"Nombre del Colegio",dataIndex:"nombre",responsive:["xs","sm","md","lg"]},{title:"Gestión",dataIndex:"gestion",responsive:["md"]},{title:"Ubicación",dataIndex:"lugar",responsive:["lg"]},{title:"Dirección",dataIndex:"direccion",responsive:["lg"]},{title:"Acciones",dataIndex:"acciones",width:"120px",align:"center"}]);return(t,e)=>{const g=Ie,m=ye,N=Ee,w=De,p=Ce,r=Se,d=Re,x=Ne,H=we,de=Te,ie=Ve,re=Pe,pe=Ue,ve=Le,me=Ae("row"),fe=ke;return T(),V(W,null,[l(f(be),{title:"Colegios"}),l(Be,null,{default:o(()=>[s("div",Fe,[s("div",ze,[s("div",Ze,[s("div",null,[l(g,{type:"primary",onClick:e[0]||(e[0]=a=>A.value=!0),style:{"border-radius":"6px",background:"#476175",border:"none"}},{default:o(()=>e[21]||(e[21]=[u("Nuevo")])),_:1})]),s("div",$e,[l(m,{type:"text",placeholder:"Buscar",value:I.value,"onUpdate:value":e[1]||(e[1]=a=>I.value=a),style:{"max-width":"300px","padding-left":"30px","border-radius":"6px"}},null,8,["value"]),s("div",Je,[l(f(Ge))])])]),s("div",Ke,[l(H,{gutter:[16,8],class:"mt-4"},{default:o(()=>[l(r,{xs:24,sm:12,md:12,lg:6},{default:o(()=>[e[22]||(e[22]=s("label",null,"Departamento",-1)),l(p,null,{default:o(()=>[l(w,{options:j.value,onSelect:le},{default:o(()=>[l(m,{placeholder:"Seleccione un departamento",value:S.value,"onUpdate:value":e[2]||(e[2]=a=>S.value=a)},{suffix:o(()=>[l(N,{title:"Extra information"},{default:o(()=>[l(f(P))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:6},{default:o(()=>[e[23]||(e[23]=s("label",null,"Provincia",-1)),l(p,null,{default:o(()=>[l(w,{options:F.value,onSelect:oe},{default:o(()=>[l(m,{placeholder:"Seleccione un departamento",value:k.value,"onUpdate:value":e[3]||(e[3]=a=>k.value=a)},{suffix:o(()=>[l(N,{title:"Extra information"},{default:o(()=>[l(f(P))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:6},{default:o(()=>[e[24]||(e[24]=s("label",null,"Distrito",-1)),l(p,null,{default:o(()=>[l(w,{options:z.value,onSelect:te},{default:o(()=>[l(m,{placeholder:"Seleccione un departamento",value:O.value,"onUpdate:value":e[4]||(e[4]=a=>O.value=a)},{suffix:o(()=>[l(N,{title:"Extra information"},{default:o(()=>[l(f(P))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:6},{default:o(()=>[e[30]||(e[30]=s("label",null,"Gestión",-1)),l(p,{style:{"border-radius":"none",overflow:"hidden"}},{default:o(()=>[l(x,{value:C.value,"onUpdate:value":e[5]||(e[5]=a=>C.value=a),placeholder:"Seleccione la gestión",style:{"border-radius":"10px !important"}},{default:o(()=>[l(d,{value:null},{default:o(()=>e[25]||(e[25]=[u("TODAS")])),_:1}),l(d,{value:"PÚBLICA DE GESTIÓN DIRECTA"},{default:o(()=>e[26]||(e[26]=[u("PÚBLICA DE GESTIÓN DIRECTA")])),_:1}),l(d,{value:"PRIVADA"},{default:o(()=>e[27]||(e[27]=[u("PRIVADA")])),_:1}),l(d,{value:"PÚBLICA DE GESTIÓN PRIVADA"},{default:o(()=>e[28]||(e[28]=[u("PÚBLICA DE GESTIÓN PRIVADA")])),_:1}),l(d,{value:"EXTRANJERO"},{default:o(()=>e[29]||(e[29]=[u("EXTRANJERA")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})])]),s("div",Me,[s("div",null,[l(ie,{dataSource:G.value,size:"",columns:ue.value,pagination:!1},{bodyCell:o(({column:a,record:Q})=>[a.dataIndex==="acciones"?(T(),V(W,{key:0},[l(g,{type:"success",class:"mr-1",style:{color:"#476175"},size:"small",disabled:""},{icon:o(()=>[l(f(Oe))]),_:1}),l(g,{class:"mr-1",onClick:ge=>ae(Q),style:{color:"blue"},size:"small"},{icon:o(()=>[l(f(qe))]),_:2},1032,["onClick"]),l(de,{title:"¿Estas seguro de eliminar?",onConfirm:ge=>t.eliminar(Q),disabled:""},{default:o(()=>[l(g,{size:"small",style:{color:"crimson"},disabled:""},{icon:o(()=>[l(f(je),{disabled:""})]),_:1})]),_:2},1032,["onConfirm"])],64)):ce("",!0)]),_:1},8,["dataSource","columns"])]),s("div",Xe,[s("div",null,[l(re,{current:y.value,"onUpdate:current":e[6]||(e[6]=a=>y.value=a),simple:"",total:q.value,"show-less-items":""},null,8,["current","total"])]),s("div",He,[l(x,{value:E.value,"onUpdate:value":e[7]||(e[7]=a=>E.value=a),style:{width:"90px"}},{default:o(()=>[l(d,{value:10},{default:o(()=>e[31]||(e[31]=[u("10 Reg.")])),_:1}),l(d,{value:20},{default:o(()=>e[32]||(e[32]=[u("20 Reg.")])),_:1}),l(d,{value:50},{default:o(()=>e[33]||(e[33]=[u("50 Reg.")])),_:1}),l(d,{value:100},{default:o(()=>e[34]||(e[34]=[u("100 Reg.")])),_:1})]),_:1},8,["value"])])])])]),l(fe,{visible:A.value,"onUpdate:visible":e[20]||(e[20]=a=>A.value=a),footer:!1,centered:"",style:{width:"100%","max-width":"900px"}},{default:o(()=>[s("div",Qe,[n.id===null?(T(),V("span",We,"Nuevo Colegio")):(T(),V("span",Ye,"Editar Colegio"))]),s("div",he,[l(me,{style:{display:"flex","justify-content":"center"}},{default:o(()=>[l(r,{span:24},{default:o(()=>[l(ve,{ref_key:"formDatos",ref:$,name:"form",model:n,rules:t.formRules},{default:o(()=>[l(H,{gutter:16,class:"mt-3"},{default:o(()=>[l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[35]||(e[35]=s("label",null,"Cod. Modular",-1)),l(p,{name:"cod_modular",rules:[{required:!0,message:"Ingrese el cod modular"},{min:7,message:"Debe tener 7 digitos",trigger:"blur"}]},{default:o(()=>[l(m,{value:n.cod_modular,"onUpdate:value":e[8]||(e[8]=a=>n.cod_modular=a),onInput:Y,maxlength:7},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:16},{default:o(()=>[e[36]||(e[36]=s("label",null,[u("Nombre del colegio"),s("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"nombre",rules:[{required:!0,message:"Ingrese el nombre del colegio"}]},{default:o(()=>[l(m,{value:n.nombre,"onUpdate:value":e[9]||(e[9]=a=>n.nombre=a)},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[37]||(e[37]=s("label",null,[u("Cod de local"),s("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"cod_local",rules:[{required:!0,message:"Ingrese el codigo del local"}]},{default:o(()=>[l(m,{value:n.cod_local,"onUpdate:value":e[10]||(e[10]=a=>n.cod_local=a)},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[42]||(e[42]=s("label",null,[u("Nivel"),s("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"nivel",rules:[{required:!0,message:"Seleccione el nivel"}]},{default:o(()=>[l(x,{value:n.nivel,"onUpdate:value":e[11]||(e[11]=a=>n.nivel=a),style:{width:"100%"}},{default:o(()=>[l(d,{value:"SECUNDARIA"},{default:o(()=>e[38]||(e[38]=[u("SECUNDARIA")])),_:1}),l(d,{value:"BASICA ALTERNATIVA"},{default:o(()=>e[39]||(e[39]=[u("BASICA ALTERNATIVA")])),_:1}),l(d,{value:"BASICA ALTERNATIVA AVANZADO"},{default:o(()=>e[40]||(e[40]=[u("BASICA ALTERNATIVA AVANZADO")])),_:1}),l(d,{value:"BÁSICA ALTERNATIVA SECUNDARIA"},{default:o(()=>e[41]||(e[41]=[u("BÁSICA ALTERNATIVA SECUNDARIA")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[48]||(e[48]=s("label",null,[u("Forma"),s("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"nivel",rules:[{required:!0,message:"Seleccione el nivel"}]},{default:o(()=>[l(x,{value:n.forma,"onUpdate:value":e[12]||(e[12]=a=>n.forma=a),style:{width:"100%"}},{default:o(()=>[l(d,{value:"ESCOLARIZADA"},{default:o(()=>e[43]||(e[43]=[u("ESCOLARIZADA")])),_:1}),l(d,{value:"NO ESCOLARIZADA"},{default:o(()=>e[44]||(e[44]=[u("NO ESCOLARIZADA")])),_:1}),l(d,{value:"NO APLICA"},{default:o(()=>e[45]||(e[45]=[u("NO APLICA")])),_:1}),l(d,{value:"PRESENCIAL"},{default:o(()=>e[46]||(e[46]=[u("PRESENCIAL")])),_:1}),l(d,{value:"A DISTANCIA"},{default:o(()=>e[47]||(e[47]=[u("A DISTANCIA")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[53]||(e[53]=s("label",null,[u("Gestión"),s("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"gestion",rules:[{required:!0,message:"Selecciona la gestión"}]},{default:o(()=>[l(x,{value:n.gestion,"onUpdate:value":e[13]||(e[13]=a=>n.gestion=a),style:{width:"100%"}},{default:o(()=>[l(d,{value:"PÚBLICA DE GESTIÓN DIRECTA"},{default:o(()=>e[49]||(e[49]=[u("PÚBLICA DE GESTIÓN DIRECTA")])),_:1}),l(d,{value:"PRIVADA"},{default:o(()=>e[50]||(e[50]=[u("PRIVADA")])),_:1}),l(d,{value:"PÚBLICA DE GESTIÓN PRIVADA"},{default:o(()=>e[51]||(e[51]=[u("PÚBLICA DE GESTIÓN PRIVADA")])),_:1}),l(d,{value:"EXTRANJERO"},{default:o(()=>e[52]||(e[52]=[u("EXTRANJERA")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:12},{default:o(()=>[e[54]||(e[54]=s("label",null,[u("Ubicación: Dep/Prov/Dist "),s("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"ubigeo"},{default:o(()=>[l(w,{value:U.value,"onUpdate:value":e[15]||(e[15]=a=>U.value=a),options:L.value,onSelect:ee},{default:o(()=>[l(m,{placeholder:"Lugar",value:D.value,"onUpdate:value":e[14]||(e[14]=a=>D.value=a),onKeypress:t.handleKeyPress},{suffix:o(()=>[l(N,{title:"Extra information"},{default:o(()=>[l(f(P))]),_:1})]),_:1},8,["value","onKeypress"])]),_:1},8,["value","options"])]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:12},{default:o(()=>[e[55]||(e[55]=s("label",null,"Dirección",-1)),l(p,{name:"direccion"},{default:o(()=>[l(m,{value:n.direccion,"onUpdate:value":e[16]||(e[16]=a=>n.direccion=a)},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:24},{default:o(()=>[e[56]||(e[56]=s("label",null,"Observación",-1)),l(p,{name:"observacion"},{default:o(()=>[l(pe,{value:n.observacion,"onUpdate:value":e[17]||(e[17]=a=>n.observacion=a)},null,8,["value"])]),_:1})]),_:1})]),_:1}),s("div",el,[s("div",null,[l(g,{type:"primary",class:"mr-2",onClick:e[18]||(e[18]=a=>A.value=!1),style:{"border-radius":"6px",background:"none",color:"#476175",border:"1px solid #476175"}},{default:o(()=>e[57]||(e[57]=[u("Cancelar")])),_:1}),l(g,{type:"primary",onClick:e[19]||(e[19]=a=>h()),style:{"border-radius":"6px",background:"#476175",border:"none"},loading:c.value},{default:o(()=>e[58]||(e[58]=[u("Guardar")])),_:1},8,["loading"])])])]),_:1},8,["model","rules"])]),_:1})]),_:1})])]),_:1},8,["visible"])]),_:1})],64)}}};export{gl as default};
