import{r,x as J,f as i,o as _,c as C,a as t,u as b,w as s,d as p,F as w,Z as K,b as v,s as Q,t as U,g as F,D as X,v as Y,n as ee}from"./app-d0fced7e.js";import{A as ae}from"./AuthenticatedLayout-6c3b5c6d.js";import{F as te}from"./FormOutlined-4119fed0.js";import"./DropdownLink-ca96facc.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logotiny-c4b525af.js";import"./TeamOutlined-1da4a5cb.js";const oe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-5"},le=["onClick"],be={__name:"index",props:["usuarios"],setup(se){const y=r([]),c=r(""),k=r(""),f=r([]),x=r([]),m=r(!1),I=()=>{m.value=!0},N=a=>{console.log(a),m.value=!1},R=[{title:"Nombre",dataIndex:"name",width:"30%"},{title:"Correo",dataIndex:"email"},{title:"Rol",dataIndex:"role_name"},{title:"operation",dataIndex:"operation"}],g=r(),l=J({name:"",paterno:"",materno:"",email:"",pass:"",checkPass:"",rol:r(null)}),B={pass:[{required:!0,validator:async(a,e)=>e===""?Promise.reject("Ingrese la contraseña"):(l.checkPass!==""&&g.value.validateFields("checkPass"),Promise.resolve()),trigger:"change"}],checkPass:[{required:!0,validator:async(a,e)=>e===""?Promise.reject("Ingrese la contraseña nuevamente"):e!==l.pass?Promise.reject("Las contraseñas no coenciden"):Promise.resolve(),trigger:"change"}],name:[{required:!0,validator:async(a,e)=>e===""?Promise.reject("Ingrese su nombre"):Promise.resolve(),trigger:"change"}],email:[{validator:async(a,e)=>e===""?Promise.reject("Ingrese su correo electrónico"):Promise.resolve(),trigger:"change"}]},O={labelCol:{span:8},wrapperCol:{span:18}},V=a=>{console.log(a,l)},j=a=>{console.log(a)},q=()=>{g.value.resetFields()},A=(...a)=>{console.log(a)},S={required:"Ingrese ${label}",types:{email:"${label} no valido"}};r(""),r([{value:"Burns Bay Road"},{value:"Downing Street"},{value:"Wall Street"}]);const z=(a,e)=>e.value.toUpperCase().indexOf(a.toUpperCase())>=0,P=async()=>{let a=await axios.get("get-usuarios");f.value=a.data.usuarios},D=async()=>{let a=await axios.get("get-roles-u");y.value=a.data.datos},$=async()=>{let a=await axios.get("get-permisos");x.value=a.data.permisos};D(),P(),$();const M=a=>{k.value=a.id},L=()=>{let a={name:l.name,paterno:l.paterno,materno:l.materno,email:l.email,password:l.pass,rol:k.value};axios.post("save-user",a).then(e=>{console.log(e.data.user),m.value=!1,P(),E("success","Nuevo Usuario Agregado",e.data.user.name)})},E=(a,e,n)=>{ee[a]({message:e,description:n})};return console.log((()=>!!x.value.find(a=>a.id===8))()),(a,e)=>{const n=i("a-button"),T=i("a-divider"),W=i("a-table"),u=i("a-input"),d=i("a-form-item"),Z=i("a-auto-complete"),G=i("a-form"),H=i("a-modal");return _(),C(w,null,[t(b(K),{title:"Usuarios"}),t(ae,null,{default:s(()=>[p("div",oe,[t(n,{class:"mb-3",type:"primary",onClick:I},{default:s(()=>[v("Nuevo")]),_:1}),t(W,{bordered:"","data-source":f.value,columns:R,size:"small"},{bodyCell:s(({column:o,index:h})=>[o.dataIndex==="role_name"?(_(),Q(n,{key:0,primary:"",size:"small"},{default:s(()=>[v(U(f.value[h].role_name),1)]),_:2},1024)):F("",!0),o.dataIndex==="operation"?(_(),C(w,{key:1},[t(n,{type:"primary",shape:"",size:"small"},{icon:s(()=>[t(b(te))]),_:1}),t(T,{type:"vertical"}),t(n,{type:"danger",shape:"",size:"small"},{icon:s(()=>[t(b(X))]),_:1})],64)):F("",!0)]),_:1},8,["data-source"])])]),_:1}),p("div",null,[t(H,{visible:m.value,"onUpdate:visible":e[9]||(e[9]=o=>m.value=o),title:"Nuevo Usuario",style:{"margin-top":"-50px"},onOk:N},{footer:s(()=>[t(n,{type:"primary",onClick:e[8]||(e[8]=o=>L())},{default:s(()=>[v("Submit")]),_:1}),t(n,{style:{"margin-left":"10px"},onClick:q},{default:s(()=>[v("Reset")]),_:1})]),default:s(()=>[p("div",null,[t(G,Y({ref_key:"formRef",ref:g,name:"custom-validation",model:l,rules:B},O,{onFinish:V,onValidate:A,"validate-messages":S,onFinishFailed:j}),{default:s(()=>[t(d,{"has-feedback":"",label:"Nombre",name:"name"},{default:s(()=>[t(u,{value:l.name,"onUpdate:value":e[0]||(e[0]=o=>l.name=o),type:"text",autocomplete:"off"},null,8,["value"])]),_:1}),t(d,{"has-feedback":"",label:"Apellido Paterno",name:"paterno"},{default:s(()=>[t(u,{value:l.paterno,"onUpdate:value":e[1]||(e[1]=o=>l.paterno=o),type:"text",autocomplete:"off"},null,8,["value"])]),_:1}),t(d,{"has-feedback":"",label:"Apellido Materno",name:"materno"},{default:s(()=>[t(u,{value:l.materno,"onUpdate:value":e[2]||(e[2]=o=>l.materno=o),type:"text",autocomplete:"off"},null,8,["value"])]),_:1}),t(d,{"has-feedback":"",label:"Correo",name:"email",rules:[{type:"email",required:!0}]},{default:s(()=>[t(u,{value:l.email,"onUpdate:value":e[3]||(e[3]=o=>l.email=o),type:"text",autocomplete:"off"},null,8,["value"])]),_:1}),t(d,{"has-feedback":"",label:"Contraseña",name:"pass"},{default:s(()=>[t(u,{value:l.pass,"onUpdate:value":e[4]||(e[4]=o=>l.pass=o),type:"password",autocomplete:"off"},null,8,["value"])]),_:1}),t(d,{"has-feedback":"",label:"Confirmar Contraseña",name:"checkPass"},{default:s(()=>[t(u,{value:l.checkPass,"onUpdate:value":e[5]||(e[5]=o=>l.checkPass=o),type:"password",autocomplete:"off"},null,8,["value"])]),_:1}),t(d,{"has-feedback":"",label:"Rol"},{default:s(()=>[t(Z,{value:c.value,"onUpdate:value":e[7]||(e[7]=o=>c.value=o),options:y.value,style:{width:"100%"},"filter-option":z},{option:s(o=>[p("div",{onClick:h=>M(o)},[p("span",null,U(o.value),1)],8,le)]),default:s(()=>[t(u,{placeholder:"input here",class:"custom",value:c.value,"onUpdate:value":e[6]||(e[6]=o=>c.value=o)},null,8,["value"])]),_:1},8,["value","options"])]),_:1})]),_:1},16,["model"])])]),_:1},8,["visible"])])],64)}}};export{be as default};
