import{a as r,b1 as re,b2 as le,b3 as se,r as b,H as O,a2 as ie,o as u,c as _,d as l,w as i,y as ce,b4 as ue,m as de,b as c,t as d,F as V,s as A,E as y,x as F,af as fe,u as v,b5 as pe,P as me,l as _e,B as ge,g as ve,aQ as be,a7 as Oe,_ as ye,b6 as he,b7 as Se}from"./app-6dd2fb5e.js";import{_ as Pe}from"./_plugin-vue_export-helper-c27b6911.js";import{A as h}from"./AntdIcon-8fcb511c.js";import{F as De}from"./FileTextOutlined-4e74f5f8.js";import{S as we}from"./SafetyCertificateOutlined-69c10da4.js";import{E as N}from"./EditOutlined-9229ec09.js";import{D as Fe}from"./DownloadOutlined-24b38dcd.js";var xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm144 452H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm445.7 51.5l-93.3-93.3C814.7 780.7 828 743.9 828 704c0-97.2-78.8-176-176-176s-176 78.8-176 176 78.8 176 176 176c35.8 0 69-10.7 96.8-29l94.7 94.7c1.6 1.6 3.6 2.3 5.6 2.3s4.1-.8 5.6-2.3l31-31a7.9 7.9 0 000-11.2zM652 816c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"file-search",theme:"outlined"};const Ce=xe;function Z(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),o.forEach(function(s){$e(n,s,e[s])})}return n}function $e(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var x=function(t,e){var o=Z({},t,e.attrs);return r(h,Z({},o,{icon:re}),null)};x.displayName="CalendarOutlined";x.inheritAttrs=!1;const je=x;function B(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),o.forEach(function(s){ze(n,s,e[s])})}return n}function ze(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var C=function(t,e){var o=B({},t,e.attrs);return r(h,B({},o,{icon:Ce}),null)};C.displayName="FileSearchOutlined";C.inheritAttrs=!1;const Ee=C;function k(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),o.forEach(function(s){Ie(n,s,e[s])})}return n}function Ie(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var $=function(t,e){var o=k({},t,e.attrs);return r(h,k({},o,{icon:le}),null)};$.displayName="ZoomInOutlined";$.inheritAttrs=!1;const Ve=$;function L(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),o.forEach(function(s){Ae(n,s,e[s])})}return n}function Ae(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var j=function(t,e){var o=L({},t,e.attrs);return r(h,L({},o,{icon:se}),null)};j.displayName="ZoomOutOutlined";j.inheritAttrs=!1;const Ne=j;const Ze={class:"pdf-verification-container"},Be={class:"verification-header"},ke={class:"card-content"},Le={class:"card-stats"},He={class:"pdf-container"},Me=["src"],Te={key:1,class:"pdf-placeholder"},Qe={key:0,class:"no-signatures"},Ue={__name:"verificar",props:{codigo:String},setup(n){const t=n,e=b({codigo_inscripcion:t.codigo||"",estado:"",total_firmas:0,firmas:[]}),o=b(""),s=b(null),m=b(1),H=async()=>{var g;try{const a=await ce.get(`/verificar/${t.codigo}`);e.value=((g=a.data)==null?void 0:g.data)||a.data||e.value}catch{}},M=async()=>{o.value=`/inscripcion/${t.codigo}/pdf`},T=()=>{},Q=()=>{o.value=""},U=()=>{m.value<2&&(m.value+=.1)},q=()=>{m.value>.3&&(m.value-=.1)},G=()=>window.open(`/inscripcion/${t.codigo}/pdf`,"_blank"),z=O(()=>e.value.estado||"No Verificado"),J=O(()=>e.value.estado==="VÁLIDO"?"success":"error"),R=O(()=>"Estado de verificación del documento."),W=g=>g==="VÁLIDO"?"green":"red",X=O(()=>[{label:"Código de Inscripción",value:e.value.codigo_inscripcion,icon:De,bg:"#e6f4ff",color:"#1890ff"},{label:"Estado",value:z.value,icon:we,bg:"#52c41a",color:"#fff"},{label:"Firmas Detectadas",value:e.value.total_firmas||0,icon:N,bg:"#f6ffed",color:"#52c41a"},{label:"Fecha Verificación",value:new Date().toLocaleDateString(),icon:je,bg:"#fff7e6",color:"#fa8c16"}]);return ie(async()=>{await Promise.all([H(),M()])}),(g,a)=>{const S=pe,Y=ue,P=me,D=_e,E=de,w=ge,K=ve,ee=be,te=Oe,ne=ye,oe=he,ae=Se;return u(),_("div",Ze,[l("div",Be,[r(Y,null,{default:i(()=>[r(S,null,{default:i(()=>a[0]||(a[0]=[c("Inicio")])),_:1}),r(S,null,{default:i(()=>a[1]||(a[1]=[c("Verificación")])),_:1}),r(S,null,{default:i(()=>[c(d(e.value.codigo_inscripcion),1)]),_:1})]),_:1}),a[2]||(a[2]=l("div",{class:"header-title"},[l("h1",null,"Verificación de Documento Firmado"),l("p",{class:"subtitle"},"Análisis digital de firmas electrónicas")],-1))]),r(E,{gutter:16,class:"summary-cards"},{default:i(()=>[(u(!0),_(V,null,A(X.value,f=>(u(),y(D,{xs:24,sm:12,md:6,key:f.label},{default:i(()=>[r(P,{class:"summary-card",bordered:!1},{default:i(()=>[l("div",ke,[l("div",{class:"card-icon",style:F({background:f.bg})},[(u(),y(fe(f.icon),{style:F({color:f.color,fontSize:"24px"})},null,8,["style"]))],4),l("div",Le,[l("h3",null,d(f.value),1),l("p",null,d(f.label),1)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),r(E,{gutter:24,class:"main-content"},{default:i(()=>[r(D,{xs:24,md:14},{default:i(()=>[r(P,{class:"pdf-viewer-card",bordered:!1},{title:i(()=>[c(" Documento: "+d(e.value.codigo_inscripcion)+".pdf ",1)]),extra:i(()=>[r(ee,null,{default:i(()=>[r(w,{shape:"circle",onClick:q,size:"small"},{default:i(()=>[r(v(Ne))]),_:1}),l("span",null,d(Math.round(m.value*100))+"%",1),r(w,{shape:"circle",onClick:U,size:"small"},{default:i(()=>[r(v(Ve))]),_:1}),r(K,{type:"vertical"}),r(w,{type:"primary",onClick:G},{default:i(()=>[r(v(Fe)),a[3]||(a[3]=c(" Descargar PDF"))]),_:1})]),_:1})]),default:i(()=>[l("div",He,[o.value?(u(),_("iframe",{key:0,ref_key:"pdfFrame",ref:s,src:o.value,style:F({transform:`scale(${m.value})`,transformOrigin:"top left"}),onLoad:T,onError:Q},null,44,Me)):(u(),_("div",Te,[r(v(Ee),{style:{"font-size":"48px",color:"#d9d9d9"}}),a[4]||(a[4]=l("p",null,"Documento no disponible",-1))]))])]),_:1})]),_:1}),r(D,{xs:24,md:10},{default:i(()=>[r(P,{class:"signatures-card",title:"Análisis de Firmas Digitales",bordered:!1},{default:i(()=>{var f;return[r(te,{message:z.value,type:J.value,description:R.value,"show-icon":""},null,8,["message","type","description"]),(f=e.value.firmas)!=null&&f.length?(u(),y(ae,{key:1,accordion:""},{default:i(()=>[(u(!0),_(V,null,A(e.value.firmas,(p,I)=>(u(),y(oe,{key:I,header:`Firma #${I+1}: ${p.firmante}`},{default:i(()=>[l("p",null,[a[6]||(a[6]=l("strong",null,"Estado:",-1)),a[7]||(a[7]=c()),r(ne,{color:W(p.estado_servicio)},{default:i(()=>[c(d(p.estado_servicio),1)]),_:2},1032,["color"])]),l("p",null,[a[8]||(a[8]=l("strong",null,"Fecha:",-1)),c(" "+d(p.fecha_firma),1)]),l("p",null,[a[9]||(a[9]=l("strong",null,"Email:",-1)),c(" "+d(p.email||"No especificado"),1)]),l("p",null,[a[10]||(a[10]=l("strong",null,"Algoritmo:",-1)),c(" "+d(p.algoritmo),1)]),l("p",null,[a[11]||(a[11]=l("strong",null,"Campo:",-1)),c(" "+d(p.campo_firma),1)])]),_:2},1032,["header"]))),128))]),_:1})):(u(),_("div",Qe,[r(v(N),{style:{"font-size":"48px",color:"#d9d9d9"}}),a[5]||(a[5]=l("p",null,"No se detectaron firmas digitales",-1))]))]}),_:1})]),_:1})]),_:1})])}}},Ke=Pe(Ue,[["__scopeId","data-v-0847869b"]]);export{Ke as default};
