import{_ as de}from"./logotiny-c4b525af.js";import{_ as ce}from"./logoDAD-c76d0a0b.js";import{_ as ue}from"./_plugin-vue_export-helper-c27b6911.js";import{a as s,o as r,E as U,w as n,d as e,t as w,a7 as pe,ab as me,ac as _e,r as b,J as T,c as u,u as h,F as D,Z as ve,b as g,f as m,s as fe,n as ge,B as ye,I as be,k as xe,q as he,_ as we,h as ke,aP as je,O as Ce,T as Ie,U as Ee,p as Oe,aQ as Ne,M as Pe}from"./app-d9176214.js";import De from"./certificado-87c2b085.js";import Ue from"./dni-5dc17a3d.js";import{A as Ae}from"./AntdIcon-4c3284d1.js";import{D as Se}from"./DeleteOutlined-b95eeedc.js";import{E as Le}from"./EyeOutlined-81f301d8.js";import{D as Re}from"./DownloadOutlined-6a7b90ee.js";import"./es-71336f5d.js";var $e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const ze=$e;function M(v){for(var p=1;p<arguments.length;p++){var l=arguments[p]!=null?Object(arguments[p]):{},i=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(l).filter(function(y){return Object.getOwnPropertyDescriptor(l,y).enumerable}))),i.forEach(function(y){Te(v,y,l[y])})}return v}function Te(v,p,l){return p in v?Object.defineProperty(v,p,{value:l,enumerable:!0,configurable:!0,writable:!0}):v[p]=l,v}var A=function(p,l){var i=M({},p,l.attrs);return s(Ae,M({},i,{icon:ze}),null)};A.displayName="UploadOutlined";A.inheritAttrs=!1;const Me=A,Fe="/build/assets/image-b69d7d4b.png";const Be={class:"headPre"},Ve={class:"flex justify-center title-proceso-container"},qe={class:"title-proceso text-center"},He={class:"container"},Ge={__name:"LayoutPuntaje",props:["nombre"],setup(v){return(p,l)=>{const i=me,y=_e;return r(),U(y,{style:{"min-height":"100vh"}},{default:n(()=>[s(y,null,{default:n(()=>[e("div",Be,[l[0]||(l[0]=e("div",{class:"flex justify-between mb-2 logo-container"},[e("div",{class:"logoPre"},[e("img",{src:de,class:"logo-img"}),e("div",{class:"x"},[e("div",{class:"container-pre"},[e("span",{class:"puntajex"},"DIRECCIÓN DE")]),e("h1",{class:"logoPreAD"},"ADMISIÓN")]),e("img",{src:ce,class:"logo-img"})])],-1)),e("div",Ve,[e("span",qe,w(v.nombre),1)]),l[1]||(l[1]=e("div",{class:"flex justify-center titulo-pre"},[e("div",null,[e("div",{class:"flex justify-center",style:{height:"40px"}},[e("hr",{class:"line-pre mr-2"}),e("span",{style:{"font-size":"1.4rem","text-transform":"capitalize"}},"RESULTADOS"),e("hr",{class:"line-pre ml-2"})])])],-1))]),l[2]||(l[2]=e("div",{style:{background:"#267ec5ea",height:"3px",width:"100%"}},null,-1)),s(i,{class:"content flex justify-center"},{default:n(()=>[e("div",He,[pe(p.$slots,"default",{},void 0,!0)])]),_:3})]),_:3})]),_:3})}}},Je=ue(Ge,[["__scopeId","data-v-62787fe5"]]);const Xe={style:{"font-size":"1.7rem"}},Qe={key:0},Ye={style:{"text-align":"justify","font-size":"1em"}},Ze={key:0},We={class:"flex",style:{"min-height":"30px","align-items":"center"}},Ke={class:"flex"},eo={key:0,class:"mr-1"},oo={class:"flex"},to={style:{"margin-top":"-2px"}},so={class:"mr-1"},no={class:"flex"},ao={style:{"margin-top":"-2px"}},io={class:"flex"},lo={style:{"margin-top":"-2px"}},ro={key:0,class:"mt-4"},co={class:"flex"},uo={style:{"margin-top":"-2px"}},po={key:1},mo={class:"mt-6",style:{}},_o={style:{"margin-top":"-10px","text-align":"left"}},vo={class:"ml-1 mb-2"},fo={class:"flex mt-6 justify-left",style:{}},go={style:{width:"100%"}},yo={style:{"min-width":"360px","max-width":"420px"}},bo={class:"texto-imagen"},xo={class:"mb-4"},ho={class:"mt-4",style:{display:"flex","justify-content":"left"}},wo={key:0,class:"mt-6"},ko={key:0},jo={key:1},Co={key:0},Io={key:1},Eo={class:"flex justify-center"},Oo={key:2},No={class:"flex justify-center"},Po={key:2,class:"mt-6"},Do={class:"mt-2"},Uo={class:"mb-4"},Ao={class:"mb-4"},So={class:"flex justify-end"},Lo={class:"mr-2"},Jo={__name:"index",props:["proceso_seleccionado","admin"],setup(v){const p=window.location.origin,l=b(!1),i=v,y=b(""),E=b(),c=T({descripcion:"",observacion:"",estado:1,file:[]}),F=b(),_=T({dni:"",codigo_secreto:""}),B=t=>{_.dni=t.target.value.replace(/\D/g,"")},V=async()=>{C.value=0;try{const t=await axios.post("/get-puntajes-proceso/",{dni:_.dni,id_proceso:i.proceso_seleccionado.id});if(t.data.estado==!1)Y("error","No se han encontrado datos en este proceso",""),_.dni="",x.value=[];else if(t.data&&t.data.datos){x.value=t.data.datos;const o=x.value.some(d=>d.condicion==="SI");C.value=o?1:0,C.value==0&&(_.dni=""),L()}else x.value=[]}catch(t){console.error("Error al obtener puntajes:",t),x.value=[]}};function q(t,o){return new Promise((d,f)=>{o?k.value!==y.value?f(new Error("El código ingresado no coincide.")):d():f(new Error("Por favor, ingresa el código secreto."))})}const H=b([]),G=async()=>{let t=await axios.get("/get-puntajes-maximos-proceso/"+i.proceso_seleccionado.id);t.data.estado==!0&&(H.value=t.data.datos)},J=()=>{l.value=!0},S=b([]),O=async()=>{let t=await axios.post("/get-documentos-resultados",{id_proceso:i.proceso_seleccionado.id});t.data.estado==!0&&(S.value=t.data.datos)},X=t=>window.open(t,"_blank"),Q=async t=>{try{const o=await axios({url:t,method:"GET",responseType:"blob"}),d=window.URL.createObjectURL(new Blob([o.data])),f=document.createElement("a");f.href=d,f.setAttribute("download",t.split("/").pop()),document.body.appendChild(f),f.click(),f.remove()}catch(o){console.error("Error descargando archivo:",o)}};G(),O();const k=b(null),L=async()=>{let t=await axios.get("/generar-captcha");k.value=t.data.captcha},Y=(t,o,d)=>{ge[t]({message:o,description:d})},x=b([]),C=b(null),Z=[{title:"Nombre",dataIndex:"nombres"},{title:"Programa",dataIndex:"programa",responsive:["sm"]},{title:"Puntaje",dataIndex:"puntaje",align:"center"},{title:"Vocacional",dataIndex:"puntaje_vocacional",align:"center"},{title:"Fecha",dataIndex:"fecha",align:"center"},{title:"Condición",dataIndex:"condicion",align:"center"}];function W(t){return t.split("-").reverse().join("-")}const K=t=>(c.file=[t],!1),ee=async()=>{if(await E.value.validateFields(),c.file.length===0){alert("Por favor, selecciona un archivo primero.");return}const t=new FormData;t.append("file",c.file[0]),t.append("descripcion",c.descripcion),t.append("estado",c.estado),t.append("observacion",c.observacion),t.append("id_proceso",i.proceso_seleccionado.id);try{const o=await fetch("/save-documento-resultado",{method:"POST",body:t,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}});if(!o.ok)throw new Error("Error en la subida del archivo");const d=await o.json();alert("Archivo subido con éxito: "+d.fileName),O(),R()}catch(o){alert("Error: "+o.message)}},oe=async t=>{await axios.get("/delete-documento-resultados/"+t),await O()},R=()=>{c.file=[],c.descripcion="",E.estado=1,c.observacion="",l.value=!1};return L(),(t,o)=>{const d=ye,f=be,I=xe,$=he,N=we,te=ke,se=je,ne=Ce,z=Ie,ae=Ee,ie=Oe,le=Ne,re=Pe;return r(),u(D,null,[s(h(ve),{title:"Resultados"}),s(Je,{nombre:i.proceso_seleccionado.nombre},{default:n(()=>[s(ne,null,{default:n(()=>[e("div",null,[e("h1",Xe,[o[9]||(o[9]=g("Resultados del ")),i.proceso_seleccionado.nivel==1?(r(),u("span",Qe,"examen")):m("",!0)]),e("p",Ye,[o[10]||(o[10]=g(" Para consultar la relación de ingresantes del ")),i.proceso_seleccionado.nivel==1?(r(),u("span",Ze," EXAMEN ")):m("",!0),g(" "+w(i.proceso_seleccionado.nombre)+', haga clic en el botón "Descargar" correspondiente a la fecha de su interés. El archivo se descargará automáticamente, y podrá abrirlo para visualizar el listado de ingresantes ordenado por mérito. ',1)])]),(r(!0),u(D,null,fe(S.value,a=>(r(),u("div",{key:a,class:"flex justify-between p-2",style:{"border-bottom":"solid 1px #d9d9d9"}},[e("div",We,[o[11]||(o[11]=e("div",{class:"mr-1",style:{width:"30px","min-width":"30px"}},[e("img",{src:Fe,alt:""})],-1)),e("div",null,[e("span",null,w(a.nombre),1)])]),e("div",null,[e("div",Ke,[i.admin===1?(r(),u("div",eo,[s(d,{onClick:P=>oe(a.id),size:"small",style:{height:"30px",background:"crimson",color:"white",border:"none"}},{default:n(()=>[e("div",oo,[e("div",to,[s(h(Se))])])]),_:2},1032,["onClick"])])):m("",!0),e("div",so,[s(d,{onClick:P=>X(h(p)+"/"+a.url),size:"small",style:{height:"30px",background:"#256d7d",color:"white",border:"none"}},{default:n(()=>[e("div",no,[e("div",ao,[s(h(Le))])])]),_:2},1032,["onClick"])]),e("div",null,[s(d,{onClick:P=>Q(h(p)+"/"+a.url),size:"small",style:{height:"30px",background:"#088dcf",color:"white",border:"none"}},{default:n(()=>[e("div",io,[e("div",lo,[s(h(Re))])])]),_:2},1032,["onClick"])])])])]))),128)),i.admin===1?(r(),u("div",ro,[s(d,{onClick:o[0]||(o[0]=a=>J()),style:{height:"36px",background:"#088dcf",color:"white",border:"none"}},{default:n(()=>[e("div",co,[o[12]||(o[12]=e("div",{class:"mr-1"},"Subir archivo",-1)),e("div",uo,[s(h(Me))])])]),_:1})])):m("",!0),i.proceso_seleccionado.nivel==1?(r(),u("div",po,[o[23]||(o[23]=e("div",{class:"mt-6"},null,-1)),o[24]||(o[24]=e("h1",{style:{"font-size":"1.7rem"}},"Consultar puntaje",-1)),e("div",mo,[e("div",_o,[e("div",vo," Para consultar el puntaje del EXAMEN "+w(i.proceso_seleccionado.nombre)+", siga estos pasos: ",1),o[13]||(o[13]=e("div",{class:"ml-4"},[e("div",{class:"mb-2"},"1. Ingrese su DNI en el campo de texto proporcionado."),e("div",{class:"mb-2"},"2. Ingrese el código mostrado en pantalla."),e("div",null,'3. Haga clic en el botón "Consultar Puntaje".')],-1))]),e("div",fo,[e("div",go,[e("div",yo,[s($,{ref_key:"formRef",ref:F,model:_,name:"inicio_dni"},{default:n(()=>[o[17]||(o[17]=e("div",{style:{"margin-bottom":"7px"}},[e("label",null,"N° Documento")],-1)),s(I,{name:"dni",rules:[{required:!0,message:"Por favor ingresa tu DNI",trigger:"change"},{min:8,message:"El dni debe tener 8 digitos",trigger:"blur"}]},{default:n(()=>[s(f,{value:_.dni,"onUpdate:value":o[1]||(o[1]=a=>_.dni=a),onInput:B,maxlength:8,placeholder:"N° Documento"},null,8,["value"])]),_:1}),e("div",bo,w(k.value),1),o[18]||(o[18]=e("div",{class:"overlay"},null,-1)),e("div",xo,[o[14]||(o[14]=e("div",{class:"mt-3"},[e("label",null,"Código")],-1)),s(I,{name:"codigo_secreto",rules:[{required:!0,message:"Ingresa el código del cuadro",trigger:"change"},{min:6,message:"El ubigeo debe tener 6 caracteres",trigger:"blur"},{validator:q,trigger:"change"}]},{default:n(()=>[s(f,{value:_.codigo_secreto,"onUpdate:value":o[2]||(o[2]=a=>_.codigo_secreto=a),maxlength:6,placeholder:"Ingresa el codigo"},null,8,["value"])]),_:1},8,["rules"])]),e("div",ho,[k.value!==_.codigo_secreto?(r(),U(d,{key:0,type:"primary",disabled:""},{default:n(()=>o[15]||(o[15]=[g("CONSULTAR PUNTAJE")])),_:1})):m("",!0),_.codigo_secreto===k.value?(r(),U(d,{key:1,onClick:o[3]||(o[3]=a=>V()),style:{background:"goldenrod",border:"none",color:"white"}},{default:n(()=>o[16]||(o[16]=[g("CONSULTAR PUNTAJE")])),_:1})):m("",!0)])]),_:1},8,["model"])])])])]),x.value.length>0?(r(),u("div",wo,[s(te,{columns:Z,"data-source":x.value,pagination:!1,size:"small"},{bodyCell:n(({column:a,index:P,record:j})=>[a.dataIndex==="puntaje"?(r(),u("div",ko,w(j.puntaje),1)):m("",!0),a.dataIndex==="fecha"?(r(),u("div",jo,w(W(j.fecha)),1)):m("",!0),a.dataIndex==="condicion"?(r(),u(D,{key:2},[j.condicion=="SI"?(r(),u("div",Co,[s(N,{color:"blue"},{default:n(()=>o[19]||(o[19]=[g(" Ingresó ")])),_:1})])):m("",!0),j.condicion=="NO"?(r(),u("div",Io,[e("div",Eo,[s(N,{color:"orange"},{default:n(()=>o[20]||(o[20]=[g(" No ingresó ")])),_:1})])])):m("",!0),j.condicion=="CL"?(r(),u("div",Oo,[e("div",No,[s(N,{color:"yellow"},{default:n(()=>o[21]||(o[21]=[g(" Clasificado ")])),_:1})])])):m("",!0)],64)):m("",!0)]),_:1},8,["data-source"]),o[22]||(o[22]=e("div",null,null,-1))])):m("",!0)])):m("",!0),C.value===1?(r(),u("div",Po,[s(se,{message:"! MUY IMPORTANTE !",description:"Los postulantes que hayan alcanzado una vacante deberán subir su Certificado de Estudios y DNI en formato PDF con un peso max. de 2mb",type:"info"}),o[25]||(o[25]=e("div",{class:"mt-6"},null,-1)),o[26]||(o[26]=e("h1",{style:{"font-size":"1.7rem"}},"Subir archivos ",-1)),e("div",null,[s(De,{id_proceso:i.proceso_seleccionado.id,dni:_.dni},null,8,["id_proceso","dni"])]),e("div",Do,[s(Ue,{id_proceso:i.proceso_seleccionado.id,dni:_.dni},null,8,["id_proceso","dni"])])])):m("",!0)]),_:1}),s(re,{visible:l.value,"onUpdate:visible":o[8]||(o[8]=a=>l.value=a),title:"Archivo Resultado",footer:!1},{default:n(()=>[s($,{ref_key:"formRefArchivo",ref:E,model:c,name:"formArchivo"},{default:n(()=>[s(ae,{value:c.estado,"onUpdate:value":o[4]||(o[4]=a=>c.estado=a),class:"flex justify-end",style:{display:"flex",width:"yellow"},name:"radioGroup"},{default:n(()=>[s(z,{value:1},{default:n(()=>o[27]||(o[27]=[g("Activo")])),_:1}),s(z,{value:0},{default:n(()=>o[28]||(o[28]=[g("Inactivo")])),_:1})]),_:1},8,["value"]),o[31]||(o[31]=e("div",{style:{"margin-bottom":"7px"}},[e("label",null,"Descripción")],-1)),s(I,{name:"descripcion",rules:[{required:!0,message:"Ingrese la descripción",trigger:"change"}]},{default:n(()=>[s(f,{value:c.descripcion,"onUpdate:value":o[5]||(o[5]=a=>c.descripcion=a),placeholder:"Descripción"},null,8,["value"])]),_:1}),e("div",Uo,[o[29]||(o[29]=e("div",{class:"mt-3"},[e("label",null,"Observaciónes")],-1)),s(I,{name:"observacion"},{default:n(()=>[s(ie,{value:c.observacion,"onUpdate:value":o[6]||(o[6]=a=>c.observacion=a),maxlength:100,placeholder:"Observación"},null,8,["value"])]),_:1})]),e("div",Ao,[s(le,{fileList:t.fileList,"onUpdate:fileList":o[7]||(o[7]=a=>t.fileList=a),"before-upload":K,multiple:!1},{default:n(()=>o[30]||(o[30]=[e("div",{class:"flex justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-upload"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"17 8 12 3 7 8"}),e("line",{x1:"12",y1:"3",x2:"12",y2:"15"})])],-1),e("p",{class:"ant-upload-text"},"Haz clic o arrastra el archivo aquí para cargarlo",-1),e("p",{class:"ant-upload-hint"},"No subir archivos no autorizados",-1)])),_:1},8,["fileList"])])]),_:1},8,["model"]),e("div",So,[e("div",Lo,[s(d,{onClick:R,style:{height:"36px",background:"none",color:"#088dcf",border:"#088dcf solid 1px"}},{default:n(()=>o[32]||(o[32]=[e("div",{class:"mr-1"},"Cancelar",-1)])),_:1})]),s(d,{onClick:ee,style:{height:"36px",background:"#088dcf",color:"white",border:"none"}},{default:n(()=>o[33]||(o[33]=[e("div",{class:"mr-1"},"Guardar",-1)])),_:1})])]),_:1},8,["visible"])]),_:1},8,["nombre"])],64)}}};export{Jo as default};
