import{r as n,C as _e,e as ge,D as fe,o as l,c as r,d,a as o,w as a,E as P,f as u,x as xe,v as ye,y as C,U as he,I as be,h as ke,M as Ce,z as Ie,b as _,u as c,t as S,F as H,a4 as X,n as we,aL as Ee,_ as $e,B as ze,H as De,j as Se,aX as Ue,A as Ae}from"./app-f3fb843f.js";import Me from"./ficha-28990d4f.js";import{S as Ne}from"./SearchOutlined-820093da.js";import{S as Be}from"./SaveOutlined-72f22cd7.js";import{F as Y}from"./FormOutlined-5c9381c6.js";import{D as G}from"./DeleteOutlined-158b6b13.js";import{E as qe}from"./EyeOutlined-d3a072df.js";import"./logotiny-c4b525af.js";import"./logoDAD-c76d0a0b.js";import"./AntdIcon-51600901.js";const Le={class:"pl-4",style:{background:"white",width:"100%","min-height":"calc(100vh - 190px)","border-radius":"12px"}},Te={class:"flex justify-between mt-2"},Fe={style:{color:"#0000009d","margin-top":"-6px"}},Oe={key:0,class:"mt-3 mb-3",style:{"margin-left":"-5px"}},Ve={key:0},je=["onDblclick"],Re={key:2,class:"flex",style:{"justify-content":"center"}},Pe={key:0},He={key:1},Xe={key:2},Ye={key:1,class:"mt-3 mb-3",style:{"margin-left":"-5px"}},Ge={key:0},Je={class:"",style:{gap:"10px 20px"}},Ke={class:"mb-3 mt-4"},Qe={class:"ant-upload-drag-icon"},dt={__name:"leer-patron",props:["proceso"],setup(U){const J=window.location.origin,g=n("contenido"),f=n([]),A=n(null),M=U,x=n(!1);n(1);const K=e=>{const t=e.file.status;t!=="uploading"&&console.log("Archivo:",e.file),t==="done"?(X.success(`${e.file.name} archivo(s) subido(s) exitosamente.`),f.value=[],ae.value=null,se.value=null,b.value=null,w(),h(),setTimeout(()=>{x.value=!1},300)):t==="error"&&X.error(`${e.file.name} falló al subir.`)},Q=()=>{f.value=null},y=n(!1),N=n(0),B=n(0),W=e=>{y.value=!0,N.value=e.clientY,B.value=e.clientX,e.preventDefault()},Z=_e(()=>({cod_examen:b.value})),I=e=>{e==="1"&&(x.value=!0,y.value=!1)},ee=e=>{y.value=!1},q=n([]),L=n([]),v=n(""),w=async()=>{C.post("/get-archivos-pat",{term:v.value,proceso:M.proceso}).then(e=>{q.value=e.data.datos.data}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})},h=async()=>{C.post("/get-pat",{term:v.value,proceso:M.proceso}).then(e=>{L.value=e.data.datos.data}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})},te=n([]),oe=n([]),T=n([]),ae=n(null),se=n(null),b=n(null);(async()=>{C.get("/calificacion/get-select-puestos").then(e=>{te.value=e.data.puestos,oe.value=e.data.codigos_puesto,T.value=e.data.codigos_examen}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})})();let F;ge(v,(e,t)=>{clearTimeout(F),F=setTimeout(()=>{h()},300)}),n("");const E=n(!1),ne=e=>{A.value=e,E.value=!0};w(),h();const le=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"Tipo",dataIndex:"tipo",align:"center",width:"100px"},{title:"Nombre",dataIndex:"nombre"},{title:"Area",dataIndex:"area"},{title:"Fecha",dataIndex:"fecha",align:"center"},{title:"Registros",dataIndex:"registros",align:"center"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}],ie=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"N° lectura",dataIndex:"n_lectura",align:"center"},{title:"Tip",dataIndex:"tipo",width:"60px",align:"center"},{title:"Litho",dataIndex:"res_litho",align:"center"},{title:"Cod examen",dataIndex:"cod_examen",align:"center"},{title:"Respuestas",dataIndex:"respuestas",align:"center"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}],O=e=>{C.get("eliminar-archivo/"+e.id).then(t=>{w(),h(),re("error",t.data.titulo,t.data.mensaje)})},re=(e,t,k)=>{we[e]({message:t,description:k})};return(e,t)=>{const k=Ee,de=he,ue=be,$=$e,p=ze,V=De,j=ke,ce=Se,pe=fe("inbox-outlined"),me=Ue,R=Ce,z=Ae,ve=Ie;return l(),r("div",{style:{},onClick:ee,onContextmenu:ye(W,["prevent"])},[d("div",Le,[d("div",Te,[o(de,{value:g.value,"onUpdate:value":t[0]||(t[0]=s=>g.value=s),style:{"margin-left":"-3px"}},{default:a(()=>[o(k,{value:"contenido",style:{"border-radius":"9px 0px 0px 9px"}},{default:a(()=>t[9]||(t[9]=[_("Respuestas")])),_:1}),o(k,{value:"archivos",style:{"border-radius":"0px 9px 9px 0px"}},{default:a(()=>t[10]||(t[10]=[_("Archivos")])),_:1})]),_:1},8,["value"]),o(ue,{value:v.value,"onUpdate:value":t[1]||(t[1]=s=>v.value=s),style:{"max-width":"260px","border-radius":"6px",height:"32px"},placeholder:"Buscar"},{prefix:a(()=>[d("span",Fe,[o(c(Ne))])]),_:1},8,["value"])]),g.value==="archivos"?(l(),r("div",Oe,[(l(),P(j,{columns:le,"data-source":q.value,key:e.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:a(({column:s,index:D,record:i})=>[s.dataIndex==="nro"?(l(),r("span",Ve,S(D+1),1)):u("",!0),s.dataIndex==="nombre"?(l(),r("div",{key:1,style:{width:"100%",cursor:"pointer"},onDblclick:m=>e.customRow(i)},[d("span",null,S(i.nombre),1)],40,je)):u("",!0),s.dataIndex==="area"?(l(),r("div",Re,[i.area===1?(l(),r("div",Pe,[o($,{color:"cyan"},{default:a(()=>t[11]||(t[11]=[_("Biomedicas")])),_:1})])):u("",!0),i.area===2?(l(),r("div",He,[o($,{color:"orange"},{default:a(()=>t[12]||(t[12]=[_("Ingenierías")])),_:1})])):u("",!0),i.area===3?(l(),r("div",Xe,[o($,{color:"purple"},{default:a(()=>t[13]||(t[13]=[_("Sociales")])),_:1})])):u("",!0)])):u("",!0),s.dataIndex==="acciones"?(l(),r(H,{key:3},[o(p,{type:"success",class:"mr-1",style:{color:"#476175"},onClick:m=>e.cambiarSexo(i.id_postulante,i.sexo),size:"small"},{icon:a(()=>[o(c(Be))]),_:2},1032,["onClick"]),o(p,{onClick:m=>e.abrirEditar(i),class:"mr-1",style:{color:"blue"},size:"small"},{icon:a(()=>[o(c(Y))]),_:2},1032,["onClick"]),o(V,{title:"¿Estas seguro de eliminar?",onConfirm:m=>O(i)},{default:a(()=>[o(p,{shape:"",size:"small",style:{color:"crimson"}},{icon:a(()=>[o(c(G))]),_:1})]),_:2},1032,["onConfirm"])],64)):u("",!0)]),_:1},8,["data-source"]))])):u("",!0),g.value==="contenido"?(l(),r("div",Ye,[(l(),P(j,{columns:ie,"data-source":L.value,key:e.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:a(({column:s,index:D,record:i})=>[s.dataIndex==="nro"?(l(),r("span",Ge,S(D+1),1)):u("",!0),s.dataIndex==="acciones"?(l(),r(H,{key:1},[o(p,{type:"success",class:"mr-1",style:{color:"#476175"},size:"small",onClick:m=>ne(i.id)},{icon:a(()=>[o(c(qe))]),_:2},1032,["onClick"]),o(p,{onClick:m=>e.abrirEditar(i),class:"mr-1",style:{color:"blue"},size:"small"},{icon:a(()=>[o(c(Y))]),_:2},1032,["onClick"]),o(V,{title:"¿Estas seguro de eliminar?",onConfirm:m=>O(i)},{default:a(()=>[o(p,{shape:"",size:"small",style:{color:"crimson"}},{icon:a(()=>[o(c(G))]),_:1})]),_:2},1032,["onConfirm"])],64)):u("",!0)]),_:1},8,["data-source"]))])):u("",!0),o(R,{open:x.value,"onUpdate:open":t[4]||(t[4]=s=>x.value=s),title:"Cargar fichas de respuestas",onOk:Q,centered:!0,style:{"max-height":"calc(100vh - 100px)","overflow-x":"scroll",cursor:"pointer"}},{default:a(()=>[d("div",Je,[d("div",Ke,[o(ce,{value:b.value,"onUpdate:value":t[2]||(t[2]=s=>b.value=s),style:{width:"100%"},placeholder:"Codigo examen",options:T.value,label:"puesto",allowClear:"",onChange:e.onAreaChange},null,8,["value","options","onChange"])])]),o(me,{fileList:f.value,"onUpdate:fileList":t[3]||(t[3]=s=>f.value=s),name:"file",multiple:!0,action:c(J)+"/calificacion/carga-pat/"+U.proceso,onChange:K,onDrop:e.handleDrop,"list-type":"picture",data:Z.value},{default:a(()=>[d("p",Qe,[o(pe)]),t[14]||(t[14]=d("p",{class:"ant-upload-text",style:{width:"100%"}},"Haz clic o arrastra archivos a esta área para cargar",-1)),t[15]||(t[15]=d("p",{class:"ant-upload-hint"}," Soporte para carga única o múltiple. Prohibido subir datos de la empresa u otros archivos prohibidos. ",-1))]),_:1},8,["fileList","action","onDrop","data"])]),_:1},8,["open"])]),y.value?(l(),r("div",{key:0,style:xe([{position:"absolute",border:"solid 1px #d9d9d943","padding-top":"0px","border-radius":"8px",overflow:"hidden"},{top:`${N.value}px`,left:`${B.value}px`}])},[o(ve,{size:"small",style:{"margin-top":"-4px","margin-bottom":"-4px"}},{default:a(()=>[o(z,{key:"1",class:"selec-menu",onClick:t[5]||(t[5]=s=>I("1"))},{default:a(()=>t[16]||(t[16]=[d("div",{style:{"margin-top":"0px"}}," Cargar respuestas ",-1)])),_:1}),o(z,{key:"2",class:"selec-menu",onClick:t[6]||(t[6]=s=>I("2"))},{default:a(()=>t[17]||(t[17]=[d("div",{style:{"margin-top":"0px"}}," Nueva respuesta ",-1)])),_:1}),o(z,{key:"2",class:"selec-menu",onClick:t[7]||(t[7]=s=>I("2"))},{default:a(()=>t[18]||(t[18]=[d("div",{style:{"margin-top":"0px"}}," asdfas ",-1)])),_:1})]),_:1})],4)):u("",!0),o(R,{open:E.value,"onUpdate:open":t[8]||(t[8]=s=>E.value=s),footer:!1,style:{width:"880px"}},{default:a(()=>[o(Me,{id_resp:A.value},null,8,["id_resp"])]),_:1},8,["open"])],32)}}};export{dt as default};
