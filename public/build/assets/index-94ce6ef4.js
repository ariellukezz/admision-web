import{r as s,e as v,D as P,o as N,c as B,a as e,u as c,w as o,F as G,y as g,M as K,Z as T,d as b,b as y,f as Z,t as H,n as J,B as L,I as Q,K as W,h as X,i as Y,k as ee,q as ae}from"./app-d59ad026.js";import{_ as oe}from"./AuthenticatedLayout-9600519d.js";import{P as te}from"./PlusOutlined-5abfdfa4.js";import{S as ne}from"./SearchOutlined-34791e28.js";import{E as le}from"./EditOutlined-8ce5359b.js";import{D as se}from"./DeleteOutlined-d4ea6ae4.js";import"./logotiny-c4b525af.js";import"./Header-bea2c992.js";import"./AntdIcon-fb17ae9a.js";import"./perfil-81e8a979.js";/* empty css                                                               */import"./_plugin-vue_export-helper-c27b6911.js";import"./UserOutlined-fc2e5cab.js";import"./DownOutlined-562c666f.js";/* empty css                                                            */const ie={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},re={class:"flex justify-between mb-4"},ue={key:0,class:"flex gap-1 justify-center"},de={class:"mt-2 text-right"},Be={__name:"index",setup(ce){const m=s(""),x=s([]),i=s(!1),u=s(1),w=s(0),p=s(!1),_=s(!1),n=s({id:null,anio:"",nombre:""}),E=s(null),d=async()=>{p.value=!0;try{const t=await g.post(`anio/get-anios?page=${u.value}`,{term:m.value});x.value=t.data.datos.data,w.value=t.data.datos.total}finally{p.value=!1}},I=()=>{i.value=!0},U=t=>{n.value={...t},i.value=!0},$=async()=>{_.value=!0;try{const t={...n.value,anio:String(n.value.anio)},a=await g.post("save-anio",t);h("success",a.data.titulo,a.data.mensaje),d(),i.value=!1}finally{_.value=!1}},j=async t=>{const a=await g.get(`eliminar-anio/${t.id}`);h("warning",a.data.titulo,a.data.mensaje),d()},z=()=>{i.value=!1},D=()=>{n.value={id:null,anio:"",nombre:""}},h=(t,a,r)=>{J[t]({message:a,description:r})};v(m,()=>{u.value=1,d()}),v(u,d),v(i,t=>{t||D()});const O=[{title:"Año",dataIndex:"anio",align:"center",width:100},{title:"Nombre",dataIndex:"nombre"},{title:"Acciones",dataIndex:"acciones",align:"center",width:120}];return d(),(t,a)=>{const r=L,f=Q,S=W,V=X,q=Y,k=P("sin-icono"),C=ee,F=ae,M=K;return N(),B(G,null,[e(c(T),{title:"Años"}),e(oe,null,{default:o(()=>[b("div",ie,[b("div",re,[e(r,{type:"primary",onClick:I},{icon:o(()=>[e(c(te))]),default:o(()=>[a[5]||(a[5]=y(" Nuevo "))]),_:1}),e(f,{value:m.value,"onUpdate:value":a[0]||(a[0]=l=>m.value=l),placeholder:"Buscar",style:{width:"220px"}},{prefix:o(()=>[e(c(ne))]),_:1},8,["value"])]),e(V,{columns:O,"data-source":x.value,pagination:!1,size:"small",loading:p.value,"row-key":"id"},{bodyCell:o(({column:l,record:A})=>[l.dataIndex==="acciones"?(N(),B("div",ue,[e(r,{size:"small",style:{background:"white",border:"1px solid #d9d9d9",width:"32px",height:"32px"},onClick:R=>U(A)},{default:o(()=>[e(c(le))]),_:2},1032,["onClick"]),e(S,{title:"¿Estás seguro de eliminar?",onConfirm:R=>j(A)},{default:o(()=>[e(r,{size:"small",style:{background:"white",border:"1px solid #d9d9d9",color:"#ff4d4f",width:"32px",height:"32px"}},{default:o(()=>[e(c(se))]),_:1})]),_:2},1032,["onConfirm"])])):Z("",!0)]),_:1},8,["data-source","loading"]),b("div",de,[e(q,{current:u.value,"onUpdate:current":a[1]||(a[1]=l=>u.value=l),total:w.value,"show-less-items":""},null,8,["current","total"])])])]),_:1}),e(M,{open:i.value,"onUpdate:open":a[4]||(a[4]=l=>i.value=l),title:n.value.id?"Editar Año":"Nuevo Año","destroy-on-close":""},{footer:o(()=>[e(r,{onClick:z},{default:o(()=>a[6]||(a[6]=[y("Cancelar")])),_:1}),e(r,{type:"primary",loading:_.value,onClick:$},{default:o(()=>[y(H(n.value.id?"Actualizar":"Guardar"),1)]),_:1},8,["loading"])]),default:o(()=>[e(F,{ref_key:"formRef",ref:E,model:n.value,"label-col":{span:7},"wrapper-col":{span:14}},{default:o(()=>[e(C,{label:"Año",name:"anio",required:""},{default:o(()=>[e(f,{value:n.value.anio,"onUpdate:value":a[2]||(a[2]=l=>n.value.anio=l)},{prefix:o(()=>[e(k)]),_:1},8,["value"])]),_:1}),e(C,{label:"Nombre",name:"nombre",required:""},{default:o(()=>[e(f,{value:n.value.nombre,"onUpdate:value":a[3]||(a[3]=l=>n.value.nombre=l)},{prefix:o(()=>[e(k)]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])],64)}}};export{Be as default};
