import{r as u,e as I,C as ee,D as ae,o as s,c as b,a as o,u as f,w as n,d as r,F as D,y as V,M as oe,Z as te,E as y,t as h,f as m,b as c,G as le,n as ne,j as ie,I as de,_ as se,B as re,H as ue,h as pe,i as me,N as ce,k as ve,S as fe,p as ge,q as _e}from"./app-5e7105fb.js";import{_ as be}from"./AuthenticatedLayout-ff76e053.js";import{U as ye}from"./UploadOutlined-aa80e8df.js";import{S as xe}from"./SearchOutlined-8ad821c3.js";import{P as we}from"./PrinterOutlined-46267e93.js";import{F as ke}from"./FormOutlined-a61d480f.js";import{D as Ce}from"./DeleteOutlined-87498786.js";import"./logotiny-c4b525af.js";import"./Header-86d9ab08.js";import"./AntdIcon-fd0a2438.js";import"./DownOutlined-b16e9bc5.js";/* empty css                                                            */const Ie={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},he={class:"mr-3"},Se={class:"flex justify-between",style:{position:"relative"}},Fe={style:{"font-size":"1rem","font-weight":"bold"}},Ve={key:1,style:{"font-size":"0.95rem"}},Ue={key:3},ze={key:5,style:{display:"flex",gap:"2px"}},Ee={class:"flex justify-end"},Ne={class:""},He={__name:"index",setup(De){const O=window.location.origin,x=u(null),S=u(""),U=u([]),g=u(!1),w=u(1),P=u(null),F=u(20),t=u({id:null,codigo:"",id_posulante:"",id_programa:"",id_modalidad:"",estado:!0,observacion:""}),p=u({id:"",nombre:"",dni:""});I(S,(a,e)=>{v()}),I(F,(a,e)=>{v()}),I(x,(a,e)=>{a==0&&(x.value=null),w.value=1,v()}),I(g,(a,e)=>{g.value==!1&&t.value.id!=null&&(t.value.id=null,t.value.codigo="",t.value.id_posulante="",t.value.id_programa="",t.value.id_modalidad="",t.value.estado=!0,t.value.observacion="",p.value.nombre=null,p.value.dni=null,p.value.id=null)}),I(w,(a,e)=>{v()});const A=a=>{g.value=!0,t.value.id=a.id,t.value.codigo=a.codigo,t.value.id_programa=a.id_programa,t.value.id_modalidad=a.id_modalidad,a.estado==0?t.value.estado=!0:t.value.estado=3,t.value.observacion=a.observacion,p.value.id=a.id_postulante,p.value.dni=a.dni,p.value.nombre=a.dni+" - "+a.nombres+" "+a.paterno+" "+a.materno},v=async()=>{let a=await V.post("get-inscripciones-admin?page="+w.value,{term:S.value,paginashoja:F.value,programa:x.value});U.value=a.data.datos.data,P.value=a.data.datos.total},z=u([]);(async()=>{let a=await V.get("get-select-programas-proceso-admin");z.value=a.data.datos})();const M=()=>{let a=3;t.value.estado==!0&&(a=0);let e={id:t.value.id,id_postulante:p.value.id,id_programa:t.value.id_programa,id_modalidad:t.value.id_modalidad,observacion:t.value.observacion,estado:a,dni:p.value.dni};V.post("actualizar-inscripcion",e).then(i=>{v(),B("success",i.data.titulo,i.data.mensaje),g.value=!1})},R=a=>{V.get("eliminar-modalidad/"+a.id).then(e=>{v(),B("warning",e.data.titulo,e.data.mensaje)})},W=[{title:"Codigo",dataIndex:"codigo",width:"110px"},{title:"DNI",dataIndex:"dni",align:"center"},{title:"Postulante",dataIndex:"postulante"},{title:"Programa",dataIndex:"programa"},{title:"Modalidad",dataIndex:"modalidad",align:"center"},{title:"Estado",dataIndex:"estado",align:"center"},{title:"Acciones",dataIndex:"acciones",width:"140px",align:"center"}],j=u([]),G=a=>{console.log("selectedRowKeys changed: ",a),j.value=a};ee(()=>({selectedRowKeys:f(j),onChange:G,hideDefaultSelections:!0}));const B=(a,e,i)=>{ne[a]({message:e,description:i})},K=(a,e)=>{var i=document.createElement("iframe");i.style.display="none",i.src=O+"/documentos/"+e+"/inscripciones/constancias/"+a+".pdf",document.body.appendChild(i),i.contentWindow.focus(),i.contentWindow.print()},L=a=>{var e=document.createElement("iframe");e.style.display="none",e.src=O+"/admin/pdf-inscripción/"+a,document.body.appendChild(e),e.contentWindow.focus(),e.contentWindow.print()};return v(),(a,e)=>{const i=ie,E=de,T=ae("row"),k=se,_=re,q=ue,H=pe,X=me,Z=ce,C=ve,$=fe,J=ge,Q=_e,Y=oe;return s(),b(D,null,[o(f(te),{title:"Documentos"}),o(be,null,{default:n(()=>[r("div",Ie,[o(T,{class:"flex justify-between mb-4"},{default:n(()=>[r("div",he,[o(i,{ref:"select",value:x.value,"onUpdate:value":e[0]||(e[0]=l=>x.value=l),placeholder:"Seleccionar programa de estudios",options:z.value,allowClear:""},null,8,["value","options"])]),r("div",Se,[o(E,{type:"text",placeholder:"Buscar",value:S.value,"onUpdate:value":e[1]||(e[1]=l=>S.value=l),style:{"max-width":"300px"}},{prefix:n(()=>[o(f(xe))]),_:1},8,["value"])])]),_:1}),o(H,{columns:W,"data-source":U.value,pagination:!1,size:"small"},{bodyCell:n(({column:l,index:Pe,record:d})=>[l.dataIndex==="codigo"?(s(),y(k,{key:0,color:"blue",style:{"padding-top":"3px",color:"#164753",width:"105px"}},{default:n(()=>[r("span",Fe,h(d.codigo),1)]),_:2},1024)):m("",!0),l.dataIndex==="postulante"?(s(),b("span",Ve,h(d.paterno)+" "+h(d.materno)+", "+h(d.nombres),1)):m("",!0),l.dataIndex==="estado"?(s(),b(D,{key:2},[d.estado===0?(s(),y(k,{key:0,color:"blue"},{default:n(()=>e[12]||(e[12]=[c("INSCRITO")])),_:1})):(s(),y(k,{key:1,color:"error"},{default:n(()=>e[13]||(e[13]=[c("ANULADO")])),_:1}))],64)):m("",!0),l.dataIndex==="programa"?(s(),b("div",Ue,h(d.programa),1)):m("",!0),l.dataIndex==="verificado"?(s(),b(D,{key:4},[d.verificado===0?(s(),y(k,{key:0,color:"error"},{default:n(()=>e[14]||(e[14]=[c("no verificado")])),_:1})):m("",!0),d.verificado===1?(s(),y(k,{key:1,color:"success"},{default:n(()=>e[15]||(e[15]=[c("verificado")])),_:1})):m("",!0)],64)):m("",!0),l.dataIndex==="acciones"?(s(),b("div",ze,[o(_,{size:"small",onClick:N=>L(d.dni),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#23cd23",display:"flex","align-items":"center"}},{default:n(()=>[o(f(ye))]),_:2},1032,["onClick"]),o(_,{size:"small",onClick:N=>K(d.dni,d.id_proceso),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#164753",display:"flex","align-items":"center"}},{default:n(()=>[o(f(we))]),_:2},1032,["onClick"]),o(_,{size:"small",onClick:N=>A(d),style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#af7200",display:"flex","align-items":"center"}},{default:n(()=>[o(f(ke))]),_:2},1032,["onClick"]),U.value.length?(s(),y(q,{key:0,title:"¿Estas seguro de eliminar?",disabled:"",onConfirm:N=>R(d)},{default:n(()=>[o(_,{size:"small",style:{background:"white",height:"28px",border:"1px solid #d9d9d9",color:"#ff4d4f",display:"flex","align-items":"center"}},{default:n(()=>[o(f(Ce))]),_:1})]),_:2},1032,["onConfirm"])):m("",!0)])):m("",!0)]),_:1},8,["data-source"]),o(X,{current:w.value,"onUpdate:current":e[2]||(e[2]=l=>w.value=l),total:P.value,pageSize:F.value,"onUpdate:pageSize":e[3]||(e[3]=l=>F.value=l),"show-less-items":""},null,8,["current","total","pageSize"])])]),_:1}),r("div",null,[o(Y,{open:g.value,"onUpdate:open":e[11]||(e[11]=l=>g.value=l),title:"Modificar Inscripción",style:{"margin-top":"-40px"}},{footer:n(()=>[o(_,{style:{"margin-left":"10px"},onClick:a.resetForm},{default:n(()=>e[23]||(e[23]=[c("Cancelar")])),_:1},8,["onClick"]),o(_,{type:"primary",onClick:e[10]||(e[10]=l=>M())},{default:n(()=>e[24]||(e[24]=[c("Guardar")])),_:1})]),default:n(()=>[o(Q,le({ref:"formRef",name:"custom-validation",model:a.formState},a.layout,{onFinish:a.handleFinish,onValidate:a.handleValidate,onFinishFailed:a.handleFinishFailed}),{default:n(()=>[r("div",Ee,[o(Z,{checked:t.value.estado,"onUpdate:checked":e[4]||(e[4]=l=>t.value.estado=l)},null,8,["checked"])]),o(C,{"has-feedback":"",name:"codigo"},{default:n(()=>[e[16]||(e[16]=r("label",null,"Codigo",-1)),o(E,{type:"text",value:t.value.codigo,"onUpdate:value":e[5]||(e[5]=l=>t.value.codigo=l),disabled:""},null,8,["value"])]),_:1}),o(C,{"has-feedback":"",name:"nombre"},{default:n(()=>[e[17]||(e[17]=r("label",null,"Postulante",-1)),o(E,{type:"text",value:p.value.nombre,"onUpdate:value":e[6]||(e[6]=l=>p.value.nombre=l),disabled:""},null,8,["value"])]),_:1}),o(C,{"has-feedback":"",name:"postulante"},{default:n(()=>[e[18]||(e[18]=r("label",null,"Programa",-1)),r("div",Ne,[o(i,{ref:"select",value:t.value.id_programa,"onUpdate:value":e[7]||(e[7]=l=>t.value.id_programa=l),placeholder:"Seleccionar programa de estudios",options:z.value,allowClear:""},null,8,["value","options"])])]),_:1}),o(C,{"has-feedback":"",name:"tipo"},{default:n(()=>[e[21]||(e[21]=r("label",null,"Modalidad",-1)),o(i,{ref:"select",value:t.value.id_modalidad,"onUpdate:value":e[8]||(e[8]=l=>t.value.id_modalidad=l),placeholder:"Seleccionar programa",class:"selector-modalidad",style:{width:"100%"}},{default:n(()=>[o($,{value:8},{default:n(()=>e[19]||(e[19]=[c("EXAMEN GENERAL")])),_:1}),o($,{value:7},{default:n(()=>e[20]||(e[20]=[c("CONADIS")])),_:1})]),_:1},8,["value"])]),_:1}),o(C,{"has-feedback":"",name:"nombre"},{default:n(()=>[e[22]||(e[22]=r("label",null,"Observaciones",-1)),o(J,{type:"text",value:t.value.observacion,"onUpdate:value":e[9]||(e[9]=l=>t.value.observacion=l),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["open"])])],64)}}};export{He as default};
