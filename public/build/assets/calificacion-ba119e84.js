import{r as l,J as ce,e as w,o as i,c as r,a as o,u as d,w as a,F as N,y as C,Z as pe,d as s,v as me,s as ve,t as S,E as _e,f as m,b as p,x as fe,I as ge,_ as ye,B as xe,H as be,h as he,A as ke,z as we,k as Ce,L as Ie,V as Ee,q as $e,M as Ve,W as De,X as ze}from"./app-25fcb8ae.js";import{L as Me}from"./LayoutCalificador-c311f942.js";import Ne from"./leer-ide-f5d6ea82.js";import Se from"./leer-resp-dbd6d5ca.js";import qe from"./leer-patron-f4950252.js";import Fe from"./participantes-277b9885.js";import Ue from"./calificacion-9b3746c0.js";import{H as Oe,F as Be}from"./HomeOutlined-bcec886e.js";import{S as Te}from"./SearchOutlined-8f7c8ea4.js";import{E as je}from"./EyeOutlined-195d35e5.js";import{F as Le}from"./FormOutlined-32726820.js";import{D as Pe}from"./DeleteOutlined-f0e8afda.js";import{E as R}from"./EnvironmentOutlined-367b534c.js";import{D as Ye}from"./DownOutlined-084f2710.js";import"./NavLink-5b3d2cf4.js";import"./logotiny-c4b525af.js";/* empty css                                                                          */import"./_plugin-vue_export-helper-c27b6911.js";import"./TopMenu-75bb13c5.js";import"./DropdownLink-69c8a2e9.js";import"./SaveOutlined-dda29b98.js";import"./AntdIcon-27ff68aa.js";import"./ficha-88a9d648.js";import"./logoDAD-c76d0a0b.js";import"./xlsx-4f9172c7.js";const He={class:"mb-4",style:{width:"100%"}},Ke={class:"ml-0 flex mb-0 mt-0"},Re={class:"flex"},Ae={style:{"margin-top":"-4px"}},Xe=["onClick"],Ge={class:"flex",style:{height:"20px","align-items":"center"}},Je={class:"carpetas-select px-1"},We={key:0},Ze={class:"flex justify-end mt-0 mb-3",style:{"margin-top":"-2px"}},Qe={style:{color:"#0000009d","margin-top":"-6px"}},et={key:0},tt=["onDblclick"],ot={key:2,class:"flex",style:{"justify-content":"center"}},st={key:0},at={key:1},nt={style:{background:"#476175",height:"42px","margin-left":"-24px","margin-right":"-24px","margin-top":"-24px"}},lt={class:"flex justify-between ml-3 mr-1",style:{height:"36px","align-items":"center"}},it={class:"flex"},rt={style:{width:"100%"},class:"mt-4"},dt={style:{color:"#0000009d","margin-top":"-6px"}},ut={class:"mt-2",style:{width:"100%"}},ct={style:{color:"#0000009d","margin-top":"-6px"}},pt={class:"mt-2",style:{width:"100%"}},mt={style:{color:"#0000009d","margin-top":"-6px"}},vt={class:"mt-0 mb-2"},_t={style:{margin:"-24px","margin-top":"-5px"},class:"px-6 pt-4 pb-3 flex justify-end"},ft={class:"mr-2"},gt={key:1,class:"mt-3"},Ht={__name:"calificacion",setup(yt){const c=l([{id:0,nombre:"Simulacros"}]);l([]);const A=l(null),X=l([]),I=l(1),g=l(!1);l("");const v=l(null),q=l(),u=ce({nombre:"",fecha:"",ubigeo:null}),F=l(null),U=l(null),x=l(null),O=l([]);let b;const B=l("1"),T=l([]),h=l(""),G=t=>{c.value.push({id:t.id,nombre:"/ "+t.nombre}),v.value=t.id};w(U,(t,e)=>{u.ubigeo=t}),w(x,(t,e)=>{clearTimeout(b),b=setTimeout(()=>{j()},500)}),w(h,(t,e)=>{clearTimeout(b),b=setTimeout(()=>{E()},400)});const J=(t,e)=>{U.value=e.key},j=async()=>{C.post("/get-ubigeo",{term:x.value}).then(t=>{O.value=t.data.datos.data}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})},E=async()=>{C.post("/get-sim",{term:h.value}).then(t=>{T.value=t.data.datos.data}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})};E();const W=async()=>{await q.value.validateFields(),await C.post("/simulacro/save-simulacro",{nombre:u.nombre,estado:1,ubigeo:u.ubigeo,anio:"2024",fecha:u.fecha}),g.value=!1,await E()},L=async()=>{try{const t=await C.get("/raiz/ver-contenido-carpeta/"+I.value);X.value=t.data.carpetas,A.value=t.data.carpeta}catch(t){t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)}},Z=async t=>{const e=c.value.indexOf(t);e!==-1?c.value.splice(e+1,c.value.length-e):c.value.push(t),I.value=t.id};w(I,(t,e)=>{L()});const Q=t=>{k.value=!1},ee=()=>{g.value=!1};L();const k=l(!1),P=l(0),Y=l(0),te=t=>{k.value=!0,P.value=t.clientY,Y.value=t.clientX,t.preventDefault()},$=t=>{t==="1"?(g.value=!0,k.value=!1):console.log("2")},oe=[{title:"N°",dataIndex:"nro",width:"40px",align:"center"},{title:"Nombre",dataIndex:"nombre"},{title:"Fecha",dataIndex:"fecha",align:"center"},{title:"Vigente",dataIndex:"estado",align:"center",width:"100px"},{title:"Acciones",dataIndex:"acciones",align:"center",width:"96px"}];return j(),(t,e)=>{const V=ge,H=ye,_=xe,se=be,ae=he,D=ke,ne=we,z=Ce,le=Ie,ie=Ee,re=$e,de=Ve,y=De,ue=ze;return i(),r(N,null,[o(d(pe),{title:"Calificación"}),o(Me,null,{default:a(()=>[s("div",He,[s("div",{class:"p-4",style:{background:"white",width:"100%","min-height":"calc(100vh - 90px)","border-radius":"12px"},onClick:Q,onContextmenu:me(te,["prevent"])},[s("div",Ke,[s("div",Re,[s("div",Ae,[o(d(Oe))]),(i(!0),r(N,null,ve(c.value,n=>(i(),r("div",{key:n.id,onClick:K=>Z(n)},[s("div",Ge,[s("div",Je,S(n.nombre),1)])],8,Xe))),128))])]),c.value.length===1?(i(),r("div",We,[s("div",Ze,[o(V,{value:h.value,"onUpdate:value":e[0]||(e[0]=n=>h.value=n),style:{"max-width":"300px","border-radius":"6px",height:"36px"},placeholder:"Buscar"},{prefix:a(()=>[s("span",Qe,[o(d(Te))])]),_:1},8,["value"])]),(i(),_e(ae,{columns:oe,"data-source":T.value,key:t.id,size:"small",pagination:!1,style:{scale:".7rem"}},{bodyCell:a(({column:n,index:K,record:f})=>[n.dataIndex==="nro"?(i(),r("span",et,S(K+1),1)):m("",!0),n.dataIndex==="nombre"?(i(),r("div",{key:1,style:{width:"100%",cursor:"pointer"},onDblclick:M=>G(f)},[s("span",null,S(f.nombre),1)],40,tt)):m("",!0),n.dataIndex==="estado"?(i(),r("div",ot,[f.estado===1?(i(),r("div",st,[o(H,{color:"cyan"},{default:a(()=>e[12]||(e[12]=[p("Vigente")])),_:1})])):(i(),r("div",at,[o(H,{color:"red"},{default:a(()=>e[13]||(e[13]=[p("No Vigente")])),_:1})]))])):m("",!0),n.dataIndex==="acciones"?(i(),r(N,{key:3},[o(_,{type:"gray",class:"mr-1",style:{color:"#476175"},onClick:M=>t.verFicha(f.id),size:"small"},{icon:a(()=>[o(d(je))]),_:2},1032,["onClick"]),o(_,{onClick:M=>t.abrirEditar(f),class:"mr-1",style:{color:"blue"},size:"small"},{icon:a(()=>[o(d(Le))]),_:2},1032,["onClick"]),o(se,{title:"¿Estas seguro de eliminar?",onConfirm:M=>t.eliminar(f)},{default:a(()=>[o(_,{shape:"",size:"small",style:{color:"crimson"}},{icon:a(()=>[o(d(Pe))]),_:1})]),_:2},1032,["onConfirm"])],64)):m("",!0)]),_:1},8,["data-source"])),k.value?(i(),r("div",{key:0,style:fe([{position:"absolute",border:"solid 1px #d9d9d943","padding-top":"0px","border-radius":"8px",overflow:"hidden"},{top:`${P.value}px`,left:`${Y.value}px`}])},[o(ne,{size:"small",style:{"margin-top":"-4px","margin-bottom":"-4px"}},{default:a(()=>[o(D,{key:"1",class:"selec-menu",onClick:e[1]||(e[1]=n=>$("1"))},{default:a(()=>e[14]||(e[14]=[s("div",{style:{"margin-top":"0px"}}," Nuevo Proceso ",-1)])),_:1}),o(D,{key:"2",class:"selec-menu",onClick:e[2]||(e[2]=n=>$("2"))},{default:a(()=>e[15]||(e[15]=[s("div",{style:{"margin-top":"0px"}}," Subir archivo ",-1)])),_:1}),o(D,{key:"2",class:"selec-menu",onClick:e[3]||(e[3]=n=>$("2"))},{default:a(()=>e[16]||(e[16]=[s("div",{style:{"margin-top":"0px"}}," selees ",-1)])),_:1})]),_:1})],4)):m("",!0),o(de,{visible:g.value,"onUpdate:visible":e[10]||(e[10]=n=>g.value=n),closable:!1,centered:"",style:{},footer:!1},{default:a(()=>[s("div",nt,[s("div",lt,[e[18]||(e[18]=s("div",{class:"flex pt-2"},[s("div",{class:"mt-0",style:{"margin-top":"2px"}},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 22 24",fill:"none",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-folder"},[s("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})])]),s("span",{class:"ml-2",style:{"font-weight":"500",color:"white","font-size":"1rem"}},"Nuevo proceso")],-1)),s("div",null,[s("span",null,[o(_,{onClick:e[4]||(e[4]=n=>ee()),style:{background:"none",border:"none",color:"white","font-size":"1.1rem"}},{default:a(()=>e[17]||(e[17]=[p("x")])),_:1})])])])]),o(re,{ref_key:"formDatos",ref:q,name:"form",model:u,rules:t.formRules},{default:a(()=>[s("div",it,[s("div",rt,[s("div",null,[o(z,{name:"nombre",rules:[{required:!0,message:"Ingresa el nombre del proceso",trigger:"change"}]},{default:a(()=>[e[19]||(e[19]=s("label",null,[p("Nombre"),s("span",{style:{}},"*")],-1)),o(V,{value:u.nombre,"onUpdate:value":e[5]||(e[5]=n=>u.nombre=n),style:{width:"100%","border-radius":"4px",height:"36px"},placeholder:"Nombre del proceso"},{prefix:a(()=>[s("span",dt,[o(d(Be))])]),_:1},8,["value"])]),_:1})]),s("div",ut,[e[20]||(e[20]=s("label",null,[p("Ubicación"),s("span",{style:{color:"red"}},"*")],-1)),o(z,{name:"ubigeo",rules:[{required:!0,message:"Seleccione la ubicación",trigger:["change","blur"]}]},{default:a(()=>[o(le,{value:F.value,"onUpdate:value":e[7]||(e[7]=n=>F.value=n),options:O.value,onSelect:J},{default:a(()=>[o(V,{placeholder:"Procedencia del Colegio",value:x.value,"onUpdate:value":e[6]||(e[6]=n=>x.value=n),style:{"border-radius":"4px",height:"36px"}},{prefix:a(()=>[s("span",ct,[o(d(R))])]),suffix:a(()=>[o(d(Ye))]),_:1},8,["value"])]),_:1},8,["value","options"])]),_:1})]),s("div",pt,[e[21]||(e[21]=s("label",null,[p("Fecha"),s("span",{style:{color:"red"}},"*")],-1)),o(z,{name:"fecha",rules:[{required:!0,message:"Ingresa tu fecha de nacimiento",trigger:"change"}]},{default:a(()=>[o(ie,{style:{width:"100%","border-radius":"4px",height:"36px"},placeholder:"Seleccionar fec. nacimiento",value:u.fecha,"onUpdate:value":e[8]||(e[8]=n=>u.fecha=n),format:"DD/MM/YYYY"},{prefix:a(()=>[s("span",mt,[o(d(R))])]),_:1},8,["value"])]),_:1})])])])]),_:1},8,["model","rules"]),s("div",vt,[s("div",_t,[s("div",ft,[o(_,{style:{border:"1px solid #476175",color:"#476175",width:"100px",height:"36px","border-radius":"4px"}},{default:a(()=>e[22]||(e[22]=[p(" Cancelar ")])),_:1})]),s("div",null,[o(_,{onClick:e[9]||(e[9]=n=>W()),style:{background:"#476175",border:"none",color:"white",width:"100px",height:"36px","border-radius":"4px"}},{default:a(()=>e[23]||(e[23]=[p(" _Guardar ")])),_:1})])])])]),_:1},8,["visible"])])):m("",!0),c.value.length===2?(i(),r("div",gt,[o(ue,{activeKey:B.value,"onUpdate:activeKey":e[11]||(e[11]=n=>B.value=n),type:"card","tab-position":"top"},{default:a(()=>[o(y,{key:"1",tab:"Participantes",style:{margin:"-10px"}},{default:a(()=>[s("div",null,[o(Fe,{proceso:v.value},null,8,["proceso"])])]),_:1}),o(y,{key:"2",tab:"Ides",style:{margin:"-10px"}},{default:a(()=>[s("div",null,[o(Ne,{proceso:v.value},null,8,["proceso"])])]),_:1}),o(y,{key:"3",tab:"Respuestas",style:{margin:"-10px"}},{default:a(()=>[s("div",null,[o(Se,{proceso:v.value},null,8,["proceso"])])]),_:1}),o(y,{key:"4",tab:"Res correctas"},{default:a(()=>[s("div",null,[o(qe,{proceso:v.value},null,8,["proceso"])])]),_:1}),o(y,{key:"5",tab:"Calificación"},{default:a(()=>[o(Ue,{proceso:v.value},null,8,["proceso"])]),_:1})]),_:1},8,["activeKey"])])):m("",!0)],32)])]),_:1})],64)}}};export{Ht as default};
