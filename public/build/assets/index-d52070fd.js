import{r as d,e as F,q as H,f as i,o as s,c as w,a as o,u as p,w as l,d as y,F as I,l as V,Z as J,b as v,S as Q,s as x,g as r,E as W,D as X,v as Y,n as ee}from"./app-8a1399c6.js";import{A as ae}from"./AuthenticatedLayout-4005fff0.js";import{F as oe}from"./FormOutlined-1f4b6f85.js";import"./DropdownLink-d8f9e531.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logotiny-c4b525af.js";import"./TeamOutlined-eba1edc2.js";const te={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},le={class:"mr-3"},ne={class:"flex justify-between",style:{position:"relative"}},ie={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},ge={__name:"index",setup(se){const k=d(""),f=d([]);d([]);const c=d(!1),C=d(1),N=d(null),a=d({id:null,codigo:"",nombre:"",postulante:"",tipo:"",observacion:""}),B=()=>{c.value=!0};F(k,(t,e)=>{b()}),F(c,(t,e)=>{c.value==!1&&a.value.id!=null&&(a.value.id=null,a.value.codigo=null,a.value.nombre=null,a.value.postulante=null,a.value.tipo=null,a.value.observacion=null)}),F(C,(t,e)=>{b()});const S={labelCol:{span:7},wrapperCol:{span:14}},z={nombre:[{required:!0,validator:async(t,e)=>e===""?Promise.reject("Ingrese el nombre del documento"):Promise.resolve(),trigger:"change"}],codigo:[{required:!0,validator:async(t,e)=>e===""?Promise.reject("Ingrese el codigo del documento"):Promise.resolve(),trigger:"change"}]},D=t=>{c.value=!0,a.value.id=t.id,a.value.codigo=t.codigo,a.value.nombre=t.nombre,a.value.postulante=t.postulante,a.value.tipo=t.tipo,a.value.observacion=t.observacion},b=async(t="")=>{let e=await V.post("get-documentos-admin?page="+C.value,{term:k.value});f.value=e.data.datos.data,N.value=e.data.datos.total},R=()=>{let t={id:a.value.id,codigo:a.value.codigo,nombre:a.value.nombre,observacion:a.value.observacion};V.post("save-documento",t).then(e=>{b(),U("success",e.data.titulo,e.data.mensaje),c.value=!1,a.value.codigo=null,a.value.id=null,a.value.nombre=""})},$=t=>{V.get("eliminar-modalidad/"+t.id).then(e=>{b(),U("warning",e.data.titulo,e.data.mensaje)})},q=[{title:"ID",dataIndex:"id"},{title:"Codigo",dataIndex:"codigo"},{title:"Nombre",dataIndex:"nombre"},{title:"Tipo",dataIndex:"tipo"},{title:"DNI P.",dataIndex:"dni"},{title:"Postulante",dataIndex:"postulante"},{title:"Estado",dataIndex:"estado"},{title:"Verificado",dataIndex:"verificado",align:"center"},{title:"Observación",dataIndex:"observacion"},{title:"Acciones",dataIndex:"acciones"}],P=d([]),A=t=>{console.log("selectedRowKeys changed: ",t),P.value=t};H(()=>({selectedRowKeys:p(P),onChange:A,hideDefaultSelections:!0}));const U=(t,e,u)=>{ee[t]({message:e,description:u})};return b(),(t,e)=>{const u=i("a-button"),m=i("a-input"),T=i("row"),h=i("a-tag"),E=i("a-divider"),K=i("a-popconfirm"),G=i("a-table"),L=i("a-pagination"),g=i("a-form-item"),M=i("a-form"),Z=i("a-modal");return s(),w(I,null,[o(p(J),{title:"Documentos"}),o(ae,null,{default:l(()=>[y("div",te,[o(T,{class:"flex justify-between mb-4"},{default:l(()=>[y("div",le,[o(u,{type:"primary",disabled:"",onClick:B},{default:l(()=>[v("Nuevo")]),_:1})]),y("div",ne,[o(m,{type:"text",placeholder:"Buscar",value:k.value,"onUpdate:value":e[0]||(e[0]=n=>k.value=n),style:{"max-width":"300px","padding-left":"30px"}},null,8,["value"]),y("div",ie,[o(p(Q))])])]),_:1}),o(G,{columns:q,"data-source":f.value,pagination:!1,size:"small"},{bodyCell:l(({column:n,index:j,record:_})=>[n.dataIndex==="estado"?(s(),w(I,{key:0},[_.estado===0?(s(),x(h,{key:0,color:"red"},{default:l(()=>[v("false")]),_:1})):r("",!0),_.estado===1?(s(),x(h,{key:1,color:"blue"},{default:l(()=>[v("En uso")]),_:1})):r("",!0)],64)):r("",!0),n.dataIndex==="verificado"?(s(),w(I,{key:1},[_.verificado===0?(s(),x(h,{key:0,color:"error"},{default:l(()=>[v("no verificado")]),_:1})):r("",!0),_.verificado===1?(s(),x(h,{key:1,color:"success"},{default:l(()=>[v("verificado")]),_:1})):r("",!0)],64)):r("",!0),n.dataIndex==="acciones"?(s(),w(I,{key:2},[o(u,{type:"success",disabled:"",style:{background:"green",color:"white"},onClick:O=>D(f.value[j]),size:"small"},{icon:l(()=>[o(p(W))]),_:2},1032,["onClick"]),o(E,{type:"vertical"}),o(u,{type:"primary",onClick:O=>D(_),size:"small"},{icon:l(()=>[o(p(oe))]),_:2},1032,["onClick"]),o(E,{type:"vertical"}),f.value.length?(s(),x(K,{key:0,title:"¿Estas seguro de eliminar?",onConfirm:O=>$(f.value[j])},{default:l(()=>[o(u,{type:"danger",shape:"",size:"small"},{icon:l(()=>[o(p(X))]),_:1})]),_:2},1032,["onConfirm"])):r("",!0)],64)):r("",!0)]),_:1},8,["data-source"]),o(L,{current:C.value,"onUpdate:current":e[1]||(e[1]=n=>C.value=n),total:N.value,"show-less-items":""},null,8,["current","total"])])]),_:1}),y("div",null,[o(Z,{visible:c.value,"onUpdate:visible":e[8]||(e[8]=n=>c.value=n),title:"Nuevo Documento",style:{"margin-top":"-40px"}},{footer:l(()=>[o(u,{style:{"margin-left":"10px"},onClick:t.resetForm},{default:l(()=>[v("Cancelar")]),_:1},8,["onClick"]),o(u,{type:"primary",onClick:e[7]||(e[7]=n=>R())},{default:l(()=>[v("Guardar")]),_:1})]),default:l(()=>[o(M,Y({ref:"formRef",name:"custom-validation",model:t.formState,rules:z},S,{onFinish:t.handleFinish,onValidate:t.handleValidate,onFinishFailed:t.handleFinishFailed}),{default:l(()=>[o(g,{"has-feedback":"",label:"Codigo",name:"codigo"},{default:l(()=>[o(m,{type:"text",value:a.value.codigo,"onUpdate:value":e[2]||(e[2]=n=>a.value.codigo=n),autocomplete:"off"},null,8,["value"])]),_:1}),o(g,{"has-feedback":"",label:"Nombre",name:"nombre"},{default:l(()=>[o(m,{type:"text",value:a.value.nombre,"onUpdate:value":e[3]||(e[3]=n=>a.value.nombre=n),autocomplete:"off"},null,8,["value"])]),_:1}),o(g,{"has-feedback":"",label:"Postulante",name:"postulante"},{default:l(()=>[o(m,{disabled:"",type:"text",value:a.value.postulante,"onUpdate:value":e[4]||(e[4]=n=>a.value.postulante=n),autocomplete:"off"},null,8,["value"])]),_:1}),o(g,{"has-feedback":"",label:"Tipo",name:"tipo"},{default:l(()=>[o(m,{disabled:"",type:"text",value:a.value.tipo,"onUpdate:value":e[5]||(e[5]=n=>a.value.tipo=n),autocomplete:"off"},null,8,["value"])]),_:1}),o(g,{"has-feedback":"",label:"Observacion",name:"nombre"},{default:l(()=>[o(m,{type:"text",value:a.value.observacion,"onUpdate:value":e[6]||(e[6]=n=>a.value.observacion=n),autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},16,["model","onFinish","onValidate","onFinishFailed"])]),_:1},8,["visible"])])],64)}}};export{ge as default};
