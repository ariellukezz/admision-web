import{r as n,e as h,C as T,D as Z,o as r,c,a as t,u as p,w as d,F as N,y as w,Z as q,d as s,b as C,t as J,f as _,n as V,j as Q,I as W,_ as X,B as Y,h as ee,i as ae}from"./app-23a0f657.js";import{_ as te}from"./AuthenticatedLayout-5b5b1b86.js";import{C as oe}from"./CheckOutlined-668bc4d9.js";import{E as ne}from"./EditOutlined-c603f007.js";import{S as se}from"./SearchOutlined-700c6054.js";import"./logotiny-c4b525af.js";import"./Header-aa17d0e2.js";import"./AntdIcon-240dfb93.js";import"./DownOutlined-61ecf437.js";/* empty css                                                            */const le={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",style:{height:"calc(100vh - 98px)"}},ie={class:"mr-3"},de={class:"flex justify-between",style:{position:"relative"}},re={style:{}},ce={key:0,class:"editable-cell"},ue={key:0,class:"editable-cell-input-wrapper"},ve={key:1,class:"editable-cell-text-wrapper"},pe={key:1,class:"flex",style:{"justify-content":"center"}},_e={key:0},me={key:1},ge={class:"flex",style:{"justify-content":"flex-end"}},je={__name:"index",setup(fe){n(!1);const m=n(""),g=n(1),I=n(null),z=n([]),f=n(1),x=n(!1),P=n(""),y=n([]),o=n({id:null,codigo:"",nombre:"",vacantes:"",estado:!0});h(m,(e,a)=>{v()}),h(P,(e,a)=>{getDepartamentos()}),h(x,(e,a)=>{x.value==!1&&o.value.id!=null&&(o.value.id=null,o.value.codigo=null,o.value.nombre=null,o.value.estado=!0)}),h(g,(e,a)=>{v()});const $=e=>{x.value=!0,o.value.id=e.id,o.value.codigo=e.codigo,o.value.nombre=e.nombre,o.value.nivel_academico=e.nivel_academico,o.value.tipo_autorizacion=e.tipo_autorizacion,o.value.id_facultad=e.id_fac,e.estado==1?o.value.estado=!0:o.value.estado=!1,o.value.area=e.area},O=async()=>{let e=await w.get("get-modalidades-activas");z.value=e.data.datos},v=async(e="")=>{let a=await w.post("get-vacantes-admin?page="+g.value,{term:m.value});y.value=a.data.datos.data,I.value=a.data.datos.total},R=e=>{w.post("delete-vacante",{id_vacante:e.id_vacante}).then(a=>{v(),A("warning","PROGRAMA ELIMINADO",a.data.mensaje)})},S=[{title:"Cod",dataIndex:"codigo_sunedu",width:"60px",align:"center",responsive:["md"]},{title:"Nombre",dataIndex:"programa"},{title:"Vacantes",dataIndex:"vacantes",width:"160px",align:"center",responsive:["md"]},{title:"Estado",dataIndex:"estado",align:"center",width:"60px",responsive:["md"]},{title:"",dataIndex:"acciones",width:"70px",align:"center"}],E=n([]),U=e=>{console.log("selectedRowKeys changed: ",e),E.value=e};T(()=>({selectedRowKeys:p(E),onChange:U,hideDefaultSelections:!0}));const A=(e,a,b)=>{V[e]({message:a,description:b})};O(),v();const k=n({}),F=e=>{k.value[e]={...y.value.find(a=>a.key===e)}},H=n({id_modalidad:f.value,id_programa:null,estado:null,vacantes:null}),j=e=>{H.value=e,delete k.value[e.id_programa],w.post("save-numero-vacantes",{id_vacante:e.id_vacante,id_programa:e.id_programa,vacantes:e.vacantes,id_modalidad:f.value}).then(()=>{V.success({message:"Registro actualizado"}),v()}).catch(()=>{V.error({message:"Error al actualizar"})})};return(e,a)=>{const b=Q,B=W,K=Z("row"),D=X,M=Y,L=ee,G=ae;return r(),c(N,null,[t(p(q),{title:"Procesos"}),t(te,null,{default:d(()=>[s("div",le,[t(K,{class:"flex justify-between mb-4"},{default:d(()=>[s("div",ie,[t(b,{ref:"select",value:f.value,"onUpdate:value":a[0]||(a[0]=i=>f.value=i),options:z.value,onFocus:e.focus,onChange:e.handleChange},null,8,["value","options","onFocus","onChange"])]),s("div",de,[t(B,{type:"text",placeholder:"Buscar",value:m.value,"onUpdate:value":a[1]||(a[1]=i=>m.value=i),style:{"max-width":"300px"}},{prefix:d(()=>[t(p(se))]),_:1},8,["value"])])]),_:1}),s("div",re,[t(L,{columns:S,"data-source":y.value,pagination:!1,size:"small",scroll:{x:380,y:"calc(100vh - 240px)"}},{bodyCell:d(({column:i,index:he,record:l})=>[i.dataIndex==="vacantes"?(r(),c("div",ce,[k.value[l.id_programa]?(r(),c("div",ue,[t(B,{value:l.vacantes,"onUpdate:value":u=>l.vacantes=u,onPressEnter:u=>j(l)},{prefix:d(()=>a[3]||(a[3]=[s("div",null,null,-1)])),_:2},1032,["value","onUpdate:value","onPressEnter"]),t(p(oe),{class:"editable-cell-icon-check",onClick:u=>j(l)},null,8,["onClick"])])):(r(),c("div",ve,[C(J(l.vacantes||" ")+" ",1),t(p(ne),{class:"editable-cell-icon",onClick:u=>F(l.id_programa)},null,8,["onClick"])]))])):_("",!0),i.dataIndex==="estado"?(r(),c("div",pe,[l.estado==1?(r(),c("div",_e,[t(D,{color:"blue"},{default:d(()=>a[4]||(a[4]=[C("Activo")])),_:1})])):_("",!0),l.estado==0?(r(),c("div",me,[t(D,{color:"red"},{default:d(()=>a[5]||(a[5]=[C("Inactivo")])),_:1})])):_("",!0)])):_("",!0),i.dataIndex==="acciones"?(r(),c(N,{key:2},[t(M,{type:"",onClick:u=>$(l),style:{"border-radius":"4px","margin-right":"4px",background:"#e5e5e5",color:"#1890ff"},size:"small"},{icon:d(()=>a[6]||(a[6]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit"},[s("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])),_:2},1032,["onClick"]),t(M,{type:"",class:"",onClick:u=>R(l),style:{"border-radius":"4px",background:"#e5e5e5",color:"red"},shape:"",size:"small"},{icon:d(()=>a[7]||(a[7]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[s("polyline",{points:"3 6 5 6 21 6"}),s("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])),_:2},1032,["onClick"])],64)):_("",!0)]),_:1},8,["data-source"])]),s("div",ge,[t(G,{current:g.value,"onUpdate:current":a[2]||(a[2]=i=>g.value=i),simple:"","page-size":"50",total:I.value},null,8,["current","total"])])])]),_:1})],64)}}};export{je as default};
