import{r as d,J as _e,e as _,D as ce,o as T,c as V,a as l,u as f,w as o,F as W,y as b,Z as be,d as s,b as u,f as xe,n as Ae,B as ye,I as Ie,K as Ee,L as De,k as Ce,l as Se,S as Re,j as we,m as Ne,H as Te,h as Ve,i as Ue,p as ke,q as Pe,M as Be}from"./app-e08cab8d.js";import{L as Le}from"./LayoutSimulacro-c0edd4ab.js";import{S as Ge}from"./SearchOutlined-1baf635a.js";import{D as U}from"./DownOutlined-6ca53b8d.js";import{E as Oe}from"./EyeOutlined-e8967a19.js";import{F as je}from"./FormOutlined-6d429376.js";import{D as qe}from"./DeleteOutlined-3875e8ef.js";import"./DropdownLink-e2be2332.js";import"./logotiny-c4b525af.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./TopMenu-8c4eba16.js";import"./AntdIcon-57e0f234.js";const ze={class:"mb-4",style:{width:"100%"}},Fe={class:"p-6 mb-4",style:{background:"#ffffff","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},$e={class:"flex justify-between"},Je={class:"flex justify-between",style:{position:"relative"}},Ke={class:"mr-2",style:{position:"absolute",left:"8px",top:"3px"}},Me={style:{"margin-bottom":"-20px"}},Xe={style:{background:"white","border-radius":"12px",overflow:"hidden","box-shadow":"rgba(0, 0, 0, 0.1) 0px 20px 25px -5px, rgba(0, 0, 0, 0.03) 0px 10px 10px -5px"}},Ze={class:"flex justify-between mb-6 mt-2 pr-4"},He={clas:"",style:{scale:"0.9"}},Qe={style:{display:"flex"}},We={key:0,style:{"font-weight":"bold","font-size":"1.1rem"}},Ye={key:1,style:{"font-weight":"bold","font-size":"1.1rem"}},he={class:"flex justify-center"},el={class:"flex justify-end"},gl={__name:"index",setup(ll){const O=d([]),A=d(""),y=d(1),j=d(null),I=d(10),c=d(!1),k=d(null),E=d(null),P=d([]),D=d(null),x=d(!1),q=d(),C=d(),S=d(),z=d(),B=d(),L=d(),F=d(),G=d(),$=d(),Y=t=>{n.cod_modular=t.target.value.replace(/\D/g,"")},n=_e({cod_modular:"",nombre:"",cod_local:"",nivel:"",gestion:null,ubigeo:"",direccion:"",observacion:""}),J=d(null),h=async()=>{x.value=!0,setTimeout(()=>{console.log("Este código se ejecutará después de 2 segundos")},1500);try{const t=await J.value.validateFields(),e=await b.post("save",n);e.status===202?(console.log(e.data.errors),x.value=!1):(se(),c.value=!1,ne("success",e.data.titulo,e.data.mensaje),x.value=!1,v())}catch(t){console.error(t),x.value=!1}},v=async()=>{b.post("get-colegios?page="+y.value,{term:A.value,paginashoja:I.value,dep:S.value,ges:D.value,prov:L.value,dist:$.value}).then(t=>{O.value=t.data.datos.data,j.value=t.data.datos.total}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})},K=async()=>{b.post("/get-ubigeo",{term:E.value}).then(t=>{P.value=t.data.datos.data,console.log("Datos recibidos:",P)}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})},M=async()=>{let t=await b.post("/get-departamentos-codigo",{term:C.value});q.value=t.data.datos.data},X=async()=>{let t=await b.post("/get-provincias-codigo?page=",{departamento:S.value});z.value=t.data.datos},Z=async t=>{let e=await b.post("/get-distritos-codigo?page=",{departamento:S.value,provincia:L.value});F.value=e.data.datos};_(y,(t,e)=>{v()}),_(I,(t,e)=>{v()}),_(A,(t,e)=>{v()}),_(E,(t,e)=>{t.length>=3&&K()}),_(C,(t,e)=>{t.length>=3&&M()}),_(B,(t,e)=>{t.length>=3&&X()}),_(G,(t,e)=>{t.length>=3&&Z()}),_(D,(t,e)=>{t.length>=3&&v()});const ee=(t,e)=>{n.ubigeo=e.key},le=(t,e)=>{S.value=e.key,v(),X()},oe=(t,e)=>{L.value=e.key,v(),Z()},te=(t,e)=>{$.value=e.key,v()};M(),v(),K();const ae=t=>{c.value=!0,n.id=t.id,n.cod_modular=t.cod_modular,n.nombre=t.nombre,n.cod_local=t.cod_local,n.gestion=t.gestion,n.nivel=t.nivel,n.ubigeo=t.ubigeo,k.value=t.lugar,n.direccion=t.direccion,n.observacion=t.observacion},se=()=>{for(const t in n)n[t]=null},ne=(t,e,g)=>{Ae[t]({message:e,description:g})},ue=d([{title:"Cod_Mod",dataIndex:"cod_modular"},{title:"Nombre del Colegio",dataIndex:"nombre",responsive:["xs","sm","md","lg"]},{title:"Gestión",dataIndex:"gestion",responsive:["md"]},{title:"Ubicación",dataIndex:"lugar",responsive:["lg"]},{title:"Dirección",dataIndex:"direccion",responsive:["lg"]},{title:"Acciones",dataIndex:"acciones",width:"120px",align:"center"}]);return(t,e)=>{const g=ye,m=Ie,R=Ee,w=De,p=Ce,r=Se,i=Re,N=we,H=Ne,de=Te,ie=Ve,re=Ue,pe=ke,ve=Pe,me=ce("row"),fe=Be;return T(),V(W,null,[l(f(be),{title:"Colegios"}),l(Le,null,{default:o(()=>[s("div",ze,[s("div",Fe,[s("div",$e,[s("div",null,[l(g,{type:"primary",onClick:e[0]||(e[0]=a=>c.value=!0),style:{"border-radius":"6px",background:"#476175",border:"none"}},{default:o(()=>e[20]||(e[20]=[u("Nuevo")])),_:1})]),s("div",Je,[l(m,{type:"text",placeholder:"Buscar",value:A.value,"onUpdate:value":e[1]||(e[1]=a=>A.value=a),style:{"max-width":"300px","padding-left":"30px","border-radius":"6px"}},null,8,["value"]),s("div",Ke,[l(f(Ge))])])]),s("div",Me,[l(H,{gutter:[16,8],class:"mt-4"},{default:o(()=>[l(r,{xs:24,sm:12,md:12,lg:6},{default:o(()=>[e[21]||(e[21]=s("label",null,"Departamento",-1)),l(p,null,{default:o(()=>[l(w,{options:q.value,onSelect:le},{default:o(()=>[l(m,{placeholder:"Seleccione un departamento",value:C.value,"onUpdate:value":e[2]||(e[2]=a=>C.value=a)},{suffix:o(()=>[l(R,{title:"Extra information"},{default:o(()=>[l(f(U))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:6},{default:o(()=>[e[22]||(e[22]=s("label",null,"Provincia",-1)),l(p,null,{default:o(()=>[l(w,{options:z.value,onSelect:oe},{default:o(()=>[l(m,{placeholder:"Seleccione un departamento",value:B.value,"onUpdate:value":e[3]||(e[3]=a=>B.value=a)},{suffix:o(()=>[l(R,{title:"Extra information"},{default:o(()=>[l(f(U))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:6},{default:o(()=>[e[23]||(e[23]=s("label",null,"Distrito",-1)),l(p,null,{default:o(()=>[l(w,{options:F.value,onSelect:te},{default:o(()=>[l(m,{placeholder:"Seleccione un departamento",value:G.value,"onUpdate:value":e[4]||(e[4]=a=>G.value=a)},{suffix:o(()=>[l(R,{title:"Extra information"},{default:o(()=>[l(f(U))]),_:1})]),_:1},8,["value"])]),_:1},8,["options"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:6},{default:o(()=>[e[29]||(e[29]=s("label",null,"Gestión",-1)),l(p,{style:{"border-radius":"none",overflow:"hidden"}},{default:o(()=>[l(N,{value:D.value,"onUpdate:value":e[5]||(e[5]=a=>D.value=a),placeholder:"Seleccione la gestión",style:{"border-radius":"10px !important"}},{default:o(()=>[l(i,{value:null},{default:o(()=>e[24]||(e[24]=[u("TODAS")])),_:1}),l(i,{value:"PÚBLICA DE GESTIÓN DIRECTA"},{default:o(()=>e[25]||(e[25]=[u("PÚBLICA DE GESTIÓN DIRECTA")])),_:1}),l(i,{value:"PRIVADA"},{default:o(()=>e[26]||(e[26]=[u("PRIVADA")])),_:1}),l(i,{value:"PÚBLICA DE GESTIÓN PRIVADA"},{default:o(()=>e[27]||(e[27]=[u("PÚBLICA DE GESTIÓN PRIVADA")])),_:1}),l(i,{value:"EXTRANJERO"},{default:o(()=>e[28]||(e[28]=[u("EXTRANJERA")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})])]),s("div",Xe,[s("div",null,[l(ie,{dataSource:O.value,size:"",columns:ue.value,pagination:!1},{bodyCell:o(({column:a,index:ol,record:Q})=>[a.dataIndex==="acciones"?(T(),V(W,{key:0},[l(g,{type:"success",class:"mr-1",style:{color:"#476175"},size:"small",disabled:""},{icon:o(()=>[l(f(Oe))]),_:1}),l(g,{class:"mr-1",onClick:ge=>ae(Q),style:{color:"blue"},size:"small"},{icon:o(()=>[l(f(je))]),_:2},1032,["onClick"]),l(de,{title:"¿Estas seguro de eliminar?",onConfirm:ge=>t.eliminar(Q),disabled:""},{default:o(()=>[l(g,{size:"small",style:{color:"crimson"},disabled:""},{icon:o(()=>[l(f(qe),{disabled:""})]),_:1})]),_:2},1032,["onConfirm"])],64)):xe("",!0)]),_:1},8,["dataSource","columns"])]),s("div",Ze,[s("div",null,[l(re,{current:y.value,"onUpdate:current":e[6]||(e[6]=a=>y.value=a),simple:"",total:j.value,"show-less-items":""},null,8,["current","total"])]),s("div",He,[l(N,{value:I.value,"onUpdate:value":e[7]||(e[7]=a=>I.value=a),style:{width:"90px"}},{default:o(()=>[l(i,{value:10},{default:o(()=>e[30]||(e[30]=[u("10 Reg.")])),_:1}),l(i,{value:20},{default:o(()=>e[31]||(e[31]=[u("20 Reg.")])),_:1}),l(i,{value:50},{default:o(()=>e[32]||(e[32]=[u("50 Reg.")])),_:1}),l(i,{value:100},{default:o(()=>e[33]||(e[33]=[u("100 Reg.")])),_:1})]),_:1},8,["value"])])])])]),l(fe,{visible:c.value,"onUpdate:visible":e[19]||(e[19]=a=>c.value=a),footer:!1,centered:"",style:{width:"100%","max-width":"900px"}},{default:o(()=>[s("div",Qe,[n.id===null?(T(),V("span",We,"Nuevo Colegio")):(T(),V("span",Ye,"Editar Colegio"))]),s("div",he,[l(me,{style:{display:"flex","justify-content":"center"}},{default:o(()=>[l(r,{span:24},{default:o(()=>[l(ve,{ref_key:"formDatos",ref:J,name:"form",model:n,rules:t.formRules},{default:o(()=>[l(H,{gutter:16,class:"mt-3"},{default:o(()=>[l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[34]||(e[34]=s("label",null,"Cod. Modular",-1)),l(p,{name:"cod_modular",rules:[{required:!0,message:"Ingrese el cod modular"},{min:7,message:"Debe tener 7 digitos",trigger:"blur"}]},{default:o(()=>[l(m,{value:n.cod_modular,"onUpdate:value":e[8]||(e[8]=a=>n.cod_modular=a),onInput:Y,maxlength:7},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:16},{default:o(()=>[e[35]||(e[35]=s("label",null,[u("Nombre del colegio"),s("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"nombre",rules:[{required:!0,message:"Ingrese el nombre del colegio"}]},{default:o(()=>[l(m,{value:n.nombre,"onUpdate:value":e[9]||(e[9]=a=>n.nombre=a)},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[36]||(e[36]=s("label",null,[u("Cod de local"),s("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"cod_local",rules:[{required:!0,message:"Ingrese el codigo del local"}]},{default:o(()=>[l(m,{value:n.cod_local,"onUpdate:value":e[10]||(e[10]=a=>n.cod_local=a)},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[41]||(e[41]=s("label",null,[u("Nivel"),s("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"nivel",rules:[{required:!0,message:"Seleccione el nivel"}]},{default:o(()=>[l(N,{value:n.nivel,"onUpdate:value":e[11]||(e[11]=a=>n.nivel=a),style:{width:"100%"}},{default:o(()=>[l(i,{value:"SECUNDARIA"},{default:o(()=>e[37]||(e[37]=[u("SECUNDARIA")])),_:1}),l(i,{value:"BASICA ALTERNATIVA"},{default:o(()=>e[38]||(e[38]=[u("BASICA ALTERNATIVA")])),_:1}),l(i,{value:"BASICA ALTERNATIVA AVANZADO"},{default:o(()=>e[39]||(e[39]=[u("BASICA ALTERNATIVA AVANZADO")])),_:1}),l(i,{value:"BÁSICA ALTERNATIVA SECUNDARIA"},{default:o(()=>e[40]||(e[40]=[u("BÁSICA ALTERNATIVA SECUNDARIA")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:8,lg:8},{default:o(()=>[e[46]||(e[46]=s("label",null,[u("Gestión"),s("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"gestion",rules:[{required:!0,message:"Selecciona la gestión"}]},{default:o(()=>[l(N,{value:n.gestion,"onUpdate:value":e[12]||(e[12]=a=>n.gestion=a),style:{width:"100%"}},{default:o(()=>[l(i,{value:"PÚBLICA DE GESTIÓN DIRECTA"},{default:o(()=>e[42]||(e[42]=[u("PÚBLICA DE GESTIÓN DIRECTA")])),_:1}),l(i,{value:"PRIVADA"},{default:o(()=>e[43]||(e[43]=[u("PRIVADA")])),_:1}),l(i,{value:"PÚBLICA DE GESTIÓN PRIVADA"},{default:o(()=>e[44]||(e[44]=[u("PÚBLICA DE GESTIÓN PRIVADA")])),_:1}),l(i,{value:"EXTRANJERO"},{default:o(()=>e[45]||(e[45]=[u("EXTRANJERA")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:12},{default:o(()=>[e[47]||(e[47]=s("label",null,[u("Ubicación: Dep/Prov/Dist "),s("span",{style:{color:"red"}},"*")],-1)),l(p,{name:"ubigeo"},{default:o(()=>[l(w,{value:k.value,"onUpdate:value":e[14]||(e[14]=a=>k.value=a),options:P.value,onSelect:ee},{default:o(()=>[l(m,{placeholder:"Lugar",value:E.value,"onUpdate:value":e[13]||(e[13]=a=>E.value=a),onKeypress:t.handleKeyPress},{suffix:o(()=>[l(R,{title:"Extra information"},{default:o(()=>[l(f(U))]),_:1})]),_:1},8,["value","onKeypress"])]),_:1},8,["value","options"])]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:12},{default:o(()=>[e[48]||(e[48]=s("label",null,"Dirección",-1)),l(p,{name:"direccion"},{default:o(()=>[l(m,{value:n.direccion,"onUpdate:value":e[15]||(e[15]=a=>n.direccion=a)},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:24},{default:o(()=>[e[49]||(e[49]=s("label",null,"Observación",-1)),l(p,{name:"observacion"},{default:o(()=>[l(pe,{value:n.observacion,"onUpdate:value":e[16]||(e[16]=a=>n.observacion=a)},null,8,["value"])]),_:1})]),_:1})]),_:1}),s("div",el,[s("div",null,[l(g,{type:"primary",class:"mr-2",onClick:e[17]||(e[17]=a=>c.value=!1),style:{"border-radius":"6px",background:"none",color:"#476175",border:"1px solid #476175"}},{default:o(()=>e[50]||(e[50]=[u("Cancelar")])),_:1}),l(g,{type:"primary",onClick:e[18]||(e[18]=a=>h()),style:{"border-radius":"6px",background:"#476175",border:"none"},loading:x.value},{default:o(()=>e[51]||(e[51]=[u("Guardar")])),_:1},8,["loading"])])])]),_:1},8,["model","rules"])]),_:1})]),_:1})])]),_:1},8,["visible"])]),_:1})],64)}}};export{gl as default};
